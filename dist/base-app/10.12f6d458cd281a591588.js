(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6rEe":function(e,t,n){"use strict";n.r(t),n.d(t,"ClinicsModule",function(){return Ea});var i=n("ofXK"),c=n("3Pt+"),s=n("tyNb"),a=n("fXoL"),o=n("sHDf"),r=n("CmI4"),l=n("5eHb"),d=n("sYmb"),b=n("+tZr"),u=n("uYM5");function h(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                            "),a.Qb(2,"span",10),a.Lb(3,"i",28),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                        "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isOrgMasterSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/organizationMaster/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"OrganizationStructure"))}}function p(e,t){if(1&e&&(a.Qb(0,"a",29),a.Fc(1,"\n                            "),a.Qb(2,"span",10),a.Lb(3,"i",30),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                        "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isPermissionsSelected?"selectednavbaritem active":""),a.yb(5),a.Gc(a.bc(6,4,"AccessRights"))}}function g(e,t){if(1&e&&(a.Qb(0,"li"),a.Fc(1,"\n                "),a.Qb(2,"a",15),a.Fc(3,"\n                    "),a.Qb(4,"span",10),a.Lb(5,"i",31),a.Pb(),a.Qb(6,"span",12),a.Fc(7),a.ac(8,"translate"),a.Pb(),a.Fc(9,"\n                    "),a.Lb(10,"span",17),a.Fc(11,"\n                "),a.Pb(),a.Fc(12,"\n\n                "),a.Qb(13,"ul"),a.Fc(14,"\n                    "),a.Qb(15,"li"),a.Fc(16,"\n                        "),a.Qb(17,"a",13),a.Fc(18,"\n                            "),a.Qb(19,"span",10),a.Lb(20,"i",32),a.Pb(),a.Qb(21,"span",12),a.Fc(22),a.ac(23,"translate"),a.Pb(),a.Fc(24,"\n                        "),a.Pb(),a.Fc(25,"\n                    "),a.Pb(),a.Fc(26,"\n                    "),a.Qb(27,"li"),a.Fc(28,"\n                        "),a.Qb(29,"a",13),a.Fc(30,"\n                            "),a.Qb(31,"span",10),a.Lb(32,"i",33),a.Pb(),a.Qb(33,"span",12),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"li"),a.Fc(40,"\n                        "),a.Qb(41,"a",13),a.Fc(42,"\n                            "),a.Qb(43,"span",10),a.Lb(44,"i",34),a.Pb(),a.Qb(45,"span",12),a.Fc(46),a.ac(47,"translate"),a.Pb(),a.Fc(48,"\n                            "),a.Fc(49,"\n                        "),a.Pb(),a.Fc(50,"\n                    "),a.Pb(),a.Fc(51,"\n                    "),a.Qb(52,"li"),a.Fc(53,"\n                        "),a.Qb(54,"a",13),a.Fc(55,"\n                            "),a.Qb(56,"span",10),a.Lb(57,"i",35),a.Pb(),a.Qb(58,"span",12),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                            "),a.Fc(62,"\n                        "),a.Pb(),a.Fc(63,"\n                    "),a.Pb(),a.Fc(64,"\n                    "),a.Qb(65,"li"),a.Fc(66,"\n                        "),a.Qb(67,"a",13),a.Fc(68,"\n                            "),a.Qb(69,"span",10),a.Lb(70,"i",36),a.Pb(),a.Qb(71,"span",12),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n                        "),a.Pb(),a.Fc(75,"\n                    "),a.Pb(),a.Fc(76,"\n                    "),a.Qb(77,"li"),a.Fc(78,"\n                        "),a.Qb(79,"a",13),a.Fc(80,"\n                            "),a.Qb(81,"span",10),a.Lb(82,"i",36),a.Pb(),a.Qb(83,"span",12),a.Fc(84),a.ac(85,"translate"),a.Pb(),a.Fc(86,"\n                        "),a.Pb(),a.Fc(87,"\n                    "),a.Pb(),a.Fc(88,"\n                    "),a.Qb(89,"li"),a.Fc(90,"\n                        "),a.Qb(91,"a",13),a.Fc(92,"\n                            "),a.Qb(93,"span",10),a.Lb(94,"i",37),a.Pb(),a.Qb(95,"span",12),a.Fc(96),a.ac(97,"translate"),a.Pb(),a.Fc(98,"\n                        "),a.Pb(),a.Fc(99,"\n                    "),a.Pb(),a.Fc(100,"\n\n                "),a.Pb(),a.Fc(101,"\n            "),a.Pb()),2&e){const e=a.Zb();a.yb(7),a.Gc(a.bc(8,36,"Coding")),a.yb(10),a.Ab(e.isDiagnosisSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/diagnosis/",e.clinicId,""),a.yb(5),a.Gc(a.bc(23,38,"Diagnosis")),a.yb(7),a.Ab(e.isDrugsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/drugs/",e.clinicId,""),a.yb(5),a.Gc(a.bc(35,40,"Drugs")),a.yb(7),a.Ab(e.isLaboratoryTestsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/laboratoryTests/",e.clinicId,""),a.yb(5),a.Gc(a.bc(47,42,"LaboratoryTests")),a.yb(8),a.Ab(e.isRadiologyTestsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/radiologyTests/",e.clinicId,""),a.yb(5),a.Gc(a.bc(60,44,"RadiologyTests")),a.yb(8),a.Ab(e.isServicesSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/services/",e.clinicId,""),a.yb(5),a.Gc(a.bc(73,46,"Services")),a.yb(7),a.Ab(e.isServicePackagesSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/servicePackages/",e.clinicId,""),a.yb(5),a.Gc(a.bc(85,48,"ServicePackage")),a.yb(7),a.Ab(e.isProductsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/products/",e.clinicId,""),a.yb(5),a.Gc(a.bc(97,50,"Products"))}}function m(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                            "),a.Qb(2,"span",10),a.Lb(3,"i",23),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                        "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isEMRMasterSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/EMRMaster/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"EMRMaster"))}}function F(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                            "),a.Qb(2,"span",10),a.Lb(3,"i",38),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                        "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isEMRWizardSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/EMRWizard/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"EMRWizard"))}}function v(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                    "),a.Qb(2,"span",10),a.Lb(3,"i",39),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isAppointmentsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/appointments/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"AppointmentMaster"))}}function f(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                    "),a.Qb(2,"span",10),a.Lb(3,"i",40),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isInventorySelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/inventory/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"Inventory"))}}function P(e,t){if(1&e&&(a.Qb(0,"a",13),a.Fc(1,"\n                    "),a.Qb(2,"span",10),a.Lb(3,"i",41),a.Pb(),a.Qb(4,"span",12),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Pb()),2&e){const e=a.Zb();a.Ab(e.isPurchasingSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/purchasing/all/",e.clinicId,""),a.yb(5),a.Gc(a.bc(6,5,"Purchasing"))}}let y=(()=>{class e{constructor(e,t){this.storage=e,this.accountService=t,this.hasID=!1,this.isDashboardSelected=!1,this.isAccountSelected=!1,this.isAddressSelected=!1,this.isEMRMasterSelected=!1,this.isEMRWizardSelected=!1,this.isFeedbackSelected=!1,this.isInventorySelected=!1,this.isPermissionsSelected=!1,this.isPurchasingSelected=!1,this.isNewsSelected=!1,this.isReportsSelected=!1,this.isSettingsSelected=!1,this.isStaffSelected=!1,this.isAppointmentsSelected=!1,this.isOrgMasterSelected=!1,this.isDiagnosisSelected=!1,this.isServicesSelected=!1,this.isServicePackagesSelected=!1,this.isDrugsSelected=!1,this.isLaboratoryTestsSelected=!1,this.isRadiologyTestsSelected=!1,this.isProductsSelected=!1,this.isTemplatesSelected=!1,this.clinicId="",this.key=new b.a,this.hasPurshasingAndInventory=!1,this.hasCoding=!1,this.hasClinicMaster=!1,this.hasAccessRights=!1,this.hasPatientRegistration=!1,this.hasAppointments=!1,this.hasEMR=!1,this.hasBillingAndInsurance=!1}ngOnInit(){let e=this;e.clinicId=this.storage.retrieve("ClinicID"),null!==e.clinicId&&this.getClinicModules(e.clinicId)}ngOnChanges(e){this.clinicId=this.storage.retrieve("ClinicId"),null==this.clinicId&&(this.clinicId="new"),this.hasID="new"!=this.clinicId&&null!=this.clinicId,null!=this.accountService.modulesWrapper._isScalar?this.accountService.modulesWrapper.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.modulesWrapper)}getClinicModules(e){let t=this;this.accountService.getClinicModules(e).subscribe(function(e){t.accountService.modulesWrapper=e,null!=t.accountService.modulesWrapperObserver&&t.accountService.modulesWrapperObserver.next(e),t.handleUserInterfaceViews(t.accountService.modulesWrapper)},function(e){},function(){})}handleUserInterfaceViews(e){let t=this;for(let n of e.modules)n.key==t.key.PurchasingAndInventory&&(t.hasPurshasingAndInventory=!0),n.key==t.key.PatientRegistration&&(t.hasPatientRegistration=!0),n.key==t.key.EMR&&(t.hasEMR=!0),n.key==t.key.Coding&&(t.hasCoding=!0),n.key==t.key.ClinicMaster&&(t.hasClinicMaster=!0),n.key==t.key.BillingAndInsurance&&(t.hasBillingAndInsurance=!0),n.key==t.key.Appointments&&(t.hasAppointments=!0),n.key==t.key.AccessRights&&(t.hasAccessRights=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(r.a),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-tab"]],inputs:{isDashboardSelected:"isDashboardSelected",isAccountSelected:"isAccountSelected",isAddressSelected:"isAddressSelected",isEMRMasterSelected:"isEMRMasterSelected",isEMRWizardSelected:"isEMRWizardSelected",isFeedbackSelected:"isFeedbackSelected",isInventorySelected:"isInventorySelected",isPermissionsSelected:"isPermissionsSelected",isPurchasingSelected:"isPurchasingSelected",isNewsSelected:"isNewsSelected",isReportsSelected:"isReportsSelected",isSettingsSelected:"isSettingsSelected",isStaffSelected:"isStaffSelected",isAppointmentsSelected:"isAppointmentsSelected",isOrgMasterSelected:"isOrgMasterSelected",isDiagnosisSelected:"isDiagnosisSelected",isServicesSelected:"isServicesSelected",isServicePackagesSelected:"isServicePackagesSelected",isDrugsSelected:"isDrugsSelected",isLaboratoryTestsSelected:"isLaboratoryTestsSelected",isRadiologyTestsSelected:"isRadiologyTestsSelected",isProductsSelected:"isProductsSelected",isTemplatesSelected:"isTemplatesSelected"},features:[a.wb],decls:192,vars:69,consts:[[1,"left-aside","desktop-view"],[1,"aside-branding"],["src","assets/images/App-Logo.png","title","Logo",1,"appLogo"],[1,"aside-pin","waves-effect"],[1,"fa","fa-thumb-tack"],["onclick","closeLeftBar();",1,"aside-close","waves-effect"],[1,"fa","fa-times"],[1,"left-navigation"],[1,"list-accordion","padding5"],["routerLink","/clinic/dashboard"],[1,"nav-icon"],[1,"fa","fa-line-chart"],[1,"nav-label"],[3,"routerLink"],[1,"ico-user"],["onclick","applyVerticalMenuStyle(this);"],[1,"fa","fa","fa-cogs"],[1,"menuarrow","glyphicon","glyphicon-chevron-right"],[1,"fa","fa-cogs"],[3,"class","routerLink",4,"ngIf"],["routerLink","/clinic/permissions",3,"class",4,"ngIf"],[1,"ico-info-with-circle"],[4,"ngIf"],[1,"ico-flow-cascade"],[1,"fa","fa-twitch"],[1,"ico-newspaper"],[1,"fa","fa-files-o"],[1,"fa","fa-file-word-o"],[1,"fa","fa-sitemap"],["routerLink","/clinic/permissions"],[1,"fa","fa-unlock-alt"],[1,"fa","fa-barcode"],[1,"fa","fa-stethoscope"],[1,"fa","fa-glass"],[1,"fa","fa-flask"],[1,"fa","fa-bed"],[1,"fa","fa-heartbeat"],[1,"fa","fa-eyedropper"],[1,"fa","fa-sort-amount-asc"],[1,"fa","fa-calendar"],[1,"ico-shop"],[1,"fa","fa-shopping-cart"]],template:function(e,t){1&e&&(a.Fc(0,"\n\n"),a.Qb(1,"div",0),a.Fc(2,"\n    "),a.Qb(3,"div",1),a.Fc(4,"\n        "),a.Qb(5,"a"),a.Fc(6,"\n            "),a.Fc(7,"\n            "),a.Lb(8,"img",2),a.Fc(9,"\n        "),a.Pb(),a.Fc(10,"\n        "),a.Fc(11,"\n        "),a.Qb(12,"span",3),a.Lb(13,"i",4),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"span",5),a.Lb(16,"i",6),a.Pb(),a.Fc(17,"\n    "),a.Pb(),a.Fc(18,"\n    "),a.Qb(19,"div",7),a.Fc(20,"\n        "),a.Qb(21,"ul",8),a.Fc(22,"\n\n            "),a.Qb(23,"li"),a.Fc(24,"\n                "),a.Qb(25,"a",9),a.Fc(26,"\n                    "),a.Qb(27,"span",10),a.Lb(28,"i",11),a.Pb(),a.Qb(29,"span",12),a.Fc(30),a.ac(31,"translate"),a.Pb(),a.Fc(32,"\n                "),a.Pb(),a.Fc(33,"\n            "),a.Pb(),a.Fc(34,"\n            "),a.Qb(35,"li"),a.Fc(36,"\n                "),a.Qb(37,"a",13),a.Fc(38,"\n                    "),a.Qb(39,"span",10),a.Lb(40,"i",14),a.Pb(),a.Qb(41,"span",12),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                "),a.Pb(),a.Fc(45,"\n            "),a.Pb(),a.Fc(46,"\n\n            "),a.Qb(47,"li"),a.Fc(48,"\n                "),a.Qb(49,"a",15),a.Fc(50,"\n                    "),a.Qb(51,"span",10),a.Lb(52,"i",16),a.Pb(),a.Qb(53,"span",12),a.Fc(54),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                    "),a.Lb(57,"span",17),a.Fc(58,"\n                "),a.Pb(),a.Fc(59,"\n\n                "),a.Qb(60,"ul"),a.Fc(61,"\n                    "),a.Qb(62,"li"),a.Fc(63,"\n                        "),a.Qb(64,"a",13),a.Fc(65,"\n                            "),a.Qb(66,"span",10),a.Lb(67,"i",18),a.Pb(),a.Qb(68,"span",12),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n                        "),a.Pb(),a.Fc(72,"\n                    "),a.Pb(),a.Fc(73,"\n                    "),a.Qb(74,"li"),a.Fc(75,"\n                        "),a.Dc(76,h,8,7,"a",19),a.Fc(77,"\n                    "),a.Pb(),a.Fc(78,"\n                    "),a.Qb(79,"li"),a.Fc(80,"\n                        "),a.Dc(81,p,8,6,"a",20),a.Fc(82,"\n                    "),a.Pb(),a.Fc(83,"\n\n                "),a.Pb(),a.Fc(84,"\n            "),a.Pb(),a.Fc(85,"\n\n            "),a.Qb(86,"li"),a.Fc(87,"\n                "),a.Qb(88,"a",13),a.Fc(89,"\n                    "),a.Qb(90,"span",10),a.Lb(91,"i",21),a.Pb(),a.Qb(92,"span",12),a.Fc(93),a.ac(94,"translate"),a.Pb(),a.Fc(95,"\n                "),a.Pb(),a.Fc(96,"\n            "),a.Pb(),a.Fc(97,"\n\n\n\n            "),a.Dc(98,g,102,52,"li",22),a.Fc(99,"\n\n\n            "),a.Qb(100,"li"),a.Fc(101,"\n                "),a.Qb(102,"a",15),a.Fc(103,"\n                    "),a.Qb(104,"span",10),a.Lb(105,"i",23),a.Pb(),a.Qb(106,"span",12),a.Fc(107),a.ac(108,"translate"),a.Pb(),a.Fc(109,"\n                    "),a.Lb(110,"span",17),a.Fc(111,"\n                "),a.Pb(),a.Fc(112,"\n                "),a.Qb(113,"ul"),a.Fc(114,"\n                    "),a.Qb(115,"li"),a.Fc(116,"\n                        "),a.Dc(117,m,8,7,"a",19),a.Fc(118,"\n                    "),a.Pb(),a.Fc(119,"\n                    "),a.Qb(120,"li"),a.Fc(121,"\n                        "),a.Dc(122,F,8,7,"a",19),a.Fc(123,"\n                    "),a.Pb(),a.Fc(124,"\n                "),a.Pb(),a.Fc(125,"\n            "),a.Pb(),a.Fc(126,"\n\n            "),a.Qb(127,"li"),a.Fc(128,"\n                "),a.Dc(129,v,8,7,"a",19),a.Fc(130,"\n            "),a.Pb(),a.Fc(131,"\n            "),a.Qb(132,"li"),a.Fc(133,"\n                "),a.Dc(134,f,8,7,"a",19),a.Fc(135,"\n            "),a.Pb(),a.Fc(136,"\n            "),a.Qb(137,"li"),a.Fc(138,"\n                "),a.Dc(139,P,8,7,"a",19),a.Fc(140,"\n            "),a.Pb(),a.Fc(141,"\n            "),a.Qb(142,"li"),a.Fc(143,"\n                "),a.Qb(144,"a",13),a.Fc(145,"\n                    "),a.Qb(146,"span",10),a.Lb(147,"i",24),a.Pb(),a.Qb(148,"span",12),a.Fc(149),a.ac(150,"translate"),a.Pb(),a.Fc(151,"\n                "),a.Pb(),a.Fc(152,"\n            "),a.Pb(),a.Fc(153,"\n            "),a.Qb(154,"li"),a.Fc(155,"\n                "),a.Qb(156,"a",13),a.Fc(157,"\n                    "),a.Qb(158,"span",10),a.Lb(159,"i",25),a.Pb(),a.Qb(160,"span",12),a.Fc(161),a.ac(162,"translate"),a.Pb(),a.Fc(163,"\n                "),a.Pb(),a.Fc(164,"\n            "),a.Pb(),a.Fc(165,"\n            "),a.Qb(166,"li"),a.Fc(167,"\n                "),a.Qb(168,"a",13),a.Fc(169,"\n                    "),a.Qb(170,"span",10),a.Lb(171,"i",26),a.Pb(),a.Qb(172,"span",12),a.Fc(173),a.ac(174,"translate"),a.Pb(),a.Fc(175,"\n                "),a.Pb(),a.Fc(176,"\n            "),a.Pb(),a.Fc(177,"\n            "),a.Qb(178,"li"),a.Fc(179,"\n                "),a.Qb(180,"a",13),a.Fc(181,"\n                    "),a.Qb(182,"span",10),a.Lb(183,"i",27),a.Pb(),a.Qb(184,"span",12),a.Fc(185),a.ac(186,"translate"),a.Pb(),a.Fc(187,"\n                "),a.Pb(),a.Fc(188,"\n            "),a.Pb(),a.Fc(189,"\n        "),a.Pb(),a.Fc(190,"\n\n    "),a.Pb(),a.Fc(191,"\n"),a.Pb()),2&e&&(a.yb(25),a.Ab(t.isDashboardSelected?"selectednavbaritem active":""),a.yb(5),a.Gc(a.bc(31,49,"Dashboard")),a.yb(7),a.Ab(t.isAccountSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/account/",t.clinicId,""),a.yb(5),a.Gc(a.bc(43,51,"Account")),a.yb(12),a.Gc(a.bc(55,53,"Settings")),a.yb(10),a.Ab(t.isSettingsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/settings/",t.clinicId,""),a.yb(5),a.Gc(a.bc(70,55,"Settings")),a.yb(7),a.hc("ngIf",t.hasClinicMaster),a.yb(5),a.hc("ngIf",t.hasAccessRights),a.yb(7),a.Ab(t.isAddressSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/address/",t.clinicId,""),a.yb(5),a.Gc(a.bc(94,57,"AddressandContact")),a.yb(5),a.hc("ngIf",t.hasCoding),a.yb(9),a.Gc(a.bc(108,59,"EMR")),a.yb(10),a.hc("ngIf",t.hasEMR),a.yb(5),a.hc("ngIf",t.hasEMR),a.yb(7),a.hc("ngIf",t.hasAppointments),a.yb(5),a.hc("ngIf",t.hasPurshasingAndInventory),a.yb(5),a.hc("ngIf",t.hasPurshasingAndInventory),a.yb(5),a.Ab(t.isFeedbackSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/feedback/all/",t.clinicId,""),a.yb(5),a.Gc(a.bc(150,61,"Feedback")),a.yb(7),a.Ab(t.isNewsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/news/all/",t.clinicId,""),a.yb(5),a.Gc(a.bc(162,63,"News")),a.yb(7),a.Ab(t.isReportsSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/reports/",t.clinicId,""),a.yb(5),a.Gc(a.bc(174,65,"Reports")),a.yb(7),a.Ab(t.isTemplatesSelected?"selectednavbaritem active":""),a.jc("routerLink","/clinic/templates/",t.clinicId,""),a.yb(5),a.Gc(a.bc(186,67,"Templates")))},directives:[s.d,i.k],pipes:[d.c],encapsulation:2}),e})();var Q=n("zCh2"),S=n("Frqi"),C=n("5QCU");function w(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function I(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",17),a.Fc(1,"\n                        "),a.Qb(2,"div",34),a.Fc(3,"\n                            "),a.Qb(4,"label",72),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                            "),a.Qb(8,"input",73,74),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(3).clinicModel.admin.password=t}),a.Pb(),a.Fc(10,"\n                            "),a.Qb(11,"div",48),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                        "),a.Pb(),a.Fc(15,"\n                        "),a.Qb(16,"div",34),a.Fc(17,"\n                            "),a.Qb(18,"label",75),a.Fc(19),a.ac(20,"translate"),a.Pb(),a.Fc(21,"\n                            "),a.Qb(22,"input",76,77),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(3).clinicModel.adminPasswordConfirm=t}),a.Pb(),a.Fc(24,"\n                            "),a.Qb(25,"div",48),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                        "),a.Pb(),a.Fc(29,"\n                    "),a.Pb()}if(2&e){const e=a.vc(9),t=a.vc(23),n=a.Zb(3);a.yb(5),a.Hc(" ",a.bc(6,8,"Password")," "),a.yb(3),a.hc("ngModel",n.clinicModel.admin.password),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                ",a.bc(13,10,"InvalidPassword"),"\n                            "),a.yb(7),a.Hc(" ",a.bc(20,12,"ConfirmPassword")," "),a.yb(3),a.hc("ngModel",n.clinicModel.adminPasswordConfirm),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(27,14,"InvalidPassword"),"\n                            ")}}function T(e,t){if(1&e&&(a.Qb(0,"div",17),a.Fc(1,"\n                        "),a.Qb(2,"div",28),a.Fc(3,"\n                            "),a.Qb(4,"a",78),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                        "),a.Pb(),a.Fc(8,"\n                    "),a.Pb()),2&e){const e=a.Zb(3);a.yb(4),a.Cb("disabled",!e.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(6,3,"ChangePassword"))}}function M(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                    "),a.Qb(2,"h4"),a.Fc(3),a.ac(4,"translate"),a.Pb(),a.Fc(5,"\n                    "),a.Lb(6,"hr"),a.Fc(7,"\n                    "),a.Qb(8,"div",17),a.Fc(9,"\n                        "),a.Qb(10,"div",34),a.Fc(11,"\n                            "),a.Qb(12,"label",59),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"input",60,61),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicModel.admin.firstName=t}),a.Pb(),a.Fc(18,"\n                        "),a.Pb(),a.Fc(19,"\n                        "),a.Qb(20,"div",34),a.Fc(21,"\n                            "),a.Qb(22,"label",62),a.Fc(23),a.ac(24,"translate"),a.Pb(),a.Fc(25,"\n                            "),a.Qb(26,"input",63,64),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicModel.admin.lastName=t}),a.Pb(),a.Fc(28,"\n                        "),a.Pb(),a.Fc(29,"\n                    "),a.Pb(),a.Fc(30,"\n\n                    "),a.Qb(31,"div",17),a.Fc(32,"\n                        "),a.Qb(33,"div",34),a.Fc(34,"\n                            "),a.Qb(35,"label",65),a.Fc(36),a.ac(37,"translate"),a.Pb(),a.Fc(38,"\n                            "),a.Qb(39,"input",66,67),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicModel.admin.reachInfo.mobile=t}),a.Pb(),a.Fc(41,"\n                            "),a.Qb(42,"div",48),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                        "),a.Pb(),a.Fc(46,"\n                        "),a.Qb(47,"div",34),a.Fc(48,"\n                            "),a.Qb(49,"label",68),a.Fc(50),a.ac(51,"translate"),a.Pb(),a.Fc(52,"\n                            "),a.Qb(53,"input",69,70),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicModel.admin.email=t}),a.Pb(),a.Fc(55,"\n                        "),a.Pb(),a.Fc(56,"\n                    "),a.Pb(),a.Fc(57,"\n\n\n\n                    "),a.Dc(58,I,30,16,"div",71),a.Fc(59,"\n\n                    "),a.Dc(60,T,9,5,"div",71),a.Fc(61,"\n\n                "),a.Pb()}if(2&e){const e=a.vc(40),t=a.Zb(2);a.yb(3),a.Hc("\n                        ",a.bc(4,13,"AdminInformation"),"\n                    "),a.yb(10),a.Gc(a.bc(14,15,"FirstName")),a.yb(3),a.hc("ngModel",t.clinicModel.admin.firstName),a.yb(7),a.Gc(a.bc(24,17,"LastName")),a.yb(3),a.hc("ngModel",t.clinicModel.admin.lastName),a.yb(10),a.Gc(a.bc(37,19,"Mobile")),a.yb(3),a.hc("ngModel",t.clinicModel.admin.reachInfo.mobile),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                ",a.bc(44,21,"MobileValidationMsg"),"\n                            "),a.yb(7),a.Gc(a.bc(51,23,"Email")),a.yb(3),a.hc("ngModel",t.clinicModel.admin.email),a.yb(5),a.hc("ngIf",null==t.clinicModel.adminId),a.yb(2),a.hc("ngIf",t.clinicModel.adminId>0)}}function D(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",15,16),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n\n                "),a.Qb(3,"div",17),a.Fc(4,"\n                    "),a.Qb(5,"div",18),a.Fc(6,"\n                        "),a.Qb(7,"label",19),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"input",20,21),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.name=t}),a.Pb(),a.Fc(13,"\n                    "),a.Pb(),a.Fc(14,"\n\n                    "),a.Qb(15,"div",18),a.Fc(16,"\n                        "),a.Qb(17,"label",22),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n                        "),a.Qb(21,"input",23,24),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.license=t}),a.Pb(),a.Fc(23,"\n                    "),a.Pb(),a.Fc(24,"\n\n                    "),a.Qb(25,"div",18),a.Fc(26,"\n                        "),a.Qb(27,"label",25),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                        "),a.Qb(31,"input",26,27),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.tin=t}),a.Pb(),a.Fc(33,"\n                    "),a.Pb(),a.Fc(34,"\n                "),a.Pb(),a.Fc(35,"\n\n                "),a.Qb(36,"div",17),a.Fc(37,"\n                    "),a.Qb(38,"div",28),a.Fc(39,"\n                        "),a.Qb(40,"label",29),a.Fc(41),a.ac(42,"translate"),a.Pb(),a.Fc(43,"\n                        "),a.Qb(44,"textarea",30,31),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.description=t}),a.Pb(),a.Fc(46,"\n                    "),a.Pb(),a.Fc(47,"\n                "),a.Pb(),a.Fc(48,"\n\n                "),a.Qb(49,"div",17),a.Fc(50,"\n                    "),a.Qb(51,"div",28),a.Fc(52,"\n                        "),a.Qb(53,"label",32),a.Fc(54),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                        "),a.Qb(57,"image-uploader",33),a.Xb("imageIdChange",function(t){return a.wc(e),a.Zb().clinicModel.imageId=t})("imageDataChange",function(t){return a.wc(e),a.Zb().clinicModel.imageData=t})("change",function(t){return a.wc(e),a.Zb().imageChanged(t)}),a.Pb(),a.Fc(58,"\n                    "),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n\n                "),a.Qb(61,"div",17),a.Fc(62,"\n                    "),a.Qb(63,"div",34),a.Fc(64,"\n                        "),a.Qb(65,"label",35),a.Fc(66),a.ac(67,"translate"),a.Pb(),a.Fc(68,"\n                        "),a.Qb(69,"input",36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.lastModifierName=t}),a.Pb(),a.Fc(70,"\n                    "),a.Pb(),a.Fc(71,"\n                    "),a.Qb(72,"div",34),a.Fc(73,"\n                        "),a.Qb(74,"label",37),a.Fc(75),a.ac(76,"translate"),a.Pb(),a.Fc(77,"\n                        "),a.Qb(78,"input",38),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.lastModificationDateString=t}),a.Pb(),a.Fc(79,"\n                    "),a.Pb(),a.Fc(80,"\n                "),a.Pb(),a.Fc(81,"\n\n                "),a.Qb(82,"div",17),a.Fc(83,"\n                    "),a.Qb(84,"div",28),a.Fc(85,"\n                        "),a.Qb(86,"h4"),a.Fc(87),a.ac(88,"translate"),a.Pb(),a.Fc(89,"\n                        "),a.Lb(90,"hr"),a.Fc(91,"\n                    "),a.Pb(),a.Fc(92,"\n                "),a.Pb(),a.Fc(93,"\n\n\n                "),a.Qb(94,"div",17),a.Fc(95,"\n                    "),a.Qb(96,"div",34),a.Fc(97,"\n                        "),a.Qb(98,"label",39),a.Fc(99),a.ac(100,"translate"),a.Pb(),a.Fc(101,"\n                        "),a.Qb(102,"input",40,41),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.owner.firstName=t}),a.Pb(),a.Fc(104,"\n                    "),a.Pb(),a.Fc(105,"\n                    "),a.Qb(106,"div",34),a.Fc(107,"\n                        "),a.Qb(108,"label",42),a.Fc(109),a.ac(110,"translate"),a.Pb(),a.Fc(111,"\n                        "),a.Qb(112,"input",43,44),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.owner.lastName=t}),a.Pb(),a.Fc(114,"\n                    "),a.Pb(),a.Fc(115,"\n                "),a.Pb(),a.Fc(116,"\n\n                "),a.Qb(117,"div",17),a.Fc(118,"\n                    "),a.Qb(119,"div",34),a.Fc(120,"\n                        "),a.Qb(121,"label",45),a.Fc(122),a.ac(123,"translate"),a.Pb(),a.Fc(124,"\n                        "),a.Qb(125,"input",46,47),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.owner.reachInfo.mobile=t}),a.Pb(),a.Fc(127,"\n                        "),a.Qb(128,"div",48),a.Fc(129),a.ac(130,"translate"),a.Pb(),a.Fc(131,"\n                    "),a.Pb(),a.Fc(132,"\n                    "),a.Qb(133,"div",34),a.Fc(134,"\n                        "),a.Qb(135,"label",49),a.Fc(136),a.ac(137,"translate"),a.Pb(),a.Fc(138,"\n                        "),a.Qb(139,"input",50,51),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.owner.email=t}),a.Pb(),a.Fc(141,"\n                    "),a.Pb(),a.Fc(142,"\n                "),a.Pb(),a.Fc(143,"\n\n                "),a.Qb(144,"div",17),a.Fc(145,"\n                    "),a.Qb(146,"div",28),a.Fc(147,"\n                        "),a.Qb(148,"a",52),a.Fc(149),a.ac(150,"translate"),a.Pb(),a.Fc(151,"\n                    "),a.Pb(),a.Fc(152,"\n                "),a.Pb(),a.Fc(153,"\n\n                "),a.Qb(154,"div",17),a.Fc(155,"\n                    "),a.Qb(156,"div",28),a.Fc(157,"\n                        "),a.Qb(158,"label",53),a.Fc(159),a.ac(160,"translate"),a.Pb(),a.Fc(161,"\n                        "),a.Qb(162,"label"),a.Fc(163,"\n                            "),a.Qb(164,"input",54,55),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.ownerIsAdmin=t}),a.Pb(),a.Fc(166,"\n                            "),a.Lb(167,"span",56),a.Fc(168,"\n                        "),a.Pb(),a.Fc(169,"\n                    "),a.Pb(),a.Fc(170,"\n                "),a.Pb(),a.Fc(171,"\n\n                "),a.Dc(172,M,62,25,"div",0),a.Fc(173,"\n\n                "),a.Qb(174,"div",17),a.Fc(175,"\n                    "),a.Qb(176,"div",28),a.Fc(177,"\n                        "),a.Qb(178,"button",57),a.Fc(179),a.ac(180,"translate"),a.Pb(),a.Fc(181,"\n                        "),a.Qb(182,"button",58),a.Fc(183),a.ac(184,"translate"),a.Pb(),a.Fc(185,"\n                    "),a.Pb(),a.Fc(186,"\n                "),a.Pb(),a.Fc(187,"\n\n\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(126),n=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,36,"Name"),""),a.yb(3),a.hc("ngModel",n.clinicModel.name),a.yb(7),a.Hc(" ",a.bc(19,38,"License"),""),a.yb(3),a.hc("ngModel",n.clinicModel.license),a.yb(7),a.Hc(" ",a.bc(29,40,"TIN"),""),a.yb(3),a.hc("ngModel",n.clinicModel.tin),a.yb(10),a.Hc(" ",a.bc(42,42,"Description"),""),a.yb(3),a.hc("ngModel",n.clinicModel.description),a.yb(10),a.Gc(a.bc(55,44,"Logo")),a.yb(3),a.hc("imageId",n.clinicModel.imageId)("imageData",n.clinicModel.imageData),a.yb(9),a.Gc(a.bc(67,46,"ModifiedBy")),a.yb(3),a.hc("ngModel",n.clinicModel.lastModifierName),a.yb(6),a.Gc(a.bc(76,48,"ModificationDate")),a.yb(3),a.hc("ngModel",n.clinicModel.lastModificationDateString),a.yb(9),a.Hc(" ",a.bc(88,50,"OwnerInforamtion")," "),a.yb(12),a.Gc(a.bc(100,52,"FirstName")),a.yb(3),a.hc("ngModel",n.clinicModel.owner.firstName),a.yb(7),a.Gc(a.bc(110,54,"LastName")),a.yb(3),a.hc("ngModel",n.clinicModel.owner.lastName),a.yb(10),a.Gc(a.bc(123,56,"Mobile")),a.yb(3),a.hc("ngModel",n.clinicModel.owner.reachInfo.mobile),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                            ",a.bc(130,58,"MobileValidationMsg"),"\n                        "),a.yb(7),a.Gc(a.bc(137,60,"Email")),a.yb(3),a.hc("ngModel",n.clinicModel.owner.email),a.yb(9),a.Cb("disabled",!n.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(150,62,"ChangePassword")),a.yb(10),a.Gc(a.bc(160,64,"IsAdmin")),a.yb(5),a.hc("ngModel",n.clinicModel.ownerIsAdmin),a.yb(8),a.hc("ngIf",!n.clinicModel.ownerIsAdmin),a.yb(6),a.hc("disabled",!e.form.valid||!n.isClinicAdmin),a.yb(1),a.Gc(a.bc(180,66,"Save")),a.yb(3),a.ic("disabled",n.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(184,68,"Cancel"))}}let G=(()=>{class e{constructor(e,t,n,i,c){this.administrationService=e,this.localStorage=t,this.toastr=n,this._route=i,this.translate=c,this.selectAccountTab=!0,this.clinicModel={id:0,isActive:!0},this.selectClinicsTab=!0,this.showProgress=!1,this.modifierName="",this.startDateString="",this.endDateString="",this.userType="",this.isClinicAdmin=!1,this.model={},this.active=!0}ngOnInit(){this.clinicId=this._route.snapshot.params.id,this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.initializeModel(),this.modifierName=this.localStorage.retrieve("FullUserName")}initializeModel(){this.clinicModel.owner={id:0},this.clinicModel.admin={id:0},this.clinicModel.owner.reachInfo={id:0},this.clinicModel.admin.reachInfo={id:0},this.clinicModel.reachInfo={id:0},this.clinicModel.currentSubscriptions={id:0};let e=this;this.clinicId&&this.clinicId>0&&(this.showProgress=!0,this.administrationService.getClinicById(this.clinicId).subscribe(function(t){e.clinicModel=t,null!=e.clinicModel.admin?e.adminType=e.clinicModel.admin.userType:(e.clinicModel.admin={id:0},e.clinicModel.admin.reachInfo={id:0}),null!=e.clinicModel.currentSubscriptions&&(e.startDateString=e.clinicModel.currentSubscriptions.startDateString,e.endDateString=e.clinicModel.currentSubscriptions.endDateString,e.numberOfUsers=e.clinicModel.currentSubscriptions.numberOfUsers)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}))}imageChanged(e){let t={};if(null!=e){if(null==e.originalName)return void(this.clinicModel.attachmentInfo=null);this.clinicModel.attachmentInfo=t,this.clinicModel.attachmentInfo.originalName=e.originalName,this.clinicModel.attachmentInfo.keyName=e.keyName,this.clinicModel.attachmentInfo.fullPath=e.fullPath,this.clinicModel.attachmentInfo.fileType=e.fileType}else this.clinicModel.attachmentInfo=null}onSubmit(){let e=this;e.showProgress=!0,e.clinicModel.modifierName=this.modifierName,this.isPasswordValid()&&!this.clinicModel.ownerIsAdmin&&null==this.clinicModel.adminId||this.clinicModel.ownerIsAdmin||this.clinicModel.adminId>0?this.administrationService.updateClinic(e.clinicModel).subscribe(function(t){e.clinicModel=t,null!=e.clinicModel.admin&&null!=e.clinicModel.admin&&(e.adminType=e.clinicModel.admin.userType),null!=e.clinicModel.admin&&null!=e.clinicModel.admin||(e.clinicModel.admin={id:0}),null!=e.clinicModel.admin.reachInfo&&null!=e.clinicModel.admin.reachInfo||(e.clinicModel.admin.reachInfo={id:0});let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):e.showProgress=!1}isPasswordValid(){let e=!0;if(null==this.clinicModel.adminId&&!this.clinicModel.ownerIsAdmin&&this.clinicModel.admin.password!=this.clinicModel.adminPasswordConfirm){let t=this.translate.instant("MatchedAdminPasswordAndConfirmPassword");this.toastr.error(t,""),e=!1}return e}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(o.a),a.Kb(r.a),a.Kb(l.b),a.Kb(s.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-account"]],decls:105,vars:31,consts:[[4,"ngIf"],[3,"isAccountSelected"],[1,"row","NBbreadcrumb"],[1,"row","well",2,"padding","15px"],[1,"alert","alert-secondary"],[1,"row"],[1,"form-group"],[1,"control-label","col-md-2","font-weight-bold"],[1,"col-md-2"],["novalidate","","class","form-horizontal","name","organizationForm",3,"ngSubmit",4,"ngIf"],["id","changePasswordModalAdmin","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[3,"userId","userType"],["id","changePasswordModal","role","dialog",1,"modal","fade"],["novalidate","","name","organizationForm",1,"form-horizontal",3,"ngSubmit"],["organizationForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-4"],["for","txtName",1,"nopadding"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtLicense",1,"nopadding"],["id","txtLicense","name","txtLicense","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtLicense","ngModel"],["for","txtTIN",1,"nopadding"],["id","txtTIN","name","txtTIN","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtTIN","ngModel"],[1,"form-group","col-md-12"],["for","txtGroupRemark",1,"nopadding"],["id","txtGroupRemark","name","txtGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtGroupRemark","ngModel"],["for","fileImage",1,"nopadding"],[3,"imageId","imageData","imageIdChange","imageDataChange","change"],[1,"form-group","col-md-6"],["for","modidfiedPerson",1,"nopadding"],["type","text","name","modidfiedPerson","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["for","dateMod",1,"nopadding"],["type","text","name","dateMod","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["for","txtOwnerFirstName",1,"nopadding"],["id","txtOwnerFirstName","name","txtOwnerFirstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtOwnerName","ngModel"],["for","txtOwnerLastName",1,"nopadding"],["id","txtOwnerLastName","name","txtOwnerLastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtOwnerLastName","ngModel"],["for","txtOwnerPhone",1,"nopadding"],["type","tel","id","txtOwnerPhone","name","txtOwnerPhone","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtOwnerPhone","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtOwnerEmail",1,"nopadding"],["type","email","id","txtOwnerEmail","name","txtOwnerEmail","pattern","[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{1,63}$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtOwnerEmail","ngModel"],["data-toggle","modal","data-target","#changePasswordModalAdmin",1,"pointer"],["for","chkIsAdmin",1,"nopadding"],["type","checkbox","id","chkIsAdmin","name","chkIsActive",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["chkIsAdmin","ngModel"],[1,"lbl"],[1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"disabled"],["for","txtAdminFirstName",1,"nopadding"],["id","txtAdminFirstName","name","txtAdminFirstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminFirstName","ngModel"],["for","txtAdminLastName",1,"nopadding"],["id","txtAdminLastName","name","txtAdminLastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminLastName","ngModel"],["for","txtAdminPhone",1,"nopadding"],["type","tel","id","txtAdminPhone","name","txtAdminPhone","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminPhone","ngModel"],["for","txtAdminEmail",1,"nopadding"],["type","email","pattern","[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{1,63}$","id","txtAdminEmail","name","txtAdminEmail","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminEmail","ngModel"],["class","form-row",4,"ngIf"],["for","txtAdminPassword",1,"nopadding"],["type","password","id","txtAdminPassword","name","txtAdminPassword","pattern","(?=.*\\d)(?=.*[a-z]).{6,}","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminPassword","ngModel"],["for","txtAdminPasswordConfirm",1,"nopadding"],["type","password","id","txtAdminPasswordConfirm","name","txtAdminPasswordConfirm","pattern","(?=.*\\d)(?=.*[a-z]).{6,}","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAdminPasswordConfirm","ngModel"],["data-toggle","modal","data-target","#changePasswordModal",1,"pointer"]],template:function(e,t){1&e&&(a.Dc(0,w,4,0,"div",0),a.Fc(1,"\n\n\n\n    "),a.Lb(2,"clinic-tab",1),a.Fc(3,"\n\n        "),a.Qb(4,"div",2),a.Fc(5,"\n            "),a.Qb(6,"a"),a.Fc(7),a.ac(8,"translate"),a.Pb(),a.Fc(9),a.ac(10,"translate"),a.Pb(),a.Fc(11,"\n\n        "),a.Qb(12,"div",3),a.Fc(13,"\n\n            "),a.Qb(14,"h4"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n            "),a.Lb(18,"br"),a.Fc(19,"\n            "),a.Qb(20,"div",4),a.Fc(21,"\n                "),a.Qb(22,"div",5),a.Fc(23,"\n                    "),a.Qb(24,"div",6),a.Fc(25,"\n                        "),a.Qb(26,"span",7),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n                        "),a.Qb(30,"div",8),a.Fc(31,"\n                            "),a.Qb(32,"span"),a.Fc(33),a.Pb(),a.Fc(34,"\n                        "),a.Pb(),a.Fc(35,"\n                    "),a.Pb(),a.Fc(36,"\n                "),a.Pb(),a.Fc(37,"\n                "),a.Qb(38,"div",5),a.Fc(39,"\n                    "),a.Qb(40,"div",6),a.Fc(41,"\n                        "),a.Qb(42,"span",7),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                        "),a.Qb(46,"div",8),a.Fc(47,"\n                            "),a.Qb(48,"span"),a.Fc(49),a.Pb(),a.Fc(50,"\n                        "),a.Pb(),a.Fc(51,"\n                    "),a.Pb(),a.Fc(52,"\n                "),a.Pb(),a.Fc(53,"\n                "),a.Qb(54,"div",5),a.Fc(55,"\n                    "),a.Qb(56,"div",6),a.Fc(57,"\n                        "),a.Qb(58,"span",7),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                        "),a.Qb(62,"div",8),a.Fc(63,"\n                            "),a.Qb(64,"span"),a.Fc(65),a.Pb(),a.Fc(66,"\n                        "),a.Pb(),a.Fc(67,"\n                    "),a.Pb(),a.Fc(68,"\n                "),a.Pb(),a.Fc(69,"\n            "),a.Pb(),a.Fc(70,"\n\n            "),a.Qb(71,"h4"),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n            "),a.Lb(75,"hr"),a.Fc(76,"\n\n            "),a.Dc(77,D,188,70,"form",9),a.Fc(78,"\n\n            "),a.Fc(79,"\n        "),a.Pb(),a.Fc(80,"\n\n\n\n"),a.Qb(81,"div",10),a.Fc(82,"\n    "),a.Qb(83,"div",11),a.Fc(84,"\n        "),a.Fc(85,"\n        "),a.Qb(86,"div",12),a.Fc(87,"\n            "),a.Lb(88,"change-password",13),a.Fc(89,"\n        "),a.Pb(),a.Fc(90,"\n    "),a.Pb(),a.Fc(91,"\n"),a.Pb(),a.Fc(92,"\n\n"),a.Qb(93,"div",14),a.Fc(94,"\n    "),a.Qb(95,"div",11),a.Fc(96,"\n        "),a.Fc(97,"\n        "),a.Qb(98,"div",12),a.Fc(99,"\n            "),a.Lb(100,"change-password",13),a.Fc(101,"\n        "),a.Pb(),a.Fc(102,"\n    "),a.Pb(),a.Fc(103,"\n"),a.Pb(),a.Fc(104,"\n\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("isAccountSelected",t.selectAccountTab),a.yb(5),a.Gc(a.bc(8,17,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(10,19,"Account"),"\n        "),a.yb(6),a.Hc("\n                ",a.bc(16,21,"CurrentSubscription"),"\n            "),a.yb(12),a.Gc(a.bc(28,23,"StartDate")),a.yb(6),a.Gc(t.startDateString),a.yb(10),a.Gc(a.bc(44,25,"EndDate")),a.yb(6),a.Gc(t.endDateString),a.yb(10),a.Gc(a.bc(60,27,"NoOfUsers")),a.yb(6),a.Hc(" ",t.numberOfUsers,""),a.yb(7),a.Hc("\n                ",a.bc(73,29,"ClinicInformation"),"\n            "),a.yb(5),a.hc("ngIf",t.active),a.yb(11),a.hc("userId",t.clinicModel.ownerId)("userType",t.clinicModel.owner.userType),a.yb(12),a.hc("userId",t.clinicModel.adminId)("userType",t.adminType))},directives:[i.k,y,Q.a,S.a,c.q,c.g,c.h,c.b,c.o,c.f,c.i,C.a,c.l,c.a],pipes:[d.c],encapsulation:2}),e})();var A=n("40Bm"),N=n("YBnm");function k(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function L(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",6,7),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n            "),a.Fc(3,"\n\n            "),a.Qb(4,"address",8),a.Fc(5,"\n                "),a.Qb(6,"div",9),a.Fc(7,"\n                        "),a.Qb(8,"button",10),a.Fc(9),a.ac(10,"translate"),a.Pb(),a.Fc(11,"\n                        "),a.Qb(12,"button",11),a.Xb("click",function(){return a.wc(e),a.Zb().getClinicReachInformation()}),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n                    \n                "),a.Pb(),a.Fc(16,"\n            "),a.Pb(),a.Fc(17,"\n\n            \n        "),a.Pb()}if(2&e){const e=a.Zb();a.yb(4),a.hc("reachInfo",e.model),a.yb(4),a.ic("disabled",e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(10,5,"Save")),a.yb(3),a.ic("disabled",e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(14,7,"Cancel"))}}let R=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.selectAddressTab=!0,this.model={},this.showProgress=!0,this.active=!0,this.clinicId=1,this.userType="",this.isClinicAdmin=!1}ngOnInit(){this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.getClinicReachInformation()}getClinicReachInformation(){let e=this;e.showProgress=!0;let t=this.storage.retrieve("ClinicId");null!=t&&null!=t||(t=1),this.clinicService.getClinicReachInformation(t).subscribe(function(t){e.model=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}onSubmit(){let e=this;e.showProgress=!0,this.model.clinicId=this.clinicId,this.clinicService.saveorUpdateReachInformation(this.model).subscribe(function(t){e.model=t;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-address"]],decls:23,vars:9,consts:[[4,"ngIf"],[1,"row"],[3,"isAddressSelected"],[1,"row",2,"padding","13px"],[1,"NBbreadcrumb"],["class","form-horizontal","name","organizationForm",3,"ngSubmit",4,"ngIf"],["name","organizationForm",1,"form-horizontal",3,"ngSubmit"],["organizationForm",""],[3,"reachInfo"],[1,"form-group"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(a.Dc(0,k,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n\n    "),a.Qb(6,"div",1),a.Fc(7,"\n        "),a.Qb(8,"div",3),a.Fc(9,"\n            "),a.Qb(10,"div",4),a.Fc(11,"\n                "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n        "),a.Pb(),a.Fc(18,"\n        \n\n        "),a.Dc(19,L,18,9,"form",5),a.Fc(20,"\n\n    "),a.Pb(),a.Fc(21,"\n"),a.Pb(),a.Fc(22,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isAddressSelected",t.selectAddressTab),a.yb(9),a.Gc(a.bc(14,5,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(16,7,"AddressContact"),"\n            "),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,y,S.a,c.q,c.g,c.h,N.a],pipes:[d.c],encapsulation:2}),e})();var x=n("ZMVn"),Z=n("qWM9");class B{constructor(){this.Diagnosis="Diagnosis",this.Drugs="Drugs",this.Services="Services",this.LaboratoryTests="LaboratoryTests",this.RadiologyTests="RadiologyTests",this.ServicePackages="ServicePackages"}}class H{getActiveNodesOnly(e){let t=[];if(e)for(let i of e)if(null==i.parent&&i.isActive){var n={};(n={data:i.data,label:i.label,labelTranslation:i.labelTranslation,type:i.type,isActive:i.isActive,expanded:!0,parent:i.parent}).children=[],t.push(n),this.getActiveChildNodes(i,n)}return t}getActiveChildNodes(e,t){e.children&&e.children.forEach(e=>{if(e.isActive){var n={};(n={data:e.data,label:e.label,labelTranslation:e.labelTranslation,type:e.type,isActive:e.isActive,expanded:!0,parent:e.parent}).children=[],t.children.push(n)}this.getActiveChildNodes(e,n)})}}var O=n("g9iH"),E=n("7zfz"),X=n("uGjk");const U=["AddEditDiagnoseGroup"];function q(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function j(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function K(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editDiagnoseGroup(n)}),a.Pb(),a.Fc(7,"\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function V(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function $(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,j,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,K,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,V,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function z(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                "),a.Qb(3,"div",27),a.Fc(4,"\n                    "),a.Qb(5,"div",28),a.Fc(6,"\n                        "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",30),a.Fc(12,"\n                            "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",28),a.Fc(23,"\n                        "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",30),a.Fc(29,"\n                            "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"div",28),a.Fc(40,"\n                        "),a.Qb(41,"label",34),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",30),a.Fc(46,"\n                            "),a.Lb(47,"tree-checkboxList",37),a.Fc(48,"\n                        "),a.Pb(),a.Fc(49,"\n                    "),a.Pb(),a.Fc(50,"\n                "),a.Pb(),a.Fc(51,"\n                "),a.Qb(52,"div",38),a.Fc(53,"\n                    "),a.Qb(54,"button",39),a.Xb("click",function(){return a.wc(e),a.Zb().saveDiagnoseGroup()}),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                    "),a.Qb(58,"button",40),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                "),a.Pb(),a.Fc(62,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,16,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,18,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(26,20,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,22,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(43,24,"Diagnosis"),""),a.yb(5),a.hc("treeList",i.diagnosisTree)("items",i.allDiagnosis)("selectedItemsIDs",i.selectedDiagnosisIDs)("groupType",i.groupType),a.yb(7),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(56,26,"Save")),a.yb(4),a.Gc(a.bc(60,28,"Clear"))}}let W=(()=>{class e{constructor(e,t,n,i,c){this.clinicService=e,this.storage=t,this.toastr=n,this.localStorage=i,this.translate=c,this.leafType="Diagnose",this.selectedLang="ar",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.diagnosisTree=[],this.selectedDiagnosis=[],this.objectType=new B,this.lstToTranslated=[],this.treeHelper=new H,this.allDiagnosis=[],this.selectedDiagnosisIDs=[],this.groupType="DiagnosisGroup"}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.lstToTranslated=["label","labelTranslation"],e.clinicId=this.storage.retrieve("ClinicID"),this.clinicService.getDiagnosisGroupsWithoutServicesForTreeView(e.clinicId.toString()).subscribe(function(t){e.diagnosisTree=t},function(t){e.toastr.error(t,"")},function(){}),this.clinicService.getAllDiagnosis(e.clinicId.toString()).subscribe(function(t){e.allDiagnosis=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.diagnosisGroups}))}displayPopup(e){this.AddEditDiagnoseGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedDiagnosis=[],this.selectedDiagnosisIDs=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.Diagnosis).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveDiagnoseGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.model.relatedObjectsIDs=this.selectedDiagnosisIDs,this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.nameTranslation=n.nameTranslation,e.selectedNode.labelTranslation=n.labelTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.Diagnosis}extractSelectedDiagnosis(){let e=[];for(let t of this.selectedDiagnosis)"Diagnose"==t.type&&e.push(t.data);this.model.relatedObjectsIDs=e}editDiagnoseGroup(e){this.selectedNode=e,this.selectedDiagnosis=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.nameTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.Diagnosis,this.selectedDiagnosisIDs=[];for(let t of e.children)this.selectedDiagnosisIDs.push(t.id);for(let t of e.children)for(let e of this.diagnosisTree)this.highLightSelectedDiagnosis(e,t.data,t.type);this.extractSelectedDiagnosis(),this.AddEditDiagnoseGroup.nativeElement.click()}highLightSelectedDiagnosis(e,t,n){e.data==t&&e.type==n&&(this.selectedDiagnosis.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedDiagnosis(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedDiagnosis=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(r.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-diagnosis"]],viewQuery:function(e,t){if(1&e&&a.Lc(U,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditDiagnoseGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","DiagnosisPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentDiagnosisGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#DiagnosisPopup",1,"btn","btn-primary"],["AddEditDiagnoseGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentDiagnosisGroup"],["pTemplate","Diagnose"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit Diagnose Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveDiagnoseGroup","name","ChkIsActiveDiagnoseGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentDiagnosisGroupForm",1,"form-horizontal"],["departmentDiagnosisGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],[3,"treeList","items","selectedItemsIDs","groupType"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,q,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,$,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",5),a.Fc(13,"\n                "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n            "),a.Dc(22,z,63,30,"form",8),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"DiagnosisGroup")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i,X.a],pipes:[d.c],encapsulation:2}),e})();const Y=["AddEditDrugGroup"];function _(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function J(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function ee(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editDrugGroup(n)}),a.Pb(),a.Fc(7,"\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function te(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function ne(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,J,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,ee,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,te,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function ie(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                "),a.Qb(3,"div",27),a.Fc(4,"\n                    "),a.Qb(5,"div",28),a.Fc(6,"\n                        "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",30),a.Fc(12,"\n                            "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",28),a.Fc(23,"\n                        "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",30),a.Fc(29,"\n                            "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"div",28),a.Fc(40,"\n                        "),a.Qb(41,"label",34),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",30),a.Fc(46,"\n                            "),a.Lb(47,"tree-checkboxList",37),a.Fc(48,"\n                        "),a.Pb(),a.Fc(49,"\n                    "),a.Pb(),a.Fc(50,"\n                "),a.Pb(),a.Fc(51,"\n                "),a.Qb(52,"div",38),a.Fc(53,"\n                    "),a.Qb(54,"button",39),a.Xb("click",function(){return a.wc(e),a.Zb().saveDrugGroup()}),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                    "),a.Qb(58,"button",40),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                "),a.Pb(),a.Fc(62,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Gc(a.bc(9,16,"ArabicName")),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,18,"RequiredField"),"\n                            "),a.yb(8),a.Gc(a.bc(26,20,"EnglishName")),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,22,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(43,24,"Drugs"),""),a.yb(5),a.hc("treeList",i.drugsTree)("items",i.allDrugs)("selectedItemsIDs",i.selectedDrugsIDs)("groupType",i.groupType),a.yb(7),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(56,26,"Save")),a.yb(4),a.Gc(a.bc(60,28,"Clear"))}}let ce=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.leafType="Drug",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.selectedDrugs=[],this.objectType=new B,this.selectedLang="ar",this.lstToTranslated=[],this.treeHelper=new H,this.groupType="DrugsGroup",this.selectedDrugsIDs=[],this.allDrugs=[]}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.lstToTranslated=["label","labelTranslation"],e.clinicId=this.storage.retrieve("ClinicID"),this.clinicService.getDrugsGroupsWithoutDrugsForTree(e.clinicId).subscribe(function(t){e.drugsTree=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}),this.clinicService.getAllDrugs(e.clinicId).subscribe(function(t){e.allDrugs=t},function(t){e.toastr.error(t,"")},function(){})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.drugsGroups}))}displayPopup(e){this.AddEditDrugGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedDrugs=[],this.selectedDrugsIDs=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.Drugs).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveDrugGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.model.relatedObjectsIDs=this.selectedDrugsIDs,this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.nameTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.Drugs}extractSelectedDrugs(){let e=[];for(let t of this.selectedDrugs)"Drug"==t.type&&e.push(t.data);this.model.relatedObjectsIDs=e}editDrugGroup(e){this.selectedNode=e,this.selectedDrugs=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.labelTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.Drugs,this.selectedDrugsIDs=[];for(let t of e.children)this.selectedDrugsIDs.push(t.id);this.AddEditDrugGroup.nativeElement.click()}highLightSelectedDrugs(e,t,n){e.data==t&&e.type==n&&(this.selectedDrugs.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedDrugs(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedDrugs=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-drugs"]],viewQuery:function(e,t){if(1&e&&a.Lc(Y,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditDrugGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","DrugsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width95percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentDrugsGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#DrugsPopup",1,"btn","btn-primary"],["AddEditDrugGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentDrugsGroup"],["pTemplate","Drug"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit Drug Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveDrugGroup","name","ChkIsActiveDrugGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentDrugsGroupForm",1,"form-horizontal"],["departmentDrugsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],[3,"treeList","items","selectedItemsIDs","groupType"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,_,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,ne,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",5),a.Fc(13,"\n                "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n            "),a.Dc(22,ie,63,30,"form",8),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"DrugsGroup")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i,X.a],pipes:[d.c],encapsulation:2}),e})();const se=["AddEditServiceGroup"];function ae(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function oe(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n               ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function re(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editServiceGroup(n)}),a.Pb(),a.Fc(7,"\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function le(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function de(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,oe,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,re,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,le,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function be(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                "),a.Qb(3,"div",27),a.Fc(4,"\n                    "),a.Qb(5,"div",28),a.Fc(6,"\n                        "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",30),a.Fc(12,"\n                            "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",28),a.Fc(23,"\n                        "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",30),a.Fc(29,"\n                            "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"div",28),a.Fc(40,"\n                        "),a.Qb(41,"label",37),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",38),a.Fc(46,"\n                            "),a.Lb(47,"tree-checkboxList",39),a.Fc(48,"\n                        "),a.Pb(),a.Fc(49,"\n                    "),a.Pb(),a.Fc(50,"\n                    "),a.Qb(51,"div",40),a.Fc(52,"\n                        "),a.Qb(53,"button",41),a.Xb("click",function(){return a.wc(e),a.Zb().saveServiceGroup()}),a.Fc(54),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                        "),a.Qb(57,"button",42),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(58),a.ac(59,"translate"),a.Pb(),a.Fc(60,"\n                    "),a.Pb(),a.Fc(61,"\n                "),a.Pb(),a.Fc(62,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,16,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,18,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(26,20,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,22,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(43,24,"Services"),""),a.yb(5),a.hc("treeList",i.servicesTree)("items",i.allservices)("selectedItemsIDs",i.selectedServicesIDs)("groupType",i.groupType),a.yb(6),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(55,26,"Save")),a.yb(4),a.Gc(a.bc(59,28,"Clear"))}}let ue=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.leafType="Service",this.selectedLang="ar",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.servicesTree=[],this.allservices=[],this.groupServicesList=[],this.selectedServices=[],this.objectType=new B,this.lstToTranslated=[],this.treeHelper=new H,this.selectedServicesIDs=[],this.groupType="ServiceGroup"}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.clinicId=this.storage.retrieve("ClinicID"),e.lstToTranslated=["label","labelTranslation"],this.clinicService.getAllServiceGroupsWithoutServicesForTreeView(e.clinicId.toString()).subscribe(function(t){e.servicesTree=t},function(t){e.toastr.error(t,"")},function(){}),this.clinicService.getAllServices(e.clinicId.toString()).subscribe(function(t){e.allservices=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.servicesGroups}))}displayPopup(e){this.AddEditServiceGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedServices=[],this.selectedServicesIDs=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.Services).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveServiceGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.model.relatedObjectsIDs=this.selectedServicesIDs,this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.nameTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.Services}extractSelectedServices(){let e=[];for(let t of this.selectedServices)"Service"==t.type&&e.push(t.data);this.model.relatedObjectsIDs=e}editServiceGroup(e){this.selectedNode=e,this.selectedServices=[],this.selectedServicesIDs=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.labelTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.Services;for(let t of e.children)this.selectedServicesIDs.push(t.id);this.AddEditServiceGroup.nativeElement.click()}highLightSelectedServices(e,t,n){e.data==t&&e.type==n&&(this.selectedServices.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedServices(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedServices=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-services"]],viewQuery:function(e,t){if(1&e&&a.Lc(se,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditServiceGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","ServicesPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentServicesGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#ServicesPopup",1,"btn","btn-primary"],["AddEditServiceGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentServicesGroup"],["pTemplate","Service"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit Service Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveServiceGroup","name","ChkIsActiveServiceGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentServicesGroupForm",1,"form-horizontal"],["departmentServicesGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-2"],[1,"col-md-10"],[3,"treeList","items","selectedItemsIDs","groupType"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,ae,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,de,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",5),a.Fc(13,"\n                "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n            "),a.Dc(22,be,63,30,"form",8),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"ServicesGroup")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i,X.a],pipes:[d.c],encapsulation:2}),e})();const he=["AddEditLaboratoryTestGroup"];function pe(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function ge(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n               ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function me(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editLaboratoryTestGroup(n)}),a.Pb(),a.Fc(7,"\n\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Fe(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function ve(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,ge,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,me,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,Fe,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function fe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                "),a.Qb(3,"div",27),a.Fc(4,"\n                    "),a.Qb(5,"div",28),a.Fc(6,"\n                        "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",30),a.Fc(12,"\n                            "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",28),a.Fc(23,"\n                        "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",30),a.Fc(29,"\n                            "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"div",28),a.Fc(40,"\n                        "),a.Qb(41,"label",34),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",30),a.Fc(46,"\n                            "),a.Lb(47,"tree-checkboxList",37),a.Fc(48,"\n                        "),a.Pb(),a.Fc(49,"\n                    "),a.Pb(),a.Fc(50,"\n                "),a.Pb(),a.Fc(51,"\n                "),a.Qb(52,"div",38),a.Fc(53,"\n                    "),a.Qb(54,"button",39),a.Xb("click",function(){return a.wc(e),a.Zb().saveLaboratoryTestGroup()}),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                    "),a.Qb(58,"button",40),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                "),a.Pb(),a.Fc(62,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,16,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,18,"RequiredField"),"\n                            "),a.yb(8),a.Gc(a.bc(26,20,"EnglishName")),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,22,"RequiredField"),"\n                            "),a.yb(8),a.Gc(a.bc(43,24,"LaboratoryTests")),a.yb(5),a.hc("treeList",i.laboratoryTestsTree)("items",i.allLaboratoryTests)("selectedItemsIDs",i.selectedLaboratoryTestsIDs)("groupType",i.groupType),a.yb(7),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(56,26,"Save")),a.yb(4),a.Gc(a.bc(60,28,"Clear"))}}let Pe=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.leafType="LaboratoryTest",this.selectedLang="ar",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.selectedLaboratoryTests=[],this.objectType=new B,this.lstToTranslated=[],this.treeHelper=new H,this.groupType="LaboratoryTestsGroup",this.selectedLaboratoryTestsIDs=[],this.allLaboratoryTests=[]}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.clinicId=this.storage.retrieve("ClinicID"),e.lstToTranslated=["label","labelTranslation"],this.clinicService.getLaboratoryTestsGroupsWithoutTestsForTree(e.clinicId).subscribe(function(t){e.laboratoryTestsTree=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}),this.clinicService.getAllLaboratoryTests(e.clinicId).subscribe(function(t){e.allLaboratoryTests=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.laboratoryTestsGroups}))}displayPopup(e){this.AddEditLaboratoryTestGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedLaboratoryTests=[],this.selectedLaboratoryTestsIDs=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.LaboratoryTests).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveLaboratoryTestGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.model.relatedObjectsIDs=this.selectedLaboratoryTestsIDs,this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.nameTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.LaboratoryTests}extractSelectedLaboratoryTests(){let e=[];for(let t of this.selectedLaboratoryTests)"LaboratoryTest"==t.type&&e.push(t.data);this.model.relatedObjectsIDs=e}editLaboratoryTestGroup(e){this.selectedNode=e,this.selectedLaboratoryTests=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.labelTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.LaboratoryTests,this.selectedLaboratoryTestsIDs=[];for(let t of e.children)this.selectedLaboratoryTestsIDs.push(t.id);this.AddEditLaboratoryTestGroup.nativeElement.click()}highLightSelectedLaboratoryTests(e,t,n){e.data==t&&e.type==n&&(this.selectedLaboratoryTests.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedLaboratoryTests(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedLaboratoryTests=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-laboratoryTests"]],viewQuery:function(e,t){if(1&e&&a.Lc(he,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditLaboratoryTestGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","LaboratoryTestsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width95percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentLaboratoryTestsGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#LaboratoryTestsPopup",1,"btn","btn-primary"],["AddEditLaboratoryTestGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentLaboratoryTestsGroup"],["pTemplate","LaboratoryTest"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit LaboratoryTest Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveLaboratoryTestGroup","name","ChkIsActiveLaboratoryTestGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentLaboratoryTestsGroupForm",1,"form-horizontal"],["departmentLaboratoryTestsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],[3,"treeList","items","selectedItemsIDs","groupType"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,pe,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,ve,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",5),a.Fc(13,"\n                "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n            "),a.Dc(22,fe,63,30,"form",8),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"LaboratoryTests")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i,X.a],pipes:[d.c],encapsulation:2}),e})();const ye=["AddEditRadiologyTestGroup"];function Qe(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Se(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function Ce(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editRadiologyTestGroup(n)}),a.Pb(),a.Fc(7,"\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function we(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function Ie(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,Se,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,Ce,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,we,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function Te(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                    "),a.Qb(3,"div",27),a.Fc(4,"\n                        "),a.Qb(5,"div",28),a.Fc(6,"\n                            "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                            "),a.Qb(11,"div",30),a.Fc(12,"\n                                "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                                "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                            "),a.Pb(),a.Fc(20,"\n                        "),a.Pb(),a.Fc(21,"\n                        "),a.Qb(22,"div",28),a.Fc(23,"\n                            "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                            "),a.Qb(28,"div",30),a.Fc(29,"\n                                "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                                "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                            "),a.Pb(),a.Fc(37,"\n                        "),a.Pb(),a.Fc(38,"\n                        "),a.Qb(39,"div",28),a.Fc(40,"\n                            "),a.Qb(41,"label",34),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                            "),a.Qb(45,"div",30),a.Fc(46,"\n                                "),a.Lb(47,"tree-checkboxList",37),a.Fc(48,"\n                            "),a.Pb(),a.Fc(49,"\n                        "),a.Pb(),a.Fc(50,"\n                    "),a.Pb(),a.Fc(51,"\n                    "),a.Qb(52,"div",38),a.Fc(53,"\n                        "),a.Qb(54,"button",39),a.Xb("click",function(){return a.wc(e),a.Zb().saveRadiologyTestGroup()}),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                        "),a.Qb(58,"button",40),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                    "),a.Pb(),a.Fc(62,"\n                "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,16,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(18,18,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(26,20,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(35,22,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(43,24,"RadiologyTests"),""),a.yb(5),a.hc("treeList",i.radiologyTestsTree)("items",i.allRadiologyTests)("selectedItemsIDs",i.selectedRadiologyTestsIDs)("groupType",i.groupType),a.yb(7),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(56,26,"Save")),a.yb(4),a.Gc(a.bc(60,28,"Clear"))}}let Me=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.leafType="RadiologyTest",this.selectedLang="ar",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.selectedRadiologyTests=[],this.objectType=new B,this.lstToTranslated=[],this.treeHelper=new H,this.groupType="RadiologyTestsGroup",this.selectedRadiologyTestsIDs=[],this.allRadiologyTests=[]}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.clinicId=this.storage.retrieve("ClinicID"),e.lstToTranslated=["label","labelTranslation"],this.clinicService.getRadiologyTestsGroupsOnlyForTreeView(e.clinicId).subscribe(function(t){e.radiologyTestsTree=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}),this.clinicService.getAllRadiologyTests(e.clinicId).subscribe(function(t){e.allRadiologyTests=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.radiologyTestsGroups}))}displayPopup(e){this.AddEditRadiologyTestGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedRadiologyTests=[],this.selectedRadiologyTestsIDs=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.RadiologyTests).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveRadiologyTestGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.model.relatedObjectsIDs=this.selectedRadiologyTestsIDs,this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.nameTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.RadiologyTests}extractSelectedRadiologyTests(){let e=[];for(let t of this.selectedRadiologyTests)"RadiologyTest"==t.type&&e.push(t.data);this.model.relatedObjectsIDs=e}editRadiologyTestGroup(e){this.selectedNode=e,this.selectedRadiologyTests=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.labelTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.RadiologyTests,this.selectedRadiologyTestsIDs=[];for(let t of e.children)this.selectedRadiologyTestsIDs.push(t.id);this.AddEditRadiologyTestGroup.nativeElement.click()}highLightSelectedRadiologyTests(e,t,n){e.data==t&&e.type==n&&(this.selectedRadiologyTests.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedRadiologyTests(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedRadiologyTests=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-radiologyTests"]],viewQuery:function(e,t){if(1&e&&a.Lc(ye,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditRadiologyTestGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","RadiologyTestsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width95percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentRadiologyTestsGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#RadiologyTestsPopup",1,"btn","btn-primary"],["AddEditRadiologyTestGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentRadiologyTestsGroup"],["pTemplate","RadiologyTest"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit RadiologyTest Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveRadiologyTestGroup","name","ChkIsActiveRadiologyTestGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentRadiologyTestsGroupForm",1,"form-horizontal"],["departmentRadiologyTestsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],[3,"treeList","items","selectedItemsIDs","groupType"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,Qe,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,Ie,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n            "),a.Qb(10,"div",4),a.Fc(11,"\n                "),a.Qb(12,"div",5),a.Fc(13,"\n                    "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                    "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n                "),a.Pb(),a.Fc(21,"\n                "),a.Dc(22,Te,63,30,"form",8),a.Fc(23,"\n            "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"RadiologyTests")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i,X.a],pipes:[d.c],encapsulation:2}),e})();var De=n("Gkuo"),Ge=n("iIV1");const Ae=["AddEditServicPackageGroup"];function Ne(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function ke(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                    "),a.Qb(3,"img",18),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).displayPopup(n)}),a.Pb(),a.Fc(4,"\n                "),a.Pb(),a.Fc(5,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.Hc("\n               ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function Le(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",20),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                    "),a.Qb(6,"i",21),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editServicePackageGroup(n)}),a.Pb(),a.Fc(7,"\n\n                "),a.Pb(),a.Fc(8,"\n                "),a.Qb(9,"label"),a.Fc(10,"\n                    "),a.Qb(11,"input",22),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb(2).changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                    "),a.Lb(13,"span",23),a.Fc(14,"\n                "),a.Pb(),a.Fc(15,"\n            ")}if(2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0 \n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                \xa0 \xa0\n                "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Re(e,t){if(1&e&&(a.Fc(0,"\n                "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                \xa0\n                ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n            ")}}function xe(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",9),a.Fc(1,"\n    "),a.Qb(2,"div",10),a.Fc(3,"\n\n        "),a.Qb(4,"div",11),a.Fc(5,"\n            "),a.Lb(6,"button",12,13),a.Fc(8,"\n        "),a.Pb(),a.Fc(9,"\n\n        "),a.Qb(10,"p-tree",14),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedItem=t}),a.Fc(11,"\n            "),a.Dc(12,ke,6,3,"ng-template",15),a.Fc(13,"\n            "),a.Dc(14,Le,16,5,"ng-template",16),a.Fc(15,"\n            "),a.Dc(16,Re,4,1,"ng-template",17),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.hc("value",e.items)("selection",e.selectedItem)}}function Ze(e,t){if(1&e&&(a.Fc(0,"\n                                        "),a.Qb(1,"span",19),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(2);a.yb(3),a.Hc("\n                                        \xa0\n                                        ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                                    ")}}function Be(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",25,26),a.Fc(2,"\n                "),a.Qb(3,"div",27),a.Fc(4,"\n                    "),a.Qb(5,"div",28),a.Fc(6,"\n                        "),a.Qb(7,"label",29),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",30),a.Fc(12,"\n                            "),a.Qb(13,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",33),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",28),a.Fc(23,"\n                        "),a.Qb(24,"label",34),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",30),a.Fc(29,"\n                            "),a.Qb(30,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",33),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n\n                   "),a.Qb(39,"div",28),a.Fc(40,"\n                        "),a.Qb(41,"label",34),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",30),a.Fc(46,"\n                            "),a.Qb(47,"input",37),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().filterString=t}),a.ac(48,"translate"),a.Pb(),a.Fc(49,"\n                            "),a.Qb(50,"div",38),a.Fc(51,"\n                                "),a.Qb(52,"p-tree",39),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedServices=t}),a.ac(53,"filterbynameorcode"),a.ac(54,"translateObjects"),a.Fc(55,"\n                                    "),a.Dc(56,Ze,4,1,"ng-template",17),a.Fc(57,"\n                                "),a.Pb(),a.Fc(58,"\n                            "),a.Pb(),a.Fc(59,"\n                        "),a.Pb(),a.Fc(60,"\n                    "),a.Pb(),a.Fc(61,"\n                "),a.Pb(),a.Fc(62,"\n                "),a.Qb(63,"div",40),a.Fc(64,"\n                    "),a.Qb(65,"button",41),a.Xb("click",function(){return a.wc(e),a.Zb().saveServicPackageGroup()}),a.Fc(66),a.ac(67,"translate"),a.Pb(),a.Fc(68,"\n                    "),a.Qb(69,"button",42),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(70),a.ac(71,"translate"),a.Pb(),a.Fc(72,"\n                "),a.Pb(),a.Fc(73,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,16,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,18,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(26,20,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,22,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(43,24,"ServicePackage"),""),a.yb(5),a.hc("placeholder",a.bc(48,26,"SearchByNameorCode"))("ngModel",i.filterString),a.yb(5),a.hc("value",a.dc(53,28,a.ec(54,32,i.servicePackagesList,null,null,i.lstToTranslated),i.filterString,i.leafType))("selection",i.selectedServices),a.yb(13),a.hc("disabled",!e.form.valid),a.yb(1),a.Gc(a.bc(67,37,"Save")),a.yb(4),a.Gc(a.bc(71,39,"Clear"))}}let He=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.leafType="Service",this.selectedLang="ar",this.active=!0,this.division={},this.isClinicAdmin=!1,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.items=[],this.model={},this.showProgress=!1,this.selectedServices=[],this.objectType=new B,this.lstToTranslated=[],this.treeHelper=new H,this.servicePackagesList=[]}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage");let e=this;e.showProgress=!0,e.clinicId=this.storage.retrieve("ClinicID"),e.lstToTranslated=["label","labelTranslation"],e.loadServicePackages(),e.servicesTree=[]}loadServicePackages(){let e=this;this.clinicService.getAllservicePackages(e.clinicId).subscribe(function(t){e.servicePackagesList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}ngOnChanges(e){this.items=[],this.division&&(this.items=[],this.items.push({label:this.division.label,labelTranslation:this.division.labelTranslation,data:this.division.data,type:this.division.type,children:this.division.servicePackagesGroups}))}displayPopup(e){this.AddEditServicPackageGroup.nativeElement.click(),this.model={id:0},this.selectedNode=e,this.selectedServices=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleEMRMasterItemActivation(e.data,t.target.checked,this.objectType.ServicePackages).subscribe(function(n){e.isActive=t.target.checked},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}saveServicPackageGroup(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,t&&e.prepareModel(),this.extractSelectedServices(),this.clinicService.saveorUpdateEMRMasterItem(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.nameTranslation=n.nameTranslation,e.selectedNode.labelTranslation=n.nameTranslation,e.selectedNode.children=[],e.selectedNode.children=n.children),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}prepareModel(){this.model.id=0,this.model.objectId=0,this.model.divisionId=this.selectedNode.data,this.model.clinicId=this.clinicId,this.model.objectType=this.objectType.ServicePackages}extractSelectedServices(){let e=[];for(let t of this.selectedServices)e.push(t.data);this.model.relatedObjectsIDs=e}editServicePackageGroup(e){this.selectedNode=e,this.selectedServices=[],this.model={},this.model.id=e.data,this.model.name=e.label,this.model.nameTranslation=e.nameTranslation,this.model.objectId=e.data,this.model.divisionId=e.parent.date,this.model.objectType=this.objectType.ServicePackages;for(let t of e.children)for(let e of this.servicePackagesList)this.highLightSelectedServices(e,t.data,t.type);this.extractSelectedServices(),this.AddEditServicPackageGroup.nativeElement.click()}highLightSelectedServices(e,t,n){e.data==t&&e.type==n&&(this.selectedServices.push(e),this.expandParent(e)),e.children&&e.children.forEach(e=>{this.highLightSelectedServices(e,t,n)})}expandParent(e){e.parent&&(e.parent.expanded=!0,this.expandParent(e.parent))}clear(){this.model={id:0},this.active=!1,this.selectedServices=[],setTimeout(()=>this.active=!0,0),this.filterString=""}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster-servicePackages"]],viewQuery:function(e,t){if(1&e&&a.Lc(Ae,1),2&e){let e;a.uc(e=a.Yb())&&(t.AddEditServicPackageGroup=e.first)}},inputs:{division:"division",isClinicAdmin:"isClinicAdmin",enableAddRootBtn:"enableAddRootBtn",enableEditBtn:"enableEditBtn",enableActivateBtn:"enableActivateBtn"},features:[a.wb],decls:27,vars:6,consts:[[4,"ngIf"],["class","row nopadding",4,"ngIf"],["id","ServicePackagesPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width95percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","departmentServicePackagesGroupForm",4,"ngIf"],[1,"row","nopadding"],[1,"padding5"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#ServicePackagesPopup",1,"btn","btn-primary"],["AddEditServicPackageGroup",""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ClinicDivision"],["pTemplate","ClinicDepartmentServicePackagesGroup"],["pTemplate","ServicePackage"],["src","images/addImage.png","title","Add Division",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],["title","Edit Service Group",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveServiceGroup","name","ChkIsActiveServiceGroup","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cube"],["name","departmentServicePackagesGroupForm",1,"form-horizontal"],["departmentServicePackagesGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["name","txtSearchServices",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","checkbox",3,"value","selection","selectionChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Dc(0,Ne,4,0,"div",0),a.Fc(1,"\n\n"),a.Dc(2,xe,20,2,"div",1),a.Fc(3,"\n\n"),a.Fc(4,"\n"),a.Qb(5,"div",2),a.Fc(6,"\n    "),a.Qb(7,"div",3),a.Fc(8,"\n        "),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",5),a.Fc(13,"\n                "),a.Qb(14,"button",6),a.Fc(15,"\xd7"),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"h4",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n            "),a.Dc(22,Be,74,41,"form",8),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n"),a.Pb(),a.Fc(26,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.division),a.yb(16),a.Gc(a.bc(19,4,"ServicesGroup")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,O.a,E.g,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c,De.a,Ge.a],encapsulation:2}),e})();var Oe=n("D2EG");function Ee(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Xe(e,t){if(1&e&&a.Lb(0,"clinic-tab",33),2&e){const e=a.Zb();a.hc("isEMRMasterSelected",e.selectEMRMasterTab)}}function Ue(e,t){if(1&e&&a.Lb(0,"shared-tabs",33),2&e){const e=a.Zb();a.hc("isEMRMasterSelected",e.selectEMRMasterTab)}}function qe(e,t){if(1&e&&(a.Qb(0,"option",12),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function je(e,t){if(1&e&&(a.Qb(0,"option",12),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}let Ke=(()=>{class e{constructor(e,t,n,i,c){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.accountService=c,this.selectEMRMasterTab=!0,this.medicalDepartments=[],this.lstDepartmentDivisions=[],this.selectedDivision={},this.showProgress=!1,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.enabletabs=!1}ngOnInit(){let e=this;e.showProgress=!0;let t=this.storage.retrieve("ClinicId");this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.clinicService.getAllMedicalDepartments(t).subscribe(function(t){e.medicalDepartments=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}getSelectedDivision(e){"null"!=e?this.getClinicDivisionWithEMR(e):this.selectedDivision=null}fillDepartmentDivisions(e){if("null"!=e){let t=this;t.showProgress=!0,this.clinicService.getDivisionsUnderDepartment(e).subscribe(function(e){t.lstDepartmentDivisions=e},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}}getClinicDivisionWithEMR(e){let t=this;t.showProgress=!0,this.clinicService.getClinicDivisionWithEMR(e).subscribe(function(e){t.selectedDivision=e},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.EMRMaster&&((1==t.fullControl||t.add||t.edit||t.view)&&(this.enabletabs=!0),(1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(t.fullControl||t.activate)&&(this.enableActivateBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRMaster"]],decls:140,vars:89,consts:[[4,"ngIf"],[1,"row"],[3,"isEMRMasterSelected",4,"ngIf"],[1,"row","nopadding"],[1,"NBbreadcrumb"],[1,"well"],[1,"form-horizontal"],[1,"form-group"],["for","ddlMedicalDepartments",1,"col-md-2"],[1,"col-md-6"],["id","ddlMedicalDepartments","name","ddlMedicalDepartments",1,"form-control",3,"change"],["d",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","ddlDivisions",1,"col-md-2"],["id","ddlDivisions","name","ddlDivisions",1,"form-control",3,"change"],["ddlDivisions",""],[1,"nav","nav-pills","tabStyle"],[1,"active"],["href","#diagnosis","data-toggle","pill","aria-expanded","true"],["href","#drugs","data-toggle","pill","aria-expanded","true",1,"btnColor"],["href","#services","data-toggle","pill","aria-expanded","true"],["href","#laboratoryTests","data-toggle","pill","aria-expanded","true"],["href","#radiologyTests","data-toggle","pill","aria-expanded","true"],["href","#servicePackages","data-toggle","pill","aria-expanded","true"],["id","myTabContent",1,"tab-content"],["id","diagnosis",1,"tab-pane","fade","active","in"],[3,"division","isClinicAdmin","enableEditBtn","enableAddRootBtn","enableActivateBtn"],["id","drugs",1,"tab-pane","fade"],["id","services",1,"tab-pane","fade"],["id","laboratoryTests",1,"tab-pane","fade"],["id","radiologyTests",1,"tab-pane","fade"],["id","servicePackages",1,"tab-pane","fade"],[3,"isEMRMasterSelected"]],template:function(e,t){if(1&e){const e=a.Rb();a.Dc(0,Ee,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Dc(4,Xe,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Ue,1,1,"shared-tabs",2),a.Fc(7,"\n\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n       "),a.Qb(18,"div",5),a.Fc(19,"\n           "),a.Qb(20,"form",6),a.Fc(21,"\n               "),a.Qb(22,"div",7),a.Fc(23,"\n                   "),a.Qb(24,"label",8),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                   "),a.Qb(28,"div",9),a.Fc(29,"\n                       "),a.Qb(30,"select",10,11),a.Xb("change",function(){a.wc(e);const n=a.vc(31);return t.fillDepartmentDivisions(n.value)}),a.Fc(32,"\n                           "),a.Qb(33,"option",12),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                           "),a.Dc(37,qe,2,2,"option",13),a.ac(38,"translateObjects"),a.Fc(39,"\n                       "),a.Pb(),a.Fc(40,"\n                   "),a.Pb(),a.Fc(41,"\n               "),a.Pb(),a.Fc(42,"\n               "),a.Qb(43,"div",7),a.Fc(44,"\n                   "),a.Qb(45,"label",14),a.Fc(46),a.ac(47,"translate"),a.Pb(),a.Fc(48,"\n                   "),a.Qb(49,"div",9),a.Fc(50,"\n                       "),a.Qb(51,"select",15,16),a.Xb("change",function(){a.wc(e);const n=a.vc(52);return t.getSelectedDivision(n.value)}),a.Fc(53,"\n                           "),a.Qb(54,"option",12),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                           "),a.Dc(58,je,2,2,"option",13),a.ac(59,"translateObjects"),a.Fc(60,"\n                       "),a.Pb(),a.Fc(61,"\n                   "),a.Pb(),a.Fc(62,"\n               "),a.Pb(),a.Fc(63,"\n           "),a.Pb(),a.Fc(64,"\n\n           "),a.Qb(65,"div",1),a.Fc(66,"\n               "),a.Qb(67,"div",1),a.Fc(68,"\n                   "),a.Qb(69,"ul",17),a.Fc(70,"\n                       "),a.Qb(71,"li",18),a.Qb(72,"a",19),a.Fc(73),a.ac(74,"translate"),a.Pb(),a.Pb(),a.Fc(75,"\n                       "),a.Qb(76,"li"),a.Qb(77,"a",20),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Pb(),a.Fc(80,"\n                       "),a.Qb(81,"li"),a.Qb(82,"a",21),a.Fc(83),a.ac(84,"translate"),a.Pb(),a.Pb(),a.Fc(85,"\n                       "),a.Qb(86,"li"),a.Qb(87,"a",22),a.Fc(88),a.ac(89,"translate"),a.Pb(),a.Pb(),a.Fc(90,"\n                       "),a.Qb(91,"li"),a.Qb(92,"a",23),a.Fc(93),a.ac(94,"translate"),a.Pb(),a.Pb(),a.Fc(95,"\n                       "),a.Qb(96,"li"),a.Qb(97,"a",24),a.Fc(98),a.ac(99,"translate"),a.Pb(),a.Pb(),a.Fc(100,"\n                   "),a.Pb(),a.Fc(101,"\n               "),a.Pb(),a.Fc(102,"\n               "),a.Qb(103,"div",25),a.Fc(104,"\n                   "),a.Qb(105,"div",26),a.Fc(106,"\n                       "),a.Lb(107,"clinic-EMRMaster-diagnosis",27),a.Fc(108,"\n                   "),a.Pb(),a.Fc(109,"\n                   "),a.Qb(110,"div",28),a.Fc(111,"\n                       "),a.Lb(112,"clinic-EMRMaster-drugs",27),a.Fc(113,"\n                   "),a.Pb(),a.Fc(114,"\n                   "),a.Qb(115,"div",29),a.Fc(116,"\n                       "),a.Lb(117,"clinic-EMRMaster-services",27),a.Fc(118,"\n                   "),a.Pb(),a.Fc(119,"\n                   "),a.Qb(120,"div",30),a.Fc(121,"\n                       "),a.Lb(122,"clinic-EMRMaster-laboratoryTests",27),a.Fc(123,"\n                   "),a.Pb(),a.Fc(124,"\n                   "),a.Qb(125,"div",31),a.Fc(126,"\n                       "),a.Lb(127,"clinic-EMRMaster-radiologyTests",27),a.Fc(128,"\n                   "),a.Pb(),a.Fc(129,"\n                   "),a.Qb(130,"div",32),a.Fc(131,"\n                       "),a.Lb(132,"clinic-EMRMaster-servicePackages",27),a.Fc(133,"\n                   "),a.Pb(),a.Fc(134,"\n               "),a.Pb(),a.Fc(135,"\n           "),a.Pb(),a.Fc(136,"\n       "),a.Pb(),a.Fc(137,"\n\n    "),a.Pb(),a.Fc(138,"\n"),a.Pb(),a.Fc(139,"\n\n")}2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(14,61,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(16,63,"EMRMaster"),"\n        "),a.yb(10),a.Hc(" ",a.bc(26,65,"Department"),""),a.yb(8),a.hc("value",null),a.yb(1),a.Gc(a.bc(35,67,"Select")),a.yb(3),a.hc("ngForOf",a.bc(38,69,t.medicalDepartments)),a.yb(9),a.Hc(" ",a.bc(47,71,"Division"),""),a.yb(8),a.hc("value",null),a.yb(1),a.Gc(a.bc(56,73,"Select")),a.yb(3),a.hc("ngForOf",a.bc(59,75,t.lstDepartmentDivisions)),a.yb(14),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(74,77,"Diagnosis")),a.yb(4),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(79,79,"Drugs")),a.yb(4),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(84,81,"Services")),a.yb(4),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(89,83,"LaboratoryTests")),a.yb(4),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(94,85,"RadiologyTests")),a.yb(4),a.Cb("disabled",!t.enabletabs&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(99,87,"ServicePackage")),a.yb(9),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn),a.yb(5),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn),a.yb(5),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn),a.yb(5),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn),a.yb(5),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn),a.yb(5),a.hc("division",t.selectedDivision)("isClinicAdmin",t.isClinicAdmin)("enableEditBtn",t.enableEditBtn)("enableAddRootBtn",t.enableAddRootBtn)("enableActivateBtn",t.enableActivateBtn))},directives:[i.k,c.q,c.g,c.h,c.j,c.r,i.j,W,ce,ue,Pe,Me,He,S.a,y,Oe.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();var Ve=n("cQJI");function $e(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function ze(e,t){if(1&e&&(a.Fc(0,"\n                            "),a.Qb(1,"div",13),a.Fc(2,"\n                     "),a.Qb(3,"div",14),a.Fc(4),a.ac(5,"translate"),a.Pb(),a.Fc(6,"\n                            "),a.Pb(),a.Fc(7,"\n                        ")),2&e){const e=t.$implicit;a.yb(4),a.Gc(a.bc(5,1,e))}}const We=function(){return{height:"300px"}};var Ye=function(e){return e[e.Diagnosis=1]="Diagnosis",e[e.Medication=2]="Medication",e[e.Services=3]="Services",e[e.LabTests=4]="LabTests",e[e.RadiologyTests=5]="RadiologyTests",e[e.Templates=6]="Templates",e[e.Remarks=7]="Remarks",e}({});let _e=(()=>{class e{constructor(e,t,n,i,c){this.administrationService=e,this.localStorage=t,this.toastr=n,this._route=i,this.translate=c,this.selectEMRWizardTab=!0,this.selectAccountTab=!0,this.clinicModel={id:0,isActive:!0},this.concatEmrValue="",this.selectClinicsTab=!0,this.showProgress=!1,this.active=!0}ngOnInit(){this.clinicId=this._route.snapshot.params.id,this.initializeModel()}initializeModel(){let e=this;this.clinicId&&this.clinicId>0&&(this.showProgress=!0,this.administrationService.getClinicById(this.clinicId).subscribe(function(t){e.clinicModel=t,e.wizardItems=e.clinicModel.emrWizardList,e.showProgress=!1},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}))}saveEmrWizard(){let e=this;e.GetEmrWizardOrder(e.wizardItems),e.clinicModel.emrWizardOrder=this.concatEmrValue.substring(0,this.concatEmrValue.length-1),e.showProgress=!0,this.administrationService.updateClinic(e.clinicModel).subscribe(function(t){e.clinicModel=t;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}returnToDefaultOrder(){let e=this;e.clinicModel.emrWizardOrder="1,2,3,4,5,6,7",e.showProgress=!0,this.administrationService.updateClinic(e.clinicModel).subscribe(function(t){e.clinicModel=t;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.initializeModel()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}GetEmrWizardOrder(e){this.concatEmrValue="";for(let t of e)this.emrValue=t,this.concatEmrValue+=Ye[this.emrValue]+","}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(o.a),a.Kb(r.a),a.Kb(l.b),a.Kb(s.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-EMRWizard"]],decls:53,vars:21,consts:[[4,"ngIf"],[1,"row"],[3,"isEMRWizardSelected"],[1,"row","nopadding"],[1,"NBbreadcrumb"],["novalidate","","name","EMRWizardForm",1,"form-horizontal"],["EMRWizardForm","ngForm"],[1,"row","well"],[1,"col-md-6","col-md-offset-8"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-10","col-md-offset-1"],[3,"value","listStyle","responsive","header"],["pTemplate","default"],[1,"ui-helper-clearfix"],[2,"font-size","14px","margin","10px 5px 0 0"]],template:function(e,t){1&e&&(a.Dc(0,$e,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n\n        "),a.Qb(16,"div"),a.Fc(17,"\n            "),a.Qb(18,"form",5,6),a.Fc(20,"\n\n            "),a.Qb(21,"div",7),a.Fc(22,"\n                "),a.Qb(23,"div",8),a.Fc(24,"\n                    "),a.Qb(25,"button",9),a.Xb("click",function(){return t.saveEmrWizard()}),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                    "),a.Qb(29,"button",9),a.Xb("click",function(){return t.returnToDefaultOrder()}),a.Fc(30),a.ac(31,"translate"),a.Pb(),a.Fc(32,"\n                "),a.Pb(),a.Fc(33,"\n            "),a.Pb(),a.Fc(34,"\n            "),a.Lb(35,"br"),a.Fc(36,"\n\n            "),a.Qb(37,"div",7),a.Fc(38,"\n                "),a.Qb(39,"div",10),a.Fc(40,"\n                    "),a.Qb(41,"p-orderList",11),a.ac(42,"translate"),a.Fc(43,"\n                        "),a.Dc(44,ze,8,3,"ng-template",12),a.Fc(45,"\n                    "),a.Pb(),a.Fc(46,"\n\n                "),a.Pb(),a.Fc(47,"\n            "),a.Pb(),a.Fc(48,"\n        "),a.Pb(),a.Fc(49,"\n        "),a.Pb(),a.Fc(50,"\n\n    "),a.Pb(),a.Fc(51,"\n"),a.Pb(),a.Fc(52,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isEMRWizardSelected",t.selectEMRWizardTab),a.yb(7),a.Gc(a.bc(12,10,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,12,"EMRWizard"),"\n        "),a.yb(13),a.Gc(a.bc(27,14,"Save")),a.yb(4),a.Gc(a.bc(31,16,"Cancel")),a.yb(11),a.hc("value",t.wizardItems)("listStyle",a.lc(20,We))("responsive",!0)("header",a.bc(42,18,"EMRWizardItems")))},directives:[i.k,y,c.q,c.g,c.h,Ve.a,E.g,S.a],pipes:[d.c],encapsulation:2}),e})();const Je=["btnReplyToFeedBack"],et=["btnClosePopup"];function tt(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let nt=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectFeedbackTab=!0,this.active=!0,this.showProgress=!1,this.clinicFeedbacksList=[],this.lstToTranslated=[],this.userType="",this.isClinicAdmin=!1}ngOnInit(){this.lstToTranslated=["patientName","patientNameTranslation","lastReplyingUserName","lastReplyingUserNameTranslation"],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0);let e=this;e.showProgress=!0,this.clinicService.getClinicFeedbacks(this.selectedClinicId).subscribe(function(t){e.clinicFeedbacksList=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["view-feedbacks-list"]],viewQuery:function(e,t){if(1&e&&(a.Lc(Je,1),a.Lc(et,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnReplyToFeedBack=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:31,vars:11,consts:[[4,"ngIf"],[1,"row"],[3,"isFeedbackSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""]],template:function(e,t){1&e&&(a.Dc(0,tt,4,0,"div",0),a.Fc(1,"\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n    "),a.Qb(16,"div",5),a.Fc(17,"\n        "),a.Qb(18,"div",6),a.Fc(19,"\n            "),a.Lb(20,"i",7),a.Fc(21,"\n            "),a.Lb(22,"input",8,9),a.ac(24,"translate"),a.Fc(25,"\n        "),a.Pb(),a.Fc(26,"\n\n        "),a.Fc(27,"\n    "),a.Pb(),a.Fc(28,"\n    "),a.Pb(),a.Fc(29,"\n"),a.Pb(),a.Fc(30,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isFeedbackSelected",t.selectFeedbackTab),a.yb(7),a.Gc(a.bc(12,5,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,7,"Feedback"),"\n        "),a.yb(9),a.hc("placeholder",a.bc(24,9,"Search")))},directives:[i.k,y,S.a],pipes:[d.c],encapsulation:2}),e})();class it{}class ct{}function st(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function at(e,t){if(1&e&&(a.Qb(0,"div"),a.Fc(1,"\n                        "),a.Qb(2,"strong"),a.Fc(3),a.Pb(),a.Fc(4,"\n                        "),a.Lb(5,"br"),a.Fc(6,"\n                        "),a.Qb(7,"strong"),a.Fc(8),a.Pb(),a.Fc(9,"\n                        "),a.Lb(10,"br"),a.Fc(11,"\n                        "),a.Qb(12,"strong"),a.Fc(13),a.Pb(),a.Fc(14,"\n                        "),a.Lb(15,"br"),a.Fc(16),a.Lb(17,"hr"),a.Fc(18,"\n                    "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                            ",e.repliedByName,"\n                        "),a.yb(5),a.Hc("\n                            ",e.dateString,"\n                        "),a.yb(5),a.Hc("\n                            ",e.status,"\n                        "),a.yb(3),a.Hc("\n                        ",e.message,"\n                        ")}}let ot=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this._route=i,this.translate=c,this.selectFeedbackTab=!0,this.active=!0,this.showProgress=!1,this.selectedFeedback=new ct,this.toSaveReply=new it,this.feedbackReplies=[],this.userType="",this.isClinicAdmin=!1,this.lstToTranslated=[]}ngOnInit(){if(this.lstToTranslated=["repliedByName","repliedByNameTranslation"],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.recorderId=this.localStorage.retrieve("UserID"),this.selectedFeedbackId=this._route.snapshot.params.id,this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.selectedFeedbackId&&this.selectedFeedbackId>0){let e=this;e.showProgress=!0,this.clinicService.getFeedbackById(e.selectedFeedbackId).subscribe(function(t){e.selectedFeedback=t,e.feedbackReplies=t.replies},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}saveReply(){let e=this;if(this.toSaveReply.message&&""!=this.toSaveReply.message&&""!=this.toSaveReply.message.trim())this.selectedFeedbackId&&this.selectedFeedbackId>0&&(e.showProgress=!0,this.toSaveReply.feedbackId=this.selectedFeedbackId,this.toSaveReply.repliedById=this.recorderId,this.selectedFeedback&&(this.toSaveReply.status=this.selectedFeedback.status),this.clinicService.saveReply(this.toSaveReply).subscribe(function(t){e.feedbackReplies.push(t),e.toSaveReply=new it,e.selectedFeedback&&(e.selectedFeedback.status&&""!=e.selectedFeedback.status?"completed"!=e.selectedFeedback.status.toString().toLowerCase()&&(e.selectedFeedback.status="Replied"):e.selectedFeedback.status="Replied");let n=e.translate.instant("SavedAndSentSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}));else{let t=e.translate.instant("CannotReplyWithEmptyReply");e.toastr.error(t,"")}}saveFeedback(){let e=this;this.selectedFeedback&&(e.showProgress=!0,this.clinicService.updateFeedback(this.selectedFeedback).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(s.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["reply-to-feedback"]],decls:163,vars:57,consts:[[4,"ngIf"],[1,"row"],[3,"isFeedbackSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"col-md-1"],[1,"col-md-10"],[1,"row","text-center"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"routerLink","disabled"],[1,"col-md-2"],[1,"col-md-4"],["name","ddlFeedbackStatus",1,"form-control",3,"ngModel","ngModelChange"],["ddlFeedbackStatus","ngModel"],["value","Submitted"],["value","Replied"],["value","Completed"],[1,"row","table-bordered",2,"padding","20px"],[4,"ngFor","ngForOf"],[1,"row","table-bordered"],[1,"col-md-12"],[1,"form-group",2,"width","100%","height","120px",3,"ngModel","ngModelChange"],[1,"glyphicon","glyphicon-send"]],template:function(e,t){1&e&&(a.Dc(0,st,4,0,"div",0),a.Fc(1,"\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n        "),a.Qb(16,"div",1),a.Fc(17,"\n            "),a.Lb(18,"div",5),a.Fc(19,"\n            "),a.Qb(20,"div",6),a.Fc(21,"\n                "),a.Qb(22,"div",7),a.Fc(23,"\n                    "),a.Qb(24,"button",8),a.Xb("click",function(){return t.saveFeedback()}),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                    "),a.Qb(28,"button",9),a.Fc(29),a.ac(30,"translate"),a.Pb(),a.Fc(31,"\n                "),a.Pb(),a.Fc(32,"\n                "),a.Qb(33,"div",1),a.Fc(34,"\n                    "),a.Qb(35,"div",10),a.Fc(36,"\n                        "),a.Qb(37,"strong"),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n                    "),a.Pb(),a.Fc(41,"\n                    "),a.Qb(42,"div",11),a.Fc(43,"\n                        "),a.Qb(44,"span"),a.Fc(45),a.Pb(),a.Fc(46,"\n                    "),a.Pb(),a.Fc(47,"\n                    "),a.Qb(48,"div",10),a.Fc(49,"\n                        "),a.Qb(50,"strong"),a.Fc(51,"\n                            User ID:\n                        "),a.Pb(),a.Fc(52,"\n                    "),a.Pb(),a.Fc(53,"\n                    "),a.Qb(54,"div",11),a.Fc(55,"\n                        "),a.Qb(56,"span"),a.Fc(57),a.Pb(),a.Fc(58,"\n                    "),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n                "),a.Qb(61,"div",1),a.Fc(62,"\n                    "),a.Qb(63,"div",10),a.Fc(64,"\n                        "),a.Qb(65,"strong"),a.Fc(66),a.ac(67,"translate"),a.Pb(),a.Fc(68,"\n                    "),a.Pb(),a.Fc(69,"\n                    "),a.Qb(70,"div",11),a.Fc(71,"\n                        "),a.Qb(72,"select",12,13),a.Xb("ngModelChange",function(e){return t.selectedFeedback.status=e}),a.Fc(74,"\n                            "),a.Qb(75,"option",14),a.Fc(76),a.ac(77,"translate"),a.Pb(),a.Fc(78,"\n                            "),a.Qb(79,"option",15),a.Fc(80),a.ac(81,"translate"),a.Pb(),a.Fc(82,"\n                            "),a.Qb(83,"option",16),a.Fc(84),a.ac(85,"translate"),a.Pb(),a.Fc(86,"\n                        "),a.Pb(),a.Fc(87,"\n                    "),a.Pb(),a.Fc(88,"\n                    "),a.Qb(89,"div",10),a.Fc(90,"\n                        "),a.Qb(91,"strong"),a.Fc(92),a.ac(93,"translate"),a.Pb(),a.Fc(94,"\n                    "),a.Pb(),a.Fc(95,"\n                    "),a.Qb(96,"div",11),a.Fc(97,"\n                        "),a.Qb(98,"span"),a.Fc(99),a.Pb(),a.Fc(100,"\n                    "),a.Pb(),a.Fc(101,"\n                "),a.Pb(),a.Fc(102,"\n                "),a.Lb(103,"br"),a.Fc(104,"\n                "),a.Qb(105,"div",17),a.Fc(106,"\n                    "),a.Qb(107,"strong"),a.Fc(108),a.ac(109,"translate"),a.Pb(),a.Fc(110,"\n                    "),a.Lb(111,"br"),a.Fc(112),a.Pb(),a.Fc(113,"\n                "),a.Lb(114,"br"),a.Fc(115,"\n                "),a.Qb(116,"strong"),a.Fc(117),a.ac(118,"translate"),a.Pb(),a.Fc(119,"\n                "),a.Qb(120,"div",17),a.Fc(121,"\n                    "),a.Lb(122,"br"),a.Fc(123,"\n                    "),a.Dc(124,at,19,4,"div",18),a.ac(125,"translateObjects"),a.Fc(126,"\n                "),a.Pb(),a.Fc(127,"\n                "),a.Lb(128,"br"),a.Fc(129,"\n                "),a.Qb(130,"div",19),a.Fc(131,"\n                    "),a.Lb(132,"br"),a.Fc(133,"\n                    "),a.Qb(134,"div",1),a.Fc(135,"\n                        "),a.Qb(136,"div",20),a.Fc(137,"\n                            "),a.Qb(138,"textarea",21),a.Xb("ngModelChange",function(e){return t.toSaveReply.message=e}),a.Pb(),a.Fc(139,"\n                        "),a.Pb(),a.Fc(140,"\n                    "),a.Pb(),a.Fc(141,"\n                    "),a.Qb(142,"div",1),a.Fc(143,"\n                        "),a.Lb(144,"div",6),a.Fc(145,"\n                        "),a.Qb(146,"div",5),a.Fc(147,"\n                            "),a.Qb(148,"button",8),a.Xb("click",function(){return t.saveReply()}),a.Fc(149,"\n                                "),a.Lb(150,"i",22),a.Fc(151),a.ac(152,"translate"),a.Pb(),a.Fc(153,"\n                        "),a.Pb(),a.Fc(154,"\n                    "),a.Pb(),a.Fc(155,"\n                    "),a.Lb(156,"br"),a.Fc(157,"\n                "),a.Pb(),a.Fc(158,"\n            "),a.Pb(),a.Fc(159,"\n        "),a.Pb(),a.Fc(160,"\n    "),a.Pb(),a.Fc(161,"\n"),a.Pb(),a.Fc(162,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isFeedbackSelected",t.selectFeedbackTab),a.yb(7),a.Gc(a.bc(12,26,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,28,"Feedback"),"\n        "),a.yb(11),a.ic("disabled",t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(26,30,"Save")),a.yb(3),a.jc("routerLink","/clinic/feedback/all/",t.selectedClinicId,""),a.ic("disabled",t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(30,32,"Back")),a.yb(9),a.Hc("\n                            ",a.bc(39,34,"User"),":\n                        "),a.yb(7),a.Gc(t.selectedFeedback.patientName),a.yb(12),a.Gc(t.selectedFeedback.patientUniqueMRN),a.yb(9),a.Hc("\n                            ",a.bc(67,36,"Status"),":\n                        "),a.yb(6),a.hc("ngModel",t.selectedFeedback.status),a.yb(4),a.Gc(a.bc(77,38,"Submitted")),a.yb(4),a.Gc(a.bc(81,40,"Replied")),a.yb(4),a.Gc(a.bc(85,42,"Completed")),a.yb(8),a.Hc("\n                            ",a.bc(93,44,"FeedbackDate"),":\n                        "),a.yb(7),a.Gc(t.selectedFeedback.dateString),a.yb(9),a.Hc("\n                        ",a.bc(109,46,"FeedbackMessage"),":\n                    "),a.yb(4),a.Hc("\n                    ",t.selectedFeedback.message,"\n                "),a.yb(5),a.Hc("\n                    ",a.bc(118,48,"Replies"),":\n                "),a.yb(7),a.hc("ngForOf",a.ec(125,50,t.feedbackReplies,null,null,t.lstToTranslated)),a.yb(14),a.hc("ngModel",t.toSaveReply.message),a.yb(10),a.ic("disabled",t.isClinicAdmin?"":"disabled"),a.yb(3),a.Hc(" ",a.bc(152,55,"Send"),"\n                            "))},directives:[i.k,y,s.c,c.p,c.f,c.i,c.j,c.r,i.j,c.b,S.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();var rt=n("286d");function lt(e,t){if(1&e&&(a.Qb(0,"tr"),a.Fc(1,"\n                "),a.Qb(2,"td"),a.Fc(3),a.Pb(),a.Fc(4,"\n                "),a.Qb(5,"td"),a.Fc(6),a.Pb(),a.Fc(7,"\n                "),a.Qb(8,"td"),a.Fc(9),a.Pb(),a.Fc(10,"\n                "),a.Qb(11,"td"),a.Fc(12),a.Pb(),a.Fc(13,"\n                "),a.Qb(14,"td"),a.Fc(15),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"td"),a.Fc(18),a.Pb(),a.Fc(19,"\n                "),a.Qb(20,"td"),a.Fc(21),a.Pb(),a.Fc(22,"\n                "),a.Qb(23,"td"),a.Fc(24),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"td"),a.Fc(27),a.Pb(),a.Fc(28,"\n                "),a.Qb(29,"td"),a.Fc(30),a.Pb(),a.Fc(31,"\n                "),a.Qb(32,"td"),a.Fc(33),a.Pb(),a.Fc(34,"\n            "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Gc(e.code),a.yb(3),a.Gc(e.name),a.yb(3),a.Gc(e.onHandQuantity),a.yb(3),a.Gc(e.orderInQuantity),a.yb(3),a.Gc(e.orderOutQuantity),a.yb(3),a.Gc(e.minLevel),a.yb(3),a.Gc(e.maxLevel),a.yb(3),a.Gc(e.minNet),a.yb(3),a.Gc(e.maxNet),a.yb(3),a.Gc(e.unitName),a.yb(3),a.Gc(e.lastPurchasingPrice)}}let dt=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.getUpdatedProduct=!1,this.updateAfterAdjust=!1,this.onAmountUpdatedAfterAdjust=new a.n,this.inventoriesListDiv="InventoriesPrintingArea",this.showProgress=!1,this.isActiveItem=null,this.isNullQuantity=null,this.clinicInventoriesList=[],this.lstToTranslated=[]}ngOnInit(){this.getAllProducts()}ngOnChanges(){let e=this;e.getUpdatedProduct&&1==e.getUpdatedProduct&&(e.getUpdatedProduct=!1,e.getAllProducts()),e.updateAfterAdjust&&1==e.updateAfterAdjust&&(e.updateAfterAdjust=!1,e.getAllProducts())}getAllProducts(){this.lstToTranslated=["name","nameTranslation","unitName","unitNameTranslation"],this.selectedClinicId=this.localStorage.retrieve("ClinicID");let e=this;e.showProgress=!0,this.clinicService.GetClinicProducts(this.selectedClinicId,e.isActiveItem,e.isNullQuantity).subscribe(function(t){e.clinicInventoriesList=t,e.onAmountUpdatedAfterAdjust.emit(!1)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}getAllActiveProducts(e){0==e.checked?(this.isActiveItem=null,this.getAllProducts()):(this.isActiveItem=!0,this.getAllProducts())}getAlluantityNulls(e){0==e.checked?(this.isNullQuantity=null,this.getAllProducts()):(this.isNullQuantity=!0,this.getAllProducts())}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-inventory-list"]],inputs:{getUpdatedProduct:"getUpdatedProduct",updateAfterAdjust:"updateAfterAdjust"},outputs:{onAmountUpdatedAfterAdjust:"onAmountUpdatedAfterAdjust"},features:[a.wb],decls:108,vars:49,consts:[[1,"col-lg-offset-10"],[3,"section"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],[1,"col-md-3"],["type","checkbox","id","activeItem","name","activeItem",1,"checHeight","col-md-1",3,"change"],["activeItem",""],[1,"txtStyle","col-md-9"],["type","checkbox","id","quantityIsNull","name","quantityIsNull",1,"checHeight","col-md-1",3,"change"],["quantityIsNull",""],["id","InventoriesPrintingArea",1,"row","hidden"],[1,"table","table-responsive","table-bordered","table-hover","table-striped"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n"),a.Qb(1,"div",0),a.Fc(2,"\n    "),a.Lb(3,"print-page",1),a.Fc(4,"\n   \n"),a.Pb(),a.Fc(5,"\n"),a.Lb(6,"br"),a.Fc(7,"\n\n"),a.Qb(8,"div",2),a.Fc(9,"\n    "),a.Qb(10,"div",3),a.Fc(11,"\n        "),a.Lb(12,"i",4),a.Fc(13,"\n        "),a.Lb(14,"input",5,6),a.ac(16,"translate"),a.Fc(17,"\n    "),a.Pb(),a.Fc(18,"\n    "),a.Lb(19,"br"),a.Fc(20,"\n\n    "),a.Fc(21,"\n    "),a.Qb(22,"div",7),a.Fc(23,"\n        "),a.Qb(24,"input",8,9),a.Xb("change",function(){a.wc(e);const n=a.vc(25);return t.getAllActiveProducts(n)}),a.Pb(),a.Fc(26,"\n        "),a.Qb(27,"label",10),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n    "),a.Pb(),a.Fc(31,"\n    "),a.Qb(32,"div",7),a.Fc(33,"\n        "),a.Qb(34,"input",11,12),a.Xb("change",function(){a.wc(e);const n=a.vc(35);return t.getAlluantityNulls(n)}),a.Pb(),a.Fc(36,"\n        "),a.Qb(37,"label",10),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n    "),a.Pb(),a.Fc(41,"\n    "),a.Fc(42,"\n    "),a.Fc(43,"\n\n    "),a.Fc(44,"\n"),a.Pb(),a.Fc(45,"\n\n"),a.Qb(46,"div",13),a.Fc(47,"\n    "),a.Qb(48,"table",14),a.Fc(49,"\n        "),a.Qb(50,"thead",15),a.Fc(51,"\n            "),a.Qb(52,"tr"),a.Fc(53,"\n                "),a.Qb(54,"th"),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                "),a.Qb(58,"th"),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                "),a.Qb(62,"th"),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n                "),a.Qb(66,"th"),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n                "),a.Qb(70,"th"),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n                "),a.Qb(74,"th"),a.Fc(75),a.ac(76,"translate"),a.Pb(),a.Fc(77,"\n                "),a.Qb(78,"th"),a.Fc(79),a.ac(80,"translate"),a.Pb(),a.Fc(81,"\n                "),a.Qb(82,"th"),a.Fc(83),a.ac(84,"translate"),a.Pb(),a.Fc(85,"\n                "),a.Qb(86,"th"),a.Fc(87),a.ac(88,"translate"),a.Pb(),a.Fc(89,"\n                "),a.Qb(90,"th"),a.Fc(91),a.ac(92,"translate"),a.Pb(),a.Fc(93,"\n                "),a.Qb(94,"th"),a.Fc(95),a.ac(96,"translate"),a.Pb(),a.Fc(97,"\n            "),a.Pb(),a.Fc(98,"\n        "),a.Pb(),a.Fc(99,"\n        "),a.Qb(100,"tbody"),a.Fc(101,"\n            "),a.Dc(102,lt,35,11,"tr",16),a.ac(103,"translateObjects"),a.Fc(104,"\n        "),a.Pb(),a.Fc(105,"\n    "),a.Pb(),a.Fc(106,"\n"),a.Pb(),a.Fc(107,"\n")}2&e&&(a.yb(3),a.hc("section",t.inventoriesListDiv),a.yb(11),a.hc("placeholder",a.bc(16,16,"Search")),a.yb(14),a.Gc(a.bc(29,18,"ShowActiveItems")),a.yb(10),a.Gc(a.bc(39,20,"ShowNullQuantity")),a.yb(17),a.Gc(a.bc(56,22,"ItemCode")),a.yb(4),a.Gc(a.bc(60,24,"ItemName")),a.yb(4),a.Gc(a.bc(64,26,"OnhandQuantity")),a.yb(4),a.Gc(a.bc(68,28,"OrderIn")),a.yb(4),a.Gc(a.bc(72,30,"OrderOut")),a.yb(4),a.Gc(a.bc(76,32,"MinLevel")),a.yb(4),a.Gc(a.bc(80,34,"MaxLevel")),a.yb(4),a.Gc(a.bc(84,36,"MinNet")),a.yb(4),a.Gc(a.bc(88,38,"MaxNet")),a.yb(4),a.Gc(a.bc(92,40,"Unit")),a.yb(4),a.Gc(a.bc(96,42,"LastPurchasePrice")),a.yb(7),a.hc("ngForOf",a.ec(103,44,t.clinicInventoriesList,null,null,t.lstToTranslated)))},directives:[rt.a,i.j],pipes:[d.c,Ge.a],encapsulation:2}),e})();var bt=n("x9ak");function ut(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                    ",t.$implicit.label,"\n                    \xa0 \xa0\n                ")}function ht(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                    ",t.$implicit.label,"\n                    \xa0 \xa0\n                ")}function pt(e,t){if(1&e&&(a.Fc(0,"\n                    "),a.Qb(1,"span",31),a.Lb(2,"i",32),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                    \xa0\n                    ",e.label,"\n                ")}}function gt(e,t){if(1&e&&(a.Fc(0,"\n                    "),a.Qb(1,"span"),a.Lb(2,"i",33),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(3);a.yb(1),a.Bb("nav-icon ",n.isSelectedGroupNode?"bg-danger":"",""),a.yb(2),a.Hc("\n                    \xa0\n                    ",e.label,"\n                ")}}function mt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",23),a.Fc(1,"\n\n        "),a.Qb(2,"div",24),a.Fc(3,"\n            "),a.Fc(4,"\n            "),a.Qb(5,"p-tree",25,26),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb(2).selectedGroup=t})("onNodeSelect",function(t){return a.wc(e),a.Zb(2).nodeSelect(t)}),a.ac(7,"filterbynameorcode"),a.Fc(8,"\n                "),a.Dc(9,ut,1,1,"ng-template",27),a.Fc(10,"\n                "),a.Dc(11,ht,1,1,"ng-template",28),a.Fc(12,"\n                "),a.Dc(13,pt,4,1,"ng-template",29),a.Fc(14,"\n                "),a.Dc(15,gt,4,4,"ng-template",30),a.Fc(16,"\n            "),a.Pb(),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(5),a.hc("value",a.dc(7,2,e.treeDataSourceItems,e.filterString,e.leafType))("selection",e.selectedGroup)}}function Ft(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",10),a.Fc(1,"\n            "),a.Qb(2,"div",11),a.Fc(3,"\n                "),a.Qb(4,"label",34),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Qb(8,"div",13),a.Fc(9,"\n                    "),a.Qb(10,"input",35,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicInventoryObject.onHandQuantity=t}),a.Pb(),a.Fc(12,"\n                    "),a.Qb(13,"div",37),a.Fc(14),a.ac(15,"translate"),a.Pb(),a.Fc(16,"\n                "),a.Pb(),a.Fc(17,"\n            "),a.Pb(),a.Fc(18,"\n        "),a.Pb()}if(2&e){const e=a.vc(11),t=a.Zb(2);a.yb(5),a.Gc(a.bc(6,4,"OnhandQuantity")),a.yb(5),a.hc("ngModel",t.clinicInventoryObject.onHandQuantity),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                        ",a.bc(15,6,"RequiredField"),"\n                    ")}}function vt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",10),a.Fc(1,"\n            "),a.Qb(2,"div",11),a.Fc(3,"\n                "),a.Qb(4,"label",34),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Qb(8,"div",13),a.Fc(9,"\n                    "),a.Qb(10,"input",38,36),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicInventoryObject.onHandQuantity=t}),a.Pb(),a.Fc(12,"\n                    "),a.Qb(13,"div",37),a.Fc(14),a.ac(15,"translate"),a.Pb(),a.Fc(16,"\n                "),a.Pb(),a.Fc(17,"\n            "),a.Pb(),a.Fc(18,"\n        "),a.Pb()}if(2&e){const e=a.vc(11),t=a.Zb(2);a.yb(5),a.Gc(a.bc(6,4,"OnhandQuantity")),a.yb(5),a.hc("ngModel",t.clinicInventoryObject.onHandQuantity),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                        ",a.bc(15,6,"RequiredField"),"\n                    ")}}function ft(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",39),a.Fc(1,"\n                       "),a.Qb(2,"label",40),a.Fc(3),a.ac(4,"translate"),a.Pb(),a.Fc(5,"\n                       "),a.Qb(6,"div",41),a.Fc(7,"\n                           "),a.Qb(8,"textarea",42,43),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicInventoryObject.description=t}),a.Pb(),a.Fc(10,"\n\n                       "),a.Pb(),a.Fc(11,"\n                   "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(3),a.Hc(" ",a.bc(4,2,"Remarks"),""),a.yb(5),a.hc("ngModel",e.clinicInventoryObject.description)}}function Pt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",39),a.Fc(1,"\n                       "),a.Qb(2,"label",40),a.Fc(3),a.ac(4,"translate"),a.Pb(),a.Fc(5,"\n                       "),a.Qb(6,"div",41),a.Fc(7,"\n                           "),a.Qb(8,"textarea",44,43),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).clinicInventoryObject.description=t}),a.Pb(),a.Fc(10,"\n                       "),a.Pb(),a.Fc(11,"\n                   "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(3),a.Hc(" ",a.bc(4,2,"Remarks"),""),a.yb(5),a.hc("ngModel",e.clinicInventoryObject.description)}}function yt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",39),a.Fc(1,"\n            "),a.Qb(2,"div",45),a.Fc(3,"\n                "),a.Qb(4,"button",46),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Qb(8,"button",47),a.Xb("click",function(){return a.wc(e),a.Zb(2).clear()}),a.Fc(9),a.ac(10,"translate"),a.Pb(),a.Fc(11,"\n            "),a.Pb(),a.Fc(12,"\n        "),a.Pb()}if(2&e){a.Zb();const e=a.vc(1),t=a.Zb();a.yb(4),a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(6,3,"Save")),a.yb(4),a.Gc(a.bc(10,5,"Cancel"))}}function Qt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",6,7),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n\n    "),a.Dc(3,mt,19,6,"div",8),a.Fc(4,"\n    "),a.Qb(5,"div",9),a.Fc(6,"\n        "),a.Qb(7,"div",10),a.Fc(8,"\n            "),a.Qb(9,"div",11),a.Fc(10,"\n                "),a.Qb(11,"label",12),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                "),a.Qb(15,"div",13),a.Fc(16,"\n                    "),a.Qb(17,"input",14,15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.code=t}),a.Pb(),a.Fc(19,"\n\n                "),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n        "),a.Pb(),a.Fc(22,"\n        "),a.Qb(23,"div",10),a.Fc(24,"\n            "),a.Qb(25,"div",11),a.Fc(26,"\n                "),a.Qb(27,"label",16),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                "),a.Qb(31,"div",13),a.Fc(32,"\n                    "),a.Qb(33,"input",17,18),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.unitName=t}),a.Pb(),a.Fc(35,"\n\n                "),a.Pb(),a.Fc(36,"\n            "),a.Pb(),a.Fc(37,"\n        "),a.Pb(),a.Fc(38,"\n        "),a.Dc(39,Ft,19,8,"div",19),a.Fc(40,"\n\n        "),a.Dc(41,vt,19,8,"div",19),a.Fc(42,"\n        "),a.Qb(43,"div",11),a.Fc(44,"\n           "),a.Qb(45,"div",20),a.Fc(46,"\n               "),a.Qb(47,"div",21),a.Fc(48,"\n                   "),a.Dc(49,ft,12,4,"div",22),a.Fc(50,"\n                   "),a.Dc(51,Pt,12,4,"div",22),a.Fc(52,"\n               "),a.Pb(),a.Fc(53,"\n           "),a.Pb(),a.Fc(54,"\n        "),a.Pb(),a.Fc(55,"\n\n     \n        "),a.Dc(56,yt,13,7,"div",22),a.Fc(57,"\n\n    "),a.Pb(),a.Fc(58,"\n\n"),a.Pb()}if(2&e){const e=a.Zb();a.yb(3),a.hc("ngIf",!e.isDetailsVisible),a.yb(9),a.Gc(a.bc(13,10,"ItemCode")),a.yb(5),a.hc("ngModel",e.clinicInventoryObject.code),a.yb(11),a.Gc(a.bc(29,12,"Unit")),a.yb(5),a.hc("ngModel",e.clinicInventoryObject.unitName),a.yb(6),a.hc("ngIf",e.hideOnHandQuantity),a.yb(2),a.hc("ngIf",e.showOnHandQuantity),a.yb(8),a.hc("ngIf",e.hideOnHandQuantity),a.yb(2),a.hc("ngIf",e.showOnHandQuantity),a.yb(5),a.hc("ngIf",e.hideOnHandQuantity)}}let St=(()=>{class e{constructor(e,t,n,i,c,s){this.sharedService=e,this.toastr=t,this._route=n,this.storage=i,this.clinicService=c,this.translate=s,this.enableSaveBtn=!1,this.isClinicAdmin=!1,this.selectInventoryTab=!0,this.isDetailsVisible=!0,this.Medical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"Medical Products",value:"Medical",type:"Medical",productGroupType:"Medical",parentGroupId:1,parentName:"Medical Product",children:[]},this.NonMedical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u063a\u064a\u0631 \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"NonMedical Products",value:"NonMedical",type:"NonMedical",productGroupType:"NonMedical",parentGroupId:2,parentName:"NonMedical Product",children:[]},this.isSelectedGroupNode=!1,this.hideOnHandQuantity=!0,this.showOnHandQuantity=!1,this.model={},this.inventoryRequestModel={},this.active=!0,this.clinicInventoryObject={},this.productObject={},this.classifications=[],this.showProgress=!1,this.productList=[],this.treeDataSourceItems=[],this.doctorName="",this.leafType="Product",this.code="",this.productName="",this.lstToTranslated=[],this.translateObjects=new Ge.a(this.storage)}ngOnInit(){this.lstToTranslated=["label","labelTranslation"],this.treeDataSourceItems.push(this.Medical),this.treeDataSourceItems.push(this.NonMedical),this.selectedClinicId=this.storage.retrieve("ClinicID"),this.getProductsGroupsForTree(),this.doctorId=this.storage.retrieve("UserID"),this.clinicInventoryObject.recorderId=this.doctorId,this.clinicInventoryObject.clinicId=this.selectedClinicId}getProductsGroupsForTree(){let e=this;e.showProgress=!0,this.clinicService.getActiveProductsGroupsForTreeView(e.selectedClinicId).subscribe(function(t){e.Medical.children=[],e.NonMedical.children=[];for(let n of t)null==n.parent&&"Medical"==n.productGroupType?e.Medical.children.push(n):null==n.parent&&"NonMedical"==n.productGroupType&&e.NonMedical.children.push(n);e.translateObjects.transform(e.treeDataSourceItems,"",null,e.lstToTranslated)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}onSubmit(){let e=this;this.clinicInventoryObject.productId>0&&this.clinicService.updateClinicQuantity(e.clinicInventoryObject).subscribe(function(t){e.clinicInventoryObject=t;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clear(),e.getProductsGroupsForTree(),e.hideOnHandQuantity=!1,e.showOnHandQuantity=!0},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}clear(){this.clinicInventoryObject={},this.active=!1,setTimeout(()=>this.active=!0,0)}nodeSelect(e){if(this.clear(),this.showOnHandQuantity=!1,this.hideOnHandQuantity=!0,"Product"==e.node.type){if(e.node.id&&e.node.onHandQuantity>0){this.clinicInventoryObject.onHandQuantity=e.node.onHandQuantity,this.hideOnHandQuantity=!1,this.showOnHandQuantity=!0;let t=this.translate.instant("OnhandQuantityExist");this.toastr.warning(t,e.node.name)}this.clinicInventoryObject.itemName=e.node.name,this.clinicInventoryObject.id=e.node.id,this.clinicInventoryObject.productId=e.node.data,this.clinicInventoryObject.code=e.node.code,this.clinicInventoryObject.description=e.node.description,this.doctorName=e.node.label,this.clinicInventoryObject.unitName=null!=e.node.heightUnit?e.node.heightUnit.name:null!=e.node.weightUnit?e.node.weightUnit.name:null!=e.node.volumeUnit?e.node.volumeUnit.name:"Number Unit"}}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(bt.a),a.Kb(l.b),a.Kb(s.a),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-inventory-add-quantity"]],inputs:{enableSaveBtn:"enableSaveBtn",isClinicAdmin:"isClinicAdmin"},decls:19,vars:5,consts:[[1,"row","nopadding"],[1,"col-md-6"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["novalidate","","class","form-horizontal","name","inventoryOrderForm",3,"ngSubmit",4,"ngIf"],["novalidate","","name","inventoryOrderForm",1,"form-horizontal",3,"ngSubmit"],["inventoryOrderForm","ngForm"],["id","divTable","class","paddSt",4,"ngIf"],[1,"row","well"],[1,"form-group","col-md-4"],[1,"row"],["for","code",1,"control-label","col-md-3"],[1,"col-md-9"],["id","code","name","code","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["code","ngModel"],["for","unit",1,"control-label","col-md-3"],["id","unitName","name","unitName","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["unitName","ngModel"],["class","form-group col-md-4",4,"ngIf"],[1,"col-md-12"],[1,"form-group","row"],["class","form-group",4,"ngIf"],["id","divTable",1,"paddSt"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["tree",""],["pTemplate","Medical"],["pTemplate","NonMedical"],["pTemplate","Product"],["pTemplate","ProductsGroup"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-cubes"],["for","onHandQuantity",1,"control-label","col-md-3"],["type","text","min","1","pattern","\\d+","id","onHandQuantity","name","onHandQuantity","required","",1,"form-control",3,"ngModel","ngModelChange"],["onHandQuantity","ngModel"],[1,"alert","alert-danger",3,"hidden"],["type","text","min","1","pattern","\\d+","id","onHandQuantity","name","onHandQuantity","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group"],["for","remark",1,"control-label","col-md-1"],[1,"col-md-11"],["rows","5","id","txtRemarks","name","txtRemarks",1,"remarkStyle","form-control",3,"ngModel","ngModelChange"],["txtRemarks","ngModel"],["rows","5","id","txtRemarks","name","txtRemarks","readonly","",1,"remarkStyle","form-control",3,"ngModel","ngModelChange"],[1,"col-md-4","col-md-offset-1"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Fc(0,"\n"),a.Lb(1,"br"),a.Fc(2,"\n"),a.Qb(3,"div",0),a.Fc(4,"\n    "),a.Qb(5,"div",1),a.Fc(6,"\n        "),a.Qb(7,"div",2),a.Fc(8,"\n            "),a.Lb(9,"i",3),a.Fc(10,"\n            "),a.Qb(11,"input",4),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(12,"translate"),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n\n    "),a.Pb(),a.Fc(15,"\n"),a.Pb(),a.Fc(16,"\n"),a.Dc(17,Qt,59,14,"form",5),a.Fc(18,"\n")),2&e&&(a.yb(11),a.hc("placeholder",a.bc(12,3,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(6),a.hc("ngIf",t.active))},directives:[c.b,c.f,c.i,i.k,c.q,c.g,c.h,c.o,O.a,E.g,c.l],pipes:[d.c,De.a],encapsulation:2}),e})();function Ct(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                        ",t.$implicit.label,"\n                        \xa0 \xa0\n                    ")}function wt(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                        ",t.$implicit.label,"\n                        \xa0 \xa0\n                    ")}function It(e,t){if(1&e&&(a.Fc(0,"\n                        "),a.Qb(1,"span",42),a.Lb(2,"i",43),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                        \xa0\n                        ",e.label,"\n                    ")}}function Tt(e,t){if(1&e&&(a.Fc(0,"\n                        "),a.Qb(1,"span"),a.Lb(2,"i",44),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit,n=a.Zb(3);a.yb(1),a.Bb("nav-icon ",n.isSelectedGroupNode?"bg-danger":"",""),a.yb(2),a.Hc("\n                        \xa0\n                        ",e.label,"\n                    ")}}function Mt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",34),a.Fc(1,"\n\n            "),a.Qb(2,"div",35),a.Fc(3,"\n                "),a.Fc(4,"\n                "),a.Qb(5,"p-tree",36,37),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb(2).selectedGroup=t})("onNodeSelect",function(t){return a.wc(e),a.Zb(2).nodeSelect(t)}),a.ac(7,"filterbynameorcode"),a.Fc(8,"\n                    "),a.Dc(9,Ct,1,1,"ng-template",38),a.Fc(10,"\n                    "),a.Dc(11,wt,1,1,"ng-template",39),a.Fc(12,"\n                    "),a.Dc(13,It,4,1,"ng-template",40),a.Fc(14,"\n                    "),a.Dc(15,Tt,4,4,"ng-template",41),a.Fc(16,"\n                "),a.Pb(),a.Fc(17,"\n            "),a.Pb(),a.Fc(18,"\n        "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(5),a.hc("value",a.dc(7,2,e.treeDataSourceItems,e.filterString,e.leafType))("selection",e.selectedGroup)}}function Dt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",6,7),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n\n\n        "),a.Dc(3,Mt,19,6,"div",8),a.Fc(4,"\n    "),a.Qb(5,"div",9),a.Fc(6,"\n        "),a.Qb(7,"div",10),a.Fc(8,"\n            "),a.Qb(9,"div",11),a.Fc(10,"\n                "),a.Qb(11,"label",12),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                "),a.Qb(15,"div",13),a.Fc(16,"\n                    "),a.Qb(17,"input",14,15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.code=t}),a.Pb(),a.Fc(19,"\n                "),a.Pb(),a.Fc(20,"\n            "),a.Pb(),a.Fc(21,"\n        "),a.Pb(),a.Fc(22,"\n        \n        "),a.Qb(23,"div",10),a.Fc(24,"\n            "),a.Qb(25,"div",11),a.Fc(26,"\n                "),a.Qb(27,"label",16),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                "),a.Qb(31,"div",13),a.Fc(32,"\n                    "),a.Qb(33,"input",17,18),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.product.onHandQuantity=t}),a.Pb(),a.Fc(35,"\n                    "),a.Qb(36,"div",19),a.Fc(37),a.ac(38,"translate"),a.Pb(),a.Fc(39,"\n                "),a.Pb(),a.Fc(40,"\n            "),a.Pb(),a.Fc(41,"\n        "),a.Pb(),a.Fc(42,"\n\n        "),a.Qb(43,"div",10),a.Fc(44,"\n            "),a.Qb(45,"div",11),a.Fc(46,"\n                "),a.Qb(47,"label",20),a.Fc(48),a.ac(49,"translate"),a.Pb(),a.Fc(50,"\n                "),a.Qb(51,"div",21),a.Fc(52,"\n                    "),a.Qb(53,"input",22,23),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.adjustmentQuantity=t}),a.Pb(),a.Fc(55,"\n                    "),a.Qb(56,"div",19),a.Fc(57),a.ac(58,"translate"),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n            "),a.Pb(),a.Fc(61,"\n        "),a.Pb(),a.Fc(62,"\n        \n\n        "),a.Qb(63,"div",11),a.Fc(64,"\n            "),a.Qb(65,"div",24),a.Fc(66,"\n                "),a.Qb(67,"div",25),a.Fc(68,"\n                    "),a.Qb(69,"div",26),a.Fc(70,"\n                        "),a.Qb(71,"label",27),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n                        "),a.Qb(75,"div",28),a.Fc(76,"\n                            "),a.Qb(77,"textarea",29,30),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicInventoryObject.description=t}),a.Pb(),a.Fc(79,"\n                        "),a.Pb(),a.Fc(80,"\n                    "),a.Pb(),a.Fc(81,"\n                "),a.Pb(),a.Fc(82,"\n            "),a.Pb(),a.Fc(83,"\n        "),a.Pb(),a.Fc(84,"\n        "),a.Qb(85,"div",26),a.Fc(86,"\n            "),a.Qb(87,"div",31),a.Fc(88,"\n                "),a.Qb(89,"button",32),a.Fc(90),a.ac(91,"translate"),a.Pb(),a.Fc(92,"\n                "),a.Qb(93,"button",33),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(94),a.ac(95,"translate"),a.Pb(),a.Fc(96,"\n            "),a.Pb(),a.Fc(97,"\n        "),a.Pb(),a.Fc(98,"\n\n    "),a.Pb(),a.Fc(99,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(34),n=a.vc(54),i=a.Zb();a.yb(3),a.hc("ngIf",!i.isDetailsVisible),a.yb(9),a.Gc(a.bc(13,16,"ItemCode")),a.yb(5),a.hc("ngModel",i.clinicInventoryObject.code),a.yb(11),a.Gc(a.bc(29,18,"OnhandQuantity")),a.yb(5),a.hc("ngModel",i.clinicInventoryObject.product.onHandQuantity),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                        ",a.bc(38,20,"RequiredField"),"\n                    "),a.yb(11),a.Gc(a.bc(49,22,"AdjustmentQuantity")),a.yb(5),a.hc("ngModel",i.clinicInventoryObject.adjustmentQuantity),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                        ",a.bc(58,24,"RequiredField"),"\n                    "),a.yb(15),a.Hc(" ",a.bc(73,26,"Remarks"),""),a.yb(5),a.hc("ngModel",i.clinicInventoryObject.description),a.yb(12),a.hc("disabled",!e.valid),a.yb(1),a.Gc(a.bc(91,28,"Save")),a.yb(4),a.Gc(a.bc(95,30,"Cancel"))}}let Gt=(()=>{class e{constructor(e,t,n,i,c,s){this.sharedService=e,this.toastr=t,this._route=n,this.storage=i,this.clinicService=c,this.translate=s,this.selectInventoryTab=!0,this.title="",this.onAmountUpdated=new a.n,this.isDetailsVisible=!0,this.Medical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"Medical Products",value:"Medical",type:"Medical",productGroupType:"Medical",parentGroupId:1,parentName:"Medical Products",children:[]},this.NonMedical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u063a\u064a\u0631 \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"NonMedical Products",value:"NonMedical",type:"NonMedical",productGroupType:"NonMedical",parentGroupId:2,parentName:"NonMedical Products",children:[]},this.isSelectedGroupNode=!1,this.model={},this.inventoryRequestModel={},this.active=!0,this.clinicInventoryObject={product:{}},this.productObject={},this.classifications=[],this.showProgress=!1,this.productList=[],this.treeDataSourceItems=[],this.doctorName="",this.leafType="Product",this.code="",this.productName="",this.lstToTranslated=[],this.translateObjects=new Ge.a(this.storage)}ngOnInit(){this.lstToTranslated=["label","labelTranslation"],this.selectedClinicId=this.storage.retrieve("ClinicID"),this.recordedId=this.storage.retrieve("UserID"),this.treeDataSourceItems.push(this.Medical),this.treeDataSourceItems.push(this.NonMedical),this.getProductsGroupsForTree(),(null==this.clinicInventoryObject.product||null==this.clinicInventoryObject.product)&&(this.clinicInventoryObject.product={})}getProductsGroupsForTree(){let e=this;e.showProgress=!0,this.clinicService.getActiveProductsGroupsForTreeView(e.selectedClinicId).subscribe(function(t){e.Medical.children=[],e.NonMedical.children=[];for(let n of t)null==n.parent&&"Medical"==n.productGroupType?e.Medical.children.push(n):null==n.parent&&"NonMedical"==n.productGroupType&&e.NonMedical.children.push(n);e.translateObjects.transform(e.treeDataSourceItems,"",null,e.lstToTranslated)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}onSubmit(){let e=this;this.clinicInventoryObject.clinicId=this.selectedClinicId,this.clinicInventoryObject.recorderId=this.recordedId,this.clinicInventoryObject.productId>0&&this.clinicService.CreateClinicQuantityAdjustment(this.clinicInventoryObject).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clinicInventoryObject=t,e.onAmountUpdated.emit(!0),e.clear()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}clear(){this.clinicInventoryObject={product:{}},this.active=!1,setTimeout(()=>this.active=!0,0)}nodeSelect(e){if(this.clear(),"Product"==e.node.type){let t=this;this.clinicInventoryObject.itemName=e.node.name,this.clinicInventoryObject.id=e.node.id,this.clinicInventoryObject.productId=e.node.data,this.clinicInventoryObject.code=e.node.code,this.doctorName=e.node.label,this.clinicInventoryObject.id>0&&this.clinicService.getProductById(this.clinicInventoryObject.id).subscribe(function(e){t.productObject=e,t.clinicInventoryObject.product.onHandQuantity=t.productObject.onHandQuantity})}}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(bt.a),a.Kb(l.b),a.Kb(s.a),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-inventory-adjust-quantity"]],inputs:{title:"title"},outputs:{onAmountUpdated:"onAmountUpdated"},decls:18,vars:5,consts:[[1,"row","nopadding"],[1,"col-md-6"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["novalidate","","class","form-horizontal","name","inventoryOrderForm",3,"ngSubmit",4,"ngIf"],["novalidate","","name","inventoryOrderForm",1,"form-horizontal",3,"ngSubmit"],["inventoryOrderForm","ngForm"],["id","divTable","class","paddSt",4,"ngIf"],[1,"row","well"],[1,"form-group","col-md-4"],[1,"row"],["for","code",1,"control-label","col-md-3"],[1,"col-md-9"],["id","code","name","code","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["code","ngModel"],["for","onHandQuantity",1,"control-label","col-md-3"],["type","number","id","onHandQuantity","name","onHandQuantity","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["onHandQuantity","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","adjustmentQuantity",1,"control-label","col-md-4"],[1,"col-md-8"],["type","number","min","0","step","1","id","adjustmentQuantity","name","adjustmentQuantity","required","",1,"form-control",3,"ngModel","ngModelChange"],["adjustmentQuantity","ngModel"],[1,"col-md-12"],[1,"form-group","row"],[1,"form-group"],["for","remark",1,"control-label","col-md-1"],[1,"col-md-11"],["rows","5","id","txtRemarks","name","txtRemarks",1,"remarkStyle","form-control",3,"ngModel","ngModelChange"],["txtRemarks","ngModel"],[1,"col-md-4","col-md-offset-1"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-primary",3,"click"],["id","divTable",1,"paddSt"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["tree",""],["pTemplate","Medical"],["pTemplate","NonMedical"],["pTemplate","Product"],["pTemplate","ProductsGroup"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-cubes"]],template:function(e,t){1&e&&(a.Fc(0,"\n"),a.Lb(1,"br"),a.Fc(2,"\n"),a.Qb(3,"div",0),a.Fc(4,"\n    "),a.Qb(5,"div",1),a.Fc(6,"\n        "),a.Qb(7,"div",2),a.Fc(8,"\n            "),a.Lb(9,"i",3),a.Fc(10,"\n            "),a.Qb(11,"input",4),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(12,"translate"),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n\n    "),a.Pb(),a.Fc(15,"\n\n"),a.Pb(),a.Fc(16,"\n"),a.Dc(17,Dt,100,32,"form",5)),2&e&&(a.yb(11),a.hc("placeholder",a.bc(12,3,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(6),a.hc("ngIf",t.active))},directives:[c.b,c.f,c.i,i.k,c.q,c.g,c.h,c.o,c.k,O.a,E.g],pipes:[d.c,De.a],encapsulation:2}),e})(),At=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.clinicInventoriesHistoryList=[],this.showProgress=!1,this.selectInventoryTab=!0,this.updates="",this.lstToTranslated=[]}ngOnInit(){this.lstToTranslated=["productName","productNameTranslation","recordedBy","recordedByTranslation"],this.getAllAdjustmentHistory()}ngOnChanges(e){this.getAllAdjustmentHistory()}getAllAdjustmentHistory(){this.selectedClinicId=this.localStorage.retrieve("ClinicID");let e=this;e.showProgress=!0,this.clinicService.getAllQuantityAdjustment(this.selectedClinicId).subscribe(function(t){e.clinicInventoriesHistoryList=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-inventory-adjustment-history"]],inputs:{updates:"updates"},features:[a.wb],decls:14,vars:3,consts:[[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""]],template:function(e,t){1&e&&(a.Lb(0,"br"),a.Fc(1,"\n"),a.Qb(2,"div",0),a.Fc(3,"\n    "),a.Qb(4,"div",1),a.Fc(5,"\n        "),a.Lb(6,"i",2),a.Fc(7,"\n        "),a.Lb(8,"input",3,4),a.ac(10,"translate"),a.Fc(11,"\n    "),a.Pb(),a.Fc(12,"\n\n    "),a.Fc(13,"\n"),a.Pb()),2&e&&(a.yb(8),a.hc("placeholder",a.bc(10,1,"Search")))},pipes:[d.c],encapsulation:2}),e})();var Nt=n("Yp+s"),kt=n("eO1q");function Lt(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Rt(e,t){if(1&e&&a.Lb(0,"clinic-tab",57),2&e){const e=a.Zb();a.hc("isInventorySelected",e.selectInventoryTab)}}function xt(e,t){if(1&e&&a.Lb(0,"shared-tabs",57),2&e){const e=a.Zb();a.hc("isInventorySelected",e.selectInventoryTab)}}function Zt(e,t){if(1&e&&(a.Qb(0,"option",58),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function Bt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                             "),a.Qb(2,"input",59),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().selectRequestStatus(n.value)}),a.Pb(),a.Fc(3),a.ac(4,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.ic("value",e.value),a.hc("checked",e.value==n.defaultRequestStatus),a.yb(1),a.Hc("\xa0",a.bc(4,3,e.text),"\n                                             \xa0\xa0\n                                         ")}}function Ht(e,t){if(1&e&&(a.Qb(0,"option",58),a.Fc(1),a.ac(2,"translate"),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.value),a.yb(1),a.Gc(a.bc(2,2,e.text))}}function Ot(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",11),a.Fc(1,"\n                             "),a.Qb(2,"label",60),a.Fc(3),a.Pb(),a.Fc(4,"\n                             "),a.Qb(5,"div",47),a.Fc(6,"\n                                 "),a.Qb(7,"input",61),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().searchCriteria.duration=t}),a.Pb(),a.Fc(8,"\n                             "),a.Pb(),a.Fc(9,"\n                         "),a.Pb()}if(2&e){const e=a.Zb();a.yb(3),a.Gc(e.durationLabel),a.yb(4),a.hc("ngModel",e.searchCriteria.duration)}}const Et=function(){return{standalone:!0}};function Xt(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",11),a.Fc(1,"\n                             "),a.Qb(2,"label",23),a.Fc(3),a.ac(4,"translate"),a.Pb(),a.Fc(5,"\n                             "),a.Qb(6,"div",47),a.Fc(7,"\n                                 "),a.Qb(8,"p-calendar",62),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().searchCriteria.startDate=t}),a.Pb(),a.Fc(9,"\n                             "),a.Pb(),a.Fc(10,"\n                             "),a.Qb(11,"label",23),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                             "),a.Qb(15,"div",47),a.Fc(16,"\n                                 "),a.Qb(17,"p-calendar",62),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().searchCriteria.endDate=t}),a.Pb(),a.Fc(18,"\n                             "),a.Pb(),a.Fc(19,"\n                         "),a.Pb()}if(2&e){const e=a.Zb();a.yb(3),a.Gc(a.bc(4,14,"From")),a.yb(5),a.hc("ngModel",e.searchCriteria.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",a.lc(18,Et)),a.yb(4),a.Gc(a.bc(13,16,"To")),a.yb(5),a.hc("ngModel",e.searchCriteria.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",a.lc(19,Et))}}function Ut(e,t){if(1&e&&(a.Qb(0,"tr"),a.Fc(1,"\n                        "),a.Qb(2,"td"),a.Fc(3),a.Pb(),a.Fc(4,"\n                        "),a.Qb(5,"td"),a.Fc(6),a.Pb(),a.Fc(7,"\n                        "),a.Qb(8,"td"),a.Fc(9),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"td"),a.Fc(12),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"td"),a.Fc(15),a.Pb(),a.Fc(16,"\n                        "),a.Qb(17,"td"),a.Fc(18),a.Pb(),a.Fc(19,"\n                        "),a.Qb(20,"td"),a.Fc(21),a.Pb(),a.Fc(22,"\n                        "),a.Qb(23,"td"),a.Fc(24),a.Pb(),a.Fc(25,"\n                        "),a.Qb(26,"td"),a.Fc(27),a.Pb(),a.Fc(28,"\n                    "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Gc(e.creationDateString),a.yb(3),a.Gc(e.inventoryCode),a.yb(3),a.Gc(e.itemName),a.yb(3),a.Gc(e.quantity),a.yb(3),a.Gc(e.suppliedQuantity),a.yb(3),a.Gc(e.unitName),a.yb(3),a.Gc(e.doctorName),a.yb(3),a.Gc(e.departmentName),a.yb(3),a.Gc(e.inventoryRequestStatus)}}let qt=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.onProductSupplied=new a.n,this.utilityClass=new Nt.a,this.inventoriesListDiv="incomingRequestsPrintingArea",this.selectInventoryTab=!0,this.showProgress=!1,this.supplyStatus=!0,this.doctorsRequestsList=[],this.supplidObject={},this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableSupplyBtn=!1,this.lstToTranslated=[],this.doctorsList=[],this.dateFiltersList=[],this.requestStatusList=[],this.defaultRequestStatus="Requested",this.searchCriteria={requestStatus:this.defaultRequestStatus},this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("Duration")}ngOnInit(){this.lstToTranslated=["itemName","itemNameTranslation","doctorName","doctorNameTranslation","departmentName","departmentNameTranslation","unitName","unitNameTranslation"],this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)),this.getAllDoctorsRequests(),this.loadDoctorRequestsSearchWrapper()}getAllDoctorsRequests(){this.selectedClinicId=this.localStorage.retrieve("ClinicID");let e=this;e.showProgress=!0,this.clinicService.getAllDoctorsRequests(this.selectedClinicId).subscribe(function(t){e.doctorsRequestsList=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}calculateOrderOut(){let e=this;e.supplidObject.id=e.inventoryRequestId,this.clinicService.calculateRequestOfInventoryByDoctor(e.supplidObject).subscribe(function(t){e.raiseProductSupplied(!0);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.getAllDoctorsRequests()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}raiseProductSupplied(e){this.onProductSupplied.emit(e)}passInventoryRequestId(e){this.supplidObject={},this.inventoryRequestId=e}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.TransferTransaction&&(1==t.fullControl||t.add||t.edit)&&(this.enableSupplyBtn=!0)}loadDoctorRequestsSearchWrapper(){let e=this;e.showProgress=!0;let t=this.localStorage.retrieve("clinicID");this.clinicService.getDoctorRequestsSearchWrapper(t).subscribe(function(t){e.requestStatusList=t.requestStatus,e.dateFiltersList=t.dateFilters,e.doctorsList=t.doctors},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}selectRequestStatus(e){this.searchCriteria.requestStatus=e}selectDateFilter(e){this.searchCriteria.dateFilter=e,"Days"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NoOfDays")):"Weeks"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofWeeks")):"Months"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofMonths")):"Years"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofYears")):"TimePeriod"==e?(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!0):(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1)}getDoctorRequests(){if("TimePeriod"==this.searchCriteria.dateFilter){if(null==this.searchCriteria.startDate||null==this.searchCriteria.endDate||null==this.searchCriteria.startDate||null==this.searchCriteria.endDate)return void this.toastr.error(this.translate.instant("YouMustSelectStartDateAndEndDate"),"");if(this.searchCriteria.startDate>this.searchCriteria.endDate)return void this.toastr.error(this.translate.instant("ScheduleStartDateValidation"),"");this.searchCriteria.startDate=this.utilityClass.getUtcDate(this.searchCriteria.startDate),this.searchCriteria.endDate=this.utilityClass.getUtcDate(this.searchCriteria.endDate)}let e=this;e.showProgress=!0,e.searchCriteria.clinicId=this.localStorage.retrieve("ClinicID"),this.clinicService.getDoctorsRequestsAccordingtoSearchCriteria(e.searchCriteria).subscribe(function(t){e.doctorsRequestsList=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["doctor-inventory-requests"]],outputs:{onProductSupplied:"onProductSupplied"},decls:247,vars:91,consts:[[4,"ngIf"],[1,"row"],[1,"col-md-2","nopadding"],[3,"isInventorySelected",4,"ngIf"],[1,"row","nopadding"],[1,"col-md-offset-9"],["data-toggle","collapse","data-target","#SearchForDoctorRequests",1,"btn","btn-primary"],[3,"section"],["id","SearchForDoctorRequests",1,"collapse","fa-border","well"],[1,"padding5","marginTop35"],[1,"row","form-horizontal"],[1,"form-group"],["for","ddlsDoctorsList",1,"col-md-2","control-label"],[1,"col-md-3"],["name","ddlsDoctorsList",1,"form-control",3,"ngModel","ngModelChange"],["ddlsDoctorsList",""],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-1","control-label"],[1,"col-md-6"],[4,"ngFor","ngForOf"],["type","radio","name","requestStatus","value","All",3,"click"],["radioAnyStatus",""],["for","txtName",1,"col-md-2","control-label"],["id","ddlDateFilters","name","ddlDateFilters",1,"form-control",3,"change"],["ddlDateFilters",""],["class","form-group",4,"ngIf"],[1,"col-md-4","col-md-offset-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],["id","incomingRequestsPrintingArea",1,"row","hidden"],[1,"table","table-responsive","table-bordered","table-hover","table-striped"],[1,"alert","alert-info"],["id","supplyDoctorInventoryRequests","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["name","servicegroupForm",1,"form-horizontal"],["servicegroupForm","ngForm"],[1,"modal-body"],["for","suppliedQuantity",1,"control-label","col-md-2"],[1,"col-md-4"],["id","suppliedQuantity","name","suppliedQuantity","required","",1,"form-control",3,"ngModel","ngModelChange"],["suppliedQuantity","ngModel"],["for","remark",1,"control-label","col-md-2"],["id","remark","name","remark",1,"form-control",3,"ngModel","ngModelChange"],["remark","ngModel"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],[3,"isInventorySelected"],[3,"value"],["type","radio","name","requestStatus",3,"value","checked","click"],["for","txtDuration",1,"col-md-2","control-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"]],template:function(e,t){if(1&e){const e=a.Rb();a.Dc(0,Lt,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Qb(4,"div",2),a.Fc(5,"\n        "),a.Dc(6,Rt,1,1,"clinic-tab",3),a.Fc(7,"\n        "),a.Dc(8,xt,1,1,"shared-tabs",3),a.Fc(9,"\n    "),a.Pb(),a.Fc(10,"\n"),a.Pb(),a.Fc(11,"\n\n    "),a.Qb(12,"div",4),a.Fc(13,"\n\n        "),a.Qb(14,"div",5),a.Fc(15,"\n            "),a.Qb(16,"button",6),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n            "),a.Lb(20,"print-page",7),a.Fc(21,"\n        "),a.Pb(),a.Fc(22,"\n        "),a.Lb(23,"br"),a.Fc(24,"\n\n             "),a.Qb(25,"div",8),a.Fc(26,"\n                 "),a.Qb(27,"div",9),a.Fc(28,"\n                     "),a.Qb(29,"div",10),a.Fc(30,"\n                         "),a.Qb(31,"div",11),a.Fc(32,"\n                             "),a.Qb(33,"label",12),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                             "),a.Qb(37,"div",13),a.Fc(38,"\n                                 "),a.Qb(39,"select",14,15),a.Xb("ngModelChange",function(e){return t.searchCriteria.doctorID=e}),a.Fc(41,"\n                                     "),a.Qb(42,"option",16),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                                     "),a.Dc(46,Zt,2,2,"option",17),a.ac(47,"translateObjects"),a.Fc(48,"\n                                 "),a.Pb(),a.Fc(49,"\n                             "),a.Pb(),a.Fc(50,"\n                             "),a.Qb(51,"label",18),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n                             "),a.Qb(55,"div",19),a.Fc(56,"\n                                 "),a.Qb(57,"table"),a.Fc(58,"\n                                     "),a.Qb(59,"tr"),a.Fc(60,"\n                                         "),a.Dc(61,Bt,5,5,"td",20),a.Fc(62,"\n                                         "),a.Qb(63,"td"),a.Fc(64,"\n                                             "),a.Qb(65,"input",21,22),a.Xb("click",function(){a.wc(e);const n=a.vc(66);return t.selectRequestStatus(n.value)}),a.Pb(),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n                                     "),a.Pb(),a.Fc(70,"\n                                 "),a.Pb(),a.Fc(71,"\n                             "),a.Pb(),a.Fc(72,"\n                         "),a.Pb(),a.Fc(73,"\n                         "),a.Qb(74,"div",11),a.Fc(75,"\n                             "),a.Qb(76,"label",23),a.Fc(77),a.ac(78,"translate"),a.Pb(),a.Fc(79,"\n                             "),a.Qb(80,"div",13),a.Fc(81,"\n                                 "),a.Qb(82,"select",24,25),a.Xb("change",function(){a.wc(e);const n=a.vc(83);return t.selectDateFilter(n.value)}),a.Fc(84,"\n                                     "),a.Qb(85,"option"),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n                                     "),a.Dc(89,Ht,3,4,"option",17),a.ac(90,"translateObjects"),a.Fc(91,"\n                                 "),a.Pb(),a.Fc(92,"\n                             "),a.Pb(),a.Fc(93,"\n                         "),a.Pb(),a.Fc(94,"\n                         "),a.Dc(95,Ot,10,2,"div",26),a.Fc(96,"\n                         "),a.Dc(97,Xt,20,20,"div",26),a.Fc(98,"\n                         "),a.Qb(99,"div",11),a.Fc(100,"\n                             "),a.Qb(101,"div",27),a.Fc(102,"\n                                 "),a.Qb(103,"button",28),a.Xb("click",function(){return t.getDoctorRequests()}),a.Fc(104),a.ac(105,"translate"),a.Pb(),a.Fc(106,"\n                             "),a.Pb(),a.Fc(107,"\n                         "),a.Pb(),a.Fc(108,"\n                     "),a.Pb(),a.Fc(109,"\n                 "),a.Pb(),a.Fc(110,"\n             "),a.Pb(),a.Fc(111,"\n\n\n\n        "),a.Qb(112,"div",29),a.Fc(113,"\n\n            "),a.Qb(114,"div",30),a.Fc(115,"\n                "),a.Lb(116,"i",31),a.Fc(117,"\n                "),a.Lb(118,"input",32,33),a.ac(120,"translate"),a.Fc(121,"\n            "),a.Pb(),a.Fc(122,"\n\n\n\n            "),a.Fc(123,"\n        "),a.Pb(),a.Fc(124,"\n\n        "),a.Qb(125,"div",34),a.Fc(126,"\n            "),a.Qb(127,"table",35),a.Fc(128,"\n                "),a.Qb(129,"thead",36),a.Fc(130,"\n                    "),a.Qb(131,"tr"),a.Fc(132,"\n                        "),a.Qb(133,"th"),a.Fc(134),a.ac(135,"translate"),a.Pb(),a.Fc(136,"\n                        "),a.Qb(137,"th"),a.Fc(138),a.ac(139,"translate"),a.Pb(),a.Fc(140,"\n                        "),a.Qb(141,"th"),a.Fc(142),a.ac(143,"translate"),a.Pb(),a.Fc(144,"\n                        "),a.Qb(145,"th"),a.Fc(146),a.ac(147,"translate"),a.Pb(),a.Fc(148,"\n                        "),a.Qb(149,"th"),a.Fc(150),a.ac(151,"translate"),a.Pb(),a.Fc(152,"\n                        "),a.Qb(153,"th"),a.Fc(154),a.ac(155,"translate"),a.Pb(),a.Fc(156,"\n                        "),a.Qb(157,"th"),a.Fc(158),a.ac(159,"translate"),a.Pb(),a.Fc(160,"\n                        "),a.Qb(161,"th"),a.Fc(162),a.ac(163,"translate"),a.Pb(),a.Fc(164,"\n                        "),a.Qb(165,"th"),a.Fc(166),a.ac(167,"translate"),a.Pb(),a.Fc(168,"\n                    "),a.Pb(),a.Fc(169,"\n                "),a.Pb(),a.Fc(170,"\n                "),a.Qb(171,"tbody"),a.Fc(172,"\n                    "),a.Dc(173,Ut,29,9,"tr",20),a.ac(174,"translateObjects"),a.Fc(175,"\n                "),a.Pb(),a.Fc(176,"\n            "),a.Pb(),a.Fc(177,"\n        "),a.Pb(),a.Fc(178,"\n    "),a.Pb(),a.Fc(179,"\n\n\n\n    "),a.Qb(180,"div",37),a.Fc(181,"\n        "),a.Qb(182,"div",38),a.Fc(183,"\n            "),a.Fc(184,"\n            "),a.Qb(185,"div",39),a.Fc(186,"\n                "),a.Qb(187,"div",40),a.Fc(188,"\n                    "),a.Qb(189,"button",41),a.Fc(190,"\xd7"),a.Pb(),a.Fc(191,"\n                    "),a.Qb(192,"h4",42),a.Fc(193),a.ac(194,"translate"),a.Pb(),a.Fc(195,"\n                "),a.Pb(),a.Fc(196,"\n                "),a.Qb(197,"form",43,44),a.Fc(199,"\n                    "),a.Qb(200,"div",45),a.Fc(201,"\n                        "),a.Qb(202,"div",11),a.Fc(203,"\n                            "),a.Qb(204,"label",46),a.Fc(205),a.ac(206,"translate"),a.Pb(),a.Fc(207,"\n                            "),a.Qb(208,"div",47),a.Fc(209,"\n                                "),a.Qb(210,"input",48,49),a.Xb("ngModelChange",function(e){return t.supplidObject.suppliedQuantity=e}),a.Pb(),a.Fc(212,"\n                            "),a.Pb(),a.Fc(213,"\n                        "),a.Pb(),a.Fc(214,"\n                        "),a.Qb(215,"div",11),a.Fc(216,"\n                            "),a.Qb(217,"label",50),a.Fc(218),a.ac(219,"translate"),a.Pb(),a.Fc(220,"\n                            "),a.Qb(221,"div",47),a.Fc(222,"\n                                "),a.Qb(223,"textarea",51,52),a.Xb("ngModelChange",function(e){return t.supplidObject.description=e}),a.Pb(),a.Fc(225,"\n                            "),a.Pb(),a.Fc(226,"\n                        "),a.Pb(),a.Fc(227,"\n                    "),a.Pb(),a.Fc(228,"\n                    "),a.Qb(229,"div",53),a.Fc(230,"\n                        "),a.Qb(231,"div",54),a.Fc(232,"\n                            "),a.Qb(233,"button",55),a.Xb("click",function(){return t.calculateOrderOut()}),a.Fc(234),a.ac(235,"translate"),a.Pb(),a.Fc(236,"\n                            "),a.Qb(237,"button",56),a.Fc(238),a.ac(239,"translate"),a.Pb(),a.Fc(240,"\n                        "),a.Pb(),a.Fc(241,"\n                    "),a.Pb(),a.Fc(242,"\n                "),a.Pb(),a.Fc(243,"\n            "),a.Pb(),a.Fc(244,"\n        "),a.Pb(),a.Fc(245,"\n    "),a.Pb(),a.Fc(246,"\n")}2&e&&(a.hc("ngIf",t.showProgress),a.yb(6),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(18,36,"Search")),a.yb(3),a.hc("section",t.inventoriesListDiv),a.yb(14),a.Gc(a.bc(35,38,"DoctorName")),a.yb(5),a.hc("ngModel",t.searchCriteria.doctorID),a.yb(4),a.Gc(a.bc(44,40,"Select")),a.yb(3),a.hc("ngForOf",a.bc(47,42,t.doctorsList)),a.yb(6),a.Gc(a.bc(53,44,"Status")),a.yb(9),a.hc("ngForOf",t.requestStatusList),a.yb(6),a.Hc("\xa0",a.bc(68,46,"All"),"\n                                             \xa0\xa0\n                                         "),a.yb(10),a.Gc(a.bc(78,48,"Date")),a.yb(9),a.Gc(a.bc(87,50,"Select")),a.yb(3),a.hc("ngForOf",a.bc(90,52,t.dateFiltersList)),a.yb(6),a.hc("ngIf",t.isDurationVisible),a.yb(2),a.hc("ngIf",t.isPeriodOfTimeVisible),a.yb(7),a.Gc(a.bc(105,54,"Search")),a.yb(14),a.hc("placeholder",a.bc(120,56,"Search")),a.yb(16),a.Gc(a.bc(135,58,"RequestDate")),a.yb(4),a.Gc(a.bc(139,60,"ItemCode")),a.yb(4),a.Gc(a.bc(143,62,"ItemName")),a.yb(4),a.Gc(a.bc(147,64,"Quantity")),a.yb(4),a.Gc(a.bc(151,66,"suppliedQuantity")),a.yb(4),a.Gc(a.bc(155,68,"Unit")),a.yb(4),a.Gc(a.bc(159,70,"Doctor")),a.yb(4),a.Gc(a.bc(163,72,"Department")),a.yb(4),a.Gc(a.bc(167,74,"Status")),a.yb(7),a.hc("ngForOf",a.ec(174,76,t.doctorsRequestsList,null,null,t.lstToTranslated)),a.yb(20),a.Gc(a.bc(194,81,"SupplyDoctorInventoryRequests")),a.yb(12),a.Gc(a.bc(206,83,"Quantity")),a.yb(5),a.hc("ngModel",t.supplidObject.suppliedQuantity),a.yb(8),a.Gc(a.bc(219,85,"Remark")),a.yb(5),a.hc("ngModel",t.supplidObject.description),a.yb(11),a.Gc(a.bc(235,87,"Supply")),a.yb(4),a.Gc(a.bc(239,89,"Cancel")))},directives:[i.k,rt.a,c.p,c.f,c.i,c.j,c.r,i.j,c.q,c.g,c.h,c.b,c.o,S.a,y,Oe.a,kt.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();function jt(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Kt(e,t){if(1&e&&a.Lb(0,"clinic-tab",28),2&e){const e=a.Zb();a.hc("isInventorySelected",e.selectInventoryTab)}}function Vt(e,t){if(1&e&&a.Lb(0,"shared-tabs",28),2&e){const e=a.Zb();a.hc("isInventorySelected",e.selectInventoryTab)}}let $t=(()=>{class e{constructor(e,t,n){this.toastr=e,this.localStorage=t,this.accountService=n,this.selectInventoryTab=!0,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.enableAddQntTab=!1,this.hasAccessQntPermission=!1,this.hasCodingPermission=!1,this.enableAdjustTab=!1,this.hasAdjustLevelPermission=!1,this.enableAdjustmentHistoryTab=!1,this.enableDoctorRequestsTab=!1,this.getUpdatedProduct=!1,this.updateAfterAdjust=!1,this.updates="",this.showProgress=!0}updateAmount(e){this.updateAfterAdjust=e}updateAmountAfterAdjust(e){this.updateAfterAdjust=e,this.getUpdatedProduct=e}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}handleUserInterfaceViews(e){if(null!=e.permissions){for(let t of e.permissions)t.permission.key==this.key.PhysicalCount?((1==t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0),(t.fullControl||t.view)&&(this.hasAccessQntPermission=!0)):t.permission.key==this.key.Coding&&t.view?this.hasCodingPermission=!0:t.permission.key==this.key.AdjustInventoryLevel&&t.allow?this.hasAdjustLevelPermission=!0:t.permission.key==this.key.EndorsePhysicalCount&&t.allow?this.enableAdjustmentHistoryTab=!0:t.permission.key==this.key.TransferTransaction&&(t.fullControl||t.view)&&(this.enableDoctorRequestsTab=!0);this.hasAccessQntPermission&&this.hasCodingPermission&&(this.enableAddQntTab=!0),this.hasCodingPermission&&this.hasAdjustLevelPermission&&(this.enableAdjustTab=!0)}}updateProductsList(e){this.getUpdatedProduct=e}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-inventory"]],inputs:{updates:"updates"},decls:91,vars:37,consts:[[4,"ngIf"],[1,"row"],[3,"isInventorySelected",4,"ngIf"],[1,"row",2,"padding","2px"],[1,"NBbreadcrumb"],[1,"row","well"],[1,"tabbable-panel"],[1,"tabbable-line"],[1,"nav","nav-tabs"],[1,"active","col-md-2","nopadding",2,"margin-right","0px !important"],["href","#ClinicInventoryList","data-toggle","tab","aria-expanded","true"],[1,"col-md-2","nopadding",2,"margin-right","0px !important"],["href","#ClinicInventoryAddQuantity","data-toggle","tab","aria-expanded","true"],["href","#ClinicInventoryAdjustQuantity","data-toggle","tab","aria-expanded","true"],[1,"col-md-3","nopadding",2,"margin-right","0px !important"],["href","#ClinicInventoryAdjustmentHistory","data-toggle","tab","aria-expanded","true"],["href","#DoctorInventoryRequest","data-toggle","tab","aria-expanded","true"],["id","myTabContent",1,"tab-content"],["id","ClinicInventoryList",1,"tab-pane","fade","active","in"],[3,"getUpdatedProduct","updateAfterAdjust","onAmountUpdatedAfterAdjust"],["id","ClinicInventoryAddQuantity",1,"tab-pane","fade"],[3,"isClinicAdmin","enableSaveBtn"],["id","ClinicInventoryAdjustQuantity",1,"tab-pane","fade"],[3,"onAmountUpdated"],["id","ClinicInventoryAdjustmentHistory",1,"tab-pane","fade"],[3,"updates"],["id","DoctorInventoryRequest",1,"tab-pane","fade"],[3,"onProductSupplied"],[3,"isInventorySelected"]],template:function(e,t){1&e&&(a.Dc(0,jt,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,Kt,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Vt,1,1,"shared-tabs",2),a.Fc(7,"\n\n    "),a.Qb(8,"div",1),a.Fc(9,"\n        "),a.Qb(10,"div",3),a.Fc(11,"\n            "),a.Qb(12,"div",4),a.Fc(13,"\n                "),a.Qb(14,"a"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n\n        "),a.Pb(),a.Fc(20,"\n        \n\n        "),a.Qb(21,"div",5),a.Fc(22,"\n            "),a.Qb(23,"div",1),a.Fc(24,"\n                "),a.Qb(25,"div",6),a.Fc(26,"\n                    "),a.Qb(27,"div",7),a.Fc(28,"\n                        "),a.Qb(29,"ul",8),a.Fc(30,"\n                            "),a.Qb(31,"li",9),a.Qb(32,"a",10),a.Fc(33),a.ac(34,"translate"),a.Pb(),a.Pb(),a.Fc(35,"\n                            "),a.Qb(36,"li",11),a.Qb(37,"a",12),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Pb(),a.Fc(40,"\n                            "),a.Qb(41,"li",11),a.Qb(42,"a",13),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Pb(),a.Fc(45,"\n                            "),a.Qb(46,"li",14),a.Qb(47,"a",15),a.Fc(48),a.ac(49,"translate"),a.Pb(),a.Pb(),a.Fc(50,"\n                            "),a.Qb(51,"li",14),a.Qb(52,"a",16),a.Fc(53),a.ac(54,"translate"),a.Pb(),a.Pb(),a.Fc(55,"\n\n                        "),a.Pb(),a.Fc(56,"\n                    "),a.Pb(),a.Fc(57,"\n                "),a.Pb(),a.Fc(58,"\n\n            "),a.Pb(),a.Fc(59,"\n            "),a.Qb(60,"div",17),a.Fc(61,"\n                "),a.Qb(62,"div",18),a.Fc(63,"\n                    "),a.Qb(64,"clinic-inventory-list",19),a.Xb("onAmountUpdatedAfterAdjust",function(e){return t.updateAmountAfterAdjust(e)}),a.Pb(),a.Fc(65,"\n                "),a.Pb(),a.Fc(66,"\n                "),a.Qb(67,"div",20),a.Fc(68,"\n                    "),a.Lb(69,"clinic-inventory-add-quantity",21),a.Fc(70,"\n                "),a.Pb(),a.Fc(71,"\n                "),a.Qb(72,"div",22),a.Fc(73,"\n                    "),a.Qb(74,"clinic-inventory-adjust-quantity",23),a.Xb("onAmountUpdated",function(e){return t.updateAmount(e)}),a.Pb(),a.Fc(75,"\n                "),a.Pb(),a.Fc(76,"\n                "),a.Qb(77,"div",24),a.Fc(78,"\n                    "),a.Lb(79,"clinic-inventory-adjustment-history",25),a.Fc(80,"\n                "),a.Pb(),a.Fc(81,"\n                "),a.Qb(82,"div",26),a.Fc(83,"\n                    "),a.Qb(84,"doctor-inventory-requests",27),a.Xb("onProductSupplied",function(e){return t.updateProductsList(e)}),a.Pb(),a.Fc(85,"\n                "),a.Pb(),a.Fc(86,"\n\n            "),a.Pb(),a.Fc(87,"\n\n        "),a.Pb(),a.Fc(88,"\n    "),a.Pb(),a.Fc(89,"\n"),a.Pb(),a.Fc(90,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(16,23,"SystemAdmin")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(18,25,"Inventory"),"\n            "),a.yb(16),a.Gc(a.bc(34,27,"InventoryList")),a.yb(4),a.Cb("disabled",!t.enableAddQntTab&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(39,29,"AddQuantity")),a.yb(4),a.Cb("disabled",!t.enableAdjustTab&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(44,31,"AdjustQuantity")),a.yb(4),a.Cb("disabled",!t.enableAdjustmentHistoryTab&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(49,33,"AdjustmentHistory")),a.yb(4),a.Cb("disabled",!t.enableDoctorRequestsTab&&!t.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(54,35,"ViewDoctorInventoryRequests")),a.yb(11),a.hc("getUpdatedProduct",t.getUpdatedProduct)("updateAfterAdjust",t.updateAfterAdjust),a.yb(5),a.hc("isClinicAdmin",t.isClinicAdmin)("enableSaveBtn",t.enableSaveBtn),a.yb(10),a.hc("updates",t.updates))},directives:[i.k,dt,St,Gt,At,qt,S.a,y,Oe.a],pipes:[d.c],encapsulation:2}),e})();var zt=n("PAVq");function Wt(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let Yt=(()=>{class e{constructor(){this.selectPermissionsTab=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-permissions"]],decls:23,vars:8,consts:[[4,"ngIf"],[1,"row"],[3,"isPermissionsSelected"],[1,"row","nopadding"],[1,"row",2,"padding","13px"],[1,"NBbreadcrumb"]],template:function(e,t){1&e&&(a.Dc(0,Wt,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n        "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n            "),a.Qb(8,"div",4),a.Fc(9,"\n                "),a.Qb(10,"div",5),a.Fc(11,"\n                    "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n        "),a.Pb(),a.Fc(18,"\n\n\n        "),a.Lb(19,"security"),a.Fc(20,"\n\n    "),a.Pb(),a.Fc(21,"\n"),a.Pb(),a.Fc(22,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isPermissionsSelected",t.selectPermissionsTab),a.yb(9),a.Gc(a.bc(14,4,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                    ",a.bc(16,6,"AccessRights"),"\n                "))},directives:[i.k,y,zt.a,S.a],pipes:[d.c],encapsulation:2}),e})();const _t=["btnConfirm"];function Jt(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function en(e,t){if(1&e&&a.Lb(0,"clinic-tab",20),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function tn(e,t){if(1&e&&a.Lb(0,"shared-tabs",20),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function nn(e,t){if(1&e&&(a.Qb(0,"tr"),a.Fc(1,"\n                        "),a.Qb(2,"td"),a.Fc(3),a.Pb(),a.Fc(4,"\n                        "),a.Qb(5,"td"),a.Fc(6),a.Pb(),a.Fc(7,"\n                        "),a.Qb(8,"td"),a.Fc(9),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"td"),a.Fc(12),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"td"),a.Fc(15),a.Pb(),a.Fc(16,"\n                        "),a.Qb(17,"td"),a.Fc(18),a.Pb(),a.Fc(19,"\n                        "),a.Qb(20,"td"),a.Fc(21),a.Pb(),a.Fc(22,"\n                        "),a.Qb(23,"td"),a.Fc(24),a.Pb(),a.Fc(25,"\n                    "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Gc(e.refNo),a.yb(3),a.Gc(e.dateString),a.yb(3),a.Gc(e.vendorName),a.yb(3),a.Gc(e.orderStatus),a.yb(3),a.Gc(e.totalPrice),a.yb(3),a.Gc(e.description),a.yb(3),a.Gc(e.lastModificationDateString),a.yb(3),a.Gc(e.userName)}}let cn=(()=>{class e{constructor(e,t,n,i,c,s){this.toastr=e,this.storage=t,this.router=n,this.clinicService=i,this.translate=c,this.accountService=s,this.purchasingOrderListDiv="purchasingOrderListPrintDiv",this.selectPurchasingTab=!0,this.clinicId="0",this.showProgress=!1,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableNewBtn=!1,this.enableDetailsLink=!1,this.enableResendLink=!1,this.enableReceiveLink=!1,this.lstToTranslated=[],this.itemsMsge="",this.model={},this.display=!1}ngOnInit(){this.lstToTranslated=["vendorName","vendorNameTranslation","userName","userNameTranslation"],this.clinicId=this.storage.retrieve("ClinicID"),this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.showProgress=!0,this.loadOrdersList(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}viewOrderDetails(e){this.storage.store("OrderId",e),this.router.navigate(["/clinic/purchasing/orderDetails",e])}loadOrdersList(){let e=this;this.clinicService.getAllPurchasingOrders(e.clinicId).subscribe(function(t){e.ordersList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}resend(e){let t=this;t.showProgress=!0,this.clinicService.sendOrderToVendor(e).subscribe(function(e){if("True"==e){let e=t.translate.instant("SentSuccessfully");t.toastr.success(e,"")}else{let e=t.translate.instant("OrderStatusValidation");t.toastr.warning(e,"")}},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key!=this.key.InternalPurchaseRequest&&t.permission.key!=this.key.ExternalPurchaseRequest||!t.fullControl&&!t.add||(this.enableNewBtn=!0),t.permission.key!=this.key.InternalPurchaseRequest&&t.permission.key!=this.key.ExternalPurchaseRequest||!t.fullControl&&!t.view||(this.enableDetailsLink=!0),t.permission.key==this.key.ExternalPurchaseRequest&&t.fullControl&&(this.enableResendLink=!0),t.permission.key==this.key.ReceiveExternalPurchaseRequest&&t.allow&&(this.enableReceiveLink=!0)}selectOrderToDelete(e){this.deleteSelectedItem(e)}deleteSelectedItem(e){let t=this;if(""!=e)t.showProgress=!0,this.clinicService.deletePurchaseOrder(e).subscribe(function(n){let i=t.translate.instant("DeletedSuccessfully");t.toastr.success(i,"");var c=t.ordersList.find(t=>t.id==e),s=t.ordersList.indexOf(c);s>-1&&t.ordersList.splice(s,1)},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1});else{let e=t.translate.instant("NoItemSelected");t.toastr.warning(e,"")}}checkProductsInItemsList(e){let t=this,n=[],i=t.ordersList.find(t=>t.id==e);null!=i&&(t.model=i,n=i.purchaseItems);for(let c of n)t.checkItem(c);""!=t.itemsMsge&&(t.itemsMsge+="Do you want to use the desired orderd quantities instead these orderd quantities that the order has. ",this.display=!0)}checkItem(e){let t=this;e.currentOrderedQuantity==e.orderedQuantity?(t.isEqualed=!0,t.itemsMsge+=e.productName+" , "):(e.currentOrderedQuantity>e.orderedQuantity||e.currentOrderedQuantity<e.orderedQuantity)&&(t.isEqualed=!1,t.itemsMsge+=e.productName+" , ")}useCurrentOrderdQuantity(){this.model.useCurrent=!0,this.display=!1,this.router.navigate(["/clinic/purchasing/createOrder",this.model.id,1,0])}useItemOrderdQuantity(){this.display=!1,this.router.navigate(["/clinic/purchasing/createOrder",this.model.id,0,0])}closeOrder(e){let t=this;t.showProgress=!0,this.clinicService.closeOrder(e).subscribe(function(e){t.ordersList.find(t=>t.id==e.id).orderStatus=e.orderStatus},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}clearMsg(){this.itemsMsge="",this.display=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(s.b),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["purchase-order-list"]],viewQuery:function(e,t){if(1&e&&a.Lc(_t,1),2&e){let e;a.uc(e=a.Yb())&&(t.btnConfirm=e.first)}},decls:101,vars:47,consts:[[4,"ngIf"],[1,"row"],[3,"isPurchasingSelected",4,"ngIf"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"row","well"],[1,"col-md-offset-8","text-right"],["routerLink","/clinic/purchasing/createOrder/new/0/0",1,"btn","btn-primary",3,"disabled"],[3,"section"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],["id","purchasingOrderListPrintDiv",1,"row","hidden"],[1,"table","table-responsive","table-bordered","table-hover","table-striped"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#confirm","type","button",2,"display","none"],["btnConfirm",""],[3,"isPurchasingSelected"]],template:function(e,t){1&e&&(a.Dc(0,Jt,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,en,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,tn,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n        "),a.Qb(18,"div",5),a.Fc(19,"\n            "),a.Qb(20,"div",6),a.Fc(21,"\n                "),a.Qb(22,"button",7),a.Fc(23),a.ac(24,"translate"),a.Pb(),a.Fc(25,"\n                "),a.Lb(26,"print-page",8),a.Fc(27,"\n            "),a.Pb(),a.Fc(28,"\n        "),a.Pb(),a.Fc(29,"\n        "),a.Lb(30,"br"),a.Fc(31,"\n\n         "),a.Qb(32,"div",9),a.Fc(33,"\n             "),a.Qb(34,"div",10),a.Fc(35,"\n                 "),a.Lb(36,"i",11),a.Fc(37,"\n                 "),a.Lb(38,"input",12,13),a.ac(40,"translate"),a.Fc(41,"\n             "),a.Pb(),a.Fc(42,"\n\n             "),a.Fc(43,"\n \n            "),a.Pb(),a.Fc(44,"\n\n\n        "),a.Qb(45,"div",14),a.Fc(46,"\n            "),a.Qb(47,"table",15),a.Fc(48,"\n                "),a.Qb(49,"thead",16),a.Fc(50,"\n                    "),a.Qb(51,"tr"),a.Fc(52,"\n                        "),a.Qb(53,"th"),a.Fc(54),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                        "),a.Qb(57,"th"),a.Fc(58),a.ac(59,"translate"),a.Pb(),a.Fc(60,"\n                        "),a.Qb(61,"th"),a.Fc(62),a.ac(63,"translate"),a.Pb(),a.Fc(64,"\n                        "),a.Qb(65,"th"),a.Fc(66),a.ac(67,"translate"),a.Pb(),a.Fc(68,"\n                        "),a.Qb(69,"th"),a.Fc(70),a.ac(71,"translate"),a.Pb(),a.Fc(72,"\n                        "),a.Qb(73,"th"),a.Fc(74),a.ac(75,"translate"),a.Pb(),a.Fc(76,"\n                        "),a.Qb(77,"th"),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Fc(80,"\n                        "),a.Qb(81,"th"),a.Fc(82),a.ac(83,"translate"),a.Pb(),a.Fc(84,"\n                    "),a.Pb(),a.Fc(85,"\n                "),a.Pb(),a.Fc(86,"\n                "),a.Qb(87,"tbody"),a.Fc(88,"\n                    "),a.Dc(89,nn,26,8,"tr",17),a.ac(90,"translateObjects"),a.Fc(91,"\n                "),a.Pb(),a.Fc(92,"\n            "),a.Pb(),a.Fc(93,"\n        "),a.Pb(),a.Fc(94,"\n    "),a.Pb(),a.Fc(95,"\n"),a.Pb(),a.Fc(96,"\n"),a.Lb(97,"button",18,19),a.Fc(99,"\n"),a.Fc(100,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(14,18,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(16,20,"PurchaseOrders"),"\n        "),a.yb(7),a.ic("disabled",t.enableNewBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(24,22,"CreateNewOrder")),a.yb(3),a.hc("section",t.purchasingOrderListDiv),a.yb(12),a.hc("placeholder",a.bc(40,24,"Search")),a.yb(16),a.Gc(a.bc(55,26,"RerNo")),a.yb(4),a.Gc(a.bc(59,28,"OrderDate")),a.yb(4),a.Gc(a.bc(63,30,"Vendor")),a.yb(4),a.Gc(a.bc(67,32,"Status")),a.yb(4),a.Gc(a.bc(71,34,"Total")),a.yb(4),a.Gc(a.bc(75,36,"Remark")),a.yb(4),a.Gc(a.bc(79,38,"LastModificationDate")),a.yb(4),a.Gc(a.bc(83,40,"LastModifierUser")),a.yb(7),a.hc("ngForOf",a.ec(90,42,t.ordersList,null,null,t.lstToTranslated)))},directives:[i.k,s.c,rt.a,i.j,S.a,y,Oe.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();function sn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function an(e,t){if(1&e&&a.Lb(0,"clinic-tab",7),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function on(e,t){if(1&e&&a.Lb(0,"shared-tabs",7),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function rn(e,t){if(1&e&&(a.Qb(0,"option",29),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function ln(e,t){if(1&e&&(a.Qb(0,"option",29),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function dn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"tr"),a.Fc(1,"\n                            "),a.Qb(2,"td",30),a.Fc(3,"\n                                "),a.Qb(4,"select",31,32),a.Xb("ngModelChange",function(e){return t.$implicit.productId=e})("change",function(){a.wc(e);const n=t.index,i=a.vc(5);return a.Zb(2).setOtherAttribute(i.value,n)}),a.Fc(6,"\n                                    "),a.Dc(7,ln,2,2,"option",18),a.ac(8,"translateObjects"),a.Fc(9,"\n                                "),a.Pb(),a.Fc(10,"\n\n                            "),a.Pb(),a.Fc(11,"\n\n                            "),a.Qb(12,"td"),a.Fc(13,"\n                                "),a.Qb(14,"input",33),a.Xb("ngModelChange",function(e){return t.$implicit.onHandQuantity=e}),a.Pb(),a.Fc(15,"\n                            "),a.Pb(),a.Fc(16,"\n\n                            "),a.Qb(17,"td"),a.Fc(18,"\n                                "),a.Lb(19,"input",34),a.Fc(20,"\n                            "),a.Pb(),a.Fc(21,"\n                            "),a.Qb(22,"td"),a.Fc(23,"\n                                "),a.Qb(24,"input",35),a.Xb("ngModelChange",function(e){return t.$implicit.purchasingPrice=e})("keyup",function(){a.wc(e);const n=t.index;return a.Zb(2).calculateNet(n)}),a.Pb(),a.Fc(25,"\n                            "),a.Pb(),a.Fc(26,"\n                            "),a.Qb(27,"td"),a.Fc(28,"\n                                "),a.Qb(29,"input",36),a.Xb("ngModelChange",function(e){return t.$implicit.orderedQuantity=e})("keyup",function(){a.wc(e);const n=t.index;return a.Zb(2).calculateNet(n)}),a.Pb(),a.Fc(30,"\n                            "),a.Pb(),a.Fc(31,"\n\n                            "),a.Qb(32,"td"),a.Fc(33,"\n                                "),a.Qb(34,"input",33),a.Xb("ngModelChange",function(e){return t.$implicit.net=e}),a.Pb(),a.Fc(35,"\n                            "),a.Pb(),a.Fc(36,"\n                            "),a.Qb(37,"td"),a.Fc(38,"\n                                "),a.Qb(39,"textarea",37),a.Xb("ngModelChange",function(e){return t.$implicit.description=e}),a.Pb(),a.Fc(40,"\n                            "),a.Pb(),a.Fc(41,"\n                            "),a.Qb(42,"td",22),a.Fc(43,"\n                                "),a.Qb(44,"a",26),a.Xb("click",function(){a.wc(e);const n=t.index,i=t.$implicit;return a.Zb(2).deleteServiceBeneficiary(n,i.id)}),a.Fc(45,"\n                                    "),a.Lb(46,"img",38),a.Fc(47,"\n                                "),a.Pb(),a.Fc(48,"\n                            "),a.Pb(),a.Fc(49,"\n                        "),a.Pb()}if(2&e){const e=t.$implicit,n=t.index,i=a.Zb(2);a.yb(4),a.kc("name","ddlProducts",n,"",i.getControlNumber(),""),a.hc("ngModel",e.productId),a.yb(3),a.hc("ngForOf",a.bc(8,23,i.productsList)),a.yb(7),a.kc("name","txtOnHandQuantity",n,"",i.getControlNumber(),""),a.hc("ngModel",e.onHandQuantity),a.yb(5),a.kc("name","txtUnit",n,"",i.getControlNumber(),""),a.ic("value",e.unit),a.yb(5),a.kc("name","txtPurchasingPrice",n,"",i.getControlNumber(),""),a.hc("ngModel",e.purchasingPrice),a.yb(5),a.kc("name","txtOrderedQuantity",n,"",i.getControlNumber(),""),a.jc("title","current is",e.currentOrderedQuantity,""),a.hc("ngModel",e.orderedQuantity),a.yb(5),a.kc("name","txtTotalPrice",n,"",i.getControlNumber(),""),a.hc("ngModel",e.net),a.yb(5),a.kc("name","txtRemark",n,"",i.getControlNumber(),""),a.hc("ngModel",e.description)}}function bn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",8,9),a.Fc(2,"\n                "),a.Qb(3,"div",10),a.Fc(4,"\n                    "),a.Qb(5,"button",11),a.Xb("click",function(){return a.wc(e),a.Zb().createOrder()}),a.Fc(6),a.ac(7,"translate"),a.Pb(),a.Fc(8,"\n                    "),a.Qb(9,"button",11),a.Xb("click",function(){return a.wc(e),a.Zb().createAndSendOrder()}),a.Fc(10),a.ac(11,"translate"),a.Pb(),a.Fc(12,"\n                    "),a.Qb(13,"button",12),a.Xb("click",function(){return a.wc(e),a.Zb().navigateToOrdersList()}),a.Fc(14),a.ac(15,"translate"),a.Pb(),a.Fc(16,"\n                "),a.Pb(),a.Fc(17,"\n                "),a.Lb(18,"br"),a.Fc(19,"\n                "),a.Qb(20,"div",13),a.Fc(21,"\n                    "),a.Qb(22,"label",14),a.Fc(23),a.ac(24,"translate"),a.Pb(),a.Fc(25,"\n                    "),a.Qb(26,"div",15),a.Fc(27,"\n                        "),a.Qb(28,"select",16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.vendorId=t}),a.Fc(29,"\n                            "),a.Qb(30,"option",17),a.Fc(31),a.ac(32,"translate"),a.Pb(),a.Fc(33,"\n                            "),a.Dc(34,rn,2,2,"option",18),a.ac(35,"translateObjects"),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                "),a.Pb(),a.Fc(39,"\n                "),a.Qb(40,"table",19),a.Fc(41,"\n                    "),a.Qb(42,"thead",20),a.Fc(43,"\n                        "),a.Qb(44,"tr"),a.Fc(45,"\n                            "),a.Qb(46,"th",21),a.Fc(47),a.ac(48,"translate"),a.Pb(),a.Fc(49,"\n                            "),a.Qb(50,"th",22),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                            "),a.Qb(54,"th",22),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                            "),a.Qb(58,"th",22),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                            "),a.Qb(62,"th",22),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n                            "),a.Qb(66,"th",22),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n                            "),a.Qb(70,"th",22),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n                            "),a.Qb(74,"th",22),a.Fc(75),a.ac(76,"translate"),a.Pb(),a.Fc(77,"\n                        "),a.Pb(),a.Fc(78,"\n                    "),a.Pb(),a.Fc(79,"\n                    "),a.Qb(80,"tbody"),a.Fc(81,"\n                        "),a.Dc(82,dn,50,25,"tr",23),a.Fc(83,"\n                    "),a.Pb(),a.Fc(84,"\n                    "),a.Qb(85,"tfoot"),a.Fc(86,"\n                        "),a.Qb(87,"tr",20),a.Fc(88,"\n                            "),a.Qb(89,"th",24),a.Fc(90,"\n                                "),a.Qb(91,"div",25),a.Fc(92,"\n                                    "),a.Qb(93,"a",26),a.Xb("click",function(){return a.wc(e),a.Zb().addPurchaseOrder()}),a.Fc(94,"\n                                        "),a.Lb(95,"img",27),a.Fc(96,"\n                                        "),a.Qb(97,"span",28),a.Fc(98),a.ac(99,"translate"),a.Pb(),a.Fc(100,"\n                                    "),a.Pb(),a.Fc(101,"\n                                "),a.Pb(),a.Fc(102,"\n                            "),a.Pb(),a.Fc(103,"\n                        "),a.Pb(),a.Fc(104,"\n\n                    "),a.Pb(),a.Fc(105,"\n                "),a.Pb(),a.Fc(106,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.Zb();a.yb(5),a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(7,19,"Save")),a.yb(3),a.hc("disabled",!e.valid||!t.enableSaveAndSendBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(11,21,"SaveandSend")),a.yb(4),a.Gc(a.bc(15,23,"Back")),a.yb(9),a.Hc(" ",a.bc(24,25,"Vendor"),""),a.yb(5),a.hc("ngModel",t.model.vendorId),a.yb(3),a.Gc(a.bc(32,27,"Select")),a.yb(3),a.hc("ngForOf",a.bc(35,29,t.vendorsList)),a.yb(13),a.Gc(a.bc(48,31,"Item")),a.yb(4),a.Gc(a.bc(52,33,"OnhandQuantity")),a.yb(4),a.Gc(a.bc(56,35,"Unit")),a.yb(4),a.Gc(a.bc(60,37,"PurchasePrice")),a.yb(4),a.Gc(a.bc(64,39,"OrderdQuant")),a.yb(4),a.Gc(a.bc(68,41,"Net")),a.yb(4),a.Gc(a.bc(72,43,"Remark")),a.yb(4),a.Gc(a.bc(76,45,"Delete")),a.yb(7),a.hc("ngForOf",t.purchaseOrderList),a.yb(16),a.Hc("\n                                            ",a.bc(99,47,"AddNew"),"\n                                        ")}}let un=(()=>{class e{constructor(e,t,n,i,c,s,a){this.toastr=e,this.localStorage=t,this.clinicService=n,this.router=i,this._route=c,this.translate=s,this.accountService=a,this.lang="ar",this.selectPurchasingTab=!0,this.purchaseOrderList=[],this.showProgress=!1,this.controlsCount=1,this.model={},this.productsList=[],this.vendorsList=[],this.active=!0,this.purchaseItem={},this.isCurrent=!1,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableSaveBtn=!1,this.enableSaveAndSendBtn=!1}ngOnInit(){this.lang=this.localStorage.retrieve("selectedlanguage");let e=this;this.purchaseOrderList=[],e.orderId=`${this._route.snapshot.params.id}`;let t=this._route.snapshot.params.bool;e.productId=this._route.snapshot.params.proId,e.useCurrent=t,e.clinicId=e.localStorage.retrieve("ClinicID"),e.clinicAdminId=e.localStorage.retrieve("UserID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),e.getPurchasingOrderWrapper(),e.getProductsUnderClinic(),"new"!=e.orderId.toLowerCase()&&e.loadPurchasingOrderModel(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}loadPurchasingOrderModel(){let e=this;this.clinicService.getPurchasingOrderById(e.orderId).subscribe(function(t){e.model=t,e.purchaseOrderList=e.model.purchaseItems,1==e.useCurrent&&e.updateOrderdQuantitywithCurrent()},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}updateOrderdQuantitywithCurrent(){let e=this;for(let t of e.purchaseOrderList)t.onHandQuantity=t.currentOnHandQuantity,t.orderedQuantity=t.currentOrderedQuantity,t.orderedQuantity<0&&(t.orderedQuantity=0),t.maxLevel=t.currentMaxLevel,t.orderOutQuantity=t.currentOrderOutQuantity}getPurchasingOrderWrapper(){let e=this;e.showProgress=!0,this.clinicService.getPurchasingOrderWrapper(e.clinicId).subscribe(function(t){e.vendorsList=t.vendors},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}getProductsUnderClinic(){let e=this;e.showProgress=!0,this.clinicService.getProductsUnderClinic(e.clinicId).subscribe(function(t){if(e.productsList=t,e.productId>0){var n=e.productsList.find(t=>t.id==e.productId);null!=e.model&&(e.model.vendorId=n.vendorId,e.purchaseItem.productId=n.id,e.purchaseItem.onHandQuantity=n.onHandQuantity,e.purchaseItem.unit=e.getProductUnitType(n),e.purchaseItem.orderedQuantity=n.orderedQuantity,e.purchaseOrderList.push(e.purchaseItem))}},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}addPurchaseOrder(){this.purchaseItem={},this.purchaseOrderList.push(this.purchaseItem),this.controlsCount++}getControlNumber(){return this.controlsCount}deleteServiceBeneficiary(e,t){this.purchaseOrderList.splice(e,1),null!=t&&null!=t&&""!=t&&this.deletePurchaseItemFromDB(t)}deletePurchaseItemFromDB(e){let t=this;this.clinicService.deletePurchaseItem(e).subscribe(function(e){let n=t.translate.instant("DeletedSuccessfully");t.toastr.success(n,"")},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}updatePurchasingOrderWithUser(e){let t=this,n=0;for(let i of e)i.securityUserId=t.clinicAdminId,i.net=i.purchasingPrice*i.orderedQuantity,n+=i.net;t.model.totalPrice=n}setOldOrderdQuantity(e){"new"==this.orderId.toLowerCase()&&(e.oldOrderedQuantity=e.orderedQuantity)}createOrder(){let e=this;e.showProgress=!0,e.updatePurchasingOrderWithUser(e.purchaseOrderList),e.model.purchaseItems=e.purchaseOrderList,e.model.securityUserId=e.clinicAdminId,e.model.clinicId=e.clinicId,e.purchaseOrderList.length>0&&isNaN(e.orderId)&&"new"==e.orderId.toLowerCase()?this.clinicService.createPurchasingOrder(e.model).subscribe(function(t){e.model=t,e.purchaseOrderList=e.model.purchaseItems;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.navigateToOrdersList()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.editPurchasingOrder(e.model).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.model=t,e.purchaseOrderList=e.model.purchaseItems,e.navigateToOrdersList()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}createAndSendOrder(){let e=this;e.showProgress=!0,e.updatePurchasingOrderWithUser(e.purchaseOrderList),e.model.purchaseItems=e.purchaseOrderList,e.model.securityUserId=e.clinicAdminId,e.model.clinicId=e.clinicId,e.purchaseOrderList.length>0&&isNaN(e.orderId)&&"new"==e.orderId.toLowerCase()?this.clinicService.createAndSendPurchasingOrder(e.model).subscribe(function(t){e.model=t,e.purchaseOrderList=e.model.purchaseItems;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.navigateToOrdersList()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.editAndSendPurchasingOrder(e.model).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.model=t,e.purchaseOrderList=e.model.purchaseItems,e.navigateToOrdersList()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}getProductUnitType(e){let t="";return e&&(t=e.unitName||e.unitNameTranslation?"ar"==this.lang?e.unitName:e.unitNameTranslation:this.translate.instant(e.unitType)),t}setOtherAttribute(e,t){let n=this;var i=n.productsList.find(t=>t.id==e);n.purchaseOrderList[t].onHandQuantity=i.onHandQuantity,n.purchaseOrderList[t].unit=this.getProductUnitType(i),n.purchaseOrderList[t].orderedQuantity=i.orderedQuantity,n.purchaseOrderList[t].orderOutQuantity=i.orderOutQuantity,n.purchaseOrderList[t].maxLevel=i.maxLevel}navigateToOrdersList(){this.router.navigate(["/clinic/purchasing/all",this.clinicId])}calculateNet(e){let t=this;t.purchaseOrderList[e].orderedQuantity>0&&(t.purchaseOrderList[e].net=t.purchaseOrderList[e].orderedQuantity*t.purchaseOrderList[e].purchasingPrice)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key!=this.key.InternalPurchaseRequest&&t.permission.key!=this.key.ExternalPurchaseRequest||!(t.fullControl||t.add||t.edit)||(this.enableSaveBtn=!0),t.permission.key==this.key.ExternalPurchaseRequest&&(t.fullControl||t.add||t.edit)&&(this.enableSaveAndSendBtn=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(s.b),a.Kb(s.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["create-purchase-order"]],decls:25,vars:10,consts:[[4,"ngIf"],[1,"row"],[3,"isPurchasingSelected",4,"ngIf"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"row","well"],["class","form-horizontal","name","orderForm",4,"ngIf"],[3,"isPurchasingSelected"],["name","orderForm",1,"form-horizontal"],["orderForm","ngForm"],[1,"row","text-center"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"],[1,"form-group"],["for","ddlVendors",1,"control-label","col-md-4"],[1,"col-md-4"],["name","ddlVendors","required","",1,"form-control",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table","table-responsive","table-hover","table-bordered"],[1,"alert","alert-info"],["width","25%",1,"text-center"],[1,"text-center"],[4,"ngFor","ngForOf"],["colspan","9"],[2,"float","left"],[1,"pointer",3,"click"],["src","assets/images/AddImage.png"],[2,"text-decoration","underline"],[3,"value"],["width","25%"],["required","",1,"form-control",3,"name","ngModel","ngModelChange","change"],["p",""],["type","text","disabled","disabled",1,"form-control",3,"name","ngModel","ngModelChange"],["type","text","disabled","disabled",1,"form-control",3,"name","value"],["type","number","min","1","step","1",1,"form-control",3,"name","ngModel","ngModelChange","keyup"],["type","number","min","1","step","1",1,"form-control",3,"name","ngModel","title","ngModelChange","keyup"],[1,"form-control",3,"name","ngModel","ngModelChange"],["src","assets/images/DeleteRed.png"]],template:function(e,t){1&e&&(a.Dc(0,sn,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,an,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,on,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n        "),a.Qb(18,"div",5),a.Fc(19,"\n            "),a.Dc(20,bn,107,49,"form",6),a.Fc(21,"\n        "),a.Pb(),a.Fc(22,"\n    "),a.Pb(),a.Fc(23,"\n"),a.Pb(),a.Fc(24,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(14,6,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(16,8,"PurchaseOrders"),"\n        "),a.yb(5),a.hc("ngIf",t.active))},directives:[i.k,S.a,y,Oe.a,c.q,c.g,c.h,c.p,c.o,c.f,c.i,c.j,c.r,i.j,c.b,c.k],pipes:[d.c,Ge.a],encapsulation:2}),e})();function hn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function pn(e,t){if(1&e&&a.Lb(0,"clinic-tab",14),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function gn(e,t){if(1&e&&a.Lb(0,"shared-tabs",14),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function mn(e,t){if(1&e&&(a.Qb(0,"button",25),a.Fc(1),a.ac(2,"translate"),a.Pb()),2&e){const e=a.Zb(2);a.ic("disabled",e.enableReceiveLink||e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(2,2,"Receive"))}}function Fn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",15,16),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n            \n            "),a.Qb(3,"div",17),a.Fc(4,"\n                    "),a.Dc(5,mn,3,4,"button",18),a.Fc(6,"\n                "),a.Qb(7,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().navigateToOrderdetails()}),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Pb(),a.Fc(11,"\n            "),a.Lb(12,"br"),a.Fc(13,"\n            "),a.Lb(14,"br"),a.Fc(15,"\n             "),a.Qb(16,"div",20),a.Fc(17,"\n                 "),a.Qb(18,"div",21),a.Fc(19,"\n                     "),a.Lb(20,"i",22),a.Fc(21,"\n                     "),a.Lb(22,"input",23,24),a.ac(24,"translate"),a.Fc(25,"\n                 "),a.Pb(),a.Fc(26,"\n               "),a.Fc(27,"\n            "),a.Pb(),a.Fc(28,"\n\n        "),a.Pb()}if(2&e){const e=a.Zb();a.yb(5),a.hc("ngIf",!e.isClosed),a.yb(3),a.Gc(a.bc(9,3,"Back")),a.yb(14),a.hc("placeholder",a.bc(24,5,"Search"))}}let vn=(()=>{class e{constructor(e,t,n,i,c,s,a,o){this.toastr=e,this.storage=t,this.router=n,this._route=i,this.localStorage=c,this.clinicService=s,this.translate=a,this.accountService=o,this.selectPurchasingTab=!0,this.showProgress=!1,this.itemsList=[],this.model={},this.isSent=!0,this.active=!0,this.isReceived=!1,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableReceiveLink=!1,this.lstToTranslated=[],this.isClosed=!1}ngOnInit(){let e=this;this.lstToTranslated=["productName","productNameTranslation"],e.showProgress=!0,e.orderId=`${this._route.snapshot.params.id}`,e.clinicAdminId=e.localStorage.retrieve("UserID"),e.clinicId=e.localStorage.retrieve("ClinicID"),this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),e.loadPurchasingOrder(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}navigateToOrderdetails(){this.router.navigate(["/clinic/purchasing/orderDetails",this.orderId])}loadPurchasingOrder(){let e=this;this.clinicService.getPurchasingOrderById(e.orderId).subscribe(function(t){e.model=t,e.itemsList=e.model.purchaseItems,"Received"==e.model.orderStatus?e.isReceived=!0:"Closed"==e.model.orderStatus&&(e.isClosed=!0)},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}updatePurchasingOrderWithUser(e){let t=this;for(let n of e)n.securityUserId=t.clinicAdminId}onSubmit(){let e=this;e.showProgress=!0,e.updatePurchasingOrderWithUser(e.itemsList),e.model.purchaseItems=e.itemsList,e.itemsList.length>0&&this.clinicService.receivePurchasingOrder(e.model).subscribe(function(t){e.model=t,e.itemsList=e.model.purchaseItems;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.navigateToOrdersList()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}navigateToOrdersList(){this.router.navigate(["/clinic/purchasing/all",this.clinicId])}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.ReceiveExternalPurchaseRequest&&t.allow&&(this.enableReceiveLink=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(s.b),a.Kb(s.a),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["receive-purchase-order"]],decls:76,vars:25,consts:[[4,"ngIf"],[1,"row"],[3,"isPurchasingSelected",4,"ngIf"],[1,"row","nopadding"],[1,"page-breadcrumb"],[1,"col-md-7"],[1,"page-breadcrumb-wrap"],[1,"page-breadcrumb-info"],[1,"list-page-breadcrumb"],[1,"active-page"],[1,"col-md-5"],[1,"control-label","col-md-2"],[1,"control-label","col-md-4"],["class","form-horizontal","name","orderForm",3,"ngSubmit",4,"ngIf"],[3,"isPurchasingSelected"],["name","orderForm",1,"form-horizontal",3,"ngSubmit"],["orderForm","ngForm"],[1,"row","text-right"],["class","btn btn-primary",3,"disabled",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"form-group"],[1,"ui-widget-header","searchWidget"],[1,"fa","fa-search","searchIcon"],["type","text","pInputText","","size","50",3,"placeholder"],["gb",""],[1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(a.Dc(0,hn,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,pn,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,gn,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",1),a.Fc(13,"\n                "),a.Qb(14,"div",5),a.Fc(15,"\n                    "),a.Qb(16,"div",6),a.Fc(17,"\n                        "),a.Qb(18,"div",7),a.Fc(19,"\n                            "),a.Qb(20,"ul",8),a.Fc(21,"\n                                "),a.Qb(22,"li"),a.Fc(23),a.ac(24,"translate"),a.Pb(),a.Fc(25,"\n                                "),a.Qb(26,"li",9),a.Fc(27),a.ac(28,"translate"),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                            "),a.Pb(),a.Fc(31,"\n                        "),a.Pb(),a.Fc(32,"\n                    "),a.Pb(),a.Fc(33,"\n                "),a.Pb(),a.Fc(34,"\n                "),a.Qb(35,"div",10),a.Fc(36,"\n                "),a.Pb(),a.Fc(37,"\n            "),a.Pb(),a.Fc(38,"\n        "),a.Pb(),a.Fc(39,"\n\n\n        "),a.Qb(40,"div",1),a.Fc(41,"\n            "),a.Qb(42,"label",11),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n            "),a.Qb(46,"label",12),a.Fc(47),a.Pb(),a.Fc(48,"\n        "),a.Pb(),a.Fc(49,"\n        "),a.Qb(50,"div",1),a.Fc(51,"\n            "),a.Qb(52,"label",11),a.Fc(53),a.ac(54,"translate"),a.Pb(),a.Fc(55,"\n            "),a.Qb(56,"label",12),a.Fc(57),a.Pb(),a.Fc(58,"\n        "),a.Pb(),a.Fc(59,"\n        "),a.Qb(60,"div",1),a.Fc(61,"\n            "),a.Qb(62,"label",11),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n            "),a.Qb(66,"label",12),a.Fc(67),a.Pb(),a.Fc(68,"\n        "),a.Pb(),a.Fc(69,"\n        "),a.Lb(70,"br"),a.Fc(71,"\n        "),a.Dc(72,Fn,29,7,"form",13),a.Fc(73,"\n    "),a.Pb(),a.Fc(74,"\n"),a.Pb(),a.Fc(75,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(17),a.Hc("\n                                    ",a.bc(24,13,"Clinic"),"\n                                "),a.yb(4),a.Ic("",a.bc(28,15,"PurchaseOrders")," > ",a.bc(29,17,"ReceivePurchaseOrder"),""),a.yb(16),a.Hc("",a.bc(44,19,"RerNo"),":"),a.yb(4),a.Gc(t.model.refNo),a.yb(6),a.Hc("",a.bc(54,21,"OrderDate"),":"),a.yb(4),a.Gc(t.model.dateString),a.yb(6),a.Hc("",a.bc(64,23,"Vendor"),":"),a.yb(4),a.Gc(t.model.vendorName),a.yb(5),a.hc("ngIf",t.active))},directives:[i.k,S.a,y,Oe.a,c.q,c.g,c.h],pipes:[d.c],encapsulation:2}),e})();const fn=["btnConfirm"];function Pn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function yn(e,t){if(1&e&&a.Lb(0,"clinic-tab",32),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function Qn(e,t){if(1&e&&a.Lb(0,"shared-tabs",32),2&e){const e=a.Zb();a.hc("isPurchasingSelected",e.selectPurchasingTab)}}function Sn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",33),a.Xb("click",function(){a.wc(e);const t=a.Zb();return t.viewOrderDetails(t.model.id)}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){const e=a.Zb();a.ic("disabled",e.enableReceiveLink||e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(2,2,"ReceiveQuantity"))}}function Cn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",33),a.Xb("click",function(){a.wc(e);const t=a.Zb();return t.checkProductsInItemsList(t.model.id)}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){const e=a.Zb();a.ic("disabled",e.enableEditBtn||e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(2,2,"EditOrder"))}}let wn=(()=>{class e{constructor(e,t,n,i,c,s,a){this.toastr=e,this.storage=t,this.router=n,this._route=i,this.clinicService=c,this.translate=s,this.accountService=a,this.selectPurchasingTab=!0,this.showProgress=!1,this.itemsList=[],this.model={},this.isSent=!0,this.isClosed=!1,this.itemsMsge="",this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableEditBtn=!1,this.enableReceiveLink=!1,this.lstToTranslated=[]}ngOnInit(){this.lstToTranslated=["productName","productNameTranslation","userName","userNameTranslation","unit","unitTranslation"],this.showProgress=!0,this.orderId=`${this._route.snapshot.params.id}`,this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.loadPurchasingOrder(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}navigateToOrdersList(){this.router.navigate(["/clinic/purchasing/all",this.storage.retrieve("ClinicId")])}loadPurchasingOrder(){let e=this;this.clinicService.getPurchasingOrderById(e.orderId).subscribe(function(t){e.model=t,e.itemsList=e.model.purchaseItems,"Prepared"==e.model.orderStatus?e.isSent=!1:"Closed"==e.model.orderStatus&&(e.isClosed=!0)},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}viewOrderDetails(e){this.storage.store("OrderId",e),this.router.navigate(["/clinic/purchasing/receiveOrder",e])}checkProductsInItemsList(e){let t=this;for(let n of t.itemsList)t.checkItem(n);""!=t.itemsMsge&&(t.itemsMsge+="Do you want to usethe desired orderd quantities instead these orderd quantities that the order has. ",this.btnConfirm.nativeElement.click())}checkItem(e){let t=this;e.currentOrderedQuantity==e.orderedQuantity?(t.isEqualed=!0,t.itemsMsge+=e.productName+" , "):(e.currentOrderedQuantity>e.orderedQuantity||e.currentOrderedQuantity<e.orderedQuantity)&&(t.isEqualed=!1,t.itemsMsge+=e.productName+" , ")}useCurrentOrderdQuantity(){this.model.useCurrent=!0,this.router.navigate(["/clinic/purchasing/createOrder",this.model.id,1,0])}useItemOrderdQuantity(){this.router.navigate(["/clinic/purchasing/createOrder",this.model.id,0,0])}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key!=this.key.InternalPurchaseRequest&&t.permission.key!=this.key.ExternalPurchaseRequest||!t.fullControl&&!t.edit||(this.enableEditBtn=!0),t.permission.key==this.key.ReceiveExternalPurchaseRequest&&t.allow&&(this.enableReceiveLink=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(s.b),a.Kb(s.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["purchase-order-view-details"]],viewQuery:function(e,t){if(1&e&&a.Lc(fn,1),2&e){let e;a.uc(e=a.Yb())&&(t.btnConfirm=e.first)}},decls:161,vars:60,consts:[[4,"ngIf"],[1,"row"],[3,"isPurchasingSelected",4,"ngIf"],[1,"row","nopadding"],[1,"page-breadcrumb"],[1,"col-md-7"],[1,"page-breadcrumb-wrap"],[1,"page-breadcrumb-info"],[1,"list-page-breadcrumb"],[1,"active-page"],[1,"col-md-5"],[1,"control-label","col-md-2"],[1,"control-label","col-md-4"],[1,"row","text-right"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"ui-widget-header","searchWidget"],[1,"fa","fa-search","searchIcon"],["type","text","pInputText","","size","50",3,"placeholder"],["gb",""],["data-toggle","modal","data-target","#confirm","type","button",2,"display","none"],["btnConfirm",""],["id","confirm","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],[3,"isPurchasingSelected"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(a.Dc(0,Pn,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,yn,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Qn,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"div",1),a.Fc(13,"\n                "),a.Qb(14,"div",5),a.Fc(15,"\n                    "),a.Qb(16,"div",6),a.Fc(17,"\n                        "),a.Qb(18,"div",7),a.Fc(19,"\n                            "),a.Qb(20,"ul",8),a.Fc(21,"\n                                "),a.Qb(22,"li"),a.Fc(23),a.ac(24,"translate"),a.Pb(),a.Fc(25,"\n                                "),a.Qb(26,"li",9),a.Fc(27),a.ac(28,"translate"),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                            "),a.Pb(),a.Fc(31,"\n                        "),a.Pb(),a.Fc(32,"\n                    "),a.Pb(),a.Fc(33,"\n                "),a.Pb(),a.Fc(34,"\n                "),a.Qb(35,"div",10),a.Fc(36,"\n                "),a.Pb(),a.Fc(37,"\n            "),a.Pb(),a.Fc(38,"\n        "),a.Pb(),a.Fc(39,"\n\n\n        "),a.Qb(40,"div",1),a.Fc(41,"\n            "),a.Qb(42,"label",11),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n            "),a.Qb(46,"label",12),a.Fc(47),a.Pb(),a.Fc(48,"\n            "),a.Qb(49,"label",11),a.Fc(50),a.ac(51,"translate"),a.Pb(),a.Fc(52,"\n            "),a.Qb(53,"label",12),a.Fc(54),a.Pb(),a.Fc(55,"\n        "),a.Pb(),a.Fc(56,"\n        "),a.Qb(57,"div",1),a.Fc(58,"\n            "),a.Qb(59,"label",11),a.Fc(60),a.ac(61,"translate"),a.Pb(),a.Fc(62,"\n            "),a.Qb(63,"label",12),a.Fc(64),a.ac(65,"translateObjects"),a.Pb(),a.Fc(66,"\n            "),a.Qb(67,"label",11),a.Fc(68),a.ac(69,"translate"),a.Pb(),a.Fc(70,"\n            "),a.Qb(71,"label",12),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n        "),a.Pb(),a.Fc(75,"\n        "),a.Qb(76,"div",1),a.Fc(77,"\n            "),a.Qb(78,"label",11),a.Fc(79),a.ac(80,"translate"),a.Pb(),a.Fc(81,"\n            "),a.Qb(82,"label",12),a.Fc(83),a.Pb(),a.Fc(84,"\n            "),a.Qb(85,"label",11),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n            "),a.Qb(89,"label",12),a.Fc(90),a.Pb(),a.Fc(91,"\n        "),a.Pb(),a.Fc(92,"\n        "),a.Qb(93,"div",13),a.Fc(94,"\n                "),a.Dc(95,Sn,3,4,"button",14),a.Fc(96,"\n                "),a.Dc(97,Cn,3,4,"button",14),a.Fc(98,"\n            "),a.Qb(99,"button",15),a.Xb("click",function(){return t.navigateToOrdersList()}),a.Fc(100),a.ac(101,"translate"),a.Pb(),a.Fc(102,"\n        "),a.Pb(),a.Fc(103,"\n        "),a.Lb(104,"br"),a.Fc(105,"\n        "),a.Lb(106,"br"),a.Fc(107,"\n        "),a.Qb(108,"div",16),a.Fc(109,"\n            "),a.Lb(110,"i",17),a.Fc(111,"\n            "),a.Lb(112,"input",18,19),a.ac(114,"translate"),a.Fc(115,"\n        "),a.Pb(),a.Fc(116,"\n        "),a.Fc(117,"\n    "),a.Pb(),a.Fc(118,"\n"),a.Pb(),a.Fc(119,"\n"),a.Qb(120,"button",20,21),a.Fc(122,"\n\n"),a.Pb(),a.Fc(123,"\n"),a.Qb(124,"div",22),a.Fc(125,"\n    "),a.Qb(126,"div",23),a.Fc(127,"\n        "),a.Fc(128,"\n        "),a.Qb(129,"div",24),a.Fc(130,"\n            "),a.Qb(131,"div",25),a.Fc(132,"\n                "),a.Qb(133,"button",26),a.Fc(134,"\xd7"),a.Pb(),a.Fc(135,"\n                "),a.Qb(136,"h4",27),a.Fc(137),a.ac(138,"translate"),a.Pb(),a.Fc(139,"\n            "),a.Pb(),a.Fc(140,"\n            "),a.Qb(141,"div",28),a.Fc(142,"\n                "),a.Qb(143,"p"),a.Fc(144),a.Pb(),a.Fc(145,"\n            "),a.Pb(),a.Fc(146,"\n            "),a.Qb(147,"div",29),a.Fc(148,"\n                "),a.Qb(149,"button",30),a.Xb("click",function(){return t.useCurrentOrderdQuantity()}),a.Fc(150),a.ac(151,"translate"),a.Pb(),a.Fc(152,"\n                "),a.Qb(153,"button",31),a.Xb("click",function(){return t.useItemOrderdQuantity()}),a.Fc(154),a.ac(155,"translate"),a.Pb(),a.Fc(156,"\n            "),a.Pb(),a.Fc(157,"\n        "),a.Pb(),a.Fc(158,"\n\n    "),a.Pb(),a.Fc(159,"\n"),a.Pb(),a.Fc(160,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(17),a.Hc("\n                                    ",a.bc(24,26,"Clinic"),"\n                                "),a.yb(4),a.Ic("",a.bc(28,28,"PurchaseOrders")," > ",a.bc(29,30,"PurchaseOrderDetails"),""),a.yb(16),a.Hc("",a.bc(44,32,"RerNo"),":"),a.yb(4),a.Gc(t.model.refNo),a.yb(3),a.Hc("",a.bc(51,34,"OrderDate"),":"),a.yb(4),a.Gc(t.model.dateString),a.yb(6),a.Hc("",a.bc(61,36,"Vendor"),":"),a.yb(4),a.Gc(a.dc(65,38,t.model,"vendorName","vendorNameTranslation").vendorName),a.yb(4),a.Hc("",a.bc(69,42,"Status"),":"),a.yb(4),a.Gc(a.bc(73,44,t.model.orderStatus)),a.yb(7),a.Hc("",a.bc(80,46,"Total"),":"),a.yb(4),a.Gc(t.model.totalPrice),a.yb(3),a.Hc("",a.bc(87,48,"Remark"),":"),a.yb(4),a.Gc(t.model.description),a.yb(5),a.hc("ngIf",!t.isClosed),a.yb(2),a.hc("ngIf",!t.isSent),a.yb(3),a.Gc(a.bc(101,50,"Back")),a.yb(12),a.hc("placeholder",a.bc(114,52,"Search")),a.yb(25),a.Gc(a.bc(138,54,"ItemsListConfirmation")),a.yb(7),a.Gc(t.itemsMsge),a.yb(6),a.Gc(a.bc(151,56,"Yes")),a.yb(4),a.Gc(a.bc(155,58,"No")))},directives:[i.k,S.a,y,Oe.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();function In(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let Tn=(()=>{class e{constructor(e,t){this._route=e,this.storage=t,this.selectReportsTab=!0,this.clinicId=""}ngOnInit(){this.clinicId=this.storage.retrieve("ClinicID")}openReport(e){let t=this.storage.retrieve("SelectedLanguage");null!=t&&null!=t||(t="ar"),window.open("reports/"+e+"/ReportViewer.aspx?lang="+t+"&id="+this.clinicId)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(s.a),a.Kb(r.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-reports"]],decls:113,vars:26,consts:[[4,"ngIf"],[1,"row","well"],[3,"isReportsSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"col-md-6"],[1,"applyReportStyle","h4Deco"],[1,"linkColorForReport","pointer",3,"click"],[1,"iconReportStyle","fa","fa-file","ml-2"]],template:function(e,t){1&e&&(a.Dc(0,In,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n\n        "),a.Qb(16,"div",5),a.Fc(17,"\n            "),a.Lb(18,"br"),a.Fc(19,"\n            "),a.Qb(20,"h4",6),a.Fc(21,"\n                "),a.Qb(22,"a",7),a.Xb("click",function(){return t.openReport("ResourcesRevenueDetailsReport")}),a.Fc(23),a.ac(24,"translate"),a.Lb(25,"i",8),a.Fc(26,"\n                "),a.Pb(),a.Fc(27,"\n            "),a.Pb(),a.Fc(28,"\n        "),a.Pb(),a.Fc(29,"\n        "),a.Lb(30,"br"),a.Fc(31," "),a.Lb(32,"br"),a.Fc(33,"\n        "),a.Qb(34,"div",5),a.Fc(35,"\n            "),a.Lb(36,"br"),a.Fc(37,"\n            "),a.Qb(38,"h4",6),a.Fc(39,"\n                "),a.Qb(40,"a",7),a.Xb("click",function(){return t.openReport("PatientsVisitsInPeriodReport")}),a.Fc(41),a.ac(42,"translate"),a.Lb(43,"i",8),a.Fc(44,"\n                "),a.Pb(),a.Fc(45,"\n            "),a.Pb(),a.Fc(46,"\n\n        "),a.Pb(),a.Fc(47,"\n        "),a.Qb(48,"div",5),a.Fc(49,"\n            "),a.Lb(50,"br"),a.Fc(51,"\n            "),a.Qb(52,"h4",6),a.Fc(53,"\n                "),a.Qb(54,"a",7),a.Xb("click",function(){return t.openReport("UpcomingAppointmentsReport")}),a.Fc(55),a.ac(56,"translate"),a.Lb(57,"i",8),a.Fc(58,"\n                "),a.Pb(),a.Fc(59,"\n            "),a.Pb(),a.Fc(60,"\n\n\n        "),a.Pb(),a.Fc(61,"\n        "),a.Lb(62,"br"),a.Fc(63," "),a.Lb(64,"br"),a.Fc(65,"\n        "),a.Qb(66,"div",5),a.Fc(67,"\n            "),a.Lb(68,"br"),a.Fc(69,"\n            "),a.Qb(70,"h4",6),a.Fc(71,"\n                "),a.Qb(72,"a",7),a.Xb("click",function(){return t.openReport("PatientTransactionsHistoryReport")}),a.Fc(73),a.ac(74,"translate"),a.Lb(75,"i",8),a.Fc(76,"\n                "),a.Pb(),a.Fc(77,"\n            "),a.Pb(),a.Fc(78,"\n\n        "),a.Pb(),a.Fc(79,"\n        "),a.Qb(80,"div",5),a.Fc(81,"\n            "),a.Lb(82,"br"),a.Fc(83,"\n            "),a.Qb(84,"h4",6),a.Fc(85,"\n                "),a.Qb(86,"a",7),a.Xb("click",function(){return t.openReport("ResourceCollectionDetailsReport")}),a.Fc(87),a.ac(88,"translate"),a.Lb(89,"i",8),a.Fc(90,"\n                "),a.Pb(),a.Fc(91,"\n            "),a.Pb(),a.Fc(92,"\n\n        "),a.Pb(),a.Fc(93,"\n        "),a.Lb(94,"br"),a.Lb(95,"br"),a.Fc(96,"\n        "),a.Qb(97,"div",5),a.Fc(98,"\n            "),a.Lb(99,"br"),a.Fc(100,"\n            "),a.Qb(101,"h4",6),a.Fc(102,"\n                "),a.Qb(103,"a",7),a.Xb("click",function(){return t.openReport("CashierReport")}),a.Fc(104),a.ac(105,"translate"),a.Lb(106,"i",8),a.Fc(107,"\n                "),a.Pb(),a.Fc(108,"\n            "),a.Pb(),a.Fc(109,"\n        "),a.Pb(),a.Fc(110,"\n\n    "),a.Pb(),a.Fc(111,"\n"),a.Pb(),a.Fc(112,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isReportsSelected",t.selectReportsTab),a.yb(7),a.Gc(a.bc(12,10,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,12,"Reports"),"\n        "),a.yb(10),a.Hc("\n                    ",a.bc(24,14,"ResourcesRevenueDetailsReport"),"\n                    "),a.yb(18),a.Hc("\n                    ",a.bc(42,16,"PatientsVisitsInPeriodReport"),"\n                    "),a.yb(14),a.Hc("\n                    ",a.bc(56,18,"UpcomingAppointmentsReport"),"\n                    "),a.yb(18),a.Hc("\n                    ",a.bc(74,20,"PatientTransactionsHistoryReport"),"\n                    "),a.yb(14),a.Hc("\n                    ",a.bc(88,22,"ResourceCollectionDetailsReport"),"\n                    "),a.yb(17),a.Hc("\n                    ",a.bc(105,24,"CashierReport"),"\n                    "))},directives:[i.k,y,S.a],pipes:[d.c],encapsulation:2}),e})();class Mn{constructor(){this.isActive=!0}}class Dn{}const Gn=["fileInput"],An=["newsImage"];function Nn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}const kn=function(){return{standalone:!0}};function Ln(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",7,8),a.Fc(2,"\n                "),a.Qb(3,"div",9),a.Fc(4,"\n                    "),a.Qb(5,"button",10),a.Xb("click",function(){return a.wc(e),a.Zb().saveClinicNews()}),a.Fc(6),a.ac(7,"translate"),a.Pb(),a.Fc(8,"\n                    "),a.Qb(9,"button",10),a.Xb("click",function(){return a.wc(e),a.Zb().goBack()}),a.Fc(10),a.ac(11,"translate"),a.Pb(),a.Fc(12,"\n                "),a.Pb(),a.Fc(13,"\n                "),a.Lb(14,"br"),a.Fc(15,"\n                "),a.Qb(16,"div",11),a.Fc(17,"\n                    "),a.Qb(18,"div",12),a.Fc(19,"\n                        "),a.Qb(20,"div",1),a.Fc(21,"\n                            "),a.Lb(22,"img",13,14),a.Fc(24,"\n                        "),a.Pb(),a.Fc(25,"\n                        "),a.Qb(26,"div",1),a.Fc(27,"\n                            "),a.Qb(28,"button",15),a.Fc(29," Upload new image"),a.Pb(),a.Fc(30,"\n                        "),a.Pb(),a.Fc(31,"\n                        "),a.Lb(32,"br"),a.Fc(33,"\n                        "),a.Qb(34,"div",16),a.Fc(35,"\n                            "),a.Qb(36,"input",17,18),a.Xb("change",function(){a.wc(e);const t=a.vc(37);return a.Zb().addFile(t.value)}),a.Pb(),a.Fc(38,"\n                            "),a.Qb(39,"span"),a.Fc(40),a.ac(41,"translate"),a.Pb(),a.Fc(42,"\n                        "),a.Pb(),a.Fc(43,"\n                    "),a.Pb(),a.Fc(44,"\n                    "),a.Qb(45,"div",19),a.Fc(46,"\n                        "),a.Qb(47,"div",11),a.Fc(48,"\n                            "),a.Qb(49,"label",20),a.Fc(50),a.ac(51,"translate"),a.Pb(),a.Fc(52,"\n                            "),a.Qb(53,"div",21),a.Fc(54,"\n                                "),a.Qb(55,"label"),a.Fc(56,"\n                                    "),a.Qb(57,"input",22,23),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedClinicNews.isActive=t}),a.Pb(),a.Fc(59,"\n                                    "),a.Lb(60,"span",24),a.Fc(61,"\n                                "),a.Pb(),a.Fc(62,"\n                            "),a.Pb(),a.Fc(63,"\n                        "),a.Pb(),a.Fc(64,"\n                        "),a.Qb(65,"div",11),a.Fc(66,"\n                            "),a.Qb(67,"label",20),a.Fc(68),a.ac(69,"translate"),a.Pb(),a.Fc(70,"\n                            "),a.Qb(71,"div",21),a.Fc(72,"\n                                "),a.Qb(73,"p-calendar",25),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedClinicNews.creationDate=t}),a.Pb(),a.Fc(74,"\n                            "),a.Pb(),a.Fc(75,"\n                        "),a.Pb(),a.Fc(76,"\n                        "),a.Qb(77,"div",11),a.Fc(78,"\n                            "),a.Qb(79,"label",20),a.Fc(80),a.ac(81,"translate"),a.Pb(),a.Fc(82,"\n                            "),a.Qb(83,"div",21),a.Fc(84,"\n                                "),a.Qb(85,"input",26,27),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedClinicNews.name=t}),a.Pb(),a.Fc(87,"\n                                "),a.Qb(88,"div",28),a.Fc(89),a.ac(90,"translate"),a.Pb(),a.Fc(91,"\n                            "),a.Pb(),a.Fc(92,"\n                        "),a.Pb(),a.Fc(93,"\n                        "),a.Qb(94,"div",11),a.Fc(95,"\n                            "),a.Qb(96,"label",20),a.Fc(97),a.ac(98,"translate"),a.Pb(),a.Fc(99,"\n                            "),a.Qb(100,"div",21),a.Fc(101,"\n                                "),a.Qb(102,"textarea",29),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedClinicNews.description=t}),a.Pb(),a.Fc(103,"\n                            "),a.Pb(),a.Fc(104,"\n                        "),a.Pb(),a.Fc(105,"\n                    "),a.Pb(),a.Fc(106,"\n                "),a.Pb(),a.Fc(107,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(86),n=a.Zb();a.yb(5),a.hc("disabled",!e.form.valid||!n.isClinicAdmin),a.yb(1),a.Gc(a.bc(7,22,"Save")),a.yb(3),a.ic("disabled",n.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(11,24,"Back")),a.yb(12),a.hc("src",n.selectedClinicNews.imageData?"data:image/JPG;base64,"+n.selectedClinicNews.imageData:"",a.yc),a.yb(6),a.ic("disabled",n.isClinicAdmin?"":"disabled"),a.yb(12),a.Gc(a.bc(41,26,"FileSizeMsg")),a.yb(10),a.Gc(a.bc(51,28,"Active")),a.yb(7),a.hc("ngModel",n.selectedClinicNews.isActive),a.yb(11),a.Gc(a.bc(69,30,"Date")),a.yb(5),a.hc("ngModel",n.selectedClinicNews.creationDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",a.lc(38,kn)),a.yb(7),a.Gc(a.bc(81,32,"Title")),a.yb(5),a.hc("ngModel",n.selectedClinicNews.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(90,34,"RequiredField"),"\n                                "),a.yb(8),a.Gc(a.bc(98,36,"Description")),a.yb(5),a.hc("ngModel",n.selectedClinicNews.description)}}let Rn=(()=>{class e{constructor(e,t,n,i,c,s){this.toastr=e,this.localStorage=t,this.clinicService=n,this.sharedService=i,this._route=c,this.translate=s,this.utilityClass=new Nt.a,this.onBack=new a.n,this.selectedClinicNews=new Mn,this.selectNewsTab=!0,this.active=!0,this.showProgress=!1,this.imageSource="",this.userType="",this.isClinicAdmin=!1}ngOnInit(){if(this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.recorderId=this.localStorage.retrieve("UserID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.selectedClinicNewsId&&this.selectedClinicNewsId>0){let e=this;e.showProgress=!0,this.clinicService.getClinicNewsById(e.selectedClinicNewsId).subscribe(function(t){e.selectedClinicNews=t,e.selectedClinicNews.creationDate&&(e.selectedClinicNews.creationDate=e.utilityClass.getDateTimeFromString(e.selectedClinicNews.creationDate.toString()))},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}saveClinicNews(){let e=this,t=e.fileInput.nativeElement;this.selectedClinicNews.clinicId=this.selectedClinicId,this.selectedClinicNews.creationDate&&(this.selectedClinicNews.creationDate=this.utilityClass.getUtcDateTime(this.selectedClinicNews.creationDate));let n=new Date;if(this.selectedClinicNews.creationDate>n){let t=e.translate.instant("NewsDateValidation");e.toastr.error(t,"")}else e.showProgress=!0,this.selectedClinicNews.id>0?this.clinicService.updateClinicNews(this.selectedClinicNews).subscribe(function(n){e.selectedClinicNews=n,e.selectedClinicNews&&e.selectedClinicNews.creationDate&&(e.selectedClinicNews.creationDate=e.utilityClass.getDateTimeFromString(e.selectedClinicNews.creationDate.toString())),t.value="",e.onBack.emit(e.selectedClinicNews);let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createClinicNews(this.selectedClinicNews).subscribe(function(n){e.selectedClinicNews=n,e.selectedClinicNews&&e.selectedClinicNews.creationDate&&(e.selectedClinicNews.creationDate=e.utilityClass.getDateTimeFromString(e.selectedClinicNews.creationDate.toString())),t.value="",e.onBack.emit(e.selectedClinicNews);let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}addFile(e){let t=this,n=new Dn,i=this.fileInput.nativeElement;if(i.files&&i.files[0]){let e=i.files[0];if(!e.type.startsWith("image/")){let e=t.translate.instant("FileTypeValidation");return t.toastr.error(e,""),void(i.value="")}if(e.size>5242880){let e=t.translate.instant("FileSizeMsg");return void t.toastr.error(e,"")}let c=new FileReader;c.onload=e=>{t.newsImage.nativeElement.src=e.target.result},c.readAsDataURL(e),this.sharedService.uploadFile(e).subscribe(function(e){null!=e&&(t.selectedClinicNews.attachmentInfo=n,t.selectedClinicNews.attachmentInfo.originalName=e.originalName,t.selectedClinicNews.attachmentInfo.keyName=e.keyName,t.selectedClinicNews.attachmentInfo.fullPath=e.fullPath,t.selectedClinicNews.attachmentInfo.fileType=e.fileType)},function(e){t.toastr.error(e,"")},function(){})}}goBack(){this.clearControl(),this.onBack.emit()}clearControl(){this.selectedClinicNews=new Mn,this.fileInput.nativeElement.value="",this.active=!1,setTimeout(()=>this.active=!0,0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(bt.a),a.Kb(s.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-add-news"]],viewQuery:function(e,t){if(1&e&&(a.Lc(Gn,1),a.Lc(An,1)),2&e){let e;a.uc(e=a.Yb())&&(t.fileInput=e.first),a.uc(e=a.Yb())&&(t.newsImage=e.first)}},inputs:{selectedClinicNewsId:"selectedClinicNewsId"},outputs:{onBack:"onBack"},decls:23,vars:9,consts:[[4,"ngIf"],[1,"row"],[3,"isNewsSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"row","well"],["class","form-horizontal","name","newsForm",4,"ngIf"],["name","newsForm",1,"form-horizontal"],["newsForm","ngForm"],[1,"form-group","text-center"],[1,"btn","btn-primary",3,"disabled","click"],[1,"form-group"],[1,"col-md-4","text-center"],["width","100","height","100",2,"cursor","default",3,"src"],["newsImage",""],["data-toggle","collapse","data-target","#divUploadNewsImage",1,"btn","btn-primary",3,"disabled"],["id","divUploadNewsImage",1,"row","collapse"],["type","file","accept","image/*",1,"form-control",3,"change"],["fileInput",""],[1,"col-md-8"],[1,"control-label","col-md-4"],[1,"col-md-6"],["id","chkIsActive","name","chkIsActive","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["chkIsActive","ngModel"],[1,"lbl"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["id","txtClinicNewsTitle","name","txtClinicNewsTitle","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtClinicNewsTitle","ngModel"],[1,"alert","alert-danger",3,"hidden"],["id","txtClinicNewsRemark","name","txtClinicNewsRemark",1,"form-control",2,"width","100%","height","100px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.Dc(0,Nn,4,0,"div",0),a.Fc(1,"\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n\n        "),a.Qb(16,"div",5),a.Fc(17,"\n            "),a.Dc(18,Ln,108,39,"form",6),a.Fc(19,"\n        "),a.Pb(),a.Fc(20,"    "),a.Pb(),a.Fc(21,"\n"),a.Pb(),a.Fc(22,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isNewsSelected",t.selectNewsTab),a.yb(7),a.Gc(a.bc(12,5,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,7,"News"),"\n        "),a.yb(5),a.hc("ngIf",t.active))},directives:[i.k,y,S.a,c.q,c.g,c.h,c.a,c.f,c.i,kt.a,c.o,c.b],pipes:[d.c],encapsulation:2}),e})();const xn=["btnReplyToFeedBack"],Zn=["btnClosePopup"];function Bn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Hn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Fc(1,"\n                "),a.Qb(2,"div",13),a.Fc(3,"\n                    "),a.Qb(4,"button",14),a.Xb("click",function(){return a.wc(e),a.Zb().addNewClinicNews()}),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                "),a.Pb(),a.Fc(8,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(4),a.ic("disabled",e.isClinicAdmin?"":"disabled"),a.yb(1),a.Hc("\n                        ",a.bc(6,2,"Addnews"),"\n                    ")}}function On(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",12),a.Fc(1,"\n            "),a.Qb(2,"clinic-add-news",15),a.Xb("onBack",function(t){return a.wc(e),a.Zb().hideDetails(t)}),a.Pb(),a.Fc(3,"\n        "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedClinicNewsId",e.selectedClinicNewsId)}}let En=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.router=t,this.localStorage=n,this.clinicService=i,this.translate=c,this.selectNewsTab=!0,this.active=!0,this.showProgress=!1,this.clinicNewsList=[],this.lstToTranslated=[],this.isDetailsVisible=!1,this.userType="",this.isClinicAdmin=!1}ngOnInit(){this.lstToTranslated=["name","nameTranslation"],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0);let e=this;e.showProgress=!0,this.clinicService.getClinicNews(this.selectedClinicId).subscribe(function(t){e.clinicNewsList=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}changeClinicNewsActivationState(e,t){let n=this;n.showProgress=!0,n.clinicService.changeClinicNewsActivationState({id:e,isActive:t.target.checked}).subscribe(function(e){let t=n.translate.instant("SavedSuccessfully");n.toastr.success(t,"")},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}showNewsDetails(e){this.selectedClinicNewsId=e,this.isDetailsVisible=!0}getNewsImage(e){return e&&null!=e?"data:image/JPG;base64,"+e:""}addNewClinicNews(){this.selectedClinicNewsId="new",this.isDetailsVisible=!0}hideDetails(e){if(e){let t=this;t.clinicNewsList.forEach(n=>{n.id==e.id&&t.clinicNewsList.splice(t.clinicNewsList.indexOf(n),1)}),this.clinicNewsList.push(e)}this.isDetailsVisible=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(s.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["view-news-list"]],viewQuery:function(e,t){if(1&e&&(a.Lc(xn,1),a.Lc(Zn,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnReplyToFeedBack=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:37,vars:13,consts:[[4,"ngIf"],[1,"row"],[3,"isNewsSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[1,"row","well"],["class","padding5",4,"ngIf"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",3,"placeholder"],["gb",""],[1,"padding5"],[1,"col-md-offset-10"],[1,"btn","btn-primary",3,"disabled","click"],[3,"selectedClinicNewsId","onBack"]],template:function(e,t){1&e&&(a.Dc(0,Bn,4,0,"div",0),a.Fc(1,"\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n\n        "),a.Qb(16,"div",5),a.Fc(17,"\n            "),a.Dc(18,Hn,9,4,"div",6),a.Fc(19,"\n        "),a.Pb(),a.Fc(20,"\n\n    \n        "),a.Qb(21,"div",7),a.Fc(22,"\n            "),a.Qb(23,"div",8),a.Fc(24,"\n                "),a.Lb(25,"i",9),a.Fc(26,"\n                "),a.Lb(27,"input",10,11),a.ac(29,"translate"),a.Fc(30,"\n            "),a.Pb(),a.Fc(31,"\n            "),a.Fc(32,"\n        "),a.Pb(),a.Fc(33,"\n        "),a.Dc(34,On,4,1,"div",6),a.Fc(35,"\n    "),a.Pb(),a.Fc(36,"\n"),a.Pb()),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isNewsSelected",t.selectNewsTab),a.yb(7),a.Gc(a.bc(12,7,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(14,9,"News"),"\n        "),a.yb(5),a.hc("ngIf",!t.isDetailsVisible),a.yb(9),a.hc("placeholder",a.bc(29,11,"Search")),a.yb(7),a.hc("ngIf",t.isDetailsVisible))},directives:[i.k,y,S.a,Rn],pipes:[d.c],encapsulation:2}),e})();function Xn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Un(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",7,8),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n            "),a.Qb(3,"div",9),a.Fc(4,"\n                "),a.Qb(5,"div",10),a.Fc(6,"\n                    "),a.Qb(7,"span",11),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                "),a.Pb(),a.Fc(11,"\n               \n\n                "),a.Qb(12,"div",12),a.Fc(13,"\n                    "),a.Qb(14,"label",13),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n                    "),a.Qb(18,"div",14),a.Fc(19,"\n                        "),a.Qb(20,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.maximumDiscount=t}),a.Pb(),a.Fc(22,"\n                        "),a.Qb(23,"span"),a.Fc(24," "),a.Qb(25,"button",17),a.Fc(26,"  %"),a.Pb(),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",18),a.Fc(29),a.ac(30,"translate"),a.Pb(),a.Fc(31,"\n                    "),a.Pb(),a.Fc(32,"\n                "),a.Pb(),a.Fc(33,"\n                   \n                "),a.Qb(34,"div",12),a.Fc(35,"\n                    "),a.Qb(36,"label",19),a.Fc(37),a.ac(38,"translate"),a.Pb(),a.Fc(39,"\n                    "),a.Qb(40,"div",14),a.Fc(41,"\n                        "),a.Qb(42,"input",20,21),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().clinicModel.vat=t}),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"span"),a.Fc(46," "),a.Qb(47,"button",17),a.Fc(48,"  %"),a.Pb(),a.Pb(),a.Fc(49,"\n                        "),a.Qb(50,"div",18),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                    "),a.Pb(),a.Fc(54,"\n                "),a.Pb(),a.Fc(55,"\n                "),a.Qb(56,"div",12),a.Fc(57,"\n                    "),a.Qb(58,"div",22),a.Fc(59,"\n                        "),a.Qb(60,"button",23),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n                        "),a.Qb(64,"button",24),a.Fc(65),a.ac(66,"translate"),a.Pb(),a.Fc(67,"\n                    "),a.Pb(),a.Fc(68,"\n                "),a.Pb(),a.Fc(69,"\n            "),a.Pb(),a.Fc(70,"\n        \n\n        "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(21),n=a.vc(43),i=a.Zb();a.yb(8),a.Gc(a.bc(9,13,"Settings")),a.yb(7),a.Hc(" ",a.bc(16,15,"MaximumDiscount"),""),a.yb(5),a.hc("ngModel",i.clinicModel.maximumDiscount),a.yb(8),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                            ",a.bc(30,17,"RequiredField"),"\n                        "),a.yb(8),a.Hc(" ",a.bc(38,19,"VAT"),""),a.yb(5),a.hc("ngModel",i.clinicModel.vat),a.yb(8),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                            ",a.bc(52,21,"RequiredField"),"\n                        "),a.yb(9),a.hc("disabled",!e.form.valid||!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(62,23,"Save")),a.yb(3),a.ic("disabled",i.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(66,25,"Cancel"))}}let qn=(()=>{class e{constructor(e,t,n,i,c){this.administrationService=e,this.localStorage=t,this.toastr=n,this._route=i,this.translate=c,this.selectAccountTab=!0,this.clinicModel={id:0,isActive:!0},this.clinicId="",this.selectClinicsTab=!0,this.showProgress=!1,this.active=!0,this.userType="",this.isClinicAdmin=!1}ngOnInit(){this.clinicId=this._route.snapshot.params.id,this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.initializeModel()}initializeModel(){let e=this;"new"!=this.clinicId.toLowerCase()&&(this.showProgress=!0,this.administrationService.getClinicDiscountById(this.clinicId).subscribe(function(t){e.clinicModel=t,e.showProgress=!1},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}))}onSubmit(){let e=this;e.showProgress=!0,this.administrationService.updateClinicDiscount(e.clinicModel).subscribe(function(t){e.clinicModel=t;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(o.a),a.Kb(r.a),a.Kb(l.b),a.Kb(s.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-settings"]],decls:26,vars:9,consts:[[4,"ngIf"],[1,"row"],[3,"isSettingsSelected"],[1,"row","nopadding"],[1,"row",2,"padding","13px"],[1,"NBbreadcrumb"],["novalidate","","class","form-horizontal","name","SettingsForm",3,"ngSubmit",4,"ngIf"],["novalidate","","name","SettingsForm",1,"form-horizontal",3,"ngSubmit"],["SettingsForm","ngForm"],[1,"row","well"],[2,"padding-bottom","36px"],[1,"txtDeco"],[1,"form-group"],["for","txtMaxDiscount",1,"txtMax","control-label","col-md-4"],[1,"col-md-8"],["type","text","min","1","pattern","\\d+","id","txtMaxDiscount","name","txtMaxDiscount","required","",1,"formCtrl","form-control",3,"ngModel","ngModelChange"],["txtMaxDiscount","ngModel"],["type","button",1,"btnRadius","btn","btn-primary"],[1,"alert","alert-danger",3,"hidden"],["for","txtVAT",1,"txtMax","control-label","col-md-4"],["type","text","min","1","pattern","\\d+(\\.\\d{1,2})?","id","txtVAT","name","txtVAT","required","",1,"formCtrl","form-control",3,"ngModel","ngModelChange"],["txtVAT","ngModel"],[1,"col-sm-12"],[1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"disabled"]],template:function(e,t){1&e&&(a.Dc(0,Xn,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n        "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n        "),a.Qb(8,"div",1),a.Fc(9,"\n            "),a.Qb(10,"div",4),a.Fc(11,"\n                "),a.Qb(12,"div",5),a.Fc(13,"\n                    "),a.Qb(14,"a"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n\n            "),a.Pb(),a.Fc(20,"\n        "),a.Pb(),a.Fc(21,"\n\n\n        "),a.Dc(22,Un,71,27,"form",6),a.Fc(23,"\n\n    "),a.Pb(),a.Fc(24,"\n"),a.Pb(),a.Fc(25,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isSettingsSelected",t.selectSettingsTab),a.yb(11),a.Gc(a.bc(16,5,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                   ",a.bc(18,7,"Settings"),"\n                "),a.yb(5),a.hc("ngIf",t.active))},directives:[i.k,y,S.a,c.q,c.g,c.h,c.b,c.l,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();function jn(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let Kn=(()=>{class e{constructor(){this.selectStaffTab=!0,this.showProgress=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-staff"]],decls:83,vars:20,consts:[[4,"ngIf"],[1,"row"],[3,"isStaffSelected"],[1,"row","nopadding"],[1,"page-breadcrumb"],[1,"col-md-7"],[1,"page-breadcrumb-wrap"],[1,"page-breadcrumb-info"],[1,"list-page-breadcrumb"],[1,"active-page"],[1,"col-md-5"],[1,"col-md-11"],[1,"nav","nav-tabs"],[1,"active"],["href","#Doctor","data-toggle","tab","aria-expanded","true"],["href","#Nurse","data-toggle","tab","aria-expanded","true"],["href","#Receptionist","data-toggle","tab","aria-expanded","true"],["href","#Cashier","data-toggle","tab","aria-expanded","true"],["id","myTabContent",1,"tab-content"],["id","Doctor",1,"tab-pane","fade","active","in"],["id","Nurse",1,"tab-pane","fade"],["id","Receptionist",1,"tab-pane","fade"],["id","Cashier",1,"tab-pane","fade"]],template:function(e,t){1&e&&(a.Dc(0,jn,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n        "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n    "),a.Qb(6,"div",3),a.Fc(7,"\n\n        "),a.Qb(8,"div",4),a.Fc(9,"\n            "),a.Qb(10,"div",1),a.Fc(11,"\n                "),a.Qb(12,"div",5),a.Fc(13,"\n                    "),a.Qb(14,"div",6),a.Fc(15,"\n                        "),a.Qb(16,"div",7),a.Fc(17,"\n                            "),a.Qb(18,"ul",8),a.Fc(19,"\n                                "),a.Qb(20,"li"),a.Fc(21),a.ac(22,"translate"),a.Pb(),a.Fc(23,"\n                                "),a.Qb(24,"li",9),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                            "),a.Pb(),a.Fc(28,"\n                        "),a.Pb(),a.Fc(29,"\n                    "),a.Pb(),a.Fc(30,"\n                "),a.Pb(),a.Fc(31,"\n                "),a.Qb(32,"div",10),a.Fc(33,"\n                "),a.Pb(),a.Fc(34,"\n            "),a.Pb(),a.Fc(35,"\n        "),a.Pb(),a.Fc(36,"\n\n        "),a.Qb(37,"div",1),a.Fc(38,"\n            "),a.Qb(39,"div",11),a.Fc(40,"\n                "),a.Qb(41,"ul",12),a.Fc(42,"\n                    "),a.Qb(43,"li",13),a.Qb(44,"a",14),a.Fc(45),a.ac(46,"translate"),a.Pb(),a.Pb(),a.Fc(47,"\n                    "),a.Qb(48,"li"),a.Qb(49,"a",15),a.Fc(50),a.ac(51,"translate"),a.Pb(),a.Pb(),a.Fc(52,"\n                    "),a.Qb(53,"li"),a.Qb(54,"a",16),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Pb(),a.Fc(57,"\n                    "),a.Qb(58,"li"),a.Qb(59,"a",17),a.Fc(60),a.ac(61,"translate"),a.Pb(),a.Pb(),a.Fc(62,"\n                "),a.Pb(),a.Fc(63,"\n                "),a.Qb(64,"div",18),a.Fc(65,"\n                    "),a.Qb(66,"div",19),a.Fc(67,"\n\n                    "),a.Pb(),a.Fc(68,"\n                    "),a.Qb(69,"div",20),a.Fc(70,"\n\n                    "),a.Pb(),a.Fc(71,"\n                    "),a.Qb(72,"div",21),a.Fc(73,"\n\n                    "),a.Pb(),a.Fc(74,"\n\n                    "),a.Qb(75,"div",22),a.Fc(76,"\n\n                    "),a.Pb(),a.Fc(77,"\n\n                "),a.Pb(),a.Fc(78,"\n            "),a.Pb(),a.Fc(79,"\n        "),a.Pb(),a.Fc(80,"\n\n    "),a.Pb(),a.Fc(81,"\n"),a.Pb(),a.Fc(82,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isStaffSelected",t.selectStaffTab),a.yb(17),a.Hc("\n                                   ",a.bc(22,8,"Clinic"),"\n                                "),a.yb(4),a.Hc(" ",a.bc(26,10,"Staff"),""),a.yb(20),a.Gc(a.bc(46,12,"Doctors")),a.yb(5),a.Gc(a.bc(51,14,"Nurses")),a.yb(5),a.Gc(a.bc(56,16,"Receptionists")),a.yb(5),a.Gc(a.bc(61,18,"Cashier")))},directives:[i.k,y,S.a],pipes:[d.c],encapsulation:2}),e})();var Vn=n("KjZm");function $n(e,t){if(1&e&&(a.Qb(0,"option",47),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e),a.yb(1),a.Gc(e)}}function zn(e,t){if(1&e&&(a.Qb(0,"option",47),a.Fc(1),a.ac(2,"translate"),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.value),a.yb(1),a.Gc(a.bc(2,2,e.text))}}const Wn=function(){return{standalone:!0}};function Yn(e,t){if(1&e){const e=a.Rb();a.Qb(0,"tr"),a.Fc(1,"\n                        "),a.Qb(2,"td",27),a.Fc(3,"\n                            "),a.Qb(4,"select",48),a.Xb("ngModelChange",function(e){return t.$implicit.day=e}),a.Fc(5,"\n                                "),a.Qb(6,"option",49),a.Fc(7),a.ac(8,"translate"),a.Pb(),a.Fc(9,"\n                                "),a.Dc(10,zn,3,4,"option",34),a.Fc(11,"\n                            "),a.Pb(),a.Fc(12,"\n                        "),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"td",27),a.Fc(15,"\n                            "),a.Qb(16,"input",50),a.Xb("ngModelChange",function(e){return t.$implicit.name=e}),a.Pb(),a.Fc(17,"\n                        "),a.Pb(),a.Fc(18,"\n                        "),a.Qb(19,"td",51),a.Fc(20,"\n                            "),a.Qb(21,"p-calendar",52),a.Xb("ngModelChange",function(e){return t.$implicit.startTime=e}),a.Pb(),a.Fc(22,"\n                        "),a.Pb(),a.Fc(23,"\n                        "),a.Qb(24,"td",51),a.Fc(25,"\n                            "),a.Qb(26,"p-calendar",53),a.Xb("ngModelChange",function(e){return t.$implicit.endTime=e}),a.Pb(),a.Fc(27,"\n                        "),a.Pb(),a.Fc(28,"\n                        "),a.Qb(29,"td",51),a.Fc(30,"\n                            "),a.Qb(31,"input",54),a.Xb("ngModelChange",function(e){return t.$implicit.waitIn=e}),a.Pb(),a.Fc(32,"\n                        "),a.Pb(),a.Fc(33,"\n                        "),a.Qb(34,"td"),a.Fc(35,"\n                            "),a.Qb(36,"input",55),a.Xb("ngModelChange",function(e){return t.$implicit.description=e}),a.Pb(),a.Fc(37,"\n                        "),a.Pb(),a.Fc(38,"\n                        "),a.Qb(39,"td",1),a.Fc(40,"\n                            "),a.Qb(41,"a",56),a.Xb("click",function(){a.wc(e);const n=t.index,i=t.$implicit;return a.Zb(2).selectSessionToDelete(n,i.id)}),a.Fc(42,"\n                                "),a.Lb(43,"i",57),a.Fc(44,"\n\n                            "),a.Pb(),a.Fc(45,"\n                        "),a.Pb(),a.Fc(46,"\n                    "),a.Pb()}if(2&e){const e=t.$implicit,n=t.index,i=a.Zb(2);a.yb(4),a.kc("name","ddlDays",n,"",i.getControlNumber(),""),a.hc("ngModel",e.day),a.yb(3),a.Gc(a.bc(8,25,"Select")),a.yb(3),a.hc("ngForOf",i.days),a.yb(6),a.kc("name","txtName",n,"",i.getControlNumber(),""),a.hc("ngModel",e.name),a.yb(5),a.kc("name","startTime",n,"",i.getControlNumber(),""),a.hc("ngModel",e.startTime)("required",!0)("timeOnly",!0)("ngModelOptions",a.lc(27,Wn)),a.yb(5),a.kc("name","endTime",n,"",i.getControlNumber(),""),a.hc("ngModel",e.endTime)("required",!0)("timeOnly",!0),a.yb(5),a.kc("name","txtWaitIn",n,"",i.getControlNumber(),""),a.hc("ngModel",e.waitIn),a.yb(5),a.kc("name","txtRemark",n,"",i.getControlNumber(),""),a.hc("ngModel",e.description)}}function _n(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",20,21),a.Fc(2,"\n        "),a.Qb(3,"div",22),a.Fc(4,"\n            "),a.Qb(5,"div",23),a.Fc(6,"\n                "),a.Qb(7,"button",24),a.Xb("click",function(){return a.wc(e),a.Zb().saveAppointment()}),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                "),a.Qb(11,"button",24),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                "),a.Qb(15,"button",25),a.Xb("click",function(){return a.wc(e),a.Zb().goBack()}),a.Fc(16),a.ac(17,"translate"),a.Pb(),a.Fc(18,"\n            "),a.Pb(),a.Fc(19,"\n        "),a.Pb(),a.Fc(20,"\n\n        "),a.Qb(21,"div",22),a.Fc(22,"\n            "),a.Qb(23,"label",26),a.Fc(24),a.ac(25,"translate"),a.Pb(),a.Fc(26,"\n            "),a.Qb(27,"div",27),a.Fc(28,"\n                "),a.Qb(29,"p-calendar",28),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.startDate=t}),a.Pb(),a.Fc(30,"\n            "),a.Pb(),a.Fc(31,"\n        "),a.Pb(),a.Fc(32,"\n\n        "),a.Qb(33,"div",22),a.Fc(34,"\n            "),a.Qb(35,"label",29),a.Fc(36),a.ac(37,"translate"),a.Pb(),a.Fc(38,"\n            "),a.Qb(39,"div",27),a.Fc(40,"\n                "),a.Qb(41,"p-calendar",28),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.endDate=t}),a.Pb(),a.Fc(42,"\n            "),a.Pb(),a.Fc(43,"\n        "),a.Pb(),a.Fc(44,"\n\n        "),a.Qb(45,"div",22),a.Fc(46,"\n            "),a.Qb(47,"label",30),a.Fc(48),a.ac(49,"translate"),a.Pb(),a.Fc(50,"\n            "),a.Qb(51,"div",27),a.Fc(52,"\n                "),a.Qb(53,"select",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.slotDuration=t})("change",function(){a.wc(e);const t=a.vc(55);return a.Zb().calculateCalendarSlots(t.value)}),a.Fc(56,"\n                    "),a.Lb(57,"option",33),a.Fc(58,"\n                    "),a.Dc(59,$n,2,2,"option",34),a.Fc(60,"\n                "),a.Pb(),a.Fc(61,"\n            "),a.Pb(),a.Fc(62,"\n            "),a.Qb(63,"div",35),a.Fc(64,"\n                "),a.Qb(65,"a",36),a.ac(66,"translate"),a.Fc(67,"\n                    "),a.Lb(68,"span",37),a.Fc(69,"\n                "),a.Pb(),a.Fc(70,"\n            "),a.Pb(),a.Fc(71,"\n        "),a.Pb(),a.Fc(72,"\n        "),a.Qb(73,"div",22),a.Fc(74,"\n            "),a.Qb(75,"label",38),a.Fc(76),a.ac(77,"translate"),a.Pb(),a.Fc(78,"\n            "),a.Qb(79,"div",39),a.Fc(80,"\n                "),a.Qb(81,"textarea",40),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.description=t}),a.Pb(),a.Fc(82,"\n            "),a.Pb(),a.Fc(83,"\n        "),a.Pb(),a.Fc(84,"\n        "),a.Qb(85,"h4",0),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n        "),a.Qb(89,"div",41),a.Fc(90,"\n            "),a.Qb(91,"table",17),a.Fc(92,"\n                "),a.Qb(93,"thead",18),a.Fc(94,"\n                    "),a.Qb(95,"tr"),a.Fc(96,"\n                        "),a.Qb(97,"th"),a.Fc(98),a.ac(99,"translate"),a.Pb(),a.Fc(100,"\n                        "),a.Qb(101,"th"),a.Fc(102),a.ac(103,"translate"),a.Pb(),a.Fc(104,"\n                        "),a.Qb(105,"th"),a.Fc(106),a.ac(107,"translate"),a.Pb(),a.Fc(108,"\n                        "),a.Qb(109,"th"),a.Fc(110),a.ac(111,"translate"),a.Pb(),a.Fc(112,"\n                        "),a.Qb(113,"th"),a.Fc(114),a.ac(115,"translate"),a.Pb(),a.Fc(116,"\n                        "),a.Qb(117,"th"),a.Fc(118),a.ac(119,"translate"),a.Pb(),a.Fc(120,"\n                        "),a.Qb(121,"th",1),a.Fc(122),a.ac(123,"translate"),a.Pb(),a.Fc(124,"\n                    "),a.Pb(),a.Fc(125,"\n                "),a.Pb(),a.Fc(126,"\n                "),a.Qb(127,"tbody"),a.Fc(128,"\n                    "),a.Dc(129,Yn,47,28,"tr",19),a.Fc(130,"\n                "),a.Pb(),a.Fc(131,"\n                "),a.Qb(132,"tfoot"),a.Fc(133,"\n                    "),a.Qb(134,"tr",18),a.Fc(135,"\n                        "),a.Qb(136,"th",42),a.Fc(137,"\n                            "),a.Qb(138,"div",43),a.Fc(139,"\n                                "),a.Qb(140,"a",44),a.Xb("click",function(){return a.wc(e),a.Zb().addNewItem()}),a.Fc(141,"\n                                    "),a.Lb(142,"img",45),a.Fc(143,"\n                                    "),a.Qb(144,"span",46),a.Fc(145),a.ac(146,"translate"),a.Pb(),a.Fc(147,"\n                                "),a.Pb(),a.Fc(148,"\n                            "),a.Pb(),a.Fc(149,"\n                        "),a.Pb(),a.Fc(150,"\n                    "),a.Pb(),a.Fc(151,"\n\n                "),a.Pb(),a.Fc(152,"\n            "),a.Pb(),a.Fc(153,"\n        "),a.Pb(),a.Fc(154,"\n    "),a.Pb()}if(2&e){const e=a.vc(1),t=a.Zb();a.yb(7),a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(9,35,"Save")),a.yb(3),a.ic("disabled",t.enableSaveBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(13,37,"New")),a.yb(4),a.Gc(a.bc(17,39,"Back")),a.yb(8),a.Hc(" ",a.bc(25,41,"StartDate"),""),a.yb(5),a.hc("ngModel",t.model.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",a.lc(69,Wn)),a.yb(7),a.Hc(" ",a.bc(37,43,"EndDate"),""),a.yb(5),a.hc("ngModel",t.model.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",a.lc(70,Wn)),a.yb(7),a.Gc(a.bc(49,45,"SlotDuration")),a.yb(5),a.hc("ngModel",t.model.slotDuration),a.yb(6),a.hc("ngForOf",t.slotDurations),a.yb(6),a.hc("title",a.bc(66,47,"CalendarSlots")),a.yb(11),a.Gc(a.bc(77,49,"Remarks")),a.yb(5),a.hc("ngModel",t.model.description),a.yb(5),a.Hc("\n            ",a.bc(87,51,"Sessions"),"\n        "),a.yb(12),a.Gc(a.bc(99,53,"Day")),a.yb(4),a.Gc(a.bc(103,55,"SessionName")),a.yb(4),a.Gc(a.bc(107,57,"StartTime")),a.yb(4),a.Gc(a.bc(111,59,"EndTime")),a.yb(4),a.Gc(a.bc(115,61,"Waitin")),a.yb(4),a.Gc(a.bc(119,63,"Remarks")),a.yb(4),a.Gc(a.bc(123,65,"Delete")),a.yb(7),a.hc("ngForOf",t.sessionsList),a.yb(16),a.Hc("\n                                        ",a.bc(146,67,"AddNew"),"\n                                    ")}}function Jn(e,t){if(1&e&&(a.Qb(0,"tr"),a.Fc(1,"\n                                    "),a.Qb(2,"td",1),a.Fc(3),a.Pb(),a.Fc(4,"\n                                "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                                        ",e.name,"\n                                    ")}}let ei=(()=>{class e{constructor(e,t,n){this.toastr=e,this.clinicService=t,this.translate=n,this.slotDurations=[],this.appointmentIdValue="",this.daysList=[],this.doctorIdValue="",this.doctorNameValue="",this.clinicIdValue="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.selectAppointmentsTab=!0,this.model={},this.sessionModel={},this.items=[],this.days=[],this.controlsCount=1,this.active=!0,this.strm="tttt",this.utilityClass=new Nt.a,this.showProgress=!1,this.sessionIdToDeleted="",this.onBack=new a.n,this.displayCalendarSlots=!1,this.calendarSlots=[]}goBack(){this.onBack.emit()}addNewItem(){this.sessionModel={},this.sessionsList.push(this.sessionModel),this.controlsCount++}getControlNumber(){return this.controlsCount}updateModelWithSessions(){let e=this;e.sessionsListIfError=e.sessionsList;var t=[];for(let n of e.sessionsList)n.startTime=this.utilityClass.getUtcDateTime(n.startTime),n.endTime=this.utilityClass.getUtcDateTime(n.endTime),t.push(n);this.model.sessions=t}deleteItem(e){this.sessionsList.splice(e,1)}selectSessionToDelete(e,t){this.sessionIndex=e,this.sessionIdToDeleted=t}deleteSession(){this.sessionsList.splice(this.sessionIndex,1),null!=this.sessionIdToDeleted&&null!=this.sessionIdToDeleted&&""!=this.sessionIdToDeleted&&this.deleteSessionFromDB()}deleteSessionFromDB(){let e=this;this.clinicService.deleteAppointmentScheduleSession(this.sessionIdToDeleted).subscribe(function(t){let n=e.translate.instant("DeletedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}ngOnInit(){let e=this;e.appointmentId=e.appointmentIdValue,e.days=e.daysList,e.sessionsList=[],e.doctorId=e.doctorIdValue,e.doctorName=e.doctorNameValue,e.clinicId=e.clinicIdValue,"new"!=e.appointmentId.toString().toLowerCase()&&e.loadAppointmentScheduleModel()}loadAppointmentScheduleModel(){let e=this;this.clinicService.getAppointmentScheduleById(e.appointmentId).subscribe(function(t){e.model=t,e.calculateCalendarSlots(e.model.slotDuration),e.sessionsList=t.sessions,null==t.sessions?e.sessionsList=[]:e.updateSessionsTime(e.sessionsList),e.model.startDate&&(e.model.startDate=e.utilityClass.getUtcDateFromString(e.model.startDate)),e.model.endDate&&(e.model.endDate=e.utilityClass.getUtcDateFromString(e.model.endDate))},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}updateSessionsTime(e){let t=this;for(let n of e)n.startTime=t.utilityClass.getDateTimeFromString(n.startTime),n.endTime=t.utilityClass.getDateTimeFromString(n.endTime)}formatTime(e){return e.getTime().toString()}saveAppointment(){let e=this,t=this.validateSessionSlotsWithCalendarSlot();0!=t[0]?(e.showProgress=!0,e.updateModelWithSessions(),e.model.clinicId=e.clinicId,this.model.startDate&&(this.model.startDate=this.utilityClass.getUtcDate(this.model.startDate)),this.model.endDate&&(this.model.endDate=this.utilityClass.getUtcDate(this.model.endDate)),isNaN(e.appointmentId)&&"new"==e.appointmentId.toString().toLowerCase()?(e.model.securityUserId=e.doctorId,this.clinicService.createAppointmentSchedule(this.model).subscribe(function(t){e.model=t,e.appointmentId=e.model.id,e.toastr.success(e.translate.instant("SavedSuccessfully"),""),e.sessionsList=e.model.sessions,e.updateSessionsTime(e.sessionsList),e.model.startDate=e.utilityClass.getUtcDateFromString(e.model.startDate),e.model.endDate=e.utilityClass.getUtcDateFromString(e.model.endDate)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})):this.clinicService.updateAppointmentSchedule(this.model).subscribe(function(t){e.model=t,e.toastr.success(e.translate.instant("SavedSuccessfully"),""),e.sessionsList=e.model.sessions,e.updateSessionsTime(e.sessionsList),e.model.startDate=e.utilityClass.getUtcDateFromString(e.model.startDate),e.model.endDate=e.utilityClass.getUtcDateFromString(e.model.endDate)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})):e.toastr.error(t[1],"")}validateSessionSlotsWithCalendarSlot(){let e="",t=[],n=!0;this.calendarSlots=[],this.calendarSlots=this.getFullDayTimeSlots(parseInt(this.model.slotDuration));for(let i of this.sessionsList){let e=new Date(i.startTime.getFullYear(),i.startTime.getMonth(),i.startTime.getDate(),i.startTime.getHours(),i.startTime.getMinutes()),c=new Vn.a(e);this.calendarSlots.find(e=>e.name==c.name)||(n=!1,t.push(i.name))}return n||(e=this.translate.instant("DoctorSlotsdontMatchCalendarSlots")+t.toString()),[n,e]}clear(){this.model={};for(let e=0;e<this.sessionsList.length;e++)this.deleteItem(e);this.controlsCount=1,this.sessionsList=[],this.appointmentId="new",this.active=!1,setTimeout(()=>this.active=!0,0)}getFullDayTimeSlots(e){null!=e&&null!=e||(e=10);let t=[],n=60/e*24,i=new Date,c=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0);t.push(new Vn.a(c));for(let s=1;s<n;s++){let n=c.getMinutes()+e;c.setMinutes(n),t.push(new Vn.a(c))}return t}calculateCalendarSlots(e){this.calendarSlots=[],e&&(this.calendarSlots=this.getFullDayTimeSlots(parseInt(e)))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-appointment-details"]],inputs:{slotDurations:"slotDurations",appointmentIdValue:"appointmentIdValue",daysList:"daysList",doctorIdValue:"doctorIdValue",doctorNameValue:"doctorNameValue",clinicIdValue:"clinicIdValue",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onBack:"onBack"},decls:102,vars:27,consts:[[1,"h4Deco"],[1,"text-center"],[1,"legend","well"],["class","form-horizontal","name","appointmentForm",4,"ngIf"],["id","deleteServiceBenficiary","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],["id","calendarSlotsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog",2,"width","250px"],[2,"height","300px","overflow","auto"],[1,"table","table-responsive","table-hover"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"],["name","appointmentForm",1,"form-horizontal"],["appointmentForm","ngForm"],[1,"form-group"],[1,"col-md-4","col-md-offset-2"],[1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"],["for","txtPhysicalStartDate",1,"control-label","col-md-2"],[1,"col-md-2"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["for","txtPhysicalEndDate",1,"control-label","col-md-2"],["for","ddlSlotDuration",1,"control-label","col-md-2"],["id","ddlSlotDuration","name","ddlSlotDuration","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlSlotDuration","ngModel","d",""],["value","","selected","",1,"emptyOption"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","nopadding"],["data-toggle","modal","data-target","#calendarSlotsPopup",1,"pointer",3,"title"],[1,"fa","fa-calendar"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-6"],["id","txtDescription","name","txtDescription",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],["colspan","7"],[2,"float","left"],[1,"pointer",3,"click"],["src","assets/images/AddImage.png"],[2,"text-decoration","underline"],[3,"value"],["required","",1,"form-control",3,"name","ngModel","ngModelChange"],["value",""],["type","text","required","",1,"form-control",3,"name","ngModel","ngModelChange"],[1,"col-md-1"],[3,"name","ngModel","required","timeOnly","ngModelOptions","ngModelChange"],[3,"name","ngModel","required","timeOnly","ngModelChange"],["type","number","min","0","step","1","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["type","text",1,"form-control",3,"name","ngModel","ngModelChange"],["data-toggle","modal","data-target","#deleteServiceBenficiary",1,"pointer",3,"click"],[1,"glyphicon","glyphicon-remove","iconAd"]],template:function(e,t){1&e&&(a.Fc(0,"\n\n"),a.Qb(1,"h4",0),a.Fc(2),a.ac(3,"translate"),a.Qb(4,"span",1),a.Fc(5),a.Pb(),a.Fc(6,"\n"),a.Pb(),a.Fc(7,"\n"),a.Qb(8,"div",2),a.Fc(9,"\n\n    "),a.Dc(10,_n,155,71,"form",3),a.Fc(11,"\n    "),a.Qb(12,"div",4),a.Fc(13,"\n        "),a.Qb(14,"div",5),a.Fc(15,"\n            "),a.Fc(16,"\n            "),a.Qb(17,"div",6),a.Fc(18,"\n                "),a.Qb(19,"div",7),a.Fc(20,"\n                    "),a.Qb(21,"button",8),a.Fc(22,"\xd7"),a.Pb(),a.Fc(23,"\n                    "),a.Qb(24,"h4",9),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                "),a.Pb(),a.Fc(28,"\n                "),a.Qb(29,"div",10),a.Fc(30,"\n                    "),a.Qb(31,"p"),a.Fc(32),a.ac(33,"translate"),a.Pb(),a.Fc(34,"\n                "),a.Pb(),a.Fc(35,"\n                "),a.Qb(36,"div",11),a.Fc(37,"\n                    "),a.Qb(38,"button",12),a.Xb("click",function(){return t.deleteSession()}),a.Fc(39),a.ac(40,"translate"),a.Pb(),a.Fc(41,"\n                    "),a.Qb(42,"button",13),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                "),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n\n        "),a.Pb(),a.Fc(48,"\n    "),a.Pb(),a.Fc(49,"\n\n    "),a.Qb(50,"div",14),a.Fc(51,"\n        "),a.Qb(52,"div",15),a.Fc(53,"\n            "),a.Fc(54,"\n            "),a.Qb(55,"div",6),a.Fc(56,"\n                "),a.Qb(57,"div",7),a.Fc(58,"\n                    "),a.Qb(59,"button",8),a.Fc(60,"\xd7"),a.Pb(),a.Fc(61,"\n                    "),a.Qb(62,"h4",9),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n                "),a.Pb(),a.Fc(66,"\n                "),a.Qb(67,"div",10),a.Fc(68,"\n                    "),a.Qb(69,"div",16),a.Fc(70,"\n                        "),a.Qb(71,"table",17),a.Fc(72,"\n                            "),a.Qb(73,"thead",18),a.Fc(74,"\n                                "),a.Qb(75,"tr"),a.Fc(76,"\n                                    "),a.Qb(77,"th",1),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Fc(80,"\n                                "),a.Pb(),a.Fc(81,"\n                            "),a.Pb(),a.Fc(82,"\n                            "),a.Qb(83,"tbody"),a.Fc(84,"\n                                "),a.Dc(85,Jn,5,1,"tr",19),a.Fc(86,"\n                            "),a.Pb(),a.Fc(87,"\n                        "),a.Pb(),a.Fc(88,"\n                    "),a.Pb(),a.Fc(89,"\n                "),a.Pb(),a.Fc(90,"\n                "),a.Qb(91,"div",11),a.Fc(92,"\n                    "),a.Qb(93,"button",13),a.Fc(94),a.ac(95,"translate"),a.Pb(),a.Fc(96,"\n                "),a.Pb(),a.Fc(97,"\n            "),a.Pb(),a.Fc(98,"\n\n        "),a.Pb(),a.Fc(99,"\n    "),a.Pb(),a.Fc(100,"\n\n"),a.Pb(),a.Fc(101,"\n\n\n")),2&e&&(a.yb(2),a.Hc("\n    ",a.bc(3,11,"BasicInfo")," "),a.yb(3),a.Gc(t.doctorName),a.yb(5),a.hc("ngIf",t.active),a.yb(15),a.Gc(a.bc(26,13,"ConfirmDelete")),a.yb(7),a.Gc(a.bc(33,15,"AreYouSureDelete")),a.yb(7),a.Gc(a.bc(40,17,"Yes")),a.yb(4),a.Gc(a.bc(44,19,"No")),a.yb(20),a.Gc(a.bc(64,21,"CalendarSlots")),a.yb(15),a.Gc(a.bc(79,23,"Slot")),a.yb(7),a.hc("ngForOf",t.calendarSlots),a.yb(9),a.Gc(a.bc(95,25,"Close")))},directives:[i.k,i.j,c.q,c.g,c.h,kt.a,c.f,c.i,c.o,c.p,c.j,c.r,c.b,c.k],pipes:[d.c],encapsulation:2}),e})();function ti(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function ni(e,t){if(1&e&&a.Lb(0,"clinic-tab",16),2&e){const e=a.Zb();a.hc("isAppointmentsSelected",e.selectAppointmentsTab)}}function ii(e,t){if(1&e&&a.Lb(0,"shared-tabs",16),2&e){const e=a.Zb();a.hc("isAppointmentsSelected",e.selectAppointmentsTab)}}function ci(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                    ",t.$implicit.label,"\n                ")}function si(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                    ",t.$implicit.label,"\n                ")}function ai(e,t){1&e&&a.Fc(0),2&e&&a.Hc("\n                    ",t.$implicit.label,"\n                ")}function oi(e,t){if(1&e&&(a.Fc(0,"\n                    "),a.Lb(1,"span",32),a.Fc(2)),2&e){const e=t.$implicit;a.yb(2),a.Hc(" ",e.label,"\n                ")}}function ri(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",33),a.Xb("click",function(){return a.wc(e),a.Zb(2).showDetails("new")}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){const e=a.Zb(2);a.ic("disabled",e.enableNewBtn||e.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(2,2,"NewSchedule"))}}function li(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",17),a.Fc(1,"\n        "),a.Fc(2,"\n        "),a.Qb(3,"div",18),a.Fc(4,"\n            "),a.Fc(5,"\n            "),a.Qb(6,"p-tree",19),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedFiles=t})("onNodeSelect",function(t){return a.wc(e),a.Zb().nodeSelect(t)}),a.ac(7,"translateObjects"),a.Fc(8,"\n                "),a.Dc(9,ci,1,1,"ng-template",20),a.Fc(10,"\n                "),a.Dc(11,si,1,1,"ng-template",21),a.Fc(12,"\n                "),a.Dc(13,ai,1,1,"ng-template",22),a.Fc(14,"\n                "),a.Dc(15,oi,3,1,"ng-template",23),a.Fc(16,"\n            "),a.Pb(),a.Fc(17,"\n        "),a.Pb(),a.Fc(18,"\n        "),a.Qb(19,"h4",24),a.Fc(20),a.ac(21,"translate"),a.Pb(),a.Fc(22,"\n        "),a.Qb(23,"div",25),a.Fc(24,"\n            "),a.Dc(25,ri,3,4,"button",26),a.Fc(26,"\n        "),a.Pb(),a.Fc(27,"\n        "),a.Lb(28,"br"),a.Fc(29,"\n        "),a.Qb(30,"div"),a.Fc(31,"\xa0"),a.Pb(),a.Fc(32,"\n        "),a.Qb(33,"div",27),a.Fc(34,"\n            "),a.Qb(35,"div",28),a.Fc(36,"\n                "),a.Lb(37,"i",29),a.Fc(38,"\n                "),a.Lb(39,"input",30,31),a.ac(41,"translate"),a.Fc(42,"\n            "),a.Pb(),a.Fc(43,"\n\n            "),a.Fc(44,"\n        "),a.Pb(),a.Fc(45,"\n    "),a.Pb()}if(2&e){const e=a.Zb();a.yb(6),a.hc("value",a.ec(7,5,e.organizationStructure,null,null,e.lstToTranslated))("selection",e.selectedFiles),a.yb(14),a.Gc(a.bc(21,10,"DoctorSchedules")),a.yb(5),a.hc("ngIf",e.isDoctorSelected),a.yb(14),a.hc("placeholder",a.bc(41,12,"Search"))}}function di(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",34),a.Fc(1,"\n        "),a.Qb(2,"clinic-appointment-details",35),a.Xb("onBack",function(){return a.wc(e),a.Zb().hideDetails()}),a.Pb(),a.Fc(3,"\n    "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("slotDurations",e.slotDurations)("appointmentIdValue",e.appointmentId)("daysList",e.daysList)("doctorIdValue",e.doctorId)("clinicIdValue",e.clinicId)("doctorNameValue",e.doctorName)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)}}let bi=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.selectAppointmentsTab=!0,this.count=12,this.showProgress=!0,this.organizationStructure=[],this.doctorId="0",this.doctorName="",this.slotDurations=[],this.appointmentsList=[],this.daysList=[],this.appointmentId="",this.isDetailsVisible=!1,this.isDepartmentOrDivisionSelected=!1,this.isDoctorSelected=!1,this.utilityClass=new Nt.a,this.userPermisions=new x.a,this.key=new Z.a,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.userType="",this.isClinicAdmin=!1,this.enableNewBtn=!1,this.enableDeleteBtn=!1,this.lstToTranslated=[],this.lstToBeTranslated=[]}showDetails(e){this.isDetailsVisible=!0,this.appointmentId=e}hideDetails(){this.isDetailsVisible=!1,this.loadAppointmentSchedules()}ngOnInit(){let e=this;this.lstToTranslated=["label","labelTranslation"],this.lstToBeTranslated=["",""],this.clinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.loadOrganizationStructureTree(),this.clinicService.getAppointmentScheduleWrapper().subscribe(function(t){e.daysList=t.days},function(t){e.toastr.error(t,"")},function(){}),e.fillSlotsList(e.count),"0"!=e.doctorId.toString().toLowerCase()&&e.loadAppointmentSchedules(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}loadOrganizationStructureTree(){let e=this;e.showProgress=!0,this.clinicService.getOrganizationStructureTreeWithDoctorsOnly(this.clinicId).subscribe(function(t){e.organizationStructure=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}loadAppointmentSchedules(){let e=this;this.clinicService.getAllAppointmentSchedules(e.doctorId).subscribe(function(t){e.appointmentsList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}getAllAppointmentSchedulesUnderClinic(){let e=this;this.clinicService.getAllAppointmentSchedulesUnderClinic(e.clinicId).subscribe(function(t){e.appointmentsList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}getAllAppointmentSchedulesUnderDepartment(){let e=this;this.clinicService.getAllAppointmentSchedulesUnderDepartment(e.departmentId).subscribe(function(t){e.appointmentsList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}getAllAppointmentSchedulesUnderDivision(){let e=this;this.clinicService.getAllAppointmentSchedulesUnderDivision(e.divisionId).subscribe(function(t){e.appointmentsList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}fillSlotsList(e){let t=0;for(let n=0;n<e;n++)t+=5,this.slotDurations.push(t)}nodeSelect(e){"securityuser"==e.node.type.toLocaleLowerCase()?(this.doctorId=e.node.data,this.doctorName=e.node.label,this.isDoctorSelected=!0,this.loadAppointmentSchedules(),this.isDepartmentOrDivisionSelected=!1):"clinicdepartment"==e.node.type.toLocaleLowerCase()?(this.departmentId=e.node.data,this.isDepartmentOrDivisionSelected=!0,this.isDoctorSelected=!1,this.getAllAppointmentSchedulesUnderDepartment()):"clinicdivision"==e.node.type.toLocaleLowerCase()&&(this.divisionId=e.node.data,this.isDepartmentOrDivisionSelected=!0,this.isDoctorSelected=!1,this.getAllAppointmentSchedulesUnderDivision())}nodeUnselect(e){this.clear()}clear(){this.appointmentsList=[]}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleAppointmentScheduleActivation(e).subscribe(function(e){},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}selectAppointmentScheduleToDelete(e){this.appointmentToBeDeleted=e}deleteSelectedItem(){let e=this;if(""!=this.appointmentToBeDeleted)e.showProgress=!0,this.clinicService.deleteAppointmentSchedule(this.appointmentToBeDeleted).subscribe(function(t){let n=e.translate.instant("DeletedSuccessfully");e.toastr.success(n,"");var i=e.appointmentsList.find(t=>t.id==e.appointmentToBeDeleted),c=e.appointmentsList.indexOf(i);c>-1&&e.appointmentsList.splice(c,1)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1});else{let t=e.translate.instant("NoItemSelected");e.toastr.warning(t,"")}}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.AppointmentMaster&&((1==t.fullControl||t.add)&&(this.enableNewBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),t.fullControl&&(this.enableDeleteBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-appointments"]],decls:59,vars:23,consts:[[4,"ngIf"],[3,"isAppointmentsSelected",4,"ngIf"],[1,"row","nopadding"],[1,"NBbreadcrumb"],["id","divTable","class","padding5",4,"ngIf"],["id","divDetails","class","padding5",4,"ngIf"],["id","deleteAppointmentSchedule","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],[3,"isAppointmentsSelected"],["id","divTable",1,"padding5"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect"],["pTemplate","Medical"],["pTemplate","ClinicDepartment"],["pTemplate","ClinicDivision"],["pTemplate","SecurityUser"],[1,"h4Deco"],[1,"row","text-right"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"row"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],[1,"glyphicon","glyphicon-user"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["id","divDetails",1,"padding5"],[3,"slotDurations","appointmentIdValue","daysList","doctorIdValue","clinicIdValue","doctorNameValue","isClinicAdmin","enableSaveBtn","onBack"]],template:function(e,t){1&e&&(a.Dc(0,ti,4,0,"div",0),a.Fc(1,"\n\n\n"),a.Dc(2,ni,1,1,"clinic-tab",1),a.Fc(3,"\n"),a.Dc(4,ii,1,1,"shared-tabs",1),a.Fc(5,"\n"),a.Qb(6,"div",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"a"),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15,"\n    "),a.Dc(16,li,46,14,"div",4),a.Fc(17,"\n    "),a.Dc(18,di,4,8,"div",5),a.Fc(19,"\n"),a.Pb(),a.Fc(20,"\n"),a.Qb(21,"div",6),a.Fc(22,"\n    "),a.Qb(23,"div",7),a.Fc(24,"\n        "),a.Fc(25,"\n        "),a.Qb(26,"div",8),a.Fc(27,"\n            "),a.Qb(28,"div",9),a.Fc(29,"\n                "),a.Qb(30,"button",10),a.Fc(31,"\xd7"),a.Pb(),a.Fc(32,"\n                "),a.Qb(33,"h4",11),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n            "),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",12),a.Fc(39,"\n                "),a.Qb(40,"p"),a.Fc(41),a.ac(42,"translate"),a.Pb(),a.Fc(43,"\n            "),a.Pb(),a.Fc(44,"\n            "),a.Qb(45,"div",13),a.Fc(46,"\n                "),a.Qb(47,"button",14),a.Xb("click",function(){return t.deleteSelectedItem()}),a.Fc(48),a.ac(49,"translate"),a.Pb(),a.Fc(50,"\n                "),a.Qb(51,"button",15),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Pb(),a.Fc(55,"\n        "),a.Pb(),a.Fc(56,"\n\n    "),a.Pb(),a.Fc(57,"\n"),a.Pb(),a.Fc(58,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(12,11,"Clinic")),a.yb(2),a.Hc(" \xa0/\n        ",a.bc(14,13,"AppointmentMaster"),"\n    "),a.yb(3),a.hc("ngIf",!t.isDetailsVisible),a.yb(2),a.hc("ngIf",t.isDetailsVisible),a.yb(16),a.Hc(" ",a.bc(35,15,"ConfirmDelete"),""),a.yb(7),a.Gc(a.bc(42,17,"AreYouSureDelete")),a.yb(7),a.Gc(a.bc(49,19,"Yes")),a.yb(4),a.Gc(a.bc(53,21,"No")))},directives:[i.k,S.a,y,Oe.a,O.a,E.g,ei],pipes:[d.c,Ge.a],encapsulation:2}),e})();function ui(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function hi(e,t){if(1&e&&(a.Qb(0,"option",53),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function pi(e,t){if(1&e&&(a.Qb(0,"option",53),a.Fc(1),a.ac(2,"translate"),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.value),a.yb(1),a.Gc(a.bc(2,2,e.text))}}function gi(e,t){if(1&e&&(a.Qb(0,"option",53),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function mi(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",2,3),a.Fc(2,"\n\n    "),a.Qb(3,"div",4),a.Fc(4,"\n        "),a.Qb(5,"label",5),a.Fc(6),a.ac(7,"translate"),a.Pb(),a.Fc(8,"\n        "),a.Qb(9,"div",6),a.Fc(10,"\n            "),a.Qb(11,"input",7,8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().departmentName=t}),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"label",9),a.Fc(16),a.ac(17,"translate"),a.Pb(),a.Fc(18,"\n        "),a.Qb(19,"div",6),a.Fc(20,"\n            "),a.Qb(21,"input",10,11),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().divisionName=t}),a.Pb(),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n    "),a.Pb(),a.Fc(25,"\n    "),a.Qb(26,"div",4),a.Fc(27,"\n        "),a.Qb(28,"label",12),a.Fc(29),a.ac(30,"translate"),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",6),a.Fc(33,"\n            "),a.Qb(34,"input",13,14),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.firstName=t}),a.Pb(),a.Fc(36,"\n            "),a.Qb(37,"div",15),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n        "),a.Pb(),a.Fc(41,"\n        "),a.Qb(42,"label",16),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n        "),a.Qb(46,"div",6),a.Fc(47,"\n            "),a.Qb(48,"input",17,18),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.lastName=t}),a.Pb(),a.Fc(50,"\n            "),a.Qb(51,"div",15),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n        "),a.Pb(),a.Fc(55,"\n    "),a.Pb(),a.Fc(56,"\n    "),a.Qb(57,"div",4),a.Fc(58,"\n        "),a.Qb(59,"label",12),a.Fc(60),a.ac(61,"translate"),a.Pb(),a.Fc(62,"\n        "),a.Qb(63,"div",6),a.Fc(64,"\n            "),a.Qb(65,"input",19,20),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.firstNameTranslation=t}),a.Pb(),a.Fc(67,"\n            "),a.Qb(68,"div",15),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n        "),a.Pb(),a.Fc(72,"\n        "),a.Qb(73,"label",16),a.Fc(74),a.ac(75,"translate"),a.Pb(),a.Fc(76,"\n        "),a.Qb(77,"div",6),a.Fc(78,"\n            "),a.Qb(79,"input",21,22),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.lastNameTranslation=t}),a.Pb(),a.Fc(81,"\n            "),a.Qb(82,"div",15),a.Fc(83),a.ac(84,"translate"),a.Pb(),a.Fc(85,"\n        "),a.Pb(),a.Fc(86,"\n    "),a.Pb(),a.Fc(87,"\n    "),a.Qb(88,"div",4),a.Fc(89,"\n        "),a.Qb(90,"label",23),a.Fc(91),a.ac(92,"translate"),a.Pb(),a.Fc(93,"\n        "),a.Qb(94,"div",6),a.Fc(95,"\n            "),a.Qb(96,"select",24,25),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.humanResourceTypeId=t}),a.Fc(98,"\n                "),a.Dc(99,hi,2,2,"option",26),a.ac(100,"translateObjects"),a.Fc(101,"\n            "),a.Pb(),a.Fc(102,"\n            "),a.Qb(103,"div",15),a.Fc(104),a.ac(105,"translate"),a.Pb(),a.Fc(106,"\n        "),a.Pb(),a.Fc(107,"\n        "),a.Qb(108,"label",27),a.Fc(109),a.ac(110,"translate"),a.Pb(),a.Fc(111,"\n        "),a.Qb(112,"div",6),a.Fc(113,"\n            "),a.Qb(114,"select",28,29),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.gender=t}),a.Fc(116,"\n                "),a.Dc(117,pi,3,4,"option",26),a.Fc(118,"\n            "),a.Pb(),a.Fc(119,"\n        "),a.Pb(),a.Fc(120,"\n    "),a.Pb(),a.Fc(121,"\n    "),a.Qb(122,"div",4),a.Fc(123,"\n        "),a.Qb(124,"label",30),a.Fc(125),a.ac(126,"translate"),a.Pb(),a.Fc(127,"\n        "),a.Qb(128,"div",6),a.Fc(129,"\n            "),a.Qb(130,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.reachInfo.mobile=t}),a.Pb(),a.Fc(132,"\n            "),a.Qb(133,"div",15),a.Fc(134),a.ac(135,"translate"),a.Pb(),a.Fc(136,"\n        "),a.Pb(),a.Fc(137,"\n        "),a.Qb(138,"label",33),a.Fc(139),a.ac(140,"translate"),a.Pb(),a.Fc(141,"\n        "),a.Qb(142,"div",6),a.Fc(143,"\n            "),a.Qb(144,"select",34,35),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.nationalityId=t}),a.Fc(146,"\n                "),a.Dc(147,gi,2,2,"option",26),a.ac(148,"translateObjects"),a.Fc(149,"\n            "),a.Pb(),a.Fc(150,"\n        "),a.Pb(),a.Fc(151,"\n    "),a.Pb(),a.Fc(152,"\n    "),a.Qb(153,"div",4),a.Fc(154,"\n        "),a.Fc(155,"\n        "),a.Qb(156,"label",36),a.Fc(157),a.ac(158,"translate"),a.Pb(),a.Fc(159,"\n        "),a.Qb(160,"div",37),a.Fc(161,"\n            "),a.Qb(162,"input",38,39),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.email=t}),a.Pb(),a.Fc(164,"\n            "),a.Qb(165,"div",15),a.Fc(166),a.ac(167,"translate"),a.Pb(),a.Fc(168,"\n        "),a.Pb(),a.Fc(169,"\n    "),a.Pb(),a.Fc(170,"\n    "),a.Fc(171,"\n    "),a.Qb(172,"div",4),a.Fc(173,"\n        "),a.Qb(174,"label",40),a.Fc(175),a.ac(176,"translate"),a.Pb(),a.Fc(177,"\n        "),a.Qb(178,"div",41),a.Fc(179,"\n            "),a.Qb(180,"input",42),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.isActive=t}),a.Pb(),a.Fc(181,"\n        "),a.Pb(),a.Fc(182,"\n        "),a.Qb(183,"label",43),a.Fc(184),a.ac(185,"translate"),a.Pb(),a.Fc(186,"\n        "),a.Qb(187,"div",41),a.Fc(188,"\n            "),a.Qb(189,"input",44),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.isRevenueGenerator=t}),a.Pb(),a.Fc(190,"\n        "),a.Pb(),a.Fc(191,"\n    "),a.Pb(),a.Fc(192,"\n    "),a.Qb(193,"div",4),a.Fc(194,"\n        "),a.Qb(195,"label",45),a.Fc(196),a.ac(197,"translate"),a.Pb(),a.Fc(198,"\n        "),a.Qb(199,"div",41),a.Fc(200,"\n            "),a.Qb(201,"input",46),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.isDepartmentHead=t}),a.Pb(),a.Fc(202,"\n        "),a.Pb(),a.Fc(203,"\n        "),a.Qb(204,"label",47),a.Fc(205),a.ac(206,"translate"),a.Pb(),a.Fc(207,"\n        "),a.Qb(208,"div",41),a.Fc(209,"\n            "),a.Qb(210,"input",48),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.isPurchaseManger=t}),a.Pb(),a.Fc(211,"\n        "),a.Pb(),a.Fc(212,"\n    "),a.Pb(),a.Fc(213,"\n    "),a.Qb(214,"div",4),a.Fc(215,"\n        "),a.Qb(216,"label",36),a.Fc(217),a.ac(218,"translate"),a.Pb(),a.Fc(219,"\n        "),a.Qb(220,"div",37),a.Fc(221,"\n            "),a.Qb(222,"textarea",49),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().user.description=t}),a.Pb(),a.Fc(223,"\n        "),a.Pb(),a.Fc(224,"\n    "),a.Pb(),a.Fc(225,"\n    "),a.Qb(226,"div",4),a.Fc(227,"\n        "),a.Qb(228,"div",50),a.Fc(229,"\n            "),a.Qb(230,"button",51),a.Xb("click",function(){return a.wc(e),a.Zb().saveHumanResource()}),a.Fc(231),a.ac(232,"translate"),a.Pb(),a.Fc(233,"\n            "),a.Qb(234,"button",52),a.Fc(235),a.ac(236,"translate"),a.Pb(),a.Fc(237,"\n        "),a.Pb(),a.Fc(238,"\n    "),a.Pb(),a.Fc(239,"\n\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(35),n=a.vc(49),i=a.vc(66),c=a.vc(80),s=a.vc(97),o=a.vc(131),r=a.vc(163),l=a.Zb();a.yb(6),a.Hc(" ",a.bc(7,54,"Department"),""),a.yb(5),a.hc("ngModel",l.departmentName),a.yb(5),a.Hc(" ",a.bc(17,56,"Division"),""),a.yb(5),a.hc("ngModel",l.divisionName),a.yb(8),a.Hc(" ",a.bc(30,58,"FirstName_ar"),""),a.yb(5),a.hc("ngModel",l.user.firstName),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                ",a.bc(39,60,"RequiredField"),"\n            "),a.yb(5),a.Hc(" ",a.bc(44,62,"LastName_ar"),""),a.yb(5),a.hc("ngModel",l.user.lastName),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                ",a.bc(53,64,"RequiredField"),"\n            "),a.yb(8),a.Hc(" ",a.bc(61,66,"FirstName_en"),""),a.yb(5),a.hc("ngModel",l.user.firstNameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                ",a.bc(70,68,"RequiredField"),"\n            "),a.yb(5),a.Hc(" ",a.bc(75,70,"LastName_en"),""),a.yb(5),a.hc("ngModel",l.user.lastNameTranslation),a.yb(3),a.hc("hidden",c.valid||c.pristine),a.yb(1),a.Hc("\n                ",a.bc(84,72,"RequiredField"),"\n            "),a.yb(8),a.Gc(a.bc(92,74,"Type")),a.yb(5),a.hc("ngModel",l.user.humanResourceTypeId),a.yb(3),a.hc("ngForOf",a.bc(100,76,l.userTypesList)),a.yb(4),a.hc("hidden",s.valid||s.pristine),a.yb(1),a.Hc("\n                ",a.bc(105,78,"RequiredField"),"\n            "),a.yb(5),a.Gc(a.bc(110,80,"Gender")),a.yb(5),a.hc("ngModel",l.user.gender),a.yb(3),a.hc("ngForOf",l.gendersList),a.yb(8),a.Gc(a.bc(126,82,"Mobile")),a.yb(5),a.hc("ngModel",l.user.reachInfo.mobile),a.yb(3),a.hc("hidden",o.valid||o.pristine),a.yb(1),a.Hc("\n                ",a.bc(135,84,"RequiredField"),"\n            "),a.yb(5),a.Gc(a.bc(140,86,"Nationality")),a.yb(5),a.hc("ngModel",l.user.nationalityId),a.yb(3),a.hc("ngForOf",a.bc(148,88,l.nationalitiesList)),a.yb(10),a.Gc(a.bc(158,90,"Email")),a.yb(5),a.hc("ngModel",l.user.email),a.yb(3),a.hc("hidden",r.valid||r.pristine),a.yb(1),a.Hc("\n                ",a.bc(167,92,"RequiredField"),"\n            "),a.yb(9),a.Gc(a.bc(176,94,"Active")),a.yb(5),a.hc("ngModel",l.user.isActive),a.yb(4),a.Gc(a.bc(185,96,"RevenueGenerator")),a.yb(5),a.hc("ngModel",l.user.isRevenueGenerator)("checked",!l.isNonMedicalDepartment)("disabled",l.isNonMedicalDepartment),a.yb(7),a.Hc(" ",a.bc(197,98,"HoD"),""),a.yb(5),a.hc("ngModel",l.user.isDepartmentHead),a.yb(4),a.Hc(" ",a.bc(206,100,"PurchaseManager"),""),a.yb(5),a.hc("ngModel",l.user.isPurchaseManger),a.yb(7),a.Gc(a.bc(218,102,"Remark")),a.yb(5),a.hc("ngModel",l.user.description),a.yb(8),a.hc("disabled",!e.form.valid||!l.enableSaveBtn&&!l.isClinicAdmin),a.yb(1),a.Gc(a.bc(232,104,"Save")),a.yb(4),a.Gc(a.bc(236,106,"Cancel"))}}let Fi=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.toastr=t,this.localStorage=n,this.translate=i,this.departmentName="",this.divisionName="",this.divisionId="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.isNonMedicalDepartment=!1,this.onModelUpdated=new a.n,this.active=!0,this.showProgress=!1,this.user={id:0,divisions:[],reachInfo:{}},this.userTypesList=[],this.gendersList=[],this.nationalitiesList=[]}ngOnChanges(){this.clear(),null!=this.humanResourceWrapper&&(this.userTypesList=this.humanResourceWrapper.humanResourceTypes,this.gendersList=this.humanResourceWrapper.genders,this.nationalitiesList=this.humanResourceWrapper.nationalities,null==this.userTypesList&&(this.userTypesList=[]),null==this.gendersList&&(this.gendersList=[]),null==this.nationalitiesList&&(this.nationalitiesList=[])),null!=this.selectedUserToEdit&&(this.user=this.selectedUserToEdit),this.selectedClinicId=this.localStorage.retrieve("ClinicID")}saveHumanResource(){let e=this;e.showProgress=!0,0==this.user.id?(this.user.clinicId=this.selectedClinicId,this.user.divisions.push({id:this.divisionId}),this.clinicService.saveHumanResource(this.user).subscribe(function(t){e.user=t,e.raiseModelUpdated(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})):this.clinicService.updateHumanResource(this.user).subscribe(function(t){e.user=t,e.raiseModelUpdated(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}clear(){this.user={id:0,divisions:[],reachInfo:{}},this.active=!1,setTimeout(()=>this.active=!0,0)}raiseModelUpdated(e){this.onModelUpdated.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(l.b),a.Kb(r.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-humanResource-basic"]],inputs:{humanResourceWrapper:"humanResourceWrapper",departmentName:"departmentName",divisionName:"divisionName",divisionId:"divisionId",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn",selectedUserToEdit:"selectedUserToEdit",isNonMedicalDepartment:"isNonMedicalDepartment"},outputs:{onModelUpdated:"onModelUpdated"},features:[a.wb],decls:4,vars:2,consts:[[4,"ngIf"],["class","form-horizontal","name","userRegistrationForm",4,"ngIf"],["name","userRegistrationForm",1,"form-horizontal"],["userRegistrationForm","ngForm"],[1,"form-group"],["for","txtDepartment",1,"col-md-2","control-label"],[1,"col-md-4"],["type","text","name","txtDepartment","id","txtDepartment","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtDepartment","ngModel"],["for","txtDivision",1,"col-md-2","control-label"],["type","text","name","txtDivision","id","txtDivision","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtDivision","ngModel"],["for","txtFirstName",1,"col-md-2","control-label"],["type","text","name","txtFirstName","id","txtFirstNameAr","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstNameAr","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtLastName",1,"col-md-2","control-label"],["type","text","name","txtLastNameAr","id","txtLastNameAr","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtLastNameAr","ngModel"],["type","text","name","txtFirstNameEn","id","txtFirstNameEn","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstNameEn","ngModel"],["type","text","name","txtLastNameEn","id","txtLastNameEn","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtLastNameEn","ngModel"],["for","ddlUserTypes",1,"col-md-2","control-label"],["id","ddlUserTypes","name","ddlUserTypes","required","",1,"form-control",3,"ngModel","ngModelChange"],["ddlUserTypes","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","ddlGenders",1,"col-md-2","control-label"],["id","ddlGenders","name","ddlGenders",1,"form-control",3,"ngModel","ngModelChange"],["ddlGenders","ngModel"],["for","txtPhone",1,"col-md-2","control-label"],["type","tel","name","txtMobile","id","txtMobile","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtMobile","ngModel"],["for","ddlNationality",1,"col-md-2","control-label"],["id","ddlNationalities","name","ddlNationalities",1,"form-control",3,"ngModel","ngModelChange"],["ddlNationalities","ngModel"],["for","txtEmail",1,"col-md-2","control-label"],[1,"col-md-10"],["type","email","pattern","[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{1,63}$","id","txtEmail","name","txtEmail","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtEmail","ngModel"],["for","chkActive",1,"col-md-2","control-label"],[1,"col-md-1"],["type","checkbox","name","chkActive","id","chkActive",3,"ngModel","ngModelChange"],["for","chkRevenuGenerator",1,"col-md-3","control-label"],["type","checkbox","name","chkRevenuGenerator","id","chkRevenuGenerator",3,"ngModel","checked","disabled","ngModelChange"],["for","chkHoD",1,"col-md-2","control-label"],["type","checkbox","name","chkHoD","id","chkHoD",3,"ngModel","ngModelChange"],["for","txtLastName",1,"col-md-3","control-label"],["type","checkbox","name","chkPurchaseMgr","id","chkPurchaseMgr",3,"ngModel","ngModelChange"],["name","txtRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],[3,"value"]],template:function(e,t){1&e&&(a.Dc(0,ui,4,0,"div",0),a.Fc(1,"\n\n\n"),a.Dc(2,mi,240,108,"form",1),a.Fc(3,"\n\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(2),a.hc("ngIf",t.active))},directives:[i.k,S.a,c.q,c.g,c.h,c.b,c.f,c.i,c.o,c.p,i.j,c.l,c.a,c.j,c.r],pipes:[d.c,Ge.a],encapsulation:2}),e})();function vi(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function fi(e,t){if(1&e&&(a.Fc(0,"\n                            "),a.Qb(1,"span",23),a.Lb(2,"i",24),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                            \xa0\n                            ",e.label,"\n                        ")}}function Pi(e,t){if(1&e&&(a.Fc(0,"\n                            "),a.Qb(1,"span",23),a.Lb(2,"i",25),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                            \xa0\n                            ",e.label,"\n                        ")}}function yi(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",3,4),a.Fc(2,"\n        "),a.Qb(3,"div",5),a.Fc(4,"\n            "),a.Qb(5,"label",6),a.Fc(6),a.ac(7,"translate"),a.Pb(),a.Fc(8,"\n            "),a.Qb(9,"div",7),a.Fc(10,"\n                "),a.Qb(11,"input",8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().filterString=t}),a.ac(12,"translate"),a.Pb(),a.Fc(13,"\n                "),a.Qb(14,"div",9),a.Fc(15,"\n                    "),a.Qb(16,"p-tree",10),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedNode=t}),a.ac(17,"filterbynameorcode"),a.ac(18,"translateObjects"),a.Fc(19,"\n                        "),a.Dc(20,fi,4,1,"ng-template",11),a.Fc(21,"\n                        "),a.Dc(22,Pi,4,1,"ng-template",12),a.Fc(23,"\n                    "),a.Pb(),a.Fc(24,"\n                "),a.Pb(),a.Fc(25,"\n            "),a.Pb(),a.Fc(26,"\n        "),a.Pb(),a.Fc(27,"\n        "),a.Qb(28,"div",5),a.Fc(29,"\n            "),a.Qb(30,"label",13),a.Fc(31),a.ac(32,"translate"),a.Pb(),a.Fc(33,"\n            "),a.Qb(34,"div",14),a.Fc(35,"\n                "),a.Qb(36,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().serviceFeeModel.clinicFee=t}),a.Pb(),a.Fc(38,"\n            "),a.Pb(),a.Fc(39,"\n        "),a.Pb(),a.Fc(40,"\n        "),a.Qb(41,"div",5),a.Fc(42,"\n            "),a.Qb(43,"label",17),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Qb(47,"div",14),a.Fc(48,"\n                "),a.Qb(49,"input",18,19),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().serviceFeeModel.resourceFee=t}),a.Pb(),a.Fc(51,"\n            "),a.Pb(),a.Fc(52,"\n        "),a.Pb(),a.Fc(53,"\n        "),a.Qb(54,"div",5),a.Fc(55,"\n            "),a.Qb(56,"div",20),a.Fc(57,"\n                "),a.Qb(58,"button",21),a.Xb("click",function(){return a.wc(e),a.Zb().saveServiceFees()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                "),a.Qb(62,"button",22),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n            "),a.Pb(),a.Fc(66,"\n        "),a.Pb(),a.Fc(67,"\n        "),a.Qb(68,"div",1),a.Fc(69,"\n            "),a.Fc(70,"\n\n        "),a.Pb(),a.Fc(71,"\n\n    "),a.Pb()}if(2&e){const e=a.vc(1),t=a.Zb();a.yb(6),a.Hc(" ",a.bc(7,13,"Services"),""),a.yb(5),a.hc("placeholder",a.bc(12,15,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(5),a.hc("value",a.dc(17,17,a.ec(18,21,t.servicesTree,null,null,t.lstToBeTranslated),t.filterString,t.leafType))("selection",t.selectedNode),a.yb(15),a.Gc(a.bc(32,26,"ClinicalFee")),a.yb(5),a.hc("ngModel",t.serviceFeeModel.clinicFee),a.yb(8),a.Gc(a.bc(45,28,"ResourceFee")),a.yb(5),a.hc("ngModel",t.serviceFeeModel.resourceFee),a.yb(9),a.hc("disabled",!e.form.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(60,30,"Save")),a.yb(3),a.ic("disabled",t.enableSaveBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(64,32,"New"))}}let Qi=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.toastr=t,this.localStorage=n,this.translate=i,this.leafType="Service",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onModelUpdated=new a.n,this.active=!0,this.showProgress=!1,this.servicesTree=[],this.userServiceFees=[],this.serviceFeeModel={id:0},this.isEditMode=!1,this.lstToTranslated=[],this.lstToBeTranslated=[]}ngOnInit(){this.lstToTranslated=["serviceName","serviceNameTranslation"],this.lstToBeTranslated=["label","labelTranslation"]}ngOnChanges(){null!=this.humanResourceWrapper&&(this.servicesTree=this.humanResourceWrapper.serviceGroups,null==this.servicesTree&&(this.servicesTree=[])),null!=this.selectedUserToEdit&&(this.userServiceFees=this.selectedUserToEdit.serviceFees)}saveServiceFees(){if(null!=this.selectedNode&&"Service"==this.selectedNode.type)if(this.isServiceDuplicated(this.selectedNode.data,this.serviceFeeModel.id)){let e=this.translate.instant("DuplicatedService");this.toastr.error(e,"")}else{let e=this;e.showProgress=!0,this.isEditMode||(this.serviceFeeModel.securityUserId=this.selectedUserToEdit.id,this.selectedUserToEdit.serviceFees.push(this.serviceFeeModel)),this.serviceFeeModel.serviceId=this.selectedNode.data,this.clinicService.updateHumanResource(e.selectedUserToEdit).subscribe(function(t){e.raiseModelUpdated(t),e.clear();let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else{let e=this.translate.instant("EmptyService");this.toastr.error(e,"")}}editServiceFee(e){this.isEditMode=!0,this.serviceFeeModel=this.selectedUserToEdit.serviceFees.find(t=>t.id==e),null!=this.serviceFeeModel&&this.selectServiceNode(this.serviceFeeModel.serviceId)}isServiceDuplicated(e,t){return null!=this.selectedUserToEdit&&null!=this.selectedUserToEdit.serviceFees.find(n=>n.serviceId==e&&n.id!=t)}clear(){this.serviceFeeModel={id:0},this.isEditMode=!1,this.selectedNode={},this.active=!1,setTimeout(()=>this.active=!0,0)}raiseModelUpdated(e){this.onModelUpdated.emit(e)}selectServiceNode(e){for(let t of this.servicesTree)this.checkChildNodes(t,e)}checkChildNodes(e,t){e.data!=t||"Service"!=e.type?e.children&&e.children.forEach(e=>{this.checkChildNodes(e,t)}):this.selectedNode=e}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(l.b),a.Kb(r.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-humanResource-serviceFees"]],inputs:{humanResourceWrapper:"humanResourceWrapper",selectedUserToEdit:"selectedUserToEdit",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onModelUpdated:"onModelUpdated"},features:[a.wb],decls:7,vars:2,consts:[[4,"ngIf"],[1,"row"],["class","form-horizontal","name","serviceFeesForm",4,"ngIf"],["name","serviceFeesForm",1,"form-horizontal"],["serviceFeesForm","ngForm"],[1,"form-group"],["for","txtNameTranslation",1,"control-label","col-md-3"],[1,"col-md-9"],["name","txtSearchServices",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ServiceGroup"],["pTemplate","Service"],["for","txtClinicalFee",1,"control-label","col-md-3"],[1,"col-md-3"],["type","number","min","0","id","txtClinicalFee","name","txtClinicalFee","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFee","ngModel"],["for","txtResourceFee",1,"control-label","col-md-3"],["type","number","min","0","id","txtResourceFee","name","txtResourceFee","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtTimeSlot","ngModel"],[1,"col-md-8","col-md-offset-3"],[1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"nav-icon"],[1,"fa","fa-cubes"],[1,"fa","fa-cube"]],template:function(e,t){1&e&&(a.Dc(0,vi,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,yi,72,34,"form",2),a.Fc(5,"\n"),a.Pb(),a.Fc(6,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,c.q,c.g,c.h,c.b,c.f,c.i,O.a,E.g,c.k,c.o],pipes:[d.c,De.a,Ge.a],encapsulation:2}),e})();function Si(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Ci(e,t){if(1&e&&(a.Fc(0,"\n                            "),a.Qb(1,"span",20),a.Lb(2,"i",21),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                            \xa0\n                            ",e.label,"\n                        ")}}function wi(e,t){if(1&e&&(a.Fc(0,"\n                            "),a.Qb(1,"span",20),a.Lb(2,"i",22),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                            \xa0\n                            ",e.label,"\n                        ")}}function Ii(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",3,4),a.Fc(2,"\n        "),a.Qb(3,"div",5),a.Fc(4,"\n            "),a.Qb(5,"label",6),a.Fc(6),a.ac(7,"translate"),a.Pb(),a.Fc(8,"\n            "),a.Qb(9,"div",7),a.Fc(10,"\n                "),a.Qb(11,"input",8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().filterString=t}),a.ac(12,"translate"),a.Pb(),a.Fc(13,"\n                "),a.Qb(14,"div",9),a.Fc(15,"\n                    "),a.Qb(16,"p-tree",10),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedNode=t}),a.ac(17,"filterbynameorcode"),a.ac(18,"translateObjects"),a.Fc(19,"\n                        "),a.Dc(20,Ci,4,1,"ng-template",11),a.Fc(21,"\n                        "),a.Dc(22,wi,4,1,"ng-template",12),a.Fc(23,"\n                    "),a.Pb(),a.Fc(24,"\n                "),a.Pb(),a.Fc(25,"\n            "),a.Pb(),a.Fc(26,"\n        "),a.Pb(),a.Fc(27,"\n        "),a.Qb(28,"div",5),a.Fc(29,"\n            "),a.Qb(30,"label",13),a.Fc(31),a.ac(32,"translate"),a.Pb(),a.Fc(33,"\n            "),a.Qb(34,"div",14),a.Fc(35,"\n                "),a.Qb(36,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().serviceSlotModel.noOfTimeSlots=t}),a.Pb(),a.Fc(38,"\n            "),a.Pb(),a.Fc(39,"\n        "),a.Pb(),a.Fc(40,"\n        "),a.Qb(41,"div",5),a.Fc(42,"\n            "),a.Qb(43,"div",17),a.Fc(44,"\n                "),a.Qb(45,"button",18),a.Xb("click",function(){return a.wc(e),a.Zb().saveServiceSlots()}),a.Fc(46),a.ac(47,"translate"),a.Pb(),a.Fc(48,"\n                "),a.Qb(49,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().clear()}),a.Fc(50),a.ac(51,"translate"),a.Pb(),a.Fc(52,"\n            "),a.Pb(),a.Fc(53,"\n        "),a.Pb(),a.Fc(54,"\n        "),a.Qb(55,"div",1),a.Fc(56,"\n            "),a.Fc(57,"\n        "),a.Pb(),a.Fc(58,"\n    "),a.Pb()}if(2&e){const e=a.vc(1),t=a.Zb();a.yb(6),a.Hc(" ",a.bc(7,11,"Services"),""),a.yb(5),a.hc("placeholder",a.bc(12,13,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(5),a.hc("value",a.dc(17,15,a.ec(18,19,t.servicesTree,null,null,t.lstToBeTranslated),t.filterString,t.leafType))("selection",t.selectedNode),a.yb(15),a.Gc(a.bc(32,24,"NoofTimeSlots")),a.yb(5),a.hc("ngModel",t.serviceSlotModel.noOfTimeSlots),a.yb(9),a.hc("disabled",!e.form.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(47,26,"Save")),a.yb(3),a.ic("disabled",t.enableSaveBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(51,28,"New"))}}let Ti=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.toastr=t,this.localStorage=n,this.translate=i,this.leafType="Service",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onModelUpdated=new a.n,this.active=!0,this.showProgress=!1,this.servicesTree=[],this.userServiceSlots=[],this.serviceSlotModel={id:0},this.isEditMode=!1,this.lstToTranslated=[],this.lstToBeTranslated=[]}ngOnInit(){this.lstToTranslated=["serviceName","serviceNameTranslation"],this.lstToBeTranslated=["label","labelTranslation"]}ngOnChanges(){null!=this.humanResourceWrapper&&(this.servicesTree=this.humanResourceWrapper.serviceGroups,null==this.servicesTree&&(this.servicesTree=[])),null!=this.selectedUserToEdit&&(this.userServiceSlots=this.selectedUserToEdit.serviceTimeSlots)}saveServiceSlots(){if(null!=this.selectedNode&&"Service"==this.selectedNode.type)if(this.isServiceDuplicated(this.selectedNode.data,this.serviceSlotModel.id)){let e=this.translate.instant("DuplicatedService");this.toastr.error(e,"")}else{let e=this;e.showProgress=!0,this.isEditMode||(this.serviceSlotModel.securityUserId=this.selectedUserToEdit.id,this.selectedUserToEdit.serviceTimeSlots.push(this.serviceSlotModel)),this.serviceSlotModel.serviceId=this.selectedNode.data,this.clinicService.updateHumanResource(e.selectedUserToEdit).subscribe(function(t){e.raiseModelUpdated(t),e.clear();let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else{let e=this.translate.instant("EmptyService");this.toastr.error(e,"")}}editServiceSlot(e){this.isEditMode=!0,this.serviceSlotModel=this.selectedUserToEdit.serviceTimeSlots.find(t=>t.id==e),null!=this.serviceSlotModel&&this.selectServiceNode(this.serviceSlotModel.serviceId)}isServiceDuplicated(e,t){return null!=this.selectedUserToEdit&&null!=this.selectedUserToEdit.serviceTimeSlots.find(n=>n.serviceId==e&&n.id!=t)}clear(){this.serviceSlotModel={id:0},this.isEditMode=!1,this.selectedNode={},this.active=!1,setTimeout(()=>this.active=!0,0)}raiseModelUpdated(e){this.onModelUpdated.emit(e)}selectServiceNode(e){for(let t of this.servicesTree)this.checkChildNodes(t,e)}checkChildNodes(e,t){e.data!=t||"Service"!=e.type?e.children&&e.children.forEach(e=>{this.checkChildNodes(e,t)}):this.selectedNode=e}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(l.b),a.Kb(r.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-humanResource-serviceSlots"]],inputs:{humanResourceWrapper:"humanResourceWrapper",selectedUserToEdit:"selectedUserToEdit",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onModelUpdated:"onModelUpdated"},features:[a.wb],decls:7,vars:2,consts:[[4,"ngIf"],[1,"row"],["class","form-horizontal","name","serviceSlotsForm",4,"ngIf"],["name","serviceSlotsForm",1,"form-horizontal"],["serviceSlotsForm","ngForm"],[1,"form-group"],["for","treeServices",1,"control-label","col-md-3"],[1,"col-md-9"],["name","txtSearchServices2",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","ServiceGroup"],["pTemplate","Service"],["for","txtNoOfTimeSlots",1,"control-label","col-md-3"],[1,"col-md-3"],["type","number","min","0","id","txtNoOfTimeSlots","name","txtNoOfTimeSlots","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNoOfTimeSlots","ngModel"],[1,"col-md-8","col-md-offset-3"],[1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"nav-icon"],[1,"fa","fa-cubes"],[1,"fa","fa-cube"]],template:function(e,t){1&e&&(a.Dc(0,Si,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,Ii,59,30,"form",2),a.Fc(5,"\n"),a.Pb(),a.Fc(6,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,c.q,c.g,c.h,c.b,c.f,c.i,O.a,E.g,c.k,c.o],pipes:[d.c,De.a,Ge.a],encapsulation:2}),e})();const Mi=["basicDataLink"];function Di(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Gi(e,t){if(1&e&&(a.Qb(0,"li"),a.Qb(1,"a",11),a.Fc(2),a.ac(3,"translate"),a.Pb(),a.Pb()),2&e){const e=a.Zb();a.yb(1),a.Cb("disabled",!e.enableSaveBtn&&!e.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(3,3,"ServiceFees"))}}function Ai(e,t){if(1&e&&(a.Qb(0,"li"),a.Qb(1,"a",12),a.Fc(2),a.ac(3,"translate"),a.Pb(),a.Pb()),2&e){const e=a.Zb();a.yb(1),a.Cb("disabled",!e.enableSaveBtn&&!e.isClinicAdmin||null),a.yb(1),a.Gc(a.bc(3,3,"ServiceSlots"))}}function Ni(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",13),a.Fc(1,"\n            "),a.Qb(2,"clinic-humanResource-serviceFees",14),a.Xb("onModelUpdated",function(t){return a.wc(e),a.Zb().updateModel(t)}),a.Fc(3,"\n\n            "),a.Pb(),a.Fc(4,"\n\n        "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("humanResourceWrapper",e.humanResourceWrapper)("selectedUserToEdit",e.selectedUserToEdit)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)}}function ki(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",15),a.Fc(1,"\n            "),a.Qb(2,"clinic-humanResource-serviceSlots",14),a.Xb("onModelUpdated",function(t){return a.wc(e),a.Zb().updateModel(t)}),a.Fc(3,"\n            "),a.Pb(),a.Fc(4,"\n        "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("humanResourceWrapper",e.humanResourceWrapper)("selectedUserToEdit",e.selectedUserToEdit)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)}}let Li=(()=>{class e{constructor(e,t,n){this.clinicService=e,this.toastr=t,this.localStorage=n,this.isEditMode=!1,this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onModelUpdated=new a.n,this.departmentName="",this.divisionName="",this.divisionId="",this.isNonMedicalDepartment=!1,this.clinicId="",this.showProgress=!1}ngOnChanges(){this.isEditMode?null!=this.selectedNode&&(null!=this.selectedNode.parent&&(this.divisionName=this.selectedNode.parent.label,null!=this.selectedNode.parent.parent&&(this.departmentName=this.selectedNode.parent.parent.label,null!=this.selectedNode.parent.parent.parent&&(this.isNonMedicalDepartment="NonMedical"==this.selectedNode.parent.parent.parent.type))),this.loadUserToEdit(this.selectedNode.data)):(this.selectedUserToEdit=void 0,null!=this.selectedNode&&(this.divisionId=this.selectedNode.data,this.divisionName=this.selectedNode.label,null!=this.selectedNode.parent&&(this.departmentName=this.selectedNode.parent.label,null!=this.selectedNode.parent.parent&&(this.isNonMedicalDepartment="NonMedical"==this.selectedNode.parent.parent.type)))),this.basicDataLink.nativeElement.click()}ngOnInit(){this.clinicId=this.localStorage.retrieve("ClinicID"),this.loadHumanResourcesWrapper()}loadHumanResourcesWrapper(){this.showProgress=!0;let e=this;this.clinicService.getHumanResourcesWrapper(this.clinicId).subscribe(function(t){e.humanResourceWrapper=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}loadUserToEdit(e){this.showProgress=!0;let t=this;this.clinicService.getHumanResourceById(e).subscribe(function(e){t.selectedUserToEdit=e,null==t.selectedUserToEdit.reachInfo&&(t.selectedUserToEdit.reachInfo={})},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1})}updateModel(e){if(this.selectedUserToEdit=e,this.isEditMode)this.selectedNode.label=e.name,this.selectedNode.labelTranslation=e.nameTranslation;else{let t={label:e.name,labelTranslation:e.nameTranslation,data:e.id,isActive:e.isActive,type:"SecurityUser"};this.selectedNode.children.push(t),this.raiseModelUpdated(t)}}raiseModelUpdated(e){this.onModelUpdated.emit(e)}isDoctorEditing(){return null!=this.selectedUserToEdit&&"Doctor"==this.selectedUserToEdit.type}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(l.b),a.Kb(r.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-humanResource"]],viewQuery:function(e,t){if(1&e&&a.Lc(Mi,1),2&e){let e;a.uc(e=a.Yb())&&(t.basicDataLink=e.first)}},inputs:{isEditMode:"isEditMode",selectedNode:"selectedNode",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onModelUpdated:"onModelUpdated"},features:[a.wb],decls:31,vars:18,consts:[[4,"ngIf"],[1,"row"],[1,"nav","nav-tabs"],[1,"active"],["href","#divBasicData","data-toggle","tab","aria-expanded","true"],["basicDataLink",""],["id","humanResourceTabContent",1,"tab-content"],["id","divBasicData",1,"tab-pane","fade","active","in"],[3,"humanResourceWrapper","departmentName","divisionName","divisionId","isNonMedicalDepartment","selectedUserToEdit","isClinicAdmin","enableSaveBtn","onModelUpdated"],["class","tab-pane fade","id","divServiceFees",4,"ngIf"],["class","tab-pane fade","id","divServiceSlots",4,"ngIf"],["href","#divServiceFees","data-toggle","tab","aria-expanded","true"],["href","#divServiceSlots","data-toggle","tab","aria-expanded","true"],["id","divServiceFees",1,"tab-pane","fade"],[3,"humanResourceWrapper","selectedUserToEdit","isClinicAdmin","enableSaveBtn","onModelUpdated"],["id","divServiceSlots",1,"tab-pane","fade"]],template:function(e,t){1&e&&(a.Dc(0,Di,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Qb(4,"ul",2),a.Fc(5,"\n        "),a.Qb(6,"li",3),a.Qb(7,"a",4,5),a.Fc(9),a.ac(10,"translate"),a.Pb(),a.Pb(),a.Fc(11,"\n        "),a.Dc(12,Gi,4,5,"li",0),a.Fc(13,"\n        "),a.Dc(14,Ai,4,5,"li",0),a.Fc(15,"\n    "),a.Pb(),a.Fc(16,"\n    "),a.Qb(17,"div",6),a.Fc(18,"\n        "),a.Qb(19,"div",7),a.Fc(20,"\n            "),a.Qb(21,"clinic-humanResource-basic",8),a.Xb("onModelUpdated",function(e){return t.updateModel(e)}),a.Fc(22,"\n\n            "),a.Pb(),a.Fc(23,"\n        "),a.Pb(),a.Fc(24,"\n        "),a.Dc(25,Ni,5,4,"div",9),a.Fc(26,"\n        "),a.Dc(27,ki,5,4,"div",10),a.Fc(28,"\n    "),a.Pb(),a.Fc(29,"\n"),a.Pb(),a.Fc(30,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(7),a.Cb("disabled",!t.enableSaveBtn&&!t.isClinicAdmin||null),a.yb(2),a.Gc(a.bc(10,16,"BasicData")),a.yb(3),a.hc("ngIf",t.isDoctorEditing()),a.yb(2),a.hc("ngIf",t.isDoctorEditing()),a.yb(7),a.hc("humanResourceWrapper",t.humanResourceWrapper)("departmentName",t.departmentName)("divisionName",t.divisionName)("divisionId",t.divisionId)("isNonMedicalDepartment",t.isNonMedicalDepartment)("selectedUserToEdit",t.selectedUserToEdit)("isClinicAdmin",t.isClinicAdmin)("enableSaveBtn",t.enableSaveBtn),a.yb(4),a.hc("ngIf",t.isDoctorEditing()),a.yb(2),a.hc("ngIf",t.isDoctorEditing()))},directives:[i.k,Fi,S.a,Qi,Ti],pipes:[d.c],encapsulation:2}),e})();const Ri=["AddNonMedicalDepartment"],xi=["AddMedicalDepartment"],Zi=["AddDivision"],Bi=["AddPhysicalResource"],Hi=["AddHumanResource"];function Oi(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Ei(e,t){if(1&e&&a.Lb(0,"clinic-tab",47),2&e){const e=a.Zb();a.hc("isOrgMasterSelected",e.selectOrganizationMasterTab)}}function Xi(e,t){if(1&e&&a.Lb(0,"shared-tabs",47),2&e){const e=a.Zb();a.hc("isOrgMasterSelected",e.selectOrganizationMasterTab)}}function Ui(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                        "),a.Qb(3,"img",48),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(4,"\n                    "),a.Pb(),a.Fc(5,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                    \xa0 \xa0\n                    "),a.yb(1),a.Cb("disabled",!n.enableAddBtn&&!n.isClinicAdmin||null)}}function qi(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a"),a.Fc(2,"\n                        "),a.Qb(3,"img",48),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(4,"\n                    "),a.Pb(),a.Fc(5,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                    \xa0 \xa0\n                    "),a.yb(1),a.Cb("disabled",!n.enableAddBtn&&!n.isClinicAdmin||null)}}function ji(e,t){if(1&e){const e=a.Rb();a.Qb(0,"span"),a.Fc(1,"\n                        \xa0 \xa0\n                        "),a.Qb(2,"a"),a.Fc(3,"\n                            "),a.Qb(4,"img",51),a.Xb("click",function(){a.wc(e);const t=a.Zb().$implicit;return a.Zb().displayPopup(t)}),a.Pb(),a.Fc(5,"\n                        "),a.Pb(),a.Fc(6,"\n                        "),a.Qb(7,"a"),a.Fc(8,"\n                            "),a.Qb(9,"i",52),a.Xb("click",function(){a.wc(e);const t=a.Zb().$implicit;return a.Zb().editDepartment(t)}),a.Pb(),a.Fc(10,"\n\n                        "),a.Pb(),a.Fc(11,"\n                    "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(2),a.Cb("disabled",!e.enableAddBtn&&!e.isClinicAdmin||null),a.yb(5),a.Cb("disabled",!e.enableEditBtn&&!e.isClinicAdmin||null)}}function Ki(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Dc(1,ji,12,4,"span",0),a.Fc(2,"\n                    "),a.Qb(3,"label"),a.Fc(4,"\n                        "),a.Qb(5,"input",49),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(6,"\n                        "),a.Lb(7,"span",50),a.Fc(8,"\n                    "),a.Pb(),a.Fc(9,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                    "),a.yb(1),a.hc("ngIf","Medical"!=e.parent.type),a.yb(4),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Vi(e,t){if(1&e){const e=a.Rb();a.Qb(0,"span"),a.Fc(1,"\n                        "),a.Qb(2,"a"),a.Fc(3,"\n                            "),a.Qb(4,"i",56),a.Xb("click",function(){a.wc(e);const t=a.Zb().$implicit;return a.Zb().editDivision(t)}),a.Pb(),a.Fc(5,"\n\n                        "),a.Pb(),a.Fc(6,"\n                    "),a.Pb()}if(2&e){const e=a.Zb(2);a.yb(2),a.Cb("disabled",!e.enableEditBtn&&!e.isClinicAdmin||null)}}function $i(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Dc(1,Vi,7,2,"span",0),a.Fc(2,"\n                    "),a.Qb(3,"a"),a.Fc(4,"\n                        "),a.Qb(5,"img",53),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPhysicalResourcePopup(n)}),a.Pb(),a.Fc(6,"\n                    "),a.Pb(),a.Fc(7,"\n                    "),a.Qb(8,"a"),a.Fc(9,"\n                        "),a.Qb(10,"img",54),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().addNewHumanResource(n)}),a.Pb(),a.Fc(11,"\n                    "),a.Pb(),a.Fc(12,"\n                    "),a.Qb(13,"label"),a.Fc(14,"\n                        "),a.Qb(15,"input",55),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(16,"\n                        "),a.Lb(17,"span",50),a.Fc(18,"\n                    "),a.Pb(),a.Fc(19,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                    \xa0 \xa0\n                    "),a.yb(1),a.hc("ngIf","Medical"!=e.parent.parent.type),a.yb(2),a.Cb("disabled",!n.enableAddBtn&&!n.isClinicAdmin||null),a.yb(5),a.Cb("disabled",!n.enableAddBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function zi(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                    "),a.Lb(1,"span",57),a.Fc(2),a.Qb(3,"a"),a.Fc(4,"\n                        "),a.Qb(5,"i",58),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().editPhysicalResource(n)}),a.Pb(),a.Fc(6,"\n\n                    "),a.Pb(),a.Fc(7,"\n                    "),a.Qb(8,"label"),a.Fc(9,"\n                        "),a.Qb(10,"input",59),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(11,"\n                        "),a.Lb(12,"span",50),a.Fc(13,"\n                    "),a.Pb(),a.Fc(14,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                    \xa0 \xa0\n                    "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Wi(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                    "),a.Lb(1,"span",60),a.Fc(2),a.Qb(3,"a"),a.Fc(4,"\n                        "),a.Fc(5,"\n                        "),a.Qb(6,"i",61),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().editHumanResource(n)}),a.Pb(),a.Fc(7,"\n                    "),a.Pb(),a.Fc(8,"\n                    "),a.Fc(9,"\n                    "),a.Qb(10,"label"),a.Fc(11,"\n                        "),a.Qb(12,"input",62),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(13,"\n                        "),a.Lb(14,"span",50),a.Fc(15,"\n                    "),a.Pb(),a.Fc(16,"\n                ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.Hc("\n                    ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n\n                    \xa0 \xa0\n                    "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(9),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Yi(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",63,64),a.Fc(2,"\n                "),a.Qb(3,"div",32),a.Fc(4,"\n                    "),a.Qb(5,"div",65),a.Fc(6,"\n                        "),a.Qb(7,"label",66),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",67),a.Fc(12,"\n                            "),a.Qb(13,"input",68,69),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.code=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",70),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",65),a.Fc(23,"\n                        "),a.Qb(24,"label",71),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",72),a.Fc(29,"\n                            "),a.Qb(30,"input",73,74),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(32,"\n                            "),a.Qb(33,"div",70),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Pb(),a.Fc(37,"\n                    "),a.Pb(),a.Fc(38,"\n                    "),a.Qb(39,"div",65),a.Fc(40,"\n                        "),a.Qb(41,"label",75),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",72),a.Fc(46,"\n                            "),a.Qb(47,"input",76,77),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(49,"\n                            "),a.Qb(50,"div",70),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                        "),a.Pb(),a.Fc(54,"\n                    "),a.Pb(),a.Fc(55,"\n\n                    "),a.Qb(56,"div",65),a.Fc(57,"\n                        "),a.Qb(58,"label",78),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n                        "),a.Qb(62,"div",72),a.Fc(63,"\n                            "),a.Qb(64,"textarea",79,80),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.description=t}),a.Pb(),a.Fc(66,"\n                        "),a.Pb(),a.Fc(67,"\n                    "),a.Pb(),a.Fc(68,"\n                "),a.Pb(),a.Fc(69,"\n                "),a.Qb(70,"div",35),a.Fc(71,"\n                    "),a.Qb(72,"button",36),a.Xb("click",function(){return a.wc(e),a.Zb().saveNonMedicalDepartment()}),a.Fc(73),a.ac(74,"translate"),a.Pb(),a.Fc(75,"\n                    "),a.Qb(76,"button",37),a.Fc(77),a.ac(78,"translate"),a.Pb(),a.Fc(79,"\n                "),a.Pb(),a.Fc(80,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(31),i=a.vc(48),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,17,"Code"),""),a.yb(5),a.hc("ngModel",c.model.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,19,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(26,21,"ArabicName"),""),a.yb(5),a.hc("ngModel",c.model.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(35,23,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(43,25,"EnglishName"),""),a.yb(5),a.hc("ngModel",c.model.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                                ",a.bc(52,27,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(60,29,"Remark"),""),a.yb(5),a.hc("ngModel",c.model.description),a.yb(8),a.hc("disabled",!e.form.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(74,31,"Save")),a.yb(4),a.Gc(a.bc(78,33,"Cancel"))}}function _i(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",81,82),a.Fc(2,"\n                "),a.Qb(3,"div",32),a.Fc(4,"\n                    "),a.Qb(5,"div",65),a.Fc(6,"\n                        "),a.Qb(7,"label",83),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",67),a.Fc(12,"\n                            "),a.Qb(13,"input",84,85),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.code=t}),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"div",70),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                        "),a.Pb(),a.Fc(20,"\n                    "),a.Pb(),a.Fc(21,"\n                    "),a.Qb(22,"div",65),a.Fc(23,"\n                        "),a.Qb(24,"label",71),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",72),a.Fc(29,"\n                            "),a.Qb(30,"input",86,74),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.departmentName=t}),a.Pb(),a.Fc(32,"\n                        "),a.Pb(),a.Fc(33,"\n                    "),a.Pb(),a.Fc(34,"\n                    "),a.Qb(35,"div",65),a.Fc(36,"\n                        "),a.Qb(37,"label",87),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n                        "),a.Qb(41,"div",72),a.Fc(42,"\n                            "),a.Qb(43,"input",88,89),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(45,"\n                            "),a.Qb(46,"div",70),a.Fc(47),a.ac(48,"translate"),a.Pb(),a.Fc(49,"\n                        "),a.Pb(),a.Fc(50,"\n                    "),a.Pb(),a.Fc(51,"\n                    "),a.Qb(52,"div",65),a.Fc(53,"\n                        "),a.Qb(54,"label",90),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                        "),a.Qb(58,"div",72),a.Fc(59,"\n                            "),a.Qb(60,"input",91,92),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(62,"\n                            "),a.Qb(63,"div",70),a.Fc(64),a.ac(65,"translate"),a.Pb(),a.Fc(66,"\n                        "),a.Pb(),a.Fc(67,"\n                    "),a.Pb(),a.Fc(68,"\n                    "),a.Qb(69,"div",65),a.Fc(70,"\n                        "),a.Qb(71,"label",93),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n                        "),a.Qb(75,"div",72),a.Fc(76,"\n                            "),a.Qb(77,"textarea",94,95),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.description=t}),a.Pb(),a.Fc(79,"\n                        "),a.Pb(),a.Fc(80,"\n                    "),a.Pb(),a.Fc(81,"\n                "),a.Pb(),a.Fc(82,"\n                "),a.Qb(83,"div",35),a.Fc(84,"\n                    "),a.Qb(85,"button",36),a.Xb("click",function(){return a.wc(e),a.Zb().saveNonMedicalDivision()}),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n                    "),a.Qb(89,"button",37),a.Fc(90),a.ac(91,"translate"),a.Pb(),a.Fc(92,"\n                "),a.Pb(),a.Fc(93,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(14),n=a.vc(44),i=a.vc(61),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,19,"Code"),""),a.yb(5),a.hc("ngModel",c.model.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(18,21,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(26,23,"Department"),""),a.yb(5),a.hc("ngModel",c.model.departmentName),a.yb(8),a.Hc(" ",a.bc(39,25,"ArabicName"),""),a.yb(5),a.hc("ngModel",c.model.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(48,27,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(56,29,"EnglishName"),""),a.yb(5),a.hc("ngModel",c.model.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                                ",a.bc(65,31,"RequiredField"),"\n                            "),a.yb(8),a.Gc(a.bc(73,33,"Remark")),a.yb(5),a.hc("ngModel",c.model.description),a.yb(8),a.hc("disabled",!e.form.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(87,35,"Save")),a.yb(4),a.Gc(a.bc(91,37,"Cancel"))}}function Ji(e,t){if(1&e&&(a.Qb(0,"option",116),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}const ec=function(){return{standalone:!0}};function tc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",96,97),a.Fc(2,"\n                "),a.Qb(3,"div",32),a.Fc(4,"\n                    "),a.Qb(5,"div",65),a.Fc(6,"\n                        "),a.Qb(7,"label",71),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"div",72),a.Fc(12,"\n                            "),a.Qb(13,"input",86,74),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.departmentName=t}),a.Pb(),a.Fc(15,"\n                        "),a.Pb(),a.Fc(16,"\n                    "),a.Pb(),a.Fc(17,"\n                    "),a.Qb(18,"div",65),a.Fc(19,"\n                        "),a.Qb(20,"label",87),a.Fc(21),a.ac(22,"translate"),a.Pb(),a.Fc(23,"\n                        "),a.Qb(24,"div",72),a.Fc(25,"\n                            "),a.Qb(26,"input",98,89),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.divisionName=t}),a.Pb(),a.Fc(28,"\n                        "),a.Pb(),a.Fc(29,"\n                    "),a.Pb(),a.Fc(30,"\n                    "),a.Qb(31,"div",65),a.Fc(32,"\n                        "),a.Qb(33,"label",99),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                        "),a.Qb(37,"div",72),a.Fc(38,"\n                            "),a.Qb(39,"input",100,101),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(41,"\n                            "),a.Qb(42,"div",70),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                        "),a.Pb(),a.Fc(46,"\n                    "),a.Pb(),a.Fc(47,"\n                    "),a.Qb(48,"div",65),a.Fc(49,"\n                        "),a.Qb(50,"label",102),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                        "),a.Qb(54,"div",72),a.Fc(55,"\n                            "),a.Qb(56,"input",103,104),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(58,"\n                            "),a.Qb(59,"div",70),a.Fc(60),a.ac(61,"translate"),a.Pb(),a.Fc(62,"\n                        "),a.Pb(),a.Fc(63,"\n                    "),a.Pb(),a.Fc(64,"\n                    "),a.Qb(65,"div",65),a.Fc(66,"\n                        "),a.Qb(67,"label",105),a.Fc(68),a.ac(69,"translate"),a.Pb(),a.Fc(70,"\n                        "),a.Qb(71,"div",72),a.Fc(72,"\n                            "),a.Qb(73,"select",106,107),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.physicalResourceTypeId=t}),a.Fc(75,"\n                                "),a.Qb(76,"option"),a.Fc(77),a.ac(78,"translate"),a.Pb(),a.Fc(79,"\n                                "),a.Dc(80,Ji,2,2,"option",108),a.ac(81,"translateObjects"),a.Fc(82,"\n                            "),a.Pb(),a.Fc(83,"\n                        "),a.Pb(),a.Fc(84,"\n                    "),a.Pb(),a.Fc(85,"\n                    "),a.Qb(86,"div",65),a.Fc(87,"\n                        "),a.Qb(88,"label",109),a.Fc(89),a.ac(90,"translate"),a.Pb(),a.Fc(91,"\n                        "),a.Qb(92,"div",110),a.Fc(93,"\n                            "),a.Qb(94,"p-calendar",111),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.startDate=t}),a.Pb(),a.Fc(95,"\n                        "),a.Pb(),a.Fc(96,"\n                    "),a.Pb(),a.Fc(97,"\n                    "),a.Qb(98,"div",65),a.Fc(99,"\n                        "),a.Qb(100,"label",112),a.Fc(101),a.ac(102,"translate"),a.Pb(),a.Fc(103,"\n                        "),a.Qb(104,"div",110),a.Fc(105,"\n                            "),a.Qb(106,"p-calendar",111),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.endDate=t}),a.Pb(),a.Fc(107,"\n                        "),a.Pb(),a.Fc(108,"\n                    "),a.Pb(),a.Fc(109,"\n                    "),a.Qb(110,"div",65),a.Fc(111,"\n                        "),a.Qb(112,"label",113),a.Fc(113),a.ac(114,"translate"),a.Pb(),a.Fc(115,"\n                        "),a.Qb(116,"div",72),a.Fc(117,"\n                            "),a.Qb(118,"textarea",114,115),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.description=t}),a.Pb(),a.Fc(120,"\n                        "),a.Pb(),a.Fc(121,"\n                    "),a.Pb(),a.Fc(122,"\n                "),a.Pb(),a.Fc(123,"\n                "),a.Qb(124,"div",35),a.Fc(125,"\n                    "),a.Qb(126,"button",36),a.Xb("click",function(){return a.wc(e),a.Zb().savePhysicalResource()}),a.Fc(127),a.ac(128,"translate"),a.Pb(),a.Fc(129,"\n                    "),a.Qb(130,"button",37),a.Fc(131),a.ac(132,"translate"),a.Pb(),a.Fc(133,"\n                "),a.Pb(),a.Fc(134,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(40),n=a.vc(57),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,35,"Department"),""),a.yb(5),a.hc("ngModel",i.model.departmentName),a.yb(8),a.Hc(" ",a.bc(22,37,"Division"),""),a.yb(5),a.hc("ngModel",i.model.divisionName),a.yb(8),a.Hc(" ",a.bc(35,39,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                ",a.bc(44,41,"RequiredField"),"\n                            "),a.yb(8),a.Hc(" ",a.bc(52,43,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                ",a.bc(61,45,"RequiredField"),"\n                            "),a.yb(8),a.Gc(a.bc(69,47,"Type")),a.yb(5),a.hc("ngModel",i.model.physicalResourceTypeId),a.yb(4),a.Gc(a.bc(78,49,"Select")),a.yb(3),a.hc("ngForOf",a.bc(81,51,i.PhysicalResourceTypes)),a.yb(9),a.Hc(" ",a.bc(90,53,"StartDate"),""),a.yb(5),a.hc("ngModel",i.model.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!1)("ngModelOptions",a.lc(63,ec)),a.yb(7),a.Hc(" ",a.bc(102,55,"EndDate"),""),a.yb(5),a.hc("ngModel",i.model.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!1)("ngModelOptions",a.lc(64,ec)),a.yb(7),a.Hc(" ",a.bc(114,57,"Remark"),""),a.yb(5),a.hc("ngModel",i.model.description),a.yb(8),a.hc("disabled",!e.form.valid||!i.enableSaveBtn&&!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(128,59,"Save")),a.yb(4),a.Gc(a.bc(132,61,"Cancel"))}}let nc=(()=>{class e{constructor(e,t,n,i,c,s,a){this.router=e,this.clinicService=t,this.storage=n,this.toastr=i,this._route=c,this.translate=s,this.accountService=a,this.selectedLang="ar",this.SelectedPersonName="",this.selectOrganizationMasterTab=!0,this.active=!0,this.model={id:0},this.showProgress=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.organizationStructure=[],this.departments=[],this.PhysicalResourceTypes=[],this.utilityClass=new Nt.a,this.selectedDepartmentsandDivisions=[],this.isEditMode=!1,this.userIdToResetPassword="",this.userType="",this.isClinicAdmin=!1,this.lstToTranslated=[]}ngOnInit(){this.selectedLang=this.storage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.clinicId=this.storage.retrieve("ClinicID"),this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.loadOrganizationStructureTree(),this.loadOrganizationStructureWrapper(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}loadOrganizationStructureTree(){let e=this;e.showProgress=!0,this.clinicService.getOrganizationStructureTree(this.clinicId).subscribe(function(t){e.organizationStructure=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}loadOrganizationStructureWrapper(){let e=this;e.showProgress=!0,this.clinicService.getOrganizationStructureWrapper().subscribe(function(t){e.departments=t.departments,e.PhysicalResourceTypes=t.physicalResourceTypes},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}SaveDepartmentsandDivisions(){this.model.divisionsIDs=[],this.model.clinicId=this.clinicId;let e=this;this.selectedDepartmentsandDivisions.forEach(t=>{"Division"==t.type&&e.model.divisionsIDs.push(t.data)}),e.showProgress=!0,this.clinicService.saveMedicalDepartmentsandDivisions(e.model).subscribe(function(t){e.organizationStructure=t,e.model={id:0};let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.organizationStructure.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.organizationStructure.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}displayPopup(e){this.model={id:0},"Medical"==e.type.toString()?(this.AddMedicalDepartment.nativeElement.click(),this.displaySelectedDivisions()):"NonMedical"==e.type.toString()?(this.AddNonMedicalDepartment.nativeElement.click(),this.model.departmentCategoryId=e.data,this.model.clinicId=this.clinicId):"ClinicDepartment"==e.type?(this.AddDivision.nativeElement.click(),this.model={id:0},this.model.departmentName=e.label,this.model.clinicDepartmentId=e.data):e.type.includes("Human")&&this.router.navigateByUrl("/humanResource/1"),this.selectedNode=e}displaySelectedDivisions(){this.selectedDepartmentsandDivisions=[];for(let e of this.organizationStructure)if("Medical"==e.type)for(let t of e.children){this.departments.forEach(e=>{this.highLightSelectedNodes(e,t.masterDepartmentId,"Department")});for(let e of t.children)this.departments.forEach(t=>{this.highLightSelectedNodes(t,e.masterDivisionId,"Division")})}}highLightSelectedNodes(e,t,n){e.data==t&&e.type==n&&this.selectedDepartmentsandDivisions.push(e),e.children&&e.children.forEach(e=>{this.highLightSelectedNodes(e,t,n)})}displayPhysicalResourcePopup(e){this.AddPhysicalResource.nativeElement.click(),this.model={id:0},this.model.departmentName=e.parent.label,this.model.divisionName=e.label,this.model.clinicDivisionId=e.data,this.selectedNode=e}clear(){this.model={id:0},this.active=!1,setTimeout(()=>this.active=!0,0)}saveNonMedicalDepartment(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,this.clinicService.saveNonMedicalDepartment(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.labelTranslation),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}editDepartment(e){let t=this;t.showProgress=!0,t.selectedNode=e,this.clinicService.getNonMedicalDepartmentById(e.data).subscribe(function(e){t.model=e},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1}),this.AddNonMedicalDepartment.nativeElement.click()}saveNonMedicalDivision(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,this.clinicService.saveNonMedicalDivision(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.labelTranslation),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}editDivision(e){let t=this;t.showProgress=!0,t.selectedNode=e,this.clinicService.getNonMedicalDivisionById(e.data).subscribe(function(n){t.model=n,t.model.departmentName=e.parent.label},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1}),this.AddDivision.nativeElement.click()}savePhysicalResource(){let e=this,t=!0;e.model.id>0&&(t=!1),e.showProgress=!0,this.model.startDate&&(this.model.startDate=this.utilityClass.getUtcDate(this.model.startDate)),this.model.endDate&&(this.model.endDate=this.utilityClass.getUtcDate(this.model.endDate)),this.clinicService.savePhysicalResource(e.model).subscribe(function(n){t?e.selectedNode.children.push(n):(e.selectedNode.label=n.label,e.selectedNode.labelTranslation=n.labelTranslation),e.clear();let i=e.translate.instant("SavedSuccessfully");e.toastr.success(i,"")},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}editPhysicalResource(e){let t=this;t.showProgress=!0,t.selectedNode=e,this.clinicService.getPhysicalResourceById(e.data).subscribe(function(n){t.model=n,t.model.startDate&&(t.model.startDate=t.utilityClass.getUtcDateFromString(t.model.startDate)),t.model.endDate&&(t.model.endDate=t.utilityClass.getUtcDateFromString(t.model.endDate)),t.model.departmentName=e.parent.parent.label,t.model.divisionName=e.parent.label},function(e){t.toastr.error(e,""),t.showProgress=!1},function(){t.showProgress=!1}),this.AddPhysicalResource.nativeElement.click()}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleOrganizationStructureActivation(e.data,t.target.checked,e.type).subscribe(function(i){n.toggleActivationForNodeandSubs(e,t.target.checked),"PhysicalResource"==e.type&&t.target.checked&&(e.parent.isActive=!0,e.parent.parent.isActive=!0),"ClinicDivision"==e.type&&t.target.checked&&(e.parent.isActive=!0),"SecurityUser"==e.type&&t.target.checked&&(e.parent.isActive=!0,e.parent.parent.isActive=!0)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}toggleActivationForNodeandSubs(e,t){e.isActive=t,0==t&&e.children&&e.children.forEach(e=>{this.toggleActivationForNodeandSubs(e,t)})}addNewHumanResource(e){this.isEditMode=!1,this.selectedNode=e,this.SelectedPersonName="",this.AddHumanResource.nativeElement.click()}editHumanResource(e){this.isEditMode=!0,this.selectedNode=e,this.SelectedPersonName="ar"==this.selectedLang?"- "+e.label:"- "+e.labelTranslation,this.AddHumanResource.nativeElement.click()}updateModel(e){this.isEditMode=!0,this.selectedNode=e,this.SelectedPersonName="ar"==this.selectedLang?"- "+this.selectedNode.label:"- "+this.selectedNode.labelTranslation}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.OrganizationStructure&&((1==t.fullControl||t.add)&&(this.enableAddBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(s.b),a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(s.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-organizationMaster"]],viewQuery:function(e,t){if(1&e&&(a.Lc(Ri,1),a.Lc(xi,1),a.Lc(Zi,1),a.Lc(Bi,1),a.Lc(Hi,1)),2&e){let e;a.uc(e=a.Yb())&&(t.AddNonMedicalDepartment=e.first),a.uc(e=a.Yb())&&(t.AddMedicalDepartment=e.first),a.uc(e=a.Yb())&&(t.AddDivision=e.first),a.uc(e=a.Yb())&&(t.AddPhysicalResource=e.first),a.uc(e=a.Yb())&&(t.AddHumanResource=e.first)}},decls:223,vars:69,consts:[[4,"ngIf"],[1,"row"],[3,"isOrgMasterSelected",4,"ngIf"],[1,"row","nopadding"],[1,"row",2,"padding","13px"],[1,"NBbreadcrumb"],[1,"row",2,"display","none"],["type","button","data-toggle","modal","data-target","#MedicalDepartmentPopup",1,"btn","btn-primary"],["AddMedicalDepartment",""],["type","button","data-toggle","modal","data-target","#NonMedicalDepartmentPopup",1,"btn","btn-primary"],["AddNonMedicalDepartment",""],["type","button","data-toggle","modal","data-target","#DivisionPopup",1,"btn","btn-primary"],["AddDivision",""],["type","button","data-toggle","modal","data-target","#PhysicalResourcePopup",1,"btn","btn-primary"],["AddPhysicalResource",""],["type","button","data-toggle","modal","data-target","#humanResourcePopup",1,"btn","btn-primary"],["AddHumanResource",""],[1,"row","well"],["type","button",1,"btn","btn-primary",3,"click"],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","Medical"],["pTemplate","NonMedical"],["pTemplate","ClinicDepartment"],["pTemplate","ClinicDivision"],["pTemplate","PhysicalResource"],["pTemplate","SecurityUser"],["id","MedicalDepartmentPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[1,"nopadding",2,"max-height","250px","min-height","150px","overflow","auto","border","1px solid grey"],["selectionMode","checkbox",3,"value","selection","selectionChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],["id","NonMedicalDepartmentPopup","role","dialog",1,"modal","fade"],["class","form-horizontal","name","nonMedicalDepartmentForm",4,"ngIf"],["id","DivisionPopup","role","dialog",1,"modal","fade"],["class","form-horizontal","name","divisionForm",4,"ngIf"],["id","PhysicalResourcePopup","role","dialog",1,"modal","fade"],["class","form-horizontal","name","physicalResourceForm",4,"ngIf"],["id","humanResourcePopup","role","dialog","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog","width75percent"],[3,"selectedNode","isEditMode","isClinicAdmin","enableSaveBtn","onModelUpdated"],[3,"isOrgMasterSelected"],["src","images/addImage.png",3,"click"],["id","ChkIsActiveDepartment","name","ChkIsActiveDepartment","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],["src","images/addImage.png","title","Add Division",3,"click"],["title","Edit Department",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["src","images/addImage.png","title","Add Physical Resouce",3,"click"],["src","images/add-user.png","title","Add Human Resouce",3,"click"],["id","ChkIsActiveDivision","name","ChkIsActiveDivision","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],["title","Edit Division",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],[1,"glyphicon","glyphicon-hdd"],["title","Edit Physical Resource",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActivePhysicalResource","name","ChkIsActivePhysicalResource","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"glyphicon","glyphicon-user"],["title","Edit Human Resource",1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","chkIsActiveHumanResource","name","chkIsActiveHumanResource","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],["name","nonMedicalDepartmentForm",1,"form-horizontal"],["nonMedicalDepartmentForm","ngForm"],[1,"form-group"],["for","txtDepartmentCode",1,"control-label","col-md-3"],[1,"col-md-3"],["id","txtDepartmentCode","name","txtDepartmentCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDepartmentCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtDepartmentName",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtDepartmentName","name","txtDepartmentName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDepartmentName","ngModel"],["for","txtDepartmentNameTranslation",1,"control-label","col-md-3"],["id","txtDepartmentNameTranslation","name","txtDepartmentNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDepartmentNameTranslation","ngModel"],["for","txtDepartmentRemark",1,"control-label","col-md-3"],["id","txtDepartmentRemark","name","txtDepartmentRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtDepartmentRemark","ngModel"],["name","divisionForm",1,"form-horizontal"],["divisionForm","ngForm"],["for","txtDivisionCode",1,"control-label","col-md-3"],["id","txtDivisionCode","name","txtDivisionCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDivisionCode","ngModel"],["id","txtDepartmentName","name","txtDepartmentName","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["for","txtDivisionName",1,"control-label","col-md-3"],["id","txtDivisionName","name","txtDivisionName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDivisionName","ngModel"],["for","txtDivisionNameTranslation",1,"control-label","col-md-3"],["id","txtDivisionNameTranslation","name","txtDivisionNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDivisionNameTranslation","ngModel"],["for","txtDivisionRemark",1,"control-label","col-md-3"],["id","txtDivisionRemark","name","txtDivisionRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtDivisionRemark","ngModel"],["name","physicalResourceForm",1,"form-horizontal"],["physicalResourceForm","ngForm"],["id","txtDivisionName","name","txtDivisionName","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["for","txtName",1,"control-label","col-md-3"],["id","txtPhysicalResourceName","name","txtPhysicalResourceName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtPhysicalResourceName","ngModel"],["for","txtPhysicalResouceNameTranslation",1,"control-label","col-md-3"],["id","txtPhysicalResouceNameTranslation","name","txtPhysicalResouceNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtPhysicalResouceNameTranslation","ngModel"],["for","ddlTypes",1,"control-label","col-md-3"],["id","ddlTypes","name","ddlTypes",1,"form-control",3,"ngModel","ngModelChange"],["ddlTypes","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","txtPhysicalStartDate",1,"control-label","col-md-3"],[1,"col-md-4"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["for","txtPhysicalEndDate",1,"control-label","col-md-3"],["for","txtPhysicalRemark",1,"control-label","col-md-3"],["id","txtPhysicalRemark","name","txtPhysicalRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtPhysicalRemark","ngModel"],[3,"value"]],template:function(e,t){1&e&&(a.Dc(0,Oi,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,Ei,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Xi,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        \n        "),a.Qb(10,"div",1),a.Fc(11,"\n            "),a.Qb(12,"div",4),a.Fc(13,"\n                "),a.Qb(14,"div",5),a.Fc(15,"\n                    "),a.Qb(16,"a"),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19),a.ac(20,"translate"),a.Pb(),a.Fc(21,"\n\n            "),a.Pb(),a.Fc(22,"\n        "),a.Pb(),a.Fc(23,"\n\n        "),a.Qb(24,"div",6),a.Fc(25,"\n            \xa0\n            "),a.Qb(26,"button",7,8),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n            "),a.Qb(31,"button",9,10),a.Fc(33),a.ac(34,"translate"),a.Pb(),a.Fc(35,"\n            "),a.Qb(36,"button",11,12),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n            "),a.Qb(41,"button",13,14),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n            "),a.Qb(46,"button",15,16),a.Fc(48),a.ac(49,"translate"),a.Pb(),a.Fc(50,"\n        "),a.Pb(),a.Fc(51,"\n        "),a.Qb(52,"div",17),a.Fc(53,"\n            "),a.Qb(54,"button",18),a.Xb("click",function(){return t.expandAll()}),a.Fc(55),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n            "),a.Qb(58,"button",18),a.Xb("click",function(){return t.collapseAll()}),a.Fc(59),a.ac(60,"translate"),a.Pb(),a.Fc(61,"\n        "),a.Pb(),a.Fc(62,"\n       \n\n        "),a.Lb(63,"br"),a.Fc(64,"\n        "),a.Qb(65,"div",17),a.Fc(66,"\n            "),a.Qb(67,"p-tree",19),a.Xb("selectionChange",function(e){return t.selectedFile2=e}),a.Fc(68,"\n                "),a.Dc(69,Ui,6,3,"ng-template",20),a.Fc(70,"\n                "),a.Dc(71,qi,6,3,"ng-template",21),a.Fc(72,"\n                "),a.Dc(73,Ki,10,4,"ng-template",22),a.Fc(74,"\n                "),a.Dc(75,$i,20,8,"ng-template",23),a.Fc(76,"\n                "),a.Dc(77,zi,15,5,"ng-template",24),a.Fc(78,"\n                "),a.Dc(79,Wi,17,5,"ng-template",25),a.Fc(80,"\n            "),a.Pb(),a.Fc(81,"\n        "),a.Pb(),a.Fc(82,"\n        \n\n    "),a.Pb(),a.Fc(83,"\n"),a.Pb(),a.Fc(84,"\n\n\n"),a.Fc(85,"\n"),a.Qb(86,"div",26),a.Fc(87,"\n    "),a.Qb(88,"div",27),a.Fc(89,"\n        "),a.Fc(90,"\n        "),a.Qb(91,"div",28),a.Fc(92,"\n            "),a.Qb(93,"div",29),a.Fc(94,"\n                "),a.Qb(95,"button",30),a.Fc(96,"\xd7"),a.Pb(),a.Fc(97,"\n                "),a.Qb(98,"h4",31),a.Fc(99),a.ac(100,"translate"),a.Pb(),a.Fc(101,"\n            "),a.Pb(),a.Fc(102,"\n            "),a.Qb(103,"div",32),a.Fc(104,"\n                "),a.Qb(105,"div",33),a.Fc(106,"\n                    "),a.Qb(107,"p-tree",34),a.Xb("selectionChange",function(e){return t.selectedDepartmentsandDivisions=e}),a.ac(108,"translateObjects"),a.Fc(109,"\n                    "),a.Pb(),a.Fc(110,"\n                "),a.Pb(),a.Fc(111,"\n            "),a.Pb(),a.Fc(112,"\n            "),a.Qb(113,"div",35),a.Fc(114,"\n                "),a.Qb(115,"button",36),a.Xb("click",function(){return t.SaveDepartmentsandDivisions()}),a.Fc(116),a.ac(117,"translate"),a.Pb(),a.Fc(118,"\n                "),a.Qb(119,"button",37),a.Fc(120),a.ac(121,"translate"),a.Pb(),a.Fc(122,"\n            "),a.Pb(),a.Fc(123,"\n        "),a.Pb(),a.Fc(124,"\n    "),a.Pb(),a.Fc(125,"\n"),a.Pb(),a.Fc(126,"\n\n"),a.Fc(127,"\n"),a.Qb(128,"div",38),a.Fc(129,"\n    "),a.Qb(130,"div",27),a.Fc(131,"\n        "),a.Fc(132,"\n        "),a.Qb(133,"div",28),a.Fc(134,"\n            "),a.Qb(135,"div",29),a.Fc(136,"\n                "),a.Qb(137,"button",30),a.Fc(138,"\xd7"),a.Pb(),a.Fc(139,"\n                "),a.Qb(140,"h4",31),a.Fc(141),a.ac(142,"translate"),a.Pb(),a.Fc(143,"\n            "),a.Pb(),a.Fc(144,"\n            "),a.Dc(145,Yi,81,35,"form",39),a.Fc(146,"\n        "),a.Pb(),a.Fc(147,"\n    "),a.Pb(),a.Fc(148,"\n"),a.Pb(),a.Fc(149,"\n\n"),a.Fc(150,"\n"),a.Qb(151,"div",40),a.Fc(152,"\n    "),a.Qb(153,"div",27),a.Fc(154,"\n        "),a.Fc(155,"\n        "),a.Qb(156,"div",28),a.Fc(157,"\n            "),a.Qb(158,"div",29),a.Fc(159,"\n                "),a.Qb(160,"button",30),a.Fc(161,"\xd7"),a.Pb(),a.Fc(162,"\n                "),a.Qb(163,"h4",31),a.Fc(164),a.ac(165,"translate"),a.Pb(),a.Fc(166,"\n            "),a.Pb(),a.Fc(167,"\n            "),a.Dc(168,_i,94,39,"form",41),a.Fc(169,"\n        "),a.Pb(),a.Fc(170,"\n    "),a.Pb(),a.Fc(171,"\n"),a.Pb(),a.Fc(172,"\n\n"),a.Fc(173,"\n"),a.Qb(174,"div",42),a.Fc(175,"\n    "),a.Qb(176,"div",27),a.Fc(177,"\n        "),a.Fc(178,"\n        "),a.Qb(179,"div",28),a.Fc(180,"\n            "),a.Qb(181,"div",29),a.Fc(182,"\n                "),a.Qb(183,"button",30),a.Fc(184,"\xd7"),a.Pb(),a.Fc(185,"\n                "),a.Qb(186,"h4",31),a.Fc(187),a.ac(188,"translate"),a.Pb(),a.Fc(189,"\n            "),a.Pb(),a.Fc(190,"\n            "),a.Dc(191,tc,135,65,"form",43),a.Fc(192,"\n        "),a.Pb(),a.Fc(193,"\n    "),a.Pb(),a.Fc(194,"\n"),a.Pb(),a.Fc(195,"\n\n"),a.Fc(196,"\n"),a.Qb(197,"div",44),a.Fc(198,"\n    "),a.Qb(199,"div",45),a.Fc(200,"\n        "),a.Fc(201,"\n        "),a.Qb(202,"div",28),a.Fc(203,"\n            "),a.Qb(204,"div",29),a.Fc(205,"\n                "),a.Qb(206,"button",30),a.Fc(207,"\xd7"),a.Pb(),a.Fc(208,"\n                "),a.Qb(209,"h4",31),a.Fc(210),a.ac(211,"translate"),a.Pb(),a.Fc(212,"\n            "),a.Pb(),a.Fc(213,"\n            "),a.Qb(214,"div",32),a.Fc(215,"\n                "),a.Qb(216,"clinic-humanResource",46),a.Xb("onModelUpdated",function(e){return t.updateModel(e)}),a.Pb(),a.Fc(217,"\n            "),a.Pb(),a.Fc(218,"\n        "),a.Pb(),a.Fc(219,"\n    "),a.Pb(),a.Fc(220,"\n"),a.Pb(),a.Fc(221,"\n\n"),a.Fc(222,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(11),a.Gc(a.bc(18,32,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                    ",a.bc(20,34,"OrganizationStructure"),"\n                "),a.yb(9),a.Gc(a.bc(29,36,"AddMedicalDepartment")),a.yb(5),a.Gc(a.bc(34,38,"AddNonMedicalDepartment")),a.yb(5),a.Gc(a.bc(39,40,"AddDivision")),a.yb(5),a.Gc(a.bc(44,42,"AddPhysicalResource")),a.yb(5),a.Gc(a.bc(49,44,"AddHumanResource")),a.yb(7),a.Gc(a.bc(56,46,"ExpandAll")),a.yb(4),a.Gc(a.bc(60,48,"CollapseAll")),a.yb(8),a.hc("value",t.organizationStructure)("selection",t.selectedFile2),a.yb(32),a.Gc(a.bc(100,50,"AddMedicalDepartment")),a.yb(8),a.hc("value",a.ec(108,52,t.departments,null,null,t.lstToTranslated))("selection",t.selectedDepartmentsandDivisions),a.yb(8),a.ic("disabled",t.enableSaveBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(117,57,"Save")),a.yb(4),a.Gc(a.bc(121,59,"Cancel")),a.yb(21),a.Gc(a.bc(142,61,"NonMedicalDepartment")),a.yb(4),a.hc("ngIf",t.active),a.yb(19),a.Gc(a.bc(165,63,"Division")),a.yb(4),a.hc("ngIf",t.active),a.yb(19),a.Gc(a.bc(188,65,"PhysicalResource")),a.yb(4),a.hc("ngIf",t.active),a.yb(19),a.Ic("",a.bc(211,67,"HumanResource")," \xa0 ",t.SelectedPersonName,""),a.yb(6),a.hc("selectedNode",t.selectedNode)("isEditMode",t.isEditMode)("isClinicAdmin",t.isClinicAdmin)("enableSaveBtn",t.enableSaveBtn))},directives:[i.k,O.a,E.g,Li,S.a,y,Oe.a,c.q,c.g,c.h,c.b,c.o,c.f,c.i,c.p,c.j,c.r,i.j,kt.a],pipes:[d.c,Ge.a],encapsulation:2}),e})();const ic=["btnServicesGroup"],cc=["btnCloseServicesGroup"],sc=["btnCloseService"],ac=["btnServices"],oc=["tree"],rc=["i"];function lc(e,t){if(1&e&&a.Lb(0,"clinic-tab",29),2&e){const e=a.Zb();a.hc("isServicesSelected",e.selectServicesTab)}}function dc(e,t){if(1&e&&a.Lb(0,"shared-tabs",29),2&e){const e=a.Zb();a.hc("isServicesSelected",e.selectServicesTab)}}function bc(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                          "),a.Qb(1,"span",30),a.Lb(2,"i",31),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                              "),a.Qb(6,"i",32),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n                          "),a.Pb(),a.Fc(8,"\n                          "),a.Qb(9,"label"),a.Fc(10,"\n                              "),a.Qb(11,"input",33),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                              "),a.Lb(13,"span",34),a.Fc(14,"\n                          "),a.Pb(),a.Fc(15,"\n                      ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                          \xa0\n                          ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                          \xa0 \xa0\n                          "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function uc(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                          "),a.Qb(1,"span",30),a.Lb(2,"i",35),a.Pb(),a.Fc(3,"\n                          \xa0\n                          "),a.Qb(4,"span"),a.Fc(5),a.Pb(),a.Fc(6,"\n                          \xa0 \xa0\n                          "),a.Qb(7,"a",36,6),a.Fc(9,"\n                              "),a.Qb(10,"img",37),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passServiceGroupValue(n)}),a.Pb(),a.Fc(11,"\n                          "),a.Pb(),a.Fc(12,"\n                          \xa0 \xa0\n                          "),a.Qb(13,"a"),a.Fc(14,"\n                              "),a.Qb(15,"i",32),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(16,"\n                          "),a.Pb(),a.Fc(17,"\n                          "),a.Qb(18,"label"),a.Fc(19,"\n                              "),a.Qb(20,"input",33),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(21,"\n                              "),a.Lb(22,"span",34),a.Fc(23,"\n                          "),a.Pb(),a.Fc(24,"\n                      ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(4),a.Ab(n.isSelectedGroupNode?"bg-danger":""),a.yb(1),a.Hc("\n                              ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                          "),a.yb(2),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function hc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",38,39),a.Xb("click",function(){return a.wc(e),a.Zb().close()}),a.Fc(2,"\xd7"),a.Pb()}}function pc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",38,40),a.Xb("click",function(){return a.wc(e),a.Zb().close()}),a.Fc(2,"\xd7"),a.Pb()}}function gc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                    "),a.Qb(2,"input",53,54),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb(3).onSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb(3);a.yb(2),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,3,e.text),"\n                                ")}}function mc(e,t){if(1&e&&(a.Qb(0,"div",51),a.Fc(1,"\n                        "),a.Qb(2,"table"),a.Fc(3,"\n                            "),a.Qb(4,"tr"),a.Fc(5,"\n                                "),a.Dc(6,gc,6,5,"td",52),a.Fc(7,"\n                            "),a.Pb(),a.Fc(8,"\n                        "),a.Pb(),a.Fc(9,"\n                    "),a.Pb()),2&e){const e=a.Zb(2);a.yb(6),a.hc("ngForOf",e.rbSelections)}}function Fc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                        "),a.Qb(2,"input",55,54),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb(3).onSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb(3);a.yb(2),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,3,e.text),"\n                                    ")}}function vc(e,t){if(1&e&&(a.Qb(0,"div",51),a.Fc(1,"\n                        "),a.Qb(2,"div",48),a.Fc(3,"\n                            "),a.Qb(4,"table"),a.Fc(5,"\n                                "),a.Qb(6,"tr"),a.Fc(7,"\n                                    "),a.Dc(8,Fc,6,5,"td",52),a.Fc(9,"\n                                "),a.Pb(),a.Fc(10,"\n                            "),a.Pb(),a.Fc(11,"\n                        "),a.Pb(),a.Fc(12,"\n                    "),a.Pb()),2&e){const e=a.Zb(2);a.yb(8),a.hc("ngForOf",e.rbSelections)}}function fc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                        "),a.Qb(2,"div",43),a.Fc(3,"\n                            "),a.Qb(4,"label",56),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                            "),a.Qb(8,"div",57),a.Fc(9,"\n                                "),a.Lb(10,"input",58),a.Fc(11,"\n                            "),a.Pb(),a.Fc(12,"\n                        "),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"div",43),a.Fc(15,"\n                            "),a.Qb(16,"label",59),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                            "),a.Qb(20,"div",60),a.Fc(21,"\n                                "),a.Qb(22,"input",61,62),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).serviceGroupModel.name=t}),a.Pb(),a.Fc(24,"\n                                "),a.Qb(25,"div",63),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                            "),a.Pb(),a.Fc(29,"\n                        "),a.Pb(),a.Fc(30,"\n                        "),a.Qb(31,"div",43),a.Fc(32,"\n                            "),a.Qb(33,"label",64),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                            "),a.Qb(37,"div",60),a.Fc(38,"\n                                "),a.Qb(39,"input",65,66),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).serviceGroupModel.nameTranslation=t}),a.Pb(),a.Fc(41,"\n                                "),a.Qb(42,"div",63),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                            "),a.Pb(),a.Fc(46,"\n                        "),a.Pb(),a.Fc(47,"\n                        "),a.Qb(48,"div",43),a.Fc(49,"\n                            "),a.Qb(50,"label",67),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                            "),a.Qb(54,"div",57),a.Fc(55,"\n                                "),a.Qb(56,"textarea",68,69),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).serviceGroupModel.description=t}),a.Pb(),a.Fc(58,"\n                            "),a.Pb(),a.Fc(59,"\n                        "),a.Pb(),a.Fc(60,"\n                    "),a.Pb()}if(2&e){const e=a.vc(23),t=a.vc(40),n=a.Zb(2);a.yb(5),a.Gc(a.bc(6,12,"ParentGroup")),a.yb(5),a.ic("value",n.serviceGroupParentlabel),a.yb(7),a.Hc(" ",a.bc(18,14,"ArabicName"),""),a.yb(5),a.hc("ngModel",n.serviceGroupModel.name),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(27,16,"RequiredField"),"\n                                "),a.yb(8),a.Gc(a.bc(35,18,"EnglishName")),a.yb(5),a.hc("ngModel",n.serviceGroupModel.nameTranslation),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(44,20,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(52,22,"Remark"),""),a.yb(5),a.hc("ngModel",n.serviceGroupModel.description)}}function Pc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                        "),a.Qb(2,"div",43),a.Fc(3,"\n                            "),a.Qb(4,"label",70),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                            "),a.Qb(8,"div",57),a.Fc(9,"\n                                "),a.Lb(10,"input",71),a.Fc(11,"\n                            "),a.Pb(),a.Fc(12,"\n                        "),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"div",43),a.Fc(15,"\n                            "),a.Qb(16,"label",72),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                            "),a.Qb(20,"div",73),a.Fc(21,"\n                                "),a.Qb(22,"input",74,75),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.code=t}),a.Pb(),a.Fc(24,"\n                                "),a.Qb(25,"div",63),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                            "),a.Pb(),a.Fc(29,"\n                        "),a.Pb(),a.Fc(30,"\n                        "),a.Qb(31,"div",43),a.Fc(32,"\n                            "),a.Qb(33,"label",76),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                            "),a.Qb(37,"div",60),a.Fc(38,"\n                                "),a.Qb(39,"input",77,78),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.name=t}),a.Pb(),a.Fc(41,"\n                                "),a.Qb(42,"div",63),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                            "),a.Pb(),a.Fc(46,"\n                        "),a.Pb(),a.Fc(47,"\n                        "),a.Qb(48,"div",43),a.Fc(49,"\n                            "),a.Qb(50,"label",79),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                            "),a.Qb(54,"div",60),a.Fc(55,"\n                                "),a.Qb(56,"input",80,81),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.nameTranslation=t}),a.Pb(),a.Fc(58,"\n                                "),a.Qb(59,"div",63),a.Fc(60),a.ac(61,"translate"),a.Pb(),a.Fc(62,"\n                            "),a.Pb(),a.Fc(63,"\n                        "),a.Pb(),a.Fc(64,"\n\n                        "),a.Qb(65,"div",43),a.Fc(66,"\n                            "),a.Qb(67,"label",82),a.Fc(68),a.ac(69,"translate"),a.Pb(),a.Fc(70,"\n                            "),a.Qb(71,"div",73),a.Fc(72,"\n                                "),a.Qb(73,"input",83,84),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.clinicFee=t})("keyup",function(){return a.wc(e),a.Zb(2).sum()}),a.Pb(),a.Fc(76,"\n                                "),a.Qb(77,"div",63),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Fc(80,"\n                            "),a.Pb(),a.Fc(81,"\n                        "),a.Pb(),a.Fc(82,"\n                        "),a.Qb(83,"div",43),a.Fc(84,"\n                            "),a.Qb(85,"label",85),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n                            "),a.Qb(89,"div",73),a.Fc(90,"\n                                "),a.Qb(91,"input",86,87),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.resourceFee=t})("keyup",function(){return a.wc(e),a.Zb(2).sum()}),a.Pb(),a.Fc(94,"\n                                "),a.Qb(95,"div",63),a.Fc(96),a.ac(97,"translate"),a.Pb(),a.Fc(98,"\n                            "),a.Pb(),a.Fc(99,"\n                        "),a.Pb(),a.Fc(100,"\n                        "),a.Qb(101,"div",43),a.Fc(102,"\n                            "),a.Qb(103,"label",88),a.Fc(104),a.ac(105,"translate"),a.Pb(),a.Fc(106,"\n                            "),a.Qb(107,"div",73),a.Fc(108,"\n                                "),a.Lb(109,"input",89),a.Fc(110,"\n                            "),a.Pb(),a.Fc(111,"\n                        "),a.Pb(),a.Fc(112,"\n                        "),a.Qb(113,"div",43),a.Fc(114,"\n                            "),a.Qb(115,"label",90),a.Fc(116),a.ac(117,"translate"),a.Pb(),a.Fc(118,"\n                            "),a.Qb(119,"div",60),a.Fc(120,"\n                                "),a.Qb(121,"label"),a.Fc(122,"\n                                    "),a.Qb(123,"input",91,92),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.exemptedFromVAT=t}),a.Pb(),a.Fc(125,"\n                                    "),a.Lb(126,"span",34),a.Fc(127,"\n                                "),a.Pb(),a.Fc(128,"\n                            "),a.Pb(),a.Fc(129,"\n                        "),a.Pb(),a.Fc(130,"\n                        "),a.Qb(131,"div",43),a.Fc(132,"\n                            "),a.Qb(133,"label",93),a.Fc(134),a.ac(135,"translate"),a.Pb(),a.Fc(136,"\n                            "),a.Qb(137,"div",57),a.Fc(138,"\n                                "),a.Qb(139,"textarea",94,95),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.description=t}),a.Pb(),a.Fc(141,"\n                            "),a.Pb(),a.Fc(142,"\n                        "),a.Pb(),a.Fc(143,"\n                    "),a.Pb()}if(2&e){const e=a.vc(23),t=a.vc(40),n=a.vc(57),i=a.vc(74),c=a.vc(92),s=a.Zb(2);a.yb(5),a.Gc(a.bc(6,30,"ParentGroup")),a.yb(5),a.hc("ngModel",s.serviceGroupParentlabel),a.yb(7),a.Hc(" ",a.bc(18,32,"Code"),""),a.yb(5),a.hc("ngModel",s.model.code),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(27,34,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(35,36,"ArabicName"),""),a.yb(5),a.hc("ngModel",s.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(44,38,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(52,40,"EnglishName"),""),a.yb(5),a.hc("ngModel",s.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(61,42,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(69,44,"ClinicFees"),""),a.yb(5),a.hc("ngModel",s.model.clinicFee)("disabled",s.model.id>0&&!s.enableServiceInput&&!s.isClinicAdmin),a.yb(4),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(79,46,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(87,48,"ResourceFees"),""),a.yb(5),a.hc("ngModel",s.model.resourceFee)("disabled",s.model.id>0&&!s.enableServiceInput&&!s.isClinicAdmin),a.yb(4),a.hc("hidden",c.valid||c.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(97,50,"RequiredField"),"\n                                "),a.yb(8),a.Gc(a.bc(105,52,"TotalFees")),a.yb(5),a.hc("value",s.totalFees),a.yb(7),a.Hc("",a.bc(117,54,"ExemptedFromVAT")," "),a.yb(7),a.hc("ngModel",s.model.exemptedFromVAT),a.yb(11),a.Hc(" ",a.bc(135,56,"Remark"),""),a.yb(5),a.hc("ngModel",s.model.description)}}function yc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",96),a.Xb("click",function(){return a.wc(e),a.Zb(2).saveServiceGroup()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1),t=a.Zb();a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(2,2,"Save"))}}function Qc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",97),a.Xb("click",function(){return a.wc(e),a.Zb(2).cancelServiceGroup()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}2&e&&(a.yb(1),a.Gc(a.bc(2,1,"Cancel")))}function Sc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",96),a.Xb("click",function(){return a.wc(e),a.Zb(2).saveService()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1),t=a.Zb();a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Gc(a.bc(2,2,"Save"))}}function Cc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",97),a.Xb("click",function(){return a.wc(e),a.Zb(2).cancelService()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}2&e&&(a.yb(1),a.Gc(a.bc(2,1,"Cancel")))}function wc(e,t){if(1&e&&(a.Qb(0,"form",41,42),a.Fc(2,"\n                "),a.Qb(3,"div",43),a.Fc(4,"\n                    "),a.Dc(5,mc,10,1,"div",44),a.Fc(6,"\n                    "),a.Dc(7,vc,13,1,"div",44),a.Fc(8,"\n                "),a.Pb(),a.Fc(9,"\n                "),a.Qb(10,"div",45),a.Fc(11,"\n                    "),a.Dc(12,fc,61,24,"div",46),a.Fc(13,"\n\n                    "),a.Dc(14,Pc,144,58,"div",46),a.Fc(15,"\n\n                "),a.Pb(),a.Fc(16,"\n                "),a.Qb(17,"div",47),a.Fc(18,"\n                    "),a.Qb(19,"div",48),a.Fc(20,"\n                        "),a.Dc(21,yc,3,4,"button",49),a.Fc(22,"\n                        "),a.Dc(23,Qc,3,3,"button",50),a.Fc(24,"\n                        "),a.Dc(25,Sc,3,4,"button",49),a.Fc(26,"\n                        "),a.Dc(27,Cc,3,3,"button",50),a.Fc(28,"\n                    "),a.Pb(),a.Fc(29,"\n                "),a.Pb(),a.Fc(30,"\n            "),a.Pb()),2&e){const e=a.Zb();a.yb(5),a.hc("ngIf",!e.isRoot),a.yb(2),a.hc("ngIf",e.isRoot),a.yb(5),a.hc("ngIf",e.isServiceGroupSeleced),a.yb(2),a.hc("ngIf",e.isServiceSeleced),a.yb(7),a.hc("ngIf",e.isServiceGroupSeleced),a.yb(2),a.hc("ngIf",e.isServiceGroupSeleced),a.yb(2),a.hc("ngIf",e.isServiceSeleced),a.yb(2),a.hc("ngIf",e.isServiceSeleced)}}let Ic=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.selectedLang="ar",this.leafType="Service",this.lstToTranslated=[],this.selectServicesTab=!0,this.selectedClinicId="0",this.active=!0,this.showProgress=!1,this.isSelectedGroupNode=!1,this.isServiceGroupSeleced=!0,this.isServiceSeleced=!1,this.groupName="",this.childName="",this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedAction=1,this.txtHeaderModal="",this.serviceGroupId="new",this.serviceId="new",this.titl="",this.model={},this.serviceGroupModel={},this.hideModal=!1,this.treeDataSourceItems=[],this.groupsOnlyTreeDataSourceItems=[],this.serviceGroupParentId="",this.serviceGroupParentlabel="",this.isRoot=!1,this.totalFees=0,this.isEdit=!1,this.toPrintDiv="print-section",this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.enableServiceInput=!1}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service"),this.translate.onLangChange.subscribe(e=>{this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service")}),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.getServiceGroupsForTree(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}getServiceGroupsForTree(){let e=this;e.showProgress=!0,this.clinicService.getServiceGroupsForTreeView(e.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}nodeSelect(e){}nodeUnselect(e){}displayPopup(e){let t=this;"servicegroup"==e.type.toLocaleLowerCase()?(this.serviceGroupId=e.data,this.isServiceGroupSeleced=!0,this.isServiceSeleced=!1,this.isRoot=!0,this.isEdit=!0,t.selectedAction=1,this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service")}),this.btnServicesGroup.nativeElement.click(),"new"!=this.serviceGroupId.toString().toLowerCase()&&this.clinicService.getServiceGroupById(this.serviceGroupId).subscribe(function(e){t.serviceGroupModel=e,t.serviceGroupParentId=t.serviceGroupModel.parentGroupId,t.serviceGroupParentlabel="ar"==t.selectedLang?t.serviceGroupModel.parentName:t.serviceGroupModel.parentNameTranslation},function(e){t.toastr.error(e,"")},function(){t.showProgress=!1})):"service"==e.type.toLocaleLowerCase()&&(this.isServiceGroupSeleced=!1,this.isServiceSeleced=!0,this.serviceId=e.data,t.selectedAction=2,this.txtHeaderModal=this.translate.instant("Service"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Service"),this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service")}),this.isRoot=!0,this.isEdit=!0,this.btnServicesGroup.nativeElement.click(),this.totalFees=t.model.resourceFee+t.model.clinicFee,"new"!=this.serviceId.toString().toLowerCase()&&this.clinicService.getServiceById(this.serviceId).subscribe(function(e){t.model=e,t.serviceGroupParentId=t.model.parentId,t.serviceGroupParentlabel="ar"==t.selectedLang?t.model.parentName:t.model.parentNameTranslation,t.totalFees=t.model.resourceFee+t.model.clinicFee},function(e){t.toastr.error(e,"")},function(){t.showProgress=!1})),t.selectedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}passServiceGroupValue(e){let t=this;t.clearServiceGroupWithParent(),t.serviceGroupParentId=e.data,t.serviceGroupParentlabel=e.label,t.serviceGroupParentlabel="ar"==t.selectedLang?e.label:e.labelTranslation,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service")}),t.isRoot=!1,this.isServiceGroupSeleced=!0,this.isServiceSeleced=!1,this.selectedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}passInitialServiceGroupValue(e){let t=this;t.clearServiceGroupWithParent(),t.serviceGroupParentId="",t.isRoot=!0,this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.groupName=this.translate.instant("ServiceGroup"),this.childName=this.translate.instant("Service")}),this.isServiceGroupSeleced=!0,this.isServiceSeleced=!1,this.isEdit=!0,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}onselectedGroupNodeValue(e){}changeActivation(e,t){let n=this;"Service"==e.type?(n.showProgress=!0,n.clinicService.updateServiceActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"ServiceGroup"==e.type&&(n.showProgress=!0,n.clinicService.updateServiceGroupActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}onSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isServiceGroupSeleced=!0,this.isServiceSeleced=!1,this.txtHeaderModal=this.translate.instant("ServiceGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ServiceGroup")})):2==this.selectedAction&&(this.isServiceGroupSeleced=!1,this.isServiceSeleced=!0,this.txtHeaderModal=this.translate.instant("Service"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Service")}))}saveServiceGroup(){let e=this;e.serviceGroupModel.parentGroupId=e.serviceGroupParentId,e.serviceGroupModel.clinicId=e.selectedClinicId,this.serviceGroupModel.id>0?this.clinicService.updateServiceGroup(this.serviceGroupModel).subscribe(function(t){e.selectedNode.label=t.name,e.selectedNode.labelTranslation=t.nameTranslation;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearServiceGroupWithParent()},function(t){e.toastr.error(t,""),e.clearServiceGroupWithParent(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createServiceGroup(this.serviceGroupModel).subscribe(function(t){""==e.serviceGroupParentId?e.treeDataSourceItems.push(t):e.selectedNode.children.push(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearServiceGroupWithParent()},function(t){e.toastr.error(t,""),e.clearServiceGroupWithParent(),e.showProgress=!1},function(){e.showProgress=!1})}displaySelectedParentGroupNode(e,t){let n=this;n.treeDataSourceItems.forEach(i=>{n.displaySelectedNodeRecursive(i,e,t),i.data==e&&i.type.toLocaleLowerCase()==t&&(i=n.selectedNode)})}displaySelectedNodeRecursive(e,t,n){e.children&&e.children.forEach(i=>{this.displaySelectedNodeRecursive(i,t,n),i.data==t&&e.type.toLocaleLowerCase()==n&&(i=this.selectedNode)})}clearServiceGroupWithParent(){this.serviceGroupModel={},this.serviceGroupId="new",this.serviceGroupParentId="",this.serviceGroupParentlabel="",this.selectedNode=null,this.isServiceGroupSeleced=!0,this.active=!1,setTimeout(()=>this.active=!0,0)}clearServiceGroupWithOutParent(){this.serviceGroupModel={},this.serviceGroupId="new",this.active=!1,setTimeout(()=>this.active=!0,0)}saveService(){let e=this;e.model.parentId=e.serviceGroupParentId,this.model.id>0?this.clinicService.updateService(this.model).subscribe(function(t){e.selectedNode.label=t.name,e.selectedNode.labelTranslation=t.nameTranslation;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearWithParent()},function(t){e.toastr.error(t,""),e.clearWithParent(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createService(this.model).subscribe(function(t){e.selectedNode.children.push(t),e.selectedNode.children.sort(function(e,t){return e.type&&"Service"==t.type?1:-1});let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearWithParent()},function(t){e.toastr.error(t,""),e.clearWithParent(),e.showProgress=!1},function(){e.showProgress=!1})}clearWithParent(){this.model={},this.serviceId="new",this.serviceGroupParentId="",this.serviceGroupParentlabel="",this.totalFees=0,this.selectedNode=null,this.active=!1,setTimeout(()=>this.active=!0,0)}clearWithOutParent(){this.model={},this.serviceId="new",this.totalFees=0,this.active=!1,setTimeout(()=>this.active=!0,0)}close(){this.clearServiceGroupWithParent(),this.clearWithParent()}cancelService(){this.clearWithParent(),this.btnCloseService.nativeElement.click()}cancelServiceGroup(){this.clearServiceGroupWithParent(),this.btnCloseServicesGroup.nativeElement.click()}filterNodes(e,t){}sum(){let e=Number(this.model.clinicFee),t=Number(this.model.resourceFee);this.totalFees=e+t}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0)),t.permission.key==this.key.UpdateServicePrice&&(this.enableServiceInput=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-services"]],viewQuery:function(e,t){if(1&e&&(a.Lc(ic,1),a.Lc(cc,1),a.Lc(sc,1),a.Lc(ac,1),a.Lc(oc,1),a.Lc(rc,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnServicesGroup=e.first),a.uc(e=a.Yb())&&(t.btnCloseServicesGroup=e.first),a.uc(e=a.Yb())&&(t.btnCloseService=e.first),a.uc(e=a.Yb())&&(t.btnServices=e.first),a.uc(e=a.Yb())&&(t.tree=e.first),a.uc(e=a.Yb())&&(t.rbselection=e.first)}},decls:106,vars:33,consts:[[1,"row"],[3,"isServicesSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],[1,""],["type","button","data-toggle","modal","data-target","#ServicesGroupPopup",1,"btn","btn-primary",3,"disabled","click"],["AddServiceGroup",""],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"row","nopadding"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange","onSelect"],["tree",""],["pTemplate","Service"],["pTemplate","ServiceGroup"],["type","button","data-toggle","modal","data-target","#ServicesGroupPopup",2,"display","none"],["btnServicesGroup",""],["id","ServicesGroupPopup","role","dialog",1,"modal","fade"],["ServicesGroupPopup",""],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","class","close","data-dismiss","modal",3,"click",4,"ngIf"],[1,"modal-title"],["class","form-horizontal","name","servicegroupForm",4,"ngIf"],[3,"isServicesSelected"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["data-toggle","modal","data-target","#ServicesGroupPopup"],["src","images/addImage.png",3,"click"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnCloseServicesGroup",""],["btnCloseService",""],["name","servicegroupForm",1,"form-horizontal"],["servicegroupForm","ngForm"],[1,"form-group"],["class","col-sm-offset-3 col-md-8",4,"ngIf"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[1,"text-center"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],[1,"col-sm-offset-3","col-md-8"],[4,"ngFor","ngForOf"],["type","radio","name","radiogroup",3,"value","checked","change"],["i",""],["type","radio","name","radiogroup","disabled","",3,"value","checked","change"],["for","txtServiceGroupParentName",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtServiceGroupParentName","name","txtServiceGroupParentName","disabled","",1,"form-control",3,"value"],["for","txtServiceGroupName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtServiceGroupName","name","txtServiceGroupName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceGroupName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtServiceGroupNameTranslation",1,"control-label","col-md-3"],["id","txtServiceGroupNameTranslation","name","txtServiceGroupNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceGroupNameTranslation","ngModel"],["for","txtGroupRemark",1,"control-label","col-md-3"],["id","txtGroupRemark","name","txtGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtGroupRemark","ngModel"],["for","txtServiceParentName",1,"control-label","col-md-3"],["id","txtServiceParentName","name","txtServiceParentName","disabled","",1,"form-control",3,"ngModel"],["for","txtServiceCode",1,"control-label","col-md-3"],[1,"col-md-3"],["id","txtServiceCode","name","txtServiceCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceCode","ngModel"],["for","txtName",1,"control-label","col-md-3"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtclinicFee",1,"control-label","col-md-3"],["type","number","id","txtclinicFee","name","txtclinicFee","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","keyup"],["txtclinicFee","ngModel","c",""],["for","txtResourceFee",1,"control-label","col-md-3"],["type","number","id","txtResourceFee","name","txtResourceFee","required","",1,"form-control",3,"ngModel","disabled","ngModelChange","keyup"],["txtResourceFee","ngModel","r",""],["for","txtTotalFees",1,"control-label","col-md-3"],["id","txtTotalFees","name","txtTotalFees","disabled","","ke","",1,"form-control",3,"value"],["for","ChkIsExemptedFromVAT ",1,"control-label","col-md-3"],["id","ChkIsExemptedFromVAT","name","ChkIsExemptedFromVAT","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["ChkIsExemptedFromVAT","ngModel"],["for","txtServiceRemark",1,"control-label","col-md-3"],["id","txtServiceRemark","name","txtServiceRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceRemark","ngModel"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb(),a.Fc(4,"\n\n"),a.Qb(5,"div",0),a.Fc(6,"\n    "),a.Dc(7,lc,1,1,"clinic-tab",1),a.Fc(8,"\n    "),a.Dc(9,dc,1,1,"shared-tabs",1),a.Fc(10,"\n    "),a.Qb(11,"div",0),a.Fc(12,"\n        "),a.Qb(13,"div",2),a.Fc(14,"\n            "),a.Qb(15,"a"),a.Fc(16),a.ac(17,"translate"),a.Pb(),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n\n    "),a.Pb(),a.Fc(21,"\n        "),a.Qb(22,"div"),a.Fc(23,"\n            "),a.Qb(24,"div",3),a.Fc(25,"\n                "),a.Qb(26,"div",4),a.Fc(27,"\n                    "),a.Qb(28,"button",5,6),a.Xb("click",function(){return t.passInitialServiceGroupValue("new")}),a.Fc(30),a.ac(31,"translate"),a.Pb(),a.Fc(32,"\n                    "),a.Qb(33,"button",7),a.Xb("click",function(){return t.expandAll()}),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                    "),a.Qb(37,"button",7),a.Xb("click",function(){return t.collapseAll()}),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n                    "),a.Lb(41,"print-page",8),a.Fc(42,"\n\n                "),a.Pb(),a.Fc(43,"\n                "),a.Lb(44,"br"),a.Fc(45,"\n                "),a.Qb(46,"div",9),a.Fc(47,"\n                    "),a.Qb(48,"div",10),a.Fc(49,"\n                        "),a.Qb(50,"div",11),a.Fc(51,"\n                            "),a.Lb(52,"i",12),a.Fc(53,"\n                        "),a.Qb(54,"input",13),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                        "),a.Pb(),a.Fc(57,"\n                    "),a.Pb(),a.Fc(58,"\n                "),a.Pb(),a.Fc(59,"\n\n            "),a.Pb(),a.Fc(60,"\n            \n            \n            "),a.Qb(61,"div",14),a.Fc(62,"\n              "),a.Qb(63,"div",3),a.Fc(64,"\n                  "),a.Qb(65,"p-tree",15,16),a.Xb("selectionChange",function(e){return t.selectedGroup=e})("onSelect",function(){return t.nodeSelect()}),a.ac(67,"filterbynameorcode"),a.Fc(68,"\n                      "),a.Dc(69,bc,16,5,"ng-template",17),a.Fc(70,"\n                      "),a.Dc(71,uc,25,10,"ng-template",18),a.Fc(72,"\n                  "),a.Pb(),a.Fc(73,"\n\n              "),a.Pb(),a.Fc(74,"\n\n            "),a.Pb(),a.Fc(75,"\n        "),a.Pb(),a.Fc(76,"\n    "),a.Pb(),a.Fc(77,"\n\n"),a.Fc(78,"\n"),a.Lb(79,"button",19,20),a.Fc(81,"\n\n"),a.Qb(82,"div",21,22),a.Fc(84,"\n    "),a.Qb(85,"div",23),a.Fc(86,"\n        "),a.Fc(87,"\n        "),a.Qb(88,"div",24),a.Fc(89,"\n            "),a.Fc(90,"\n            "),a.Qb(91,"div",25),a.Fc(92,"\n                "),a.Dc(93,hc,3,0,"button",26),a.Fc(94,"\n                "),a.Dc(95,pc,3,0,"button",26),a.Fc(96,"\n                "),a.Qb(97,"h4",27),a.Fc(98),a.Pb(),a.Fc(99,"\n            "),a.Pb(),a.Fc(100,"\n\n            "),a.Dc(101,wc,31,8,"form",28),a.Fc(102,"\n        "),a.Pb(),a.Fc(103,"\n    "),a.Pb(),a.Fc(104,"\n"),a.Pb(),a.Fc(105,"\n\n\n")),2&e&&(a.yb(7),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(17,17,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(19,19,"Services"),"\n        "),a.yb(10),a.ic("disabled",t.enableAddRootBtn||t.isClinicAdmin?"":"disabled"),a.yb(2),a.Hc(" ",a.bc(31,21,"AddRootServiceGroup"),""),a.yb(4),a.Gc(a.bc(35,23,"ExpandAll")),a.yb(4),a.Gc(a.bc(39,25,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(55,27,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(11),a.hc("value",a.dc(67,29,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedGroup),a.yb(28),a.hc("ngIf",t.isServiceGroupSeleced),a.yb(2),a.hc("ngIf",t.isServiceSeleced),a.yb(3),a.Gc(t.txtHeaderModal),a.yb(3),a.hc("ngIf",t.active))},directives:[S.a,i.k,rt.a,c.b,c.f,c.i,O.a,E.g,y,Oe.a,c.q,c.g,c.h,i.j,c.o,c.k,c.a],pipes:[d.c,De.a],encapsulation:2}),e})();function Tc(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"ServicePackage\n"),a.Pb())}function Mc(e,t){if(1&e&&a.Lb(0,"clinic-tab",20),2&e){const e=a.Zb();a.hc("isServicePackagesSelected",e.selectServicePackagesTab)}}function Dc(e,t){if(1&e&&a.Lb(0,"shared-tabs",20),2&e){const e=a.Zb();a.hc("isServicePackagesSelected",e.selectServicePackagesTab)}}function Gc(e,t){1&e&&a.Lb(0,"img",22)}function Ac(e,t){if(1&e&&(a.Qb(0,"tr"),a.Fc(1,"\n                        "),a.Qb(2,"td"),a.Fc(3),a.Pb(),a.Fc(4,"\n                        "),a.Qb(5,"td",18),a.Fc(6),a.Pb(),a.Fc(7,"\n                        "),a.Qb(8,"td",18),a.Fc(9),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"td",18),a.Fc(12),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"td",18),a.Fc(15),a.Pb(),a.Fc(16,"\n                        "),a.Qb(17,"td",18),a.Fc(18,"\n                            "),a.Dc(19,Gc,1,0,"img",21),a.Fc(20,"\n                        "),a.Pb(),a.Fc(21,"\n                    "),a.Pb()),2&e){const e=t.$implicit;a.yb(3),a.Hc("",e.name," "),a.yb(3),a.Hc("",e.code," "),a.yb(3),a.Hc("",e.clinicCharge," "),a.yb(3),a.Hc("",e.resourceCharge," "),a.yb(3),a.Hc("",e.totalCost," "),a.yb(4),a.hc("ngIf",e.isActive)}}let Nc=(()=>{class e{constructor(e,t,n,i,c,s){this.toastr=e,this.storage=t,this.router=n,this.clinicService=i,this.translate=c,this.accountService=s,this.clinicId="0",this.showProgress=!1,this.selectServicePackagesTab=!0,this.userPermisions=new x.a,this.key=new Z.a,this.enableNewBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.toPrintDiv="print-section",this.userType="",this.isClinicAdmin=!1,this.lstToTranslated=[]}ngOnInit(){this.lstToTranslated=["name","nameTranslation"],this.clinicId=this.storage.retrieve("ClinicID"),this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.showProgress=!0,this.loadServicePackages(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}editServicePackage(e){this.storage.store("ServicePackageID",e),this.router.navigate(["/clinic/servicePackageDetails",e])}addServicePackage(){this.storage.store("ServicePackageID","new"),this.router.navigate(["/clinic/servicePackageDetails","new"])}changeActivation(e,t){let n=this;n.showProgress=!0,this.clinicService.toggleServicePackageActivation(e).subscribe(function(e){n.loadServicePackages()},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}loadServicePackages(){let e=this;this.clinicService.getAllservicePackagesForClinic(e.clinicId).subscribe(function(t){e.servicePackagesList=t},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableNewBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(s.b),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-servicePackages"]],decls:104,vars:37,consts:[[4,"ngIf"],[1,"row"],[3,"isServicePackagesSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],[1,"col-md-offset-8"],[3,"section"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"wellBackOverride","row","well"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],["id","print-section",1,"hidden"],[1,"row","text-center"],[1,"user-thumb"],["alt","image",3,"src"],[1,"table","table-responsive","table-hover","table-bordered"],[1,"text-center"],[4,"ngFor","ngForOf"],[3,"isServicePackagesSelected"],["src","assets/images/ok-24.jpg","title","Active","alt","Active",4,"ngIf"],["src","assets/images/ok-24.jpg","title","Active","alt","Active"]],template:function(e,t){1&e&&(a.Dc(0,Tc,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,Mc,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Dc,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",1),a.Fc(9,"\n        "),a.Qb(10,"div",1),a.Fc(11,"\n            "),a.Qb(12,"div",3),a.Fc(13,"\n                "),a.Qb(14,"a"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n\n        "),a.Pb(),a.Fc(20,"\n    \n        "),a.Qb(21,"div"),a.Fc(22,"\n\n            "),a.Qb(23,"div",4),a.Fc(24,"\n               "),a.Qb(25,"div",5),a.Fc(26,"\n                   "),a.Lb(27,"print-page",6),a.Fc(28,"\n                   "),a.Qb(29,"button",7),a.Xb("click",function(){return t.addServicePackage()}),a.Fc(30),a.ac(31,"translate"),a.Pb(),a.Fc(32,"\n                   "),a.Lb(33,"br"),a.Fc(34,"\n               "),a.Pb(),a.Fc(35,"\n            "),a.Pb(),a.Fc(36,"\n          \n            "),a.Qb(37,"div",8),a.Fc(38,"\n                "),a.Qb(39,"div",9),a.Fc(40,"\n                    "),a.Lb(41,"i",10),a.Fc(42,"\n                    "),a.Lb(43,"input",11,12),a.ac(45,"translate"),a.Fc(46,"\n                "),a.Pb(),a.Fc(47,"\n                \n                "),a.Lb(48,"br"),a.Fc(49,"\n                "),a.Fc(50,"\n            "),a.Pb(),a.Fc(51,"\n          \n        "),a.Pb(),a.Fc(52,"\n\n        "),a.Qb(53,"div",13),a.Fc(54,"\n            "),a.Qb(55,"div",14),a.Fc(56,"\n                "),a.Qb(57,"span",15),a.Fc(58,"\n                    "),a.Lb(59,"img",16),a.Fc(60,"\n                "),a.Pb(),a.Fc(61,"\n            "),a.Pb(),a.Fc(62,"\n            "),a.Qb(63,"table",17),a.Fc(64,"\n                "),a.Qb(65,"thead"),a.Fc(66,"\n                    "),a.Qb(67,"tr"),a.Fc(68,"\n                        "),a.Qb(69,"th",18),a.Fc(70),a.ac(71,"translate"),a.Pb(),a.Fc(72,"\n                        "),a.Qb(73,"th",18),a.Fc(74),a.ac(75,"translate"),a.Pb(),a.Fc(76,"\n                        "),a.Qb(77,"th",18),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Fc(80,"\n                        "),a.Qb(81,"th",18),a.Fc(82),a.ac(83,"translate"),a.Pb(),a.Fc(84,"\n                        "),a.Qb(85,"th",18),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n                        "),a.Qb(89,"th",18),a.Fc(90),a.ac(91,"translate"),a.Pb(),a.Fc(92,"\n                    "),a.Pb(),a.Fc(93,"\n                "),a.Pb(),a.Fc(94,"\n                "),a.Qb(95,"tbody"),a.Fc(96,"\n                    "),a.Dc(97,Ac,22,6,"tr",19),a.Fc(98,"\n                "),a.Pb(),a.Fc(99,"\n            "),a.Pb(),a.Fc(100,"\n        "),a.Pb(),a.Fc(101,"\n\n    "),a.Pb(),a.Fc(102,"\n"),a.Pb(),a.Fc(103,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(16,17,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(18,19,"ServicePackage"),"\n            "),a.yb(10),a.hc("section",t.toPrintDiv),a.yb(2),a.ic("disabled",t.enableNewBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(31,21,"NewPackage")),a.yb(13),a.hc("placeholder",a.bc(45,23,"Search")),a.yb(16),a.ic("src",t.accountService.profileImagePath,a.yc),a.yb(11),a.Gc(a.bc(71,25,"Name")),a.yb(4),a.Gc(a.bc(75,27,"Code")),a.yb(4),a.Gc(a.bc(79,29,"ClinicCharges")),a.yb(4),a.Gc(a.bc(83,31,"ResourceCharges")),a.yb(4),a.Gc(a.bc(87,33,"TotalCost")),a.yb(4),a.Gc(a.bc(91,35,"Active")),a.yb(7),a.hc("ngForOf",t.servicePackagesList))},directives:[i.k,rt.a,i.j,S.a,y,Oe.a],pipes:[d.c],encapsulation:2}),e})();const kc=["btnServicesGroup"];function Lc(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Rc(e,t){if(1&e&&a.Lb(0,"clinic-tab",17),2&e){const e=a.Zb();a.hc("isServicePackagesSelected",e.selectServicePackagesTab)}}function xc(e,t){if(1&e&&a.Lb(0,"shared-tabs",17),2&e){const e=a.Zb();a.hc("isServicePackagesSelected",e.selectServicePackagesTab)}}function Zc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"tr"),a.Fc(1,"\n                                "),a.Qb(2,"td"),a.Fc(3),a.Pb(),a.Fc(4,"\n                                "),a.Qb(5,"td"),a.Fc(6),a.Pb(),a.Fc(7,"\n                                "),a.Qb(8,"td"),a.Fc(9,"\n\n                                    "),a.Qb(10,"a",59),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).editItem(n.serviceId)}),a.Fc(11),a.ac(12,"translate"),a.Pb(),a.Fc(13,"\n                                "),a.Pb(),a.Fc(14,"\n                                "),a.Qb(15,"td"),a.Fc(16,"\n                                    "),a.Qb(17,"a",59),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb(2).deleteItem(n.serviceId)}),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n                                "),a.Pb(),a.Fc(21,"\n                            "),a.Pb()}if(2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                                    ",e.serviceName,"\n                                "),a.yb(3),a.Hc("\n                                    ",e.quantity,"\n                                "),a.yb(5),a.Gc(a.bc(12,4,"Edit")),a.yb(7),a.Gc(a.bc(19,6,"Delete"))}}function Bc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",18,19),a.Xb("ngSubmit",function(){return a.wc(e),a.Zb().onSubmit()}),a.Fc(2,"\n                "),a.Qb(3,"div",20),a.Fc(4,"\n                    "),a.Qb(5,"div",21),a.Fc(6,"\n                        "),a.Qb(7,"button",22),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n                        "),a.Qb(11,"button",23),a.Xb("click",function(){return a.wc(e),a.Zb().navigateToPackages()}),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n                    "),a.Pb(),a.Fc(15,"\n                "),a.Pb(),a.Fc(16,"\n\n                "),a.Qb(17,"div",20),a.Fc(18,"\n                    "),a.Qb(19,"label",24),a.Fc(20),a.ac(21,"translate"),a.Pb(),a.Fc(22,"\n                    "),a.Qb(23,"div",25),a.Fc(24,"\n                        "),a.Qb(25,"input",26,27),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.code=t}),a.Pb(),a.Fc(27,"\n                        "),a.Qb(28,"div",28),a.Fc(29),a.ac(30,"translate"),a.Pb(),a.Fc(31,"\n                    "),a.Pb(),a.Fc(32,"\n                "),a.Pb(),a.Fc(33,"\n\n                "),a.Qb(34,"div",20),a.Fc(35,"\n                    "),a.Qb(36,"label",29),a.Fc(37),a.ac(38,"translate"),a.Pb(),a.Fc(39,"\n                    "),a.Qb(40,"div",30),a.Fc(41,"\n                        "),a.Qb(42,"input",31,32),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.name=t}),a.Pb(),a.Fc(44,"\n                        "),a.Qb(45,"div",28),a.Fc(46),a.ac(47,"translate"),a.Pb(),a.Fc(48,"\n                    "),a.Pb(),a.Fc(49,"\n                "),a.Pb(),a.Fc(50,"\n                "),a.Qb(51,"div",20),a.Fc(52,"\n                    "),a.Qb(53,"label",33),a.Fc(54),a.ac(55,"translate"),a.Pb(),a.Fc(56,"\n                    "),a.Qb(57,"div",30),a.Fc(58,"\n                        "),a.Qb(59,"input",34,35),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.nameTranslation=t}),a.Pb(),a.Fc(61,"\n                        "),a.Qb(62,"div",28),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n                    "),a.Pb(),a.Fc(66,"\n                "),a.Pb(),a.Fc(67,"\n                "),a.Fc(68,"\n\n                "),a.Qb(69,"div",20),a.Fc(70,"\n                    "),a.Qb(71,"label",36),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n                    "),a.Qb(75,"div",25),a.Fc(76,"\n                        "),a.Qb(77,"input",37,38),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.clinicCharge=t})("keyup",function(){return a.wc(e),a.Zb().sum()}),a.Pb(),a.Fc(79,"\n                        "),a.Qb(80,"div",28),a.Fc(81),a.ac(82,"translate"),a.Pb(),a.Fc(83,"\n                    "),a.Pb(),a.Fc(84,"\n                "),a.Pb(),a.Fc(85,"\n                "),a.Qb(86,"div",20),a.Fc(87,"\n                    "),a.Qb(88,"label",39),a.Fc(89),a.ac(90,"translate"),a.Pb(),a.Fc(91,"\n                    "),a.Qb(92,"div",25),a.Fc(93,"\n                        "),a.Qb(94,"input",40,41),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.resourceCharge=t})("keyup",function(){return a.wc(e),a.Zb().sum()}),a.Pb(),a.Fc(96,"\n                        "),a.Qb(97,"div",28),a.Fc(98),a.ac(99,"translate"),a.Pb(),a.Fc(100,"\n                    "),a.Pb(),a.Fc(101,"\n                "),a.Pb(),a.Fc(102,"\n                "),a.Qb(103,"div",20),a.Fc(104,"\n                    "),a.Qb(105,"label",42),a.Fc(106),a.ac(107,"translate"),a.Pb(),a.Fc(108,"\n                    "),a.Qb(109,"div",43),a.Fc(110,"\n                        "),a.Lb(111,"input",44),a.Fc(112,"\n                    "),a.Pb(),a.Fc(113,"\n                "),a.Pb(),a.Fc(114,"\n                "),a.Qb(115,"div",20),a.Fc(116,"\n                    "),a.Qb(117,"label",45),a.Fc(118),a.ac(119,"translate"),a.Pb(),a.Fc(120,"\n                    "),a.Qb(121,"div",43),a.Fc(122,"\n                        "),a.Qb(123,"label"),a.Fc(124,"\n                            "),a.Qb(125,"input",46),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.isActive=t}),a.Pb(),a.Fc(126,"\n                            "),a.Lb(127,"span",47),a.Fc(128,"\n                        "),a.Pb(),a.Fc(129,"\n                    "),a.Pb(),a.Fc(130,"\n                "),a.Pb(),a.Fc(131,"\n                "),a.Qb(132,"div",20),a.Fc(133,"\n                    "),a.Qb(134,"label",48),a.Fc(135),a.ac(136,"translate"),a.Pb(),a.Fc(137,"\n                    "),a.Qb(138,"div",49),a.Fc(139,"\n                        "),a.Qb(140,"textarea",50,51),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().model.description=t}),a.Pb(),a.Fc(142,"\n                    "),a.Pb(),a.Fc(143,"\n                "),a.Pb(),a.Fc(144,"\n                "),a.Qb(145,"div",20),a.Fc(146,"\n                    "),a.Qb(147,"label",52),a.Fc(148),a.ac(149,"translate"),a.Pb(),a.Fc(150,"\n                    "),a.Qb(151,"div",25),a.Fc(152,"\n                        "),a.Lb(153,"input",53),a.Fc(154,"\n                    "),a.Pb(),a.Fc(155,"\n                "),a.Pb(),a.Fc(156,"\n                "),a.Qb(157,"div",20),a.Fc(158,"\n                    "),a.Qb(159,"div",21),a.Fc(160,"\n                        "),a.Qb(161,"button",54,55),a.Xb("click",function(){return a.wc(e),a.Zb().initialize()}),a.Fc(163,"New Service"),a.Pb(),a.Fc(164,"\n                    "),a.Pb(),a.Fc(165,"\n                "),a.Pb(),a.Fc(166,"\n\n                "),a.Qb(167,"div",20),a.Fc(168,"\n                    "),a.Qb(169,"label",56),a.Fc(170),a.ac(171,"translate"),a.Pb(),a.Fc(172,"\n                    "),a.Qb(173,"div",30),a.Fc(174,"\n                        "),a.Qb(175,"table",57),a.Fc(176,"\n                            "),a.Dc(177,Zc,22,8,"tr",58),a.ac(178,"translateObjects"),a.Fc(179,"\n                        "),a.Pb(),a.Fc(180,"\n\n                    "),a.Pb(),a.Fc(181,"\n                "),a.Pb(),a.Fc(182,"\n                "),a.Qb(183,"div",20),a.Fc(184,"\n                    "),a.Qb(185,"div",21),a.Fc(186,"\n                        "),a.Qb(187,"button",22),a.Fc(188),a.ac(189,"translate"),a.Pb(),a.Fc(190,"\n                        "),a.Qb(191,"button",23),a.Xb("click",function(){return a.wc(e),a.Zb().navigateToPackages()}),a.Fc(192),a.ac(193,"translate"),a.Pb(),a.Fc(194,"\n                    "),a.Pb(),a.Fc(195,"\n                "),a.Pb(),a.Fc(196,"\n            "),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(26),n=a.vc(43),i=a.vc(60),c=a.vc(78),s=a.vc(95),o=a.Zb();a.yb(7),a.hc("disabled",!e.form.valid||!o.enableSaveBtn&&!o.isClinicAdmin),a.yb(1),a.Gc(a.bc(9,36,"Save")),a.yb(4),a.Gc(a.bc(13,38,"Back")),a.yb(8),a.Hc(" ",a.bc(21,40,"Code"),""),a.yb(5),a.hc("ngModel",o.model.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                           ",a.bc(30,42,"RequiredField"),"\n                        "),a.yb(8),a.Hc(" ",a.bc(38,44,"ArabicName"),""),a.yb(5),a.hc("ngModel",o.model.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                            ",a.bc(47,46,"RequiredField"),"\n                        "),a.yb(8),a.Hc(" ",a.bc(55,48,"EnglishName"),""),a.yb(5),a.hc("ngModel",o.model.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                            ",a.bc(64,50,"RequiredField"),"\n                        "),a.yb(9),a.Hc(" ",a.bc(73,52,"ClinicCharges"),""),a.yb(5),a.hc("ngModel",o.model.clinicCharge),a.yb(3),a.hc("hidden",c.valid||c.pristine),a.yb(1),a.Hc("\n                            ",a.bc(82,54,"RequiredField"),"\n                        "),a.yb(8),a.Hc(" ",a.bc(90,56,"ResourceCharges"),""),a.yb(5),a.hc("ngModel",o.model.resourceCharge),a.yb(3),a.hc("hidden",s.valid||s.pristine),a.yb(1),a.Hc("\n                            ",a.bc(99,58,"RequiredField"),"\n                        "),a.yb(8),a.Gc(a.bc(107,60,"TotalFees")),a.yb(5),a.hc("value",o.totalFees),a.yb(7),a.Hc(" ",a.bc(119,62,"Acitve"),""),a.yb(7),a.hc("ngModel",o.model.isActive),a.yb(10),a.Hc(" ",a.bc(136,64,"Remark"),""),a.yb(5),a.hc("ngModel",o.model.description),a.yb(8),a.Hc(" ",a.bc(149,66,"ServicesCost"),""),a.yb(5),a.hc("value",o.servicesCost),a.yb(17),a.Gc(a.bc(171,68,"Services")),a.yb(7),a.hc("ngForOf",a.ec(178,70,o.servicesList,null,null,o.lstToTranslated)),a.yb(10),a.hc("disabled",!e.form.valid||!o.enableSaveBtn&&!o.isClinicAdmin),a.yb(1),a.Gc(a.bc(189,75,"Save")),a.yb(4),a.Gc(a.bc(193,77,"Back"))}}function Hc(e,t){if(1&e&&(a.Fc(0,"\n                                            "),a.Qb(1,"span",77),a.Lb(2,"i",78),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                                            \xa0\n                                            ",e.label,"\n                                        ")}}function Oc(e,t){if(1&e&&(a.Fc(0,"\n                                            "),a.Qb(1,"span",77),a.Lb(2,"i",79),a.Pb(),a.Fc(3)),2&e){const e=t.$implicit;a.yb(3),a.Hc("\n                                            \xa0\n                                            ",e.label,"\n                                        ")}}function Ec(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",80),a.Xb("click",function(){return a.wc(e),a.Zb(2).fillServicesList()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1);a.hc("disabled",!e.valid),a.yb(1),a.Gc(a.bc(2,2,"Save"))}}function Xc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",80),a.Xb("click",function(){return a.wc(e),a.Zb(2).updateServicesList()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1);a.hc("disabled",!e.valid),a.yb(1),a.Gc(a.bc(2,2,"Save"))}}function Uc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",60,61),a.Fc(2,"\n                "),a.Qb(3,"div",62),a.Fc(4,"\n                    "),a.Qb(5,"div"),a.Fc(6,"\n                        "),a.Qb(7,"div",20),a.Fc(8,"\n                            "),a.Qb(9,"label",63),a.Fc(10),a.ac(11,"translate"),a.Pb(),a.Fc(12,"\n                            "),a.Qb(13,"div",64),a.Fc(14,"\n                                "),a.Qb(15,"input",65),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().filterString=t}),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n                                "),a.Qb(18,"div",66),a.Fc(19,"\n                                    "),a.Qb(20,"p-tree",67),a.Xb("selectionChange",function(t){return a.wc(e),a.Zb().selectedFile=t})("onNodeSelect",function(t){return a.wc(e),a.Zb().nodeSelect(t)})("onNodeUnselect",function(t){return a.wc(e),a.Zb().nodeUnselect(t)}),a.ac(21,"filterbynameorcode"),a.ac(22,"translateObjects"),a.Fc(23,"\n                                        "),a.Dc(24,Hc,4,1,"ng-template",68),a.Fc(25,"\n                                        "),a.Dc(26,Oc,4,1,"ng-template",69),a.Fc(27,"\n                                    "),a.Pb(),a.Fc(28,"\n\n                                    "),a.Lb(29,"input",70),a.Fc(30,"\n                                "),a.Pb(),a.Fc(31,"\n                            "),a.Pb(),a.Fc(32,"\n                        "),a.Pb(),a.Fc(33,"\n                        "),a.Qb(34,"div",20),a.Fc(35,"\n                            "),a.Qb(36,"label",71),a.Fc(37),a.ac(38,"translate"),a.Pb(),a.Fc(39,"\n                            "),a.Qb(40,"div",64),a.Fc(41,"\n                                "),a.Qb(42,"input",72,73),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().serviceModel.quantity=t}),a.Pb(),a.Fc(44,"\n                                "),a.Fc(45,"\n                            "),a.Pb(),a.Fc(46,"\n                        "),a.Pb(),a.Fc(47,"\n                    "),a.Pb(),a.Fc(48,"\n\n                "),a.Pb(),a.Fc(49,"\n                "),a.Qb(50,"div",74),a.Fc(51,"\n                    "),a.Dc(52,Ec,3,4,"button",75),a.Fc(53,"\n                    "),a.Dc(54,Xc,3,4,"button",75),a.Fc(55,"\n                    "),a.Qb(56,"button",76),a.Xb("click",function(){return a.wc(e),a.Zb().clearServiceModel()}),a.Fc(57),a.ac(58,"translate"),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(10),a.Hc(" ",a.bc(11,10,"Services")," "),a.yb(5),a.hc("placeholder",a.bc(16,12,"SearchByNameorCode"))("ngModel",e.filterString),a.yb(5),a.hc("value",a.dc(21,14,a.ec(22,18,e.treeDataSourceItems,null,null,e.lstToBeTranslated),e.filterString,e.leafType))("selection",e.selectedFile),a.yb(17),a.Gc(a.bc(38,23,"Quantity")),a.yb(5),a.hc("ngModel",e.serviceModel.quantity),a.yb(10),a.hc("ngIf",e.isNew),a.yb(2),a.hc("ngIf",!e.isNew),a.yb(3),a.Gc(a.bc(58,25,"Cancel"))}}let qc=(()=>{class e{constructor(e,t,n,i,c,s,a){this.clinicService=e,this.localStorage=t,this.toastr=n,this.router=i,this._route=c,this.translate=s,this.accountService=a,this.leafType="Service",this.selectServicePackagesTab=!0,this.selectedClinicId="0",this.model={},this.serviceModel={},this.tempServiceModel={},this.showProgress=!1,this.servicesList=[],this.active=!0,this.nodeType="",this.selectedObject={},this.treeDataSourceItems=[],this.isGroupSelected=!1,this.isNew=!0,this.totalFees=0,this.servicesCost=0,this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableSaveBtn=!1,this.lstToTranslated=[],this.lstToBeTranslated=[]}ngOnInit(){let e=this;this.lstToTranslated=["serviceName","serviceNameTranslation"],this.lstToBeTranslated=["label","labelTranslation"],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.servicePackageId=`${this._route.snapshot.params.id}`,this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),e.getServiceGroupsForTree(),"new"!=e.servicePackageId.toLowerCase()&&e.loadServicePackageModel(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}getServiceGroupsForTree(){let e=this;e.showProgress=!0,this.clinicService.getServiceGroupsForTreeView(e.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}onSubmit(){let e=this;if(e.showProgress=!0,e.updateModelWithServices(),e.model.clinicId=e.selectedClinicId,isNaN(e.servicePackageId)&&"new"==e.servicePackageId.toLowerCase())if(e.servicesList.length>0)this.clinicService.createServicePackage(e.model).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.model=t,e.totalFees=e.model.totalCost,e.servicesCost=e.model.servicesCost,e.servicePackageId=t.id,e.loadServicePackageModel(),e.navigateToPackages(),e.filterString=""},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1});else{let t=e.translate.instant("Package_ServiceValidation");e.toastr.error(t,""),e.showProgress=!1}else if(e.servicesList.length>0)this.clinicService.updateServicePackage(e.model).subscribe(function(t){let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.model=t,e.totalFees=e.model.totalCost,e.servicesCost=e.model.servicesCost,e.loadServicePackageModel(),e.filterString=""},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1});else{let t=e.translate.instant("Package_ServiceValidation");e.toastr.error(t,""),e.showProgress=!1}}clear(){this.servicePackageId>0&&this.loadServicePackageModel(),this.active=!1,setTimeout(()=>this.active=!0,0)}loadServicePackageModel(){let e=this;this.clinicService.getServicePackageById(e.servicePackageId).subscribe(function(t){e.model=t,e.servicesList=t.services,e.totalFees=e.model.totalCost,e.servicesCost=e.model.servicesCost;for(let n of e.servicesList)n.nodeType="Service"},function(t){e.toastr.error(t,"")},function(){e.showProgress=!1})}nodeSelect(e){this.serviceModel.serviceId=e.node.data,this.serviceModel.serviceName=e.node.label,this.serviceModel.nodeType=e.node.type,this.serviceModel.serviceTotalCost=e.node.serviceCost,this.selectedFile=e.node,this.showProgress=!1}nodeUnselect(e){this.serviceModel.serviceId=""}fillServicesList(){let e=this;if(e.isNew=!0,"service"==this.serviceModel.nodeType.toLocaleLowerCase()){if(e.tempServiceModel=e.servicesList.find(t=>t.serviceId==e.serviceModel.serviceId),null==e.tempServiceModel){e.servicesList.push(e.serviceModel);let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")}else{let t=e.translate.instant("ServiceDuplication");e.toastr.warning(t,"")}e.updateModelWithServices()}else{let t=e.translate.instant("SelectServiceNotServiceGroup");e.toastr.warning(t,""),e.updateModelWithServices(),e.clearServiceModel()}}updateServicesList(){let e=this;e.isNew=!1;let t=0;var n=this.servicesList.find(t=>t.serviceId==e.serviceModel.serviceId);if(n.serviceId==e.idToBeEdited){e.serviceModel=n,e.updateModelWithServices();let t=e.translate.instant("Serviceupdated");e.toastr.warning(t,"")}else{for(let i of e.servicesList)n.serviceId==i.serviceId&&t++;if(t>=2){e.deleteItem(e.serviceModel.serviceId),e.updateModelWithServices();let t=e.translate.instant("ServiceDuplication");e.toastr.warning(t,"")}else{e.serviceModel=n,e.updateModelWithServices();let t=e.translate.instant("Serviceupdated");e.toastr.warning(t,"")}}}clearServiceModel(){this.serviceModel={},this.selectedFile={},this.filterString=""}initialize(){this.serviceModel={},this.selectedFile={},this.isNew=!0}updateModelWithServices(){let e=this;e.servicesCost=0;for(let t of e.servicesList)e.servicesCost+=t.serviceTotalCost*t.quantity;this.model.services=e.servicesList}editItem(e){let t=this;t.isNew=!1,t.selectedObject={},t.selectedObject=this.servicesList.find(t=>t.serviceId==e),null==t.selectedObject&&null==t.selectedObject||(t.idToBeEdited=t.selectedObject.serviceId,this.serviceModel=t.selectedObject,t.displaySelectedParentGroupNode(e)),this.btnServicesGroup.nativeElement.click()}deleteItem(e){let t=this;t.itemToDeleteId=e;var n=t.servicesList.find(t=>t.serviceId==e),i=t.servicesList.indexOf(n);i>-1&&t.servicesList.splice(i,1)}displaySelectedParentGroupNode(e){let t=this;t.treeDataSourceItems.forEach(n=>{t.displaySelectedNodeRecursive(n,e)})}displaySelectedNodeRecursive(e,t){e.children&&e.children.forEach(e=>{this.displaySelectedNodeRecursive(e,t),e.data==t&&"service"==e.type.toLocaleLowerCase()&&(this.selectedFile=e)})}navigateToPackages(){this.router.navigate(["/clinic/servicePackages",this.selectedClinicId])}sum(){let e=Number(this.model.clinicCharge),t=Number(this.model.resourceCharge);this.totalFees=e+t}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(s.b),a.Kb(s.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-servicePackage-details"]],viewQuery:function(e,t){if(1&e&&a.Lc(kc,1),2&e){let e;a.uc(e=a.Yb())&&(t.btnServicesGroup=e.first)}},decls:52,vars:14,consts:[[4,"ngIf"],[1,"row"],[3,"isServicePackagesSelected",4,"ngIf"],[1,"row","nopadding"],[1,"NBbreadcrumb"],[1,"padding5","well"],["class","form-horizontal","name","servicePackageForm",3,"ngSubmit",4,"ngIf"],["type","button","data-toggle","modal","data-target","#ServicesGroupPopup",2,"display","none"],["btnServicesGroup",""],["id","ServicesGroupPopup","role","dialog",1,"modal","fade"],["ServicesGroupPopup",""],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","servicegroupForm",4,"ngIf"],[3,"isServicePackagesSelected"],["name","servicePackageForm",1,"form-horizontal",3,"ngSubmit"],["servicePackageForm","ngForm"],[1,"form-group"],[1,"col-md-4","col-md-offset-2"],[1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],["for","txtCode",1,"control-label","col-md-2"],[1,"col-md-2"],["id","txtCode","name","txtCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtClinicCharge",1,"control-label","col-md-2"],["type","number","id","txtClinicCharge","name","txtClinicCharge","required","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["txtClinicCharge","ngModel"],["for","txtResourcecharge",1,"control-label","col-md-2"],["type","number","id","txtResourcecharge","name","txtResourcecharge","required","",1,"form-control",3,"ngModel","ngModelChange","keyup"],["txtResourcecharge","ngModel"],["for","txtTotalFees",1,"control-label","col-md-2"],[1,"col-md-3"],["id","txtTotalFees","name","txtTotalFees","disabled","",1,"form-control",3,"value"],["for","txtPackageAcitvation",1,"control-label","col-md-2"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],[1,"lbl"],["for","txtPackageRemark",1,"control-label","col-md-2"],[1,"col-md-4"],["id","txtPackageRemark","name","txtPackageRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtPackageRemark","ngModel"],["for","txtServicesCost",1,"control-label","col-md-2"],["type","number","disabled","","id","txtServicesCost","name","txtServicesCost",1,"form-control",3,"value"],["type","button","data-toggle","modal","data-target","#ServicesGroupPopup",1,"btn","btn-primary",3,"click"],["AddServiceGroup",""],["for","ddlServices",1,"control-label","col-md-2"],[1,"table","table-responsive","table-hover","table-bordered"],[4,"ngFor","ngForOf"],[1,"pointer",3,"click"],["name","servicegroupForm",1,"form-horizontal"],["servicegroupForm","ngForm"],[1,"modal-body"],["for","txtService ",1,"control-label","col-md-3"],[1,"col-md-6"],["name","txtSearchServices",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"nopadding","treeBorder",2,"height","180px"],["selectionMode","single",3,"value","selection","selectionChange","onNodeSelect","onNodeUnselect"],["pTemplate","ServiceGroup"],["pTemplate","Service"],["type","hidden","id","treeSelections","required",""],["for","txtQuantity",1,"control-label","col-md-3"],["type","number","id","txtQuantity","name","txtQuantity","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtQuantity","ngModel"],[1,"modal-footer"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"nav-icon"],[1,"fa","fa-cubes"],[1,"fa","fa-cube"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(a.Dc(0,Lc,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,Rc,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,xc,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",3),a.Fc(9,"\n        "),a.Qb(10,"div",4),a.Fc(11,"\n            "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n\n        "),a.Qb(18,"div",5),a.Fc(19,"\n\n            "),a.Dc(20,Bc,197,79,"form",6),a.Fc(21,"\n\n\n\n        "),a.Pb(),a.Fc(22,"\n    "),a.Pb(),a.Fc(23,"\n"),a.Pb(),a.Fc(24,"\n\n"),a.Lb(25,"button",7,8),a.Fc(27,"\n"),a.Qb(28,"div",9,10),a.Fc(30,"\n    "),a.Qb(31,"div",11),a.Fc(32,"\n        "),a.Fc(33,"\n        "),a.Qb(34,"div",12),a.Fc(35,"\n            "),a.Fc(36,"\n            "),a.Qb(37,"div",13),a.Fc(38,"\n                "),a.Qb(39,"button",14),a.Fc(40,"\xd7"),a.Pb(),a.Fc(41,"\n                "),a.Qb(42,"h4",15),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n            "),a.Pb(),a.Fc(46,"\n\n            "),a.Dc(47,Uc,61,27,"form",16),a.Fc(48,"\n        "),a.Pb(),a.Fc(49,"\n    "),a.Pb(),a.Fc(50,"\n"),a.Pb(),a.Fc(51,"\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(14,8,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(16,10,"ServicePackage"),"\n        "),a.yb(5),a.hc("ngIf",t.active),a.yb(23),a.Gc(a.bc(44,12,"Service")),a.yb(4),a.hc("ngIf",t.active))},directives:[i.k,S.a,y,Oe.a,c.q,c.g,c.h,c.b,c.o,c.f,c.i,c.k,c.a,i.j,O.a,E.g],pipes:[d.c,Ge.a,De.a],encapsulation:2}),e})();function jc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",8),a.Fc(22,"\n                "),a.Qb(23,"input",9,10),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrug.code=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",11),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",5),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",8),a.Fc(39,"\n                "),a.Qb(40,"input",12,13),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrug.name=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",11),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",14),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",8),a.Fc(56,"\n                "),a.Qb(57,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrug.nameTranslation=t}),a.Pb(),a.Fc(59,"\n                "),a.Qb(60,"div",11),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n            "),a.Pb(),a.Fc(64,"\n        "),a.Pb(),a.Fc(65,"        \n        "),a.Qb(66,"div",4),a.Fc(67,"\n            "),a.Qb(68,"label",17),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n            "),a.Qb(72,"div",8),a.Fc(73,"\n                "),a.Qb(74,"textarea",18),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrug.description=t}),a.Pb(),a.Fc(75,"\n            "),a.Pb(),a.Fc(76,"\n        "),a.Pb(),a.Fc(77,"\n    "),a.Pb(),a.Fc(78,"\n    "),a.Qb(79,"div",19),a.Fc(80,"\n        "),a.Qb(81,"div",20),a.Fc(82,"\n            "),a.Qb(83,"button",21),a.Xb("click",function(){return a.wc(e),a.Zb().saveDrug()}),a.Fc(84),a.ac(85,"translate"),a.Pb(),a.Fc(86,"\n            "),a.Qb(87,"button",22),a.Xb("click",function(){return a.wc(e),a.Zb().cancelDrug()}),a.Fc(88),a.ac(89,"translate"),a.Pb(),a.Fc(90,"\n        "),a.Pb(),a.Fc(91,"\n    "),a.Pb(),a.Fc(92,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.vc(58),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,19,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",c.selectedParentGroupName,"\n            "),a.yb(6),a.Hc(" ",a.bc(19,21,"Code"),""),a.yb(5),a.hc("ngModel",c.selectedDrug.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,23,"RequiredField"),"\n                "),a.yb(8),a.Gc(a.bc(36,25,"ArabicName")),a.yb(5),a.hc("ngModel",c.selectedDrug.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                    ",a.bc(45,27,"RequiredField"),"\n                "),a.yb(8),a.Gc(a.bc(53,29,"EnglishName")),a.yb(5),a.hc("ngModel",c.selectedDrug.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                    ",a.bc(62,31,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(70,33,"Remark"),""),a.yb(5),a.hc("ngModel",c.selectedDrug.description),a.yb(9),a.hc("disabled",!e.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(85,35,"Save")),a.yb(4),a.Gc(a.bc(89,37,"Cancel"))}}let Kc=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.clinicService=t,this.translate=n,this.localStorage=i,this.selectedDrugId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onDrugChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectDrugsTab=!0,this.active=!0,this.showProgress=!1,this.selectedDrug={},this.selectedLang="ar"}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedDrugId&&""!=this.selectedDrugId){let e=this;e.showProgress=!0,this.clinicService.getDrugById(e.selectedDrugId).subscribe(function(t){e.selectedDrug=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveDrug(){let e=this;e.showProgress=!0,this.selectedDrug.parentGroupId=this.selectedParentGroupId,this.selectedDrug.id>0?this.clinicService.updateDrug(this.selectedDrug).subscribe(function(t){e.onIsNew.emit(!1),e.onDrugChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1,e.clearControl()},function(){e.showProgress=!1}):this.clinicService.createDrug(this.selectedDrug).subscribe(function(t){e.onIsNew.emit(!0),e.onDrugChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1,e.clearControl()},function(){e.showProgress=!1})}clearControl(){this.selectedDrug={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelDrug(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(A.a),a.Kb(d.d),a.Kb(r.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-drug"]],inputs:{selectedDrugId:"selectedDrugId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onDrugChanged:"onDrugChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageDrugForm",4,"ngIf"],["name","manageDrugForm",1,"form-horizontal"],["manageDrugForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-6"],["for","txtDrugCode",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtDrugCode","name","txtDrugCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDrugCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtDrugRemark",1,"control-label","col-md-3"],["id","txtDrugRemark","name","txtDrugRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,jc,93,39,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();function Vc(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",5),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",6),a.Fc(22,"\n                "),a.Qb(23,"input",7,8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrugsGroup.name=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",9),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",10),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",6),a.Fc(39,"\n                "),a.Qb(40,"input",11,12),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrugsGroup.nameTranslation=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",9),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",13),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",14),a.Fc(56,"\n                "),a.Qb(57,"textarea",15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDrugsGroup.description=t}),a.Pb(),a.Fc(58,"\n            "),a.Pb(),a.Fc(59,"\n        "),a.Pb(),a.Fc(60,"\n    "),a.Pb(),a.Fc(61,"\n    "),a.Qb(62,"div",16),a.Fc(63,"\n        "),a.Qb(64,"div",17),a.Fc(65,"\n            "),a.Qb(66,"button",18),a.Xb("click",function(){return a.wc(e),a.Zb().saveDrugsGroup()}),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n            "),a.Qb(70,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().cancelDrugsGroup()}),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n        "),a.Pb(),a.Fc(74,"\n    "),a.Pb(),a.Fc(75,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,15,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",i.selectedParentGroupName,"\n            "),a.yb(6),a.Gc(a.bc(19,17,"ArabicName")),a.yb(5),a.hc("ngModel",i.selectedDrugsGroup.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,19,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(36,21,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.selectedDrugsGroup.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                   ",a.bc(45,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,25,"Remark"),""),a.yb(5),a.hc("ngModel",i.selectedDrugsGroup.description),a.yb(9),a.hc("disabled",!e.valid||!i.enableSaveBtn&&!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(68,27,"Save")),a.yb(4),a.Gc(a.bc(72,29,"Cancel"))}}let $c=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectedDrugsGroupId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onDrugsGroupChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectDrugsTab=!0,this.active=!0,this.showProgress=!1,this.selectedDrugsGroup={},this.selectedLang="ar"}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID")}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedDrugsGroupId&&""!=this.selectedDrugsGroupId){let e=this;e.showProgress=!0,this.clinicService.getDrugsGroupById(e.selectedDrugsGroupId).subscribe(function(t){e.selectedDrugsGroup=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveDrugsGroup(){let e=this;e.showProgress=!0,this.selectedDrugsGroup.parentGroupId=this.selectedParentGroupId,this.selectedDrugsGroup.clinicId=this.selectedClinicId,this.selectedDrugsGroup.id>0?this.clinicService.updateDrugsGroup(this.selectedDrugsGroup).subscribe(function(t){e.onIsNew.emit(!1),e.onDrugsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createDrugsGroup(this.selectedDrugsGroup).subscribe(function(t){e.onIsNew.emit(!0),e.onDrugsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedDrugsGroup={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelDrugsGroup(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-drugs-group"]],inputs:{selectedDrugsGroupId:"selectedDrugsGroupId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onDrugsGroupChanged:"onDrugsGroupChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageDrugsGroupForm",4,"ngIf"],["name","manageDrugsGroupForm",1,"form-horizontal"],["manageDrugsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtDrugsGroupRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtDrugsGroupRemark","name","txtDrugsGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,Vc,76,31,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();const zc=["btnAddDrugsGroup"],Wc=["btnClosePopup"];function Yc(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function _c(e,t){if(1&e&&a.Lb(0,"clinic-tab",29),2&e){const e=a.Zb();a.hc("isDrugsSelected",e.selectDrugsTab)}}function Jc(e,t){if(1&e&&a.Lb(0,"shared-tabs",29),2&e){const e=a.Zb();a.hc("isDrugsSelected",e.selectDrugsTab)}}function es(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",30),a.Lb(2,"i",31),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                                "),a.Qb(6,"i",32),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n\n                            "),a.Pb(),a.Fc(8,"\n                            "),a.Qb(9,"label"),a.Fc(10,"\n                                "),a.Qb(11,"input",33),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                                "),a.Lb(13,"span",34),a.Fc(14,"\n                            "),a.Pb(),a.Fc(15,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                            \xa0\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function ts(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",30),a.Lb(2,"i",35),a.Pb(),a.Fc(3),a.Qb(4,"a",36,7),a.Fc(6,"\n                                "),a.Qb(7,"img",37),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passParentGroupInfo(n)}),a.Pb(),a.Fc(8,"\n                            "),a.Pb(),a.Fc(9,"\n                            \xa0 \xa0\n                            "),a.Qb(10,"a"),a.Fc(11,"\n                                "),a.Qb(12,"i",32),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(13,"\n                            "),a.Pb(),a.Fc(14,"\n                            "),a.Qb(15,"label"),a.Fc(16,"\n                                "),a.Qb(17,"input",33),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(18,"\n                                "),a.Lb(19,"span",34),a.Fc(20,"\n                            "),a.Pb(),a.Fc(21,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                            \xa0\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function ns(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                "),a.Qb(2,"input",38,39),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb().onCheckboxSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.ic("disabled",n.enableCheckBox?"":"disabled"),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,4,e.text),"\n                            ")}}function is(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-drug",40),a.Xb("selectedDrugIdChange",function(t){return a.wc(e),a.Zb().toSaveDrugId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentDrugsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentDrugsGroupName=t})("onDrugChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeDrugsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedDrugId",e.toSaveDrugId)("selectedParentGroupId",e.parentDrugsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentDrugsGroupName)}}function cs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-drugs-group",41),a.Xb("selectedDrugsGroupIdChange",function(t){return a.wc(e),a.Zb().toSaveDrugsGroupId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentDrugsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentDrugsGroupName=t})("onDrugsGroupChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeDrugsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedDrugsGroupId",e.toSaveDrugsGroupId)("selectedParentGroupId",e.parentDrugsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentDrugsGroupName)}}let ss=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.leafType="Drug",this.selectedLang="ar",this.selectDrugsTab=!0,this.active=!0,this.showProgress=!1,this.isDrugsGroupSelected=!0,this.isDrugSelected=!1,this.groupName="",this.childName="",this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedAction=1,this.isRoot=!1,this.enableCheckBox=!1,this.toPrintDiv="print-section",this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.lstToTranslated=[]}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.groupName=this.translate.instant("DrugsGroup"),this.childName=this.translate.instant("Drug"),this.translate.onLangChange.subscribe(e=>{this.groupName=this.translate.instant("DrugsGroup"),this.childName=this.translate.instant("Drug")}),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)),this.getDrugsGroupsForTree()}getDrugsGroupsForTree(){this.toSaveDrugsGroupId="",this.toSaveDrugId="";let e=this;e.showProgress=!0,this.clinicService.getDrugsGroupsForTree(this.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}onCheckboxSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isDrugsGroupSelected=!0,this.isDrugSelected=!1,this.txtHeaderModal=this.translate.instant("DrugsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DrugsGroup")})):2==this.selectedAction&&(this.isDrugsGroupSelected=!1,this.isDrugSelected=!0,this.txtHeaderModal=this.translate.instant("Drug"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Drug")}))}displayPopup(e){"drug"==e.type.toLocaleLowerCase()?(this.isDrugsGroupSelected=!1,this.isDrugSelected=!0,this.selectedAction=2,this.txtHeaderModal=this.translate.instant("Drug"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Drug"),this.groupName=this.translate.instant("DrugsGroup"),this.childName=this.translate.instant("Drug")}),this.enableCheckBox=!1,this.isRoot=!1,this.toSaveDrugId=e.data,this.btnAddDrugsGroup.nativeElement.click()):"drugsgroup"==e.type.toLocaleLowerCase()&&(this.isDrugsGroupSelected=!0,this.isDrugSelected=!1,this.enableCheckBox=!1,this.isRoot=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("DrugsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DrugsGroup"),this.groupName=this.translate.instant("DrugsGroup"),this.childName=this.translate.instant("Drug")}),this.toSaveDrugsGroupId=e.data,this.btnAddDrugsGroup.nativeElement.click()),this.selctedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}passParentGroupInfo(e){this.parentDrugsGroupId=e.data,this.parentDrugsGroupName="ar"==this.selectedLang?e.label:e.labelTranslation,this.isDrugsGroupSelected=!0,this.isDrugSelected=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("DrugsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DrugsGroup"),this.groupName=this.translate.instant("DrugsGroup"),this.childName=this.translate.instant("Drug")}),null==e.data?(this.enableCheckBox=!1,this.isRoot=!0):(this.enableCheckBox=!0,this.isRoot=!1),this.isDrugsGroupSelected=!0,this.isDrugSelected=!1,this.selctedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}changeActivation(e,t){let n=this;"Drug"==e.type?(n.showProgress=!0,n.clinicService.updateDrugActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"DrugsGroup"==e.type&&(n.showProgress=!0,n.clinicService.updateDrugsGroupActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}updateSelectedNode(e){let t=this;t.toSaveDrugsGroupId="",t.toSaveDrugId="",e.data>0&&0==t.isNew?(t.selctedNode.label=e.label,t.selctedNode.labelTranslation=e.labelTranslation):null==t.parentDrugsGroupId?t.treeDataSourceItems.push(e):t.selctedNode.children.push(e)}setIsNewValue(e){this.isNew=e}closeDrugsAndGroupsPopup(){this.toSaveDrugsGroupId="",this.toSaveDrugId="",this.selectedNode={},this.btnClosePopup.nativeElement.click()}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-drugs"]],viewQuery:function(e,t){if(1&e&&(a.Lc(zc,1),a.Lc(Wc,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnAddDrugsGroup=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:117,vars:34,consts:[[4,"ngIf"],[1,"row"],[3,"isDrugsSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],["type","button","data-toggle","modal","data-target","#DrugsAndGroupsPopup",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-toggle","modal","data-target","#DrugsAndGroupsPopup",1,"hidden"],["btnAddDrugsGroup",""],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"row","nopadding"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","Drug"],["pTemplate","DrugsGroup"],["id","DrugsAndGroupsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnClosePopup",""],[1,"modal-title"],[1,"form-group"],[1,"col-sm-offset-3","col-md-6"],[4,"ngFor","ngForOf"],[3,"isDrugsSelected"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["data-toggle","modal","data-target","#DrugsAndGroupsPopup"],["src","images/addImage.png",3,"click"],["type","radio","name","radiogroup",3,"value","checked","disabled","change"],["checkbox",""],[3,"selectedDrugId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedDrugIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onDrugChanged","onIsNew","onCancel"],[3,"selectedDrugsGroupId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedDrugsGroupIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onDrugsGroupChanged","onIsNew","onCancel"]],template:function(e,t){1&e&&(a.Dc(0,Yc,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Dc(4,_c,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Jc,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",1),a.Fc(9,"\n        "),a.Qb(10,"div",3),a.Fc(11,"\n            "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n        "),a.Qb(18,"div"),a.Fc(19,"\n            "),a.Qb(20,"div",4),a.Fc(21,"\n                "),a.Qb(22,"div"),a.Fc(23,"\n                    "),a.Qb(24,"button",5),a.Xb("click",function(){return t.passParentGroupInfo("")}),a.Fc(25),a.ac(26,"translate"),a.Pb(),a.Fc(27,"\n                    "),a.Lb(28,"button",6,7),a.Fc(30,"\n                    "),a.Qb(31,"button",8),a.Xb("click",function(){return t.expandAll()}),a.Fc(32),a.ac(33,"translate"),a.Pb(),a.Fc(34,"\n                    "),a.Qb(35,"button",8),a.Xb("click",function(){return t.collapseAll()}),a.Fc(36),a.ac(37,"translate"),a.Pb(),a.Fc(38,"\n                    "),a.Lb(39,"print-page",9),a.Fc(40," \n                "),a.Pb(),a.Fc(41,"\n                    "),a.Lb(42,"br"),a.Fc(43,"\n                    "),a.Qb(44,"div",10),a.Fc(45,"\n                        "),a.Qb(46,"div",11),a.Fc(47,"\n                            "),a.Qb(48,"div",12),a.Fc(49,"\n                                "),a.Lb(50,"i",13),a.Fc(51,"\n                                "),a.Qb(52,"input",14),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n                            "),a.Pb(),a.Fc(55,"\n\n                        "),a.Pb(),a.Fc(56,"\n                    "),a.Pb(),a.Fc(57,"\n            "),a.Pb(),a.Fc(58,"\n           \n            "),a.Lb(59,"br"),a.Fc(60,"\n            "),a.Qb(61,"div",4),a.Fc(62,"\n                "),a.Qb(63,"div",15),a.Fc(64,"\n                    \n                    "),a.Qb(65,"p-tree",16),a.Xb("selectionChange",function(e){return t.selectedNode=e}),a.ac(66,"filterbynameorcode"),a.Fc(67,"\n                        "),a.Dc(68,es,16,5,"ng-template",17),a.Fc(69,"\n                        "),a.Dc(70,ts,22,7,"ng-template",18),a.Fc(71,"\n                    "),a.Pb(),a.Fc(72,"\n                "),a.Pb(),a.Fc(73,"\n            "),a.Pb(),a.Fc(74,"\n\n        "),a.Pb(),a.Fc(75,"\n    "),a.Pb(),a.Fc(76,"\n"),a.Pb(),a.Fc(77,"\n\n"),a.Fc(78,"\n"),a.Qb(79,"div",19),a.Fc(80,"\n    "),a.Qb(81,"div",20),a.Fc(82,"\n        "),a.Fc(83,"\n        "),a.Qb(84,"div",21),a.Fc(85,"\n            "),a.Qb(86,"div",22),a.Fc(87,"\n                "),a.Qb(88,"button",23,24),a.Xb("click",function(){return t.closeDrugsAndGroupsPopup()}),a.Fc(90,"\xd7"),a.Pb(),a.Fc(91,"\n                "),a.Qb(92,"h4",25),a.Fc(93),a.Pb(),a.Fc(94,"\n            "),a.Pb(),a.Fc(95,"\n            "),a.Qb(96,"div",26),a.Fc(97,"\n                "),a.Qb(98,"div",27),a.Fc(99,"\n                    "),a.Qb(100,"table"),a.Fc(101,"\n                        "),a.Qb(102,"tr"),a.Fc(103,"\n                            "),a.Dc(104,ns,6,6,"td",28),a.Fc(105,"\n                        "),a.Pb(),a.Fc(106,"\n                    "),a.Pb(),a.Fc(107,"\n                "),a.Pb(),a.Fc(108,"\n            "),a.Pb(),a.Fc(109,"\n            "),a.Dc(110,is,4,5,"div",0),a.Fc(111,"\n            "),a.Dc(112,cs,4,5,"div",0),a.Fc(113,"\n        "),a.Pb(),a.Fc(114,"\n    "),a.Pb(),a.Fc(115,"\n"),a.Pb(),a.Fc(116,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(7),a.Gc(a.bc(14,18,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(16,20,"Drugs"),"\n        "),a.yb(9),a.ic("disabled",t.enableAddRootBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(26,22,"AddRootDrugsGroup")),a.yb(7),a.Gc(a.bc(33,24,"ExpandAll")),a.yb(4),a.Gc(a.bc(37,26,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(53,28,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(13),a.hc("value",a.dc(66,30,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedNode),a.yb(28),a.Gc(t.txtHeaderModal),a.yb(11),a.hc("ngForOf",t.rbSelections),a.yb(6),a.hc("ngIf",t.isDrugSelected),a.yb(2),a.hc("ngIf",t.isDrugsGroupSelected))},directives:[i.k,rt.a,c.b,c.f,c.i,O.a,E.g,i.j,S.a,y,Oe.a,Kc,$c],pipes:[d.c,De.a],encapsulation:2}),e})();function as(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",8),a.Fc(22,"\n                "),a.Qb(23,"input",9,10),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTest.code=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",11),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",5),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",6),a.Fc(39,"\n                "),a.Qb(40,"input",12,13),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTest.name=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",11),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",14),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",6),a.Fc(56,"\n                "),a.Qb(57,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTest.nameTranslation=t}),a.Pb(),a.Fc(59,"\n                "),a.Qb(60,"div",11),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n            "),a.Pb(),a.Fc(64,"\n        "),a.Pb(),a.Fc(65,"        \n        "),a.Qb(66,"div",4),a.Fc(67,"\n            "),a.Qb(68,"label",17),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n            "),a.Qb(72,"div",18),a.Fc(73,"\n                "),a.Qb(74,"textarea",19),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTest.description=t}),a.Pb(),a.Fc(75,"\n            "),a.Pb(),a.Fc(76,"\n        "),a.Pb(),a.Fc(77,"\n    "),a.Pb(),a.Fc(78,"\n    "),a.Qb(79,"div",20),a.Fc(80,"\n        "),a.Qb(81,"div",21),a.Fc(82,"\n            "),a.Qb(83,"button",22),a.Xb("click",function(){return a.wc(e),a.Zb().saveLaboratoryTest()}),a.Fc(84),a.ac(85,"translate"),a.Pb(),a.Fc(86,"\n            "),a.Qb(87,"button",23),a.Xb("click",function(){return a.wc(e),a.Zb().cancelLaboratoryTest()}),a.Fc(88),a.ac(89,"translate"),a.Pb(),a.Fc(90,"\n        "),a.Pb(),a.Fc(91,"\n    "),a.Pb(),a.Fc(92,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.vc(58),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,19,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",c.selectedParentGroupName,"\n            "),a.yb(6),a.Hc(" ",a.bc(19,21,"Code"),""),a.yb(5),a.hc("ngModel",c.selectedLaboratoryTest.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                   ",a.bc(28,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(36,25,"ArabicName"),""),a.yb(5),a.hc("ngModel",c.selectedLaboratoryTest.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                   ",a.bc(45,27,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,29,"EnglishName"),""),a.yb(5),a.hc("ngModel",c.selectedLaboratoryTest.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                    ",a.bc(62,31,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(70,33,"Remark"),""),a.yb(5),a.hc("ngModel",c.selectedLaboratoryTest.description),a.yb(9),a.hc("disabled",!e.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(85,35,"Save")),a.yb(4),a.Gc(a.bc(89,37,"Cancel"))}}let os=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectedLaboratoryTestId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onLaboratoryTestChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectLaboratoryTestsTab=!0,this.active=!0,this.showProgress=!1,this.selectedLaboratoryTest={},this.selectedLang="ar"}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedLaboratoryTestId&&""!=this.selectedLaboratoryTestId){let e=this;e.showProgress=!0,this.clinicService.getLaboratoryTestById(e.selectedLaboratoryTestId).subscribe(function(t){e.selectedLaboratoryTest=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveLaboratoryTest(){let e=this;e.showProgress=!0,this.selectedLaboratoryTest.parentGroupId=this.selectedParentGroupId,this.selectedLaboratoryTest.id>0?this.clinicService.updateLaboratoryTest(this.selectedLaboratoryTest).subscribe(function(t){e.onIsNew.emit(!1),e.onLaboratoryTestChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createLaboratoryTest(this.selectedLaboratoryTest).subscribe(function(t){e.onIsNew.emit(!0),e.onLaboratoryTestChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedLaboratoryTest={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelLaboratoryTest(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-laboratory-test"]],inputs:{selectedLaboratoryTestId:"selectedLaboratoryTestId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onLaboratoryTestChanged:"onLaboratoryTestChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageLaboratoryTestForm",4,"ngIf"],["name","manageLaboratoryTestForm",1,"form-horizontal"],["manageLaboratoryTestForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["for","txtLaboratoryTestCode",1,"control-label","col-md-3"],[1,"col-md-3"],["id","txtLaboratoryTestCode","name","txtLaboratoryTestCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtLaboratoryTestCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtLaboratoryTestRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtLaboratoryTestRemark","name","txtLaboratoryTestRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,as,93,39,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();function rs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",5),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",6),a.Fc(22,"\n                "),a.Qb(23,"input",7,8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTestsGroup.name=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",9),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",10),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",6),a.Fc(39,"\n                "),a.Qb(40,"input",11,12),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTestsGroup.nameTranslation=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",9),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",13),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",14),a.Fc(56,"\n                "),a.Qb(57,"textarea",15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedLaboratoryTestsGroup.description=t}),a.Pb(),a.Fc(58,"\n            "),a.Pb(),a.Fc(59,"\n        "),a.Pb(),a.Fc(60,"\n    "),a.Pb(),a.Fc(61,"\n    "),a.Qb(62,"div",16),a.Fc(63,"\n        "),a.Qb(64,"div",17),a.Fc(65,"\n            "),a.Qb(66,"button",18),a.Xb("click",function(){return a.wc(e),a.Zb().saveLaboratoryTestsGroup()}),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n            "),a.Qb(70,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().cancelLaboratoryTestsGroup()}),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n        "),a.Pb(),a.Fc(74,"\n    "),a.Pb(),a.Fc(75,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,15,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",i.selectedParentGroupName,"\n            "),a.yb(6),a.Hc(" ",a.bc(19,17,"ArabicName"),""),a.yb(5),a.hc("ngModel",i.selectedLaboratoryTestsGroup.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,19,"RequiredField"),"\n                "),a.yb(8),a.Gc(a.bc(36,21,"EnglishName")),a.yb(5),a.hc("ngModel",i.selectedLaboratoryTestsGroup.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                    ",a.bc(45,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,25,"Remark"),""),a.yb(5),a.hc("ngModel",i.selectedLaboratoryTestsGroup.description),a.yb(9),a.hc("disabled",!e.valid||!i.enableSaveBtn&&!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(68,27,"Save")),a.yb(4),a.Gc(a.bc(72,29,"Cancel"))}}let ls=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectedLaboratoryTestsGroupId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onLaboratoryTestsGroupChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectLaboratoryTestsTab=!0,this.active=!0,this.showProgress=!1,this.selectedLaboratoryTestsGroup={},this.selectedLang="ar"}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID")}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedLaboratoryTestsGroupId&&""!=this.selectedLaboratoryTestsGroupId){let e=this;e.showProgress=!0,this.clinicService.getLaboratoryTestsGroupById(e.selectedLaboratoryTestsGroupId).subscribe(function(t){e.selectedLaboratoryTestsGroup=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveLaboratoryTestsGroup(){let e=this;e.showProgress=!0,this.selectedLaboratoryTestsGroup.parentGroupId=this.selectedParentGroupId,this.selectedLaboratoryTestsGroup.clinicId=this.selectedClinicId,this.selectedLaboratoryTestsGroup.id>0?this.clinicService.updateLaboratoryTestsGroup(this.selectedLaboratoryTestsGroup).subscribe(function(t){e.onIsNew.emit(!1),e.onLaboratoryTestsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createLaboratoryTestsGroup(this.selectedLaboratoryTestsGroup).subscribe(function(t){e.onIsNew.emit(!0),e.onLaboratoryTestsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedLaboratoryTestsGroup={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelLaboratoryTestsGroup(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-laboratory-tests-group"]],inputs:{selectedLaboratoryTestsGroupId:"selectedLaboratoryTestsGroupId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onLaboratoryTestsGroupChanged:"onLaboratoryTestsGroupChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageLaboratoryTestsGroupForm",4,"ngIf"],["name","manageLaboratoryTestsGroupForm",1,"form-horizontal"],["manageLaboratoryTestsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtLaboratoryTestsGroupRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtLaboratoryTestsGroupRemark","name","txtLaboratoryTestsGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,rs,76,31,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();const ds=["btnAddLaboratoryTestsGroup"],bs=["btnClosePopup"];function us(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function hs(e,t){if(1&e&&a.Lb(0,"clinic-tab",30),2&e){const e=a.Zb();a.hc("isLaboratoryTestsSelected",e.selectLaboratoryTestsTab)}}function ps(e,t){if(1&e&&a.Lb(0,"shared-tabs",30),2&e){const e=a.Zb();a.hc("isLaboratoryTestsSelected",e.selectLaboratoryTestsTab)}}function gs(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                          "),a.Qb(1,"span",31),a.Lb(2,"i",32),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                              "),a.Qb(6,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n\n                          "),a.Pb(),a.Fc(8,"\n                          "),a.Qb(9,"label"),a.Fc(10,"\n                              "),a.Qb(11,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                              "),a.Lb(13,"span",35),a.Fc(14,"\n                          "),a.Pb(),a.Fc(15,"\n                      ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                          \xa0\n                          ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                          \xa0 \xa0\n                          "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function ms(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                          "),a.Qb(1,"span",31),a.Lb(2,"i",36),a.Pb(),a.Fc(3),a.Qb(4,"a",37,8),a.Fc(6,"\n                              "),a.Qb(7,"img",38),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passParentGroupInfo(n)}),a.Pb(),a.Fc(8,"\n                          "),a.Pb(),a.Fc(9,"\n                          \xa0 \xa0\n                          "),a.Qb(10,"a"),a.Fc(11,"\n                              "),a.Qb(12,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(13,"\n\n                          "),a.Pb(),a.Fc(14,"\n                          "),a.Qb(15,"label"),a.Fc(16,"\n                              "),a.Qb(17,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(18,"\n                              "),a.Lb(19,"span",35),a.Fc(20,"\n                          "),a.Pb(),a.Fc(21,"\n                      ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                          \xa0\n                          ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                          \xa0 \xa0\n                          "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Fs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                "),a.Qb(2,"input",39,40),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb().onCheckboxSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.ic("disabled",n.enableCheckBox?"":"disabled"),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,4,e.text),"\n                            ")}}function vs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-laboratory-test",41),a.Xb("selectedLaboratoryTestIdChange",function(t){return a.wc(e),a.Zb().toSaveLaboratoryTestId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentLaboratoryTestsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentLaboratoryTestsGroupName=t})("onLaboratoryTestChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeLaboratoryTestsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedLaboratoryTestId",e.toSaveLaboratoryTestId)("selectedParentGroupId",e.parentLaboratoryTestsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentLaboratoryTestsGroupName)}}function fs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-laboratory-tests-group",42),a.Xb("selectedLaboratoryTestsGroupIdChange",function(t){return a.wc(e),a.Zb().toSaveLaboratoryTestsGroupId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentLaboratoryTestsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentLaboratoryTestsGroupName=t})("onLaboratoryTestsGroupChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeLaboratoryTestsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedLaboratoryTestsGroupId",e.toSaveLaboratoryTestsGroupId)("selectedParentGroupId",e.parentLaboratoryTestsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentLaboratoryTestsGroupName)}}let Ps=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.selectedLang="ar",this.leafType="LaboratoryTest",this.groupName="",this.childName="",this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.selectLaboratoryTestsTab=!0,this.active=!0,this.showProgress=!1,this.isLaboratoryTestsGroupSelected=!0,this.isLaboratoryTestSelected=!1,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedAction=1,this.txtHeaderModal="",this.isRoot=!1,this.enableCheckBox=!1,this.toPrintDiv="print-section",this.lstToTranslated=[]}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.groupName=this.translate.instant("LaboratoryTestsGroup"),this.childName=this.translate.instant("LaboratoryTests"),this.translate.onLangChange.subscribe(e=>{this.groupName=this.translate.instant("LaboratoryTestsGroup"),this.childName=this.translate.instant("LaboratoryTests")}),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)),this.getLaboratoryTestsGroupsForTree()}getLaboratoryTestsGroupsForTree(){this.toSaveLaboratoryTestsGroupId="",this.toSaveLaboratoryTestId="";let e=this;e.showProgress=!0,this.clinicService.getLaboratoryTestsGroupsForTree(this.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}onCheckboxSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isLaboratoryTestsGroupSelected=!0,this.isLaboratoryTestSelected=!1,this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup")})):2==this.selectedAction&&(this.isLaboratoryTestsGroupSelected=!1,this.isLaboratoryTestSelected=!0,this.txtHeaderModal=this.translate.instant("LaboratoryTests"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("LaboratoryTests")}))}displayPopup(e){"laboratorytest"==e.type.toLocaleLowerCase()?(this.isLaboratoryTestsGroupSelected=!1,this.isLaboratoryTestSelected=!0,this.selectedAction=2,this.txtHeaderModal=this.translate.instant("LaboratoryTest"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("LaboratoryTest"),this.groupName=this.translate.instant("LaboratoryTestsGroup"),this.childName=this.translate.instant("LaboratoryTests")}),this.enableCheckBox=!1,this.isRoot=!1,this.toSaveLaboratoryTestId=e.data,this.btnAddLaboratoryTestsGroup.nativeElement.click()):"laboratorytestsgroup"==e.type.toLocaleLowerCase()&&(this.isLaboratoryTestsGroupSelected=!0,this.isLaboratoryTestSelected=!1,this.enableCheckBox=!1,this.isRoot=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup"),this.groupName=this.translate.instant("LaboratoryTestsGroup"),this.childName=this.translate.instant("LaboratoryTests")}),this.toSaveLaboratoryTestsGroupId=e.data,this.btnAddLaboratoryTestsGroup.nativeElement.click()),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selctedNode=e}passParentGroupInfo(e){this.parentLaboratoryTestsGroupId=e.data,this.parentLaboratoryTestsGroupName="ar"==this.selectedLang?e.label:e.labelTranslation,this.isLaboratoryTestsGroupSelected=!0,this.isLaboratoryTestSelected=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("LaboratoryTestsGroup"),this.groupName=this.translate.instant("LaboratoryTestsGroup"),this.childName=this.translate.instant("LaboratoryTests")}),null==e.data?(this.enableCheckBox=!1,this.isRoot=!0):(this.enableCheckBox=!0,this.isRoot=!1),this.isLaboratoryTestsGroupSelected=!0,this.isLaboratoryTestSelected=!1,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selctedNode=e}changeActivation(e,t){let n=this;"laboratorytest"==e.type.toLocaleLowerCase()?(n.showProgress=!0,n.clinicService.updateLaboratoryTestActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"laboratorytestsgroup"==e.type.toLocaleLowerCase()&&(n.showProgress=!0,n.clinicService.updateLaboratoryTestsGroupActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}updateSelectedNode(e){let t=this;t.toSaveLaboratoryTestsGroupId="",t.toSaveLaboratoryTestId="",e.data>0&&0==t.isNew?(t.selctedNode.label=e.label,t.selctedNode.labelTranslation=e.labelTranslation):null==t.parentLaboratoryTestsGroupId?t.treeDataSourceItems.push(e):t.selctedNode.children.push(e)}setIsNewValue(e){this.isNew=e}closeLaboratoryTestsAndGroupsPopup(){this.toSaveLaboratoryTestsGroupId="",this.toSaveLaboratoryTestId="",this.selectedNode={},this.btnClosePopup.nativeElement.click()}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-laboratory-tests"]],viewQuery:function(e,t){if(1&e&&(a.Lc(ds,1),a.Lc(bs,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnAddLaboratoryTestsGroup=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:118,vars:34,consts:[[4,"ngIf"],[1,"row"],[3,"isLaboratoryTestsSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],[1,""],["type","button","data-toggle","modal","data-target","#LaboratoryTestsAndGroupsPopup",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-toggle","modal","data-target","#LaboratoryTestsAndGroupsPopup",1,"hidden"],["btnAddLaboratoryTestsGroup",""],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"row","nopadding"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","LaboratoryTest"],["pTemplate","LaboratoryTestsGroup"],["id","LaboratoryTestsAndGroupsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnClosePopup",""],[1,"modal-title"],[1,"form-group"],[1,"col-sm-offset-2","col-md-8"],[4,"ngFor","ngForOf"],[3,"isLaboratoryTestsSelected"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["data-toggle","modal","data-target","#LaboratoryTestsAndGroupsPopup"],["src","images/addImage.png",3,"click"],["type","radio","name","radiogroup",3,"value","checked","disabled","change"],["checkbox",""],[3,"selectedLaboratoryTestId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedLaboratoryTestIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onLaboratoryTestChanged","onIsNew","onCancel"],[3,"selectedLaboratoryTestsGroupId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedLaboratoryTestsGroupIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onLaboratoryTestsGroupChanged","onIsNew","onCancel"]],template:function(e,t){1&e&&(a.Dc(0,us,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n    "),a.Dc(4,hs,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,ps,1,1,"shared-tabs",2),a.Fc(7,"\n\n    "),a.Qb(8,"div",1),a.Fc(9,"\n        "),a.Qb(10,"div",1),a.Fc(11,"\n            "),a.Qb(12,"div",3),a.Fc(13,"\n                "),a.Qb(14,"a"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n\n        "),a.Pb(),a.Fc(20,"\n\n        "),a.Qb(21,"div"),a.Fc(22,"\n            "),a.Qb(23,"div",4),a.Fc(24,"\n                "),a.Qb(25,"div",5),a.Fc(26,"\n                    "),a.Qb(27,"button",6),a.Xb("click",function(){return t.passParentGroupInfo("")}),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                    "),a.Lb(31,"button",7,8),a.Fc(33,"\n                    "),a.Qb(34,"button",9),a.Xb("click",function(){return t.expandAll()}),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n                    "),a.Qb(38,"button",9),a.Xb("click",function(){return t.collapseAll()}),a.Fc(39),a.ac(40,"translate"),a.Pb(),a.Fc(41,"\n                    "),a.Lb(42,"print-page",10),a.Fc(43,"\n\n                "),a.Pb(),a.Fc(44,"\n                "),a.Lb(45,"br"),a.Fc(46,"\n                "),a.Qb(47,"div",11),a.Fc(48,"\n                    "),a.Qb(49,"div",12),a.Fc(50,"\n                        "),a.Qb(51,"div",13),a.Fc(52,"\n                            "),a.Lb(53,"i",14),a.Fc(54,"\n                            "),a.Qb(55,"input",15),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                        "),a.Pb(),a.Fc(58,"\n                    "),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n            "),a.Pb(),a.Fc(61,"\n           \n            "),a.Qb(62,"div",16),a.Fc(63,"\n              "),a.Qb(64,"div",4),a.Fc(65,"\n                  "),a.Qb(66,"p-tree",17),a.Xb("selectionChange",function(e){return t.selectedNode=e}),a.ac(67,"filterbynameorcode"),a.Fc(68,"\n                      "),a.Dc(69,gs,16,5,"ng-template",18),a.Fc(70,"\n                      "),a.Dc(71,ms,22,7,"ng-template",19),a.Fc(72,"\n                  "),a.Pb(),a.Fc(73,"\n              "),a.Pb(),a.Fc(74,"\n                \n            "),a.Pb(),a.Fc(75,"\n        "),a.Pb(),a.Fc(76,"\n    "),a.Pb(),a.Fc(77,"\n"),a.Pb(),a.Fc(78,"\n\n"),a.Fc(79,"\n"),a.Qb(80,"div",20),a.Fc(81,"\n    "),a.Qb(82,"div",21),a.Fc(83,"\n        "),a.Fc(84,"\n        "),a.Qb(85,"div",22),a.Fc(86,"\n            "),a.Qb(87,"div",23),a.Fc(88,"\n                "),a.Qb(89,"button",24,25),a.Xb("click",function(){return t.closeLaboratoryTestsAndGroupsPopup()}),a.Fc(91,"\xd7"),a.Pb(),a.Fc(92,"\n                "),a.Qb(93,"h4",26),a.Fc(94),a.Pb(),a.Fc(95,"\n            "),a.Pb(),a.Fc(96,"\n            "),a.Qb(97,"div",27),a.Fc(98,"\n                "),a.Qb(99,"div",28),a.Fc(100,"\n                    "),a.Qb(101,"table"),a.Fc(102,"\n                        "),a.Qb(103,"tr"),a.Fc(104,"\n                            "),a.Dc(105,Fs,6,6,"td",29),a.Fc(106,"\n                        "),a.Pb(),a.Fc(107,"\n                    "),a.Pb(),a.Fc(108,"\n                "),a.Pb(),a.Fc(109,"\n            "),a.Pb(),a.Fc(110,"\n            "),a.Dc(111,vs,4,5,"div",0),a.Fc(112,"\n            "),a.Dc(113,fs,4,5,"div",0),a.Fc(114,"\n        "),a.Pb(),a.Fc(115,"\n    "),a.Pb(),a.Fc(116,"\n"),a.Pb(),a.Fc(117,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(16,18,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(18,20,"LaboratoryTests"),"\n            "),a.yb(10),a.ic("disabled",t.enableAddRootBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(29,22,"AddRootLaboratoryTestsGroup")),a.yb(7),a.Gc(a.bc(36,24,"ExpandAll")),a.yb(4),a.Gc(a.bc(40,26,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(56,28,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(11),a.hc("value",a.dc(67,30,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedNode),a.yb(28),a.Gc(t.txtHeaderModal),a.yb(11),a.hc("ngForOf",t.rbSelections),a.yb(6),a.hc("ngIf",t.isLaboratoryTestSelected),a.yb(2),a.hc("ngIf",t.isLaboratoryTestsGroupSelected))},directives:[i.k,rt.a,c.b,c.f,c.i,O.a,E.g,i.j,S.a,y,Oe.a,os,ls],pipes:[d.c,De.a],encapsulation:2}),e})();function ys(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",8),a.Fc(22,"\n                "),a.Qb(23,"input",9,10),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTest.code=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",11),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",5),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",6),a.Fc(39,"\n                "),a.Qb(40,"input",12,13),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTest.name=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",11),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",14),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",6),a.Fc(56,"\n                "),a.Qb(57,"input",15,16),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTest.nameTranslation=t}),a.Pb(),a.Fc(59,"\n                "),a.Qb(60,"div",11),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n            "),a.Pb(),a.Fc(64,"\n        "),a.Pb(),a.Fc(65,"\n        "),a.Qb(66,"div",4),a.Fc(67,"\n            "),a.Qb(68,"label",17),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n            "),a.Qb(72,"div",18),a.Fc(73,"\n                "),a.Qb(74,"textarea",19),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTest.description=t}),a.Pb(),a.Fc(75,"\n            "),a.Pb(),a.Fc(76,"\n        "),a.Pb(),a.Fc(77,"\n    "),a.Pb(),a.Fc(78,"\n    "),a.Qb(79,"div",20),a.Fc(80,"\n        "),a.Qb(81,"div",21),a.Fc(82,"\n            "),a.Qb(83,"button",22),a.Xb("click",function(){return a.wc(e),a.Zb().saveRadiologyTest()}),a.Fc(84),a.ac(85,"translate"),a.Pb(),a.Fc(86,"\n            "),a.Qb(87,"button",23),a.Xb("click",function(){return a.wc(e),a.Zb().cancelRadiologyTest()}),a.Fc(88),a.ac(89,"translate"),a.Pb(),a.Fc(90,"\n        "),a.Pb(),a.Fc(91,"\n    "),a.Pb(),a.Fc(92,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.vc(58),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,19,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",c.selectedParentGroupName,"\n            "),a.yb(6),a.Hc(" ",a.bc(19,21,"Code"),""),a.yb(5),a.hc("ngModel",c.selectedRadiologyTest.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(36,25,"ArabicName"),""),a.yb(5),a.hc("ngModel",c.selectedRadiologyTest.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                    ",a.bc(45,27,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,29,"EnglishName"),""),a.yb(5),a.hc("ngModel",c.selectedRadiologyTest.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                    ",a.bc(62,31,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(70,33,"Remark"),""),a.yb(5),a.hc("ngModel",c.selectedRadiologyTest.description),a.yb(9),a.hc("disabled",!e.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(85,35,"Save")),a.yb(4),a.Gc(a.bc(89,37,"Cancel"))}}let Qs=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.clinicService=t,this.localStorage=n,this.translate=i,this.selectedRadiologyTestId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onRadiologyTestChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectRadiologyTestsTab=!0,this.active=!0,this.showProgress=!1,this.selectedRadiologyTest={},this.selectedLang="ar"}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedRadiologyTestId&&""!=this.selectedRadiologyTestId){let e=this;e.showProgress=!0,this.clinicService.getRadiologyTestById(e.selectedRadiologyTestId).subscribe(function(t){e.selectedRadiologyTest=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveRadiologyTest(){let e=this;e.showProgress=!0,this.selectedRadiologyTest.parentGroupId=this.selectedParentGroupId,this.selectedRadiologyTest.id>0?this.clinicService.updateRadiologyTest(this.selectedRadiologyTest).subscribe(function(t){e.onIsNew.emit(!1),e.onRadiologyTestChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createRadiologyTest(this.selectedRadiologyTest).subscribe(function(t){e.onIsNew.emit(!0),e.onRadiologyTestChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedRadiologyTest={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelRadiologyTest(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(A.a),a.Kb(r.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-radiology-test"]],inputs:{selectedRadiologyTestId:"selectedRadiologyTestId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onRadiologyTestChanged:"onRadiologyTestChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageRadiologyTestForm",4,"ngIf"],["name","manageRadiologyTestForm",1,"form-horizontal"],["manageRadiologyTestForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["for","txtRadiologyTestCode",1,"control-label","col-md-3"],[1,"col-md-3"],["id","txtRadiologyTestCode","name","txtRadiologyTestCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtRadiologyTestCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtRadiologyTestRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtRadiologyTestRemark","name","txtRadiologyTestRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,ys,93,39,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();function Ss(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",5),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",6),a.Fc(22,"\n                "),a.Qb(23,"input",7,8),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTestsGroup.name=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",9),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",10),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",6),a.Fc(39,"\n                "),a.Qb(40,"input",11,12),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTestsGroup.nameTranslation=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",9),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",13),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",14),a.Fc(56,"\n                "),a.Qb(57,"textarea",15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedRadiologyTestsGroup.description=t}),a.Pb(),a.Fc(58,"\n            "),a.Pb(),a.Fc(59,"\n        "),a.Pb(),a.Fc(60,"\n    "),a.Pb(),a.Fc(61,"\n    "),a.Qb(62,"div",16),a.Fc(63,"\n        "),a.Qb(64,"div",17),a.Fc(65,"\n            "),a.Qb(66,"button",18),a.Xb("click",function(){return a.wc(e),a.Zb().saveRadiologyTestsGroup()}),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n            "),a.Qb(70,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().cancelRadiologyTestsGroup()}),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n        "),a.Pb(),a.Fc(74,"\n    "),a.Pb(),a.Fc(75,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,15,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",i.selectedParentGroupName,"\n            "),a.yb(6),a.Gc(a.bc(19,17,"ArabicName")),a.yb(5),a.hc("ngModel",i.selectedRadiologyTestsGroup.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,19,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(36,21,"EnglishName"),""),a.yb(5),a.hc("ngModel",i.selectedRadiologyTestsGroup.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                    ",a.bc(45,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,25,"Remark"),""),a.yb(5),a.hc("ngModel",i.selectedRadiologyTestsGroup.description),a.yb(9),a.hc("disabled",!e.valid||!i.enableSaveBtn&&!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(68,27,"Save")),a.yb(4),a.Gc(a.bc(72,29,"Cancel"))}}let Cs=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectedRadiologyTestsGroupId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onRadiologyTestsGroupChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectRadiologyTestsTab=!0,this.active=!0,this.showProgress=!1,this.selectedRadiologyTestsGroup={},this.selectedLang="ar"}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID")}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedRadiologyTestsGroupId&&""!=this.selectedRadiologyTestsGroupId){let e=this;e.showProgress=!0,this.clinicService.getRadiologyTestsGroupById(e.selectedRadiologyTestsGroupId).subscribe(function(t){e.selectedRadiologyTestsGroup=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveRadiologyTestsGroup(){let e=this;e.showProgress=!0,this.selectedRadiologyTestsGroup.parentGroupId=this.selectedParentGroupId,this.selectedRadiologyTestsGroup.clinicId=this.selectedClinicId,this.selectedRadiologyTestsGroup.id>0?this.clinicService.updateRadiologyTestsGroup(this.selectedRadiologyTestsGroup).subscribe(function(t){e.onIsNew.emit(!1),e.onRadiologyTestsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createRadiologyTestsGroup(this.selectedRadiologyTestsGroup).subscribe(function(t){e.onIsNew.emit(!0),e.onRadiologyTestsGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.clearControl(),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedRadiologyTestsGroup={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelRadiologyTestsGroup(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-radiology-tests-group"]],inputs:{selectedRadiologyTestsGroupId:"selectedRadiologyTestsGroupId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onRadiologyTestsGroupChanged:"onRadiologyTestsGroupChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageRadiologyTestsGroupForm",4,"ngIf"],["name","manageRadiologyTestsGroupForm",1,"form-horizontal"],["manageRadiologyTestsGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtRadiologyTestsGroupRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtRadiologyTestsGroupRemark","name","txtRadiologyTestsGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,Ss,76,31,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();const ws=["btnAddRadiologyTestsGroup"],Is=["btnClosePopup"];function Ts(e,t){if(1&e&&a.Lb(0,"clinic-tab",30),2&e){const e=a.Zb();a.hc("isRadiologyTestsSelected",e.selectRadiologyTestsTab)}}function Ms(e,t){if(1&e&&a.Lb(0,"shared-tabs",30),2&e){const e=a.Zb();a.hc("isRadiologyTestsSelected",e.selectRadiologyTestsTab)}}function Ds(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",31),a.Lb(2,"i",32),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                                "),a.Qb(6,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n\n                            "),a.Pb(),a.Fc(8,"\n                            "),a.Qb(9,"label"),a.Fc(10,"\n                                "),a.Qb(11,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                                "),a.Lb(13,"span",35),a.Fc(14,"\n                            "),a.Pb(),a.Fc(15,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                            \xa0\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function Gs(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",31),a.Lb(2,"i",36),a.Pb(),a.Fc(3),a.Qb(4,"a",37,7),a.Fc(6,"\n                                "),a.Qb(7,"img",38),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passParentGroupInfo(n)}),a.Pb(),a.Fc(8,"\n                            "),a.Pb(),a.Fc(9,"\n                            \xa0 \xa0\n                            "),a.Qb(10,"a"),a.Fc(11,"\n                                "),a.Qb(12,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(13,"\n\n                            "),a.Pb(),a.Fc(14,"\n                            "),a.Qb(15,"label"),a.Fc(16,"\n                                "),a.Qb(17,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(18,"\n                                "),a.Lb(19,"span",35),a.Fc(20,"\n                            "),a.Pb(),a.Fc(21,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                            \xa0\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function As(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                "),a.Qb(2,"input",39,40),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb().onCheckboxSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.ic("disabled",n.enableCheckBox?"":"disabled"),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,4,e.text),"\n                            ")}}function Ns(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-radiology-test",41),a.Xb("selectedRadiologyTestIdChange",function(t){return a.wc(e),a.Zb().toSaveRadiologyTestId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentRadiologyTestsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentRadiologyTestsGroupName=t})("onRadiologyTestChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeRadiologyTestsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedRadiologyTestId",e.toSaveRadiologyTestId)("selectedParentGroupId",e.parentRadiologyTestsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentRadiologyTestsGroupName)}}function ks(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-radiology-tests-group",42),a.Xb("selectedRadiologyTestsGroupIdChange",function(t){return a.wc(e),a.Zb().toSaveRadiologyTestsGroupId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentRadiologyTestsGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentRadiologyTestsGroupName=t})("onRadiologyTestsGroupChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeRadiologyTestsAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedRadiologyTestsGroupId",e.toSaveRadiologyTestsGroupId)("selectedParentGroupId",e.parentRadiologyTestsGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentRadiologyTestsGroupName)}}let Ls=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.selectedLang="ar",this.leafType="RadiologyTest",this.userType="",this.isClinicAdmin=!1,this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.selectRadiologyTestsTab=!0,this.active=!0,this.showProgress=!1,this.isRadiologyTestsGroupSelected=!0,this.isRadiologyTestSelected=!1,this.groupName="",this.childName="",this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedAction=1,this.txtHeaderModal="",this.isRoot=!1,this.enableCheckBox=!1,this.toPrintDiv="print-section",this.lstToTranslated=[]}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.groupName=this.translate.instant("RadiologyTestsGroup"),this.childName=this.translate.instant("RadiologyTest"),this.translate.onLangChange.subscribe(e=>{this.groupName=this.translate.instant("RadiologyTestsGroup"),this.childName=this.translate.instant("RadiologyTest")}),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)),this.getRadiologyTestsGroupsForTree()}getRadiologyTestsGroupsForTree(){this.toSaveRadiologyTestsGroupId="",this.toSaveRadiologyTestId="";let e=this;e.showProgress=!0,this.clinicService.getRadiologyTestsGroupsForTree(this.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}onCheckboxSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isRadiologyTestsGroupSelected=!0,this.isRadiologyTestSelected=!1,this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup")})):2==this.selectedAction&&(this.isRadiologyTestsGroupSelected=!1,this.isRadiologyTestSelected=!0,this.txtHeaderModal=this.translate.instant("RadiologyTest"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("RadiologyTest")}))}displayPopup(e){"radiologytest"==e.type.toLocaleLowerCase()?(this.isRadiologyTestsGroupSelected=!1,this.isRadiologyTestSelected=!0,this.selectedAction=2,this.txtHeaderModal=this.translate.instant("RadiologyTest"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("RadiologyTest"),this.groupName=this.translate.instant("RadiologyTestsGroup"),this.childName=this.translate.instant("RadiologyTest")}),this.enableCheckBox=!1,this.isRoot=!1,this.toSaveRadiologyTestId=e.data,this.btnAddRadiologyTestsGroup.nativeElement.click()):"radiologytestsgroup"==e.type.toLocaleLowerCase()&&(this.isRadiologyTestsGroupSelected=!0,this.isRadiologyTestSelected=!1,this.enableCheckBox=!1,this.isRoot=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup"),this.groupName=this.translate.instant("RadiologyTestsGroup"),this.childName=this.translate.instant("RadiologyTest")}),this.toSaveRadiologyTestsGroupId=e.data,this.btnAddRadiologyTestsGroup.nativeElement.click()),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selctedNode=e}passParentGroupInfo(e){this.parentRadiologyTestsGroupId=e.data,this.parentRadiologyTestsGroupName="ar"==this.selectedLang?e.label:e.labelTranslation,this.isRadiologyTestsGroupSelected=!0,this.isRadiologyTestSelected=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("RadiologyTestsGroup"),this.groupName=this.translate.instant("RadiologyTestsGroup"),this.childName=this.translate.instant("RadiologyTest")}),null==e.data?(this.enableCheckBox=!1,this.isRoot=!0):(this.enableCheckBox=!0,this.isRoot=!1),this.isRadiologyTestsGroupSelected=!0,this.isRadiologyTestSelected=!1,this.selctedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}changeActivation(e,t){let n=this;"radiologytest"==e.type.toLocaleLowerCase()?(n.showProgress=!0,n.clinicService.updateRadiologyTestActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"radiologytestsgroup"==e.type.toLocaleLowerCase()&&(n.showProgress=!0,n.clinicService.updateRadiologyTestsGroupActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}updateSelectedNode(e){let t=this;t.toSaveRadiologyTestsGroupId="",t.toSaveRadiologyTestId="",e.data>0&&0==t.isNew?(t.selctedNode.label=e.label,t.selctedNode.labelTranslation=e.labelTranslation):null==t.parentRadiologyTestsGroupId?t.treeDataSourceItems.push(e):t.selctedNode.children.push(e)}setIsNewValue(e){this.isNew=e}closeRadiologyTestsAndGroupsPopup(){this.toSaveRadiologyTestsGroupId="",this.toSaveRadiologyTestId="",this.selectedNode={},this.btnClosePopup.nativeElement.click()}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-radiology-tests"]],viewQuery:function(e,t){if(1&e&&(a.Lc(ws,1),a.Lc(Is,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnAddRadiologyTestsGroup=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:123,vars:33,consts:[[1,"row"],[3,"isRadiologyTestsSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],[1,""],["type","button","data-toggle","modal","data-target","#RadiologyTestsAndGroupsPopup",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-toggle","modal","data-target","#RadiologyTestsAndGroupsPopup",1,"hidden"],["btnAddRadiologyTestsGroup",""],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"row","nopadding"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","RadiologyTest"],["pTemplate","RadiologyTestsGroup"],["id","RadiologyTestsAndGroupsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnClosePopup",""],[1,"modal-title"],[1,"form-group"],[1,"col-sm-offset-2","col-md-8"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"isRadiologyTestsSelected"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["data-toggle","modal","data-target","#RadiologyTestsAndGroupsPopup"],["src","images/addImage.png",3,"click"],["type","radio","name","radiogroup",3,"value","checked","disabled","change"],["checkbox",""],[3,"selectedRadiologyTestId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedRadiologyTestIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onRadiologyTestChanged","onIsNew","onCancel"],[3,"selectedRadiologyTestsGroupId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedRadiologyTestsGroupIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onRadiologyTestsGroupChanged","onIsNew","onCancel"]],template:function(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb(),a.Fc(4,"\n\n"),a.Qb(5,"div",0),a.Fc(6,"\n    "),a.Dc(7,Ts,1,1,"clinic-tab",1),a.Fc(8,"\n    "),a.Dc(9,Ms,1,1,"shared-tabs",1),a.Fc(10,"\n    "),a.Qb(11,"div",0),a.Fc(12,"\n        "),a.Qb(13,"div",0),a.Fc(14,"\n            "),a.Qb(15,"div",2),a.Fc(16,"\n                "),a.Qb(17,"a"),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20),a.ac(21,"translate"),a.Pb(),a.Fc(22,"\n\n        "),a.Pb(),a.Fc(23,"\n\n        "),a.Qb(24,"div"),a.Fc(25,"\n            "),a.Qb(26,"div",3),a.Fc(27,"\n                "),a.Qb(28,"div",4),a.Fc(29,"\n                    "),a.Qb(30,"button",5),a.Xb("click",function(){return t.passParentGroupInfo("")}),a.Fc(31),a.ac(32,"translate"),a.Pb(),a.Fc(33,"\n                    "),a.Lb(34,"button",6,7),a.Fc(36,"\n                    "),a.Qb(37,"button",8),a.Xb("click",function(){return t.expandAll()}),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n                    "),a.Qb(41,"button",8),a.Xb("click",function(){return t.collapseAll()}),a.Fc(42),a.ac(43,"translate"),a.Pb(),a.Fc(44,"\n                    "),a.Lb(45,"print-page",9),a.Fc(46,"\n                "),a.Pb(),a.Fc(47,"\n                "),a.Lb(48,"br"),a.Fc(49,"\n                "),a.Qb(50,"div",10),a.Fc(51,"\n                    "),a.Qb(52,"div",11),a.Fc(53,"\n                        "),a.Qb(54,"div",12),a.Fc(55,"\n                            "),a.Lb(56,"i",13),a.Fc(57,"\n                            "),a.Qb(58,"input",14),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(59,"translate"),a.Pb(),a.Fc(60,"\n                        "),a.Pb(),a.Fc(61,"\n                    "),a.Pb(),a.Fc(62,"\n                "),a.Pb(),a.Fc(63,"\n            "),a.Pb(),a.Fc(64,"\n            "),a.Lb(65,"br"),a.Fc(66,"\n            "),a.Qb(67,"div",15),a.Fc(68,"\n                \n                "),a.Qb(69,"div",3),a.Fc(70,"\n                    "),a.Qb(71,"p-tree",16),a.Xb("selectionChange",function(e){return t.selectedNode=e}),a.ac(72,"filterbynameorcode"),a.Fc(73,"\n                        "),a.Dc(74,Ds,16,5,"ng-template",17),a.Fc(75,"\n                        "),a.Dc(76,Gs,22,7,"ng-template",18),a.Fc(77,"\n                    "),a.Pb(),a.Fc(78,"\n                "),a.Pb(),a.Fc(79,"\n            "),a.Pb(),a.Fc(80,"\n        "),a.Pb(),a.Fc(81,"\n    "),a.Pb(),a.Fc(82,"\n"),a.Pb(),a.Fc(83,"\n\n"),a.Fc(84,"\n"),a.Qb(85,"div",19),a.Fc(86,"\n    "),a.Qb(87,"div",20),a.Fc(88,"\n        "),a.Fc(89,"\n        "),a.Qb(90,"div",21),a.Fc(91,"\n            "),a.Qb(92,"div",22),a.Fc(93,"\n                "),a.Qb(94,"button",23,24),a.Xb("click",function(){return t.closeRadiologyTestsAndGroupsPopup()}),a.Fc(96,"\xd7"),a.Pb(),a.Fc(97,"\n                "),a.Qb(98,"h4",25),a.Fc(99),a.Pb(),a.Fc(100,"\n            "),a.Pb(),a.Fc(101,"\n            "),a.Qb(102,"div",26),a.Fc(103,"\n                "),a.Qb(104,"div",27),a.Fc(105,"\n                    "),a.Qb(106,"table"),a.Fc(107,"\n                        "),a.Qb(108,"tr"),a.Fc(109,"\n                            "),a.Dc(110,As,6,6,"td",28),a.Fc(111,"\n                        "),a.Pb(),a.Fc(112,"\n                    "),a.Pb(),a.Fc(113,"\n                "),a.Pb(),a.Fc(114,"\n            "),a.Pb(),a.Fc(115,"\n            "),a.Dc(116,Ns,4,5,"div",29),a.Fc(117,"\n            "),a.Dc(118,ks,4,5,"div",29),a.Fc(119,"\n        "),a.Pb(),a.Fc(120,"\n    "),a.Pb(),a.Fc(121,"\n"),a.Pb(),a.Fc(122,"\n\n")),2&e&&(a.yb(7),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(19,17,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(21,19,"RadiologyTests"),"\n            "),a.yb(10),a.ic("disabled",t.enableAddRootBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(32,21,"AddRootRadiologyTestsGroup")),a.yb(7),a.Gc(a.bc(39,23,"ExpandAll")),a.yb(4),a.Gc(a.bc(43,25,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(59,27,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(13),a.hc("value",a.dc(72,29,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedNode),a.yb(28),a.Gc(t.txtHeaderModal),a.yb(11),a.hc("ngForOf",t.rbSelections),a.yb(6),a.hc("ngIf",t.isRadiologyTestSelected),a.yb(2),a.hc("ngIf",t.isRadiologyTestsGroupSelected))},directives:[S.a,i.k,rt.a,c.b,c.f,c.i,O.a,E.g,i.j,y,Oe.a,Qs,Cs],pipes:[d.c,De.a],encapsulation:2}),e})();const Rs=["btnServicesGroup"],xs=["btnCloseProductsGroup"],Zs=["btnCloseProduct"],Bs=["btnServices"],Hs=["tree"],Os=["i"],Es=["d"];function Xs(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Us(e,t){if(1&e&&a.Lb(0,"clinic-tab",30),2&e){const e=a.Zb();a.hc("isProductsSelected",e.selectProductstTab)}}function qs(e,t){if(1&e&&a.Lb(0,"shared-tabs",30),2&e){const e=a.Zb();a.hc("isProductsSelected",e.selectProductstTab)}}function js(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a",31,32),a.Fc(3,"\n                           "),a.Qb(4,"img",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passInitialServiceGroupValue(n)}),a.Pb(),a.Fc(5,"\n                       "),a.Pb(),a.Fc(6,"\n                   ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                       ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                       \xa0 \xa0\n                       "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function Ks(e,t){if(1&e){const e=a.Rb();a.Fc(0),a.Qb(1,"a",31,32),a.Fc(3,"\n                           "),a.Qb(4,"img",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passInitialServiceGroupValue(n)}),a.Pb(),a.Fc(5,"\n                       "),a.Pb(),a.Fc(6,"\n                   ")}if(2&e){const e=t.$implicit,n=a.Zb();a.Hc("\n                       ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                       \xa0 \xa0\n                       "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null)}}function Vs(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                       "),a.Qb(1,"span",34),a.Lb(2,"i",35),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                           "),a.Qb(6,"i",36),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n                       "),a.Pb(),a.Fc(8,"\n                       "),a.Qb(9,"label"),a.Fc(10,"\n                           "),a.Qb(11,"input",37),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                           "),a.Lb(13,"span",38),a.Fc(14,"\n                       "),a.Pb(),a.Fc(15,"\n                   ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                       \xa0\n                       ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                       \xa0 \xa0\n                       "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function $s(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                       "),a.Qb(1,"span",34),a.Lb(2,"i",39),a.Pb(),a.Fc(3,"\n                       \xa0\n                       "),a.Qb(4,"span"),a.Fc(5),a.Pb(),a.Fc(6,"\n                       \xa0 \xa0\n                       "),a.Qb(7,"a",31,32),a.Fc(9,"\n                           "),a.Qb(10,"img",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passServiceGroupValue(n)}),a.Pb(),a.Fc(11,"\n                       "),a.Pb(),a.Fc(12,"\n                       \xa0 \xa0\n                       "),a.Qb(13,"a"),a.Fc(14,"\n                           "),a.Qb(15,"i",36),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(16,"\n\n                       "),a.Pb(),a.Fc(17,"\n                       "),a.Qb(18,"label"),a.Fc(19,"\n                           "),a.Qb(20,"input",37),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(21,"\n                           "),a.Lb(22,"span",38),a.Fc(23,"\n                       "),a.Pb(),a.Fc(24,"\n                   ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(4),a.Ab(n.isSelectedGroupNode?"bg-danger":""),a.yb(1),a.Hc("\n                           ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                       "),a.yb(2),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function zs(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",40,41),a.Xb("click",function(){return a.wc(e),a.Zb().close()}),a.Fc(2,"\xd7"),a.Pb()}}function Ws(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",40,42),a.Xb("click",function(){return a.wc(e),a.Zb().close()}),a.Fc(2,"\xd7"),a.Pb()}}function Ys(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                    "),a.Qb(2,"input",56,57),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb(3).onSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb(3);a.yb(2),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,3,e.text),"\n                                ")}}function _s(e,t){if(1&e&&(a.Qb(0,"div",54),a.Fc(1,"\n                        "),a.Qb(2,"table"),a.Fc(3,"\n                            "),a.Qb(4,"tr"),a.Fc(5,"\n                                "),a.Dc(6,Ys,6,5,"td",55),a.Fc(7,"\n                            "),a.Pb(),a.Fc(8,"\n                        "),a.Pb(),a.Fc(9,"\n                    "),a.Pb()),2&e){const e=a.Zb(2);a.yb(6),a.hc("ngForOf",e.rbSelections)}}function Js(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                    "),a.Qb(2,"input",59,57),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb(3).onSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb(3);a.yb(2),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,3,e.text),"\n                                ")}}function ea(e,t){if(1&e&&(a.Qb(0,"div",58),a.Fc(1,"\n                        "),a.Qb(2,"table"),a.Fc(3,"\n                            "),a.Qb(4,"tr"),a.Fc(5,"\n                                "),a.Dc(6,Js,6,5,"td",55),a.Fc(7,"\n                            "),a.Pb(),a.Fc(8,"\n                        "),a.Pb(),a.Fc(9,"\n                    "),a.Pb()),2&e){const e=a.Zb(2);a.yb(6),a.hc("ngForOf",e.rbSelections)}}function ta(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                        "),a.Qb(2,"div",45),a.Fc(3,"\n                            "),a.Qb(4,"label",60),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                            "),a.Qb(8,"div",61),a.Fc(9,"\n                                "),a.Lb(10,"input",62),a.Fc(11,"\n                            "),a.Pb(),a.Fc(12,"\n                        "),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"div",45),a.Fc(15,"\n                            "),a.Qb(16,"label",63),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                            "),a.Qb(20,"div",61),a.Fc(21,"\n                                "),a.Qb(22,"input",64,65),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).productGroupModel.name=t}),a.Pb(),a.Fc(24,"\n                                "),a.Qb(25,"div",66),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                            "),a.Pb(),a.Fc(29,"\n                        "),a.Pb(),a.Fc(30,"\n                        "),a.Qb(31,"div",45),a.Fc(32,"\n                            "),a.Qb(33,"label",67),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                            "),a.Qb(37,"div",61),a.Fc(38,"\n                                "),a.Qb(39,"input",68,69),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).productGroupModel.nameTranslation=t}),a.Pb(),a.Fc(41,"\n                                "),a.Qb(42,"div",66),a.Fc(43),a.ac(44,"translate"),a.Pb(),a.Fc(45,"\n                            "),a.Pb(),a.Fc(46,"\n                        "),a.Pb(),a.Fc(47,"\n\n\n                        "),a.Qb(48,"div",45),a.Fc(49,"\n                            "),a.Qb(50,"label",70),a.Fc(51),a.ac(52,"translate"),a.Pb(),a.Fc(53,"\n                            "),a.Qb(54,"div",71),a.Fc(55,"\n                                "),a.Qb(56,"textarea",72,73),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).productGroupModel.description=t}),a.Pb(),a.Fc(58,"\n                            "),a.Pb(),a.Fc(59,"\n                        "),a.Pb(),a.Fc(60,"\n                    "),a.Pb()}if(2&e){const e=a.vc(23),t=a.vc(40),n=a.Zb(2);a.yb(5),a.Gc(a.bc(6,12,"ParentGroup")),a.yb(5),a.ic("value",n.productGroupParentlabel),a.yb(7),a.Hc(" ",a.bc(18,14,"ArabicName"),""),a.yb(5),a.hc("ngModel",n.productGroupModel.name),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(27,16,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(35,18,"EnglishName"),""),a.yb(5),a.hc("ngModel",n.productGroupModel.nameTranslation),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(44,20,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(52,22,"Remark"),""),a.yb(5),a.hc("ngModel",n.productGroupModel.description)}}function na(e,t){if(1&e&&(a.Qb(0,"option",110),a.Fc(1),a.ac(2,"translate"),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.value),a.yb(1),a.Gc(a.bc(2,2,e.text))}}function ia(e,t){if(1&e&&(a.Qb(0,"option",110),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}function ca(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",45),a.Fc(1,"\n                            "),a.Qb(2,"label",111),a.Fc(3),a.ac(4,"translate"),a.Pb(),a.Fc(5,"\n                            "),a.Qb(6,"div",78),a.Fc(7,"\n\n                                "),a.Qb(8,"select",112,113),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(3).measuringId=t}),a.Fc(10,"\n                                    "),a.Dc(11,ia,2,2,"option",102),a.ac(12,"translateObjects"),a.Fc(13,"\n                                "),a.Pb(),a.Fc(14,"\n                                "),a.Qb(15,"div",66),a.Fc(16),a.ac(17,"translate"),a.Pb(),a.Fc(18,"\n\n                            "),a.Pb(),a.Fc(19,"\n                        "),a.Pb()}if(2&e){const e=a.vc(9),t=a.Zb(3);a.yb(3),a.Hc("",a.bc(4,5,"MeasuringUnit")," "),a.yb(5),a.hc("ngModel",t.measuringId),a.yb(3),a.hc("ngForOf",a.bc(12,7,t.csList)),a.yb(4),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(17,9,"Select"),"\n                                ")}}function sa(e,t){if(1&e&&(a.Qb(0,"option",110),a.Fc(1),a.Pb()),2&e){const e=t.$implicit;a.hc("value",e.id),a.yb(1),a.Gc(e.name)}}const aa=function(){return{standalone:!0}};function oa(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                        "),a.Qb(2,"div",45),a.Fc(3,"\n                            "),a.Qb(4,"label",74),a.Fc(5),a.ac(6,"translate"),a.Pb(),a.Fc(7,"\n                            "),a.Qb(8,"div",75),a.Fc(9,"\n                                "),a.Lb(10,"input",76),a.Fc(11,"\n                            "),a.Pb(),a.Fc(12,"\n                        "),a.Pb(),a.Fc(13,"\n                        "),a.Qb(14,"div",45),a.Fc(15,"\n                            "),a.Qb(16,"label",77),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n                            "),a.Qb(20,"div",78),a.Fc(21,"\n                                "),a.Qb(22,"input",79,80),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.code=t}),a.Pb(),a.Fc(24,"\n                                "),a.Qb(25,"div",66),a.Fc(26),a.ac(27,"translate"),a.Pb(),a.Fc(28,"\n                            "),a.Pb(),a.Fc(29,"\n                        "),a.Pb(),a.Fc(30,"\n                        "),a.Qb(31,"div",45),a.Fc(32,"\n                            "),a.Qb(33,"label",81),a.Fc(34),a.ac(35,"translate"),a.Pb(),a.Fc(36,"\n                            "),a.Qb(37,"div",78),a.Fc(38,"\n                                "),a.Qb(39,"label"),a.Fc(40,"\n                                    "),a.Qb(41,"input",82,83),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.controlled=t}),a.Pb(),a.Fc(43,"\n                                    "),a.Lb(44,"span",38),a.Fc(45,"\n                                "),a.Pb(),a.Fc(46,"\n                            "),a.Pb(),a.Fc(47,"\n                        "),a.Pb(),a.Fc(48,"\n                        "),a.Qb(49,"div",45),a.Fc(50,"\n                            "),a.Qb(51,"label",84),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n                            "),a.Qb(55,"div",75),a.Fc(56,"\n                                "),a.Qb(57,"input",85,86),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.name=t}),a.Pb(),a.Fc(59,"\n                                "),a.Qb(60,"div",66),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n                            "),a.Pb(),a.Fc(64,"\n                        "),a.Pb(),a.Fc(65,"\n                        "),a.Qb(66,"div",45),a.Fc(67,"\n                            "),a.Qb(68,"label",87),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n                            "),a.Qb(72,"div",75),a.Fc(73,"\n                                "),a.Qb(74,"input",88,89),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.nameTranslation=t}),a.Pb(),a.Fc(76,"\n                                "),a.Qb(77,"div",66),a.Fc(78),a.ac(79,"translate"),a.Pb(),a.Fc(80,"\n                            "),a.Pb(),a.Fc(81,"\n                        "),a.Pb(),a.Fc(82,"\n                        "),a.Qb(83,"div",45),a.Fc(84,"\n                            "),a.Qb(85,"label",90),a.Fc(86),a.ac(87,"translate"),a.Pb(),a.Fc(88,"\n                            "),a.Qb(89,"div",91),a.Fc(90,"\n                                "),a.Qb(91,"input",92,93),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.minLevel=t}),a.Pb(),a.Fc(93,"\n                                "),a.Qb(94,"div",66),a.Fc(95),a.ac(96,"translate"),a.Pb(),a.Fc(97,"\n                            "),a.Pb(),a.Fc(98,"\n                            "),a.Lb(99,"div",91),a.Fc(100,"\n                            "),a.Qb(101,"label",94),a.Fc(102),a.ac(103,"translate"),a.Pb(),a.Fc(104,"\n                            "),a.Qb(105,"div",91),a.Fc(106,"\n                                "),a.Qb(107,"input",95,96),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.maxLevel=t}),a.Pb(),a.Fc(109,"\n                                "),a.Qb(110,"div",66),a.Fc(111),a.ac(112,"translate"),a.Pb(),a.Fc(113,"\n                            "),a.Pb(),a.Fc(114,"\n                        "),a.Pb(),a.Fc(115,"\n                        "),a.Qb(116,"div",45),a.Fc(117,"\n\n                            "),a.Qb(118,"label",97),a.Fc(119),a.ac(120,"translate"),a.Pb(),a.Fc(121,"\n                            "),a.Qb(122,"div",78),a.Fc(123,"\n                                "),a.Qb(124,"p-calendar",98),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.expiryDate=t}),a.Pb(),a.Fc(125,"\n                            "),a.Pb(),a.Fc(126,"\n\n                            "),a.Qb(127,"label",97),a.Fc(128),a.ac(129,"translate"),a.Pb(),a.Fc(130,"\n                            "),a.Qb(131,"div",78),a.Fc(132,"\n                                "),a.Qb(133,"p-calendar",98),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.manufacturingDate=t}),a.Pb(),a.Fc(134,"\n                            "),a.Pb(),a.Fc(135,"\n\n                        "),a.Pb(),a.Fc(136,"\n                        "),a.Qb(137,"div",45),a.Fc(138,"\n                            "),a.Qb(139,"label",99),a.Fc(140),a.ac(141,"translate"),a.Pb(),a.Fc(142,"\n                            "),a.Qb(143,"div",78),a.Fc(144,"\n                                "),a.Qb(145,"select",100,101),a.Xb("change",function(){a.wc(e);const t=a.vc(147);return a.Zb(2).fillUnits(t.value)})("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.unitType=t}),a.Fc(148,"\n                                    "),a.Dc(149,na,3,4,"option",102),a.ac(150,"translateObjects"),a.Fc(151,"\n                                "),a.Pb(),a.Fc(152,"\n                                "),a.Qb(153,"div",66),a.Fc(154),a.ac(155,"translate"),a.Pb(),a.Fc(156,"\n                            "),a.Pb(),a.Fc(157,"\n                        "),a.Pb(),a.Fc(158,"\n                        "),a.Dc(159,ca,20,11,"div",103),a.Fc(160,"\n                        "),a.Qb(161,"div",45),a.Fc(162,"\n                            "),a.Qb(163,"label",104),a.Fc(164),a.ac(165,"translate"),a.Pb(),a.Fc(166,"\n                            "),a.Qb(167,"div",78),a.Fc(168,"\n                                "),a.Qb(169,"select",105,106),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.vendorId=t}),a.Fc(171,"\n                                    "),a.Dc(172,sa,2,2,"option",102),a.ac(173,"translateObjects"),a.Fc(174,"\n                                "),a.Pb(),a.Fc(175,"\n                            "),a.Pb(),a.Fc(176,"\n                        "),a.Pb(),a.Fc(177,"\n                        "),a.Qb(178,"div",45),a.Fc(179,"\n                            "),a.Qb(180,"label",107),a.Fc(181),a.ac(182,"translate"),a.Pb(),a.Fc(183,"\n                            "),a.Qb(184,"div",71),a.Fc(185,"\n                                "),a.Qb(186,"textarea",108,109),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb(2).model.description=t}),a.Pb(),a.Fc(188,"\n                            "),a.Pb(),a.Fc(189,"\n                        "),a.Pb(),a.Fc(190,"\n                    "),a.Pb()}if(2&e){const e=a.vc(23),t=a.vc(58),n=a.vc(75),i=a.vc(92),c=a.vc(108),s=a.vc(146),o=a.Zb(2);a.yb(5),a.Gc(a.bc(6,47,"ParentGroup")),a.yb(5),a.hc("ngModel",o.productGroupParentlabel),a.yb(7),a.Hc(" ",a.bc(18,49,"Code"),""),a.yb(5),a.hc("ngModel",o.model.code),a.yb(3),a.hc("hidden",e.valid||e.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(27,51,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(35,53,"Controlled"),""),a.yb(7),a.hc("ngModel",o.model.controlled),a.yb(11),a.Hc(" ",a.bc(53,55,"ArabicName"),""),a.yb(5),a.hc("ngModel",o.model.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(62,57,"RequiredField"),"\n                                "),a.yb(8),a.Gc(a.bc(70,59,"EnglishName")),a.yb(5),a.hc("ngModel",o.model.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(79,61,"RequiredField"),"\n                                "),a.yb(8),a.Hc(" ",a.bc(87,63,"MinLevel"),""),a.yb(5),a.hc("ngModel",o.model.minLevel),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(96,65,"RequiredField"),"\n                                "),a.yb(7),a.Hc(" ",a.bc(103,67,"MaxLevel"),""),a.yb(5),a.hc("ngModel",o.model.maxLevel),a.yb(3),a.hc("hidden",c.valid||c.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(112,69,"RequiredField"),"\n                                "),a.yb(8),a.Hc("  ",a.bc(120,71,"ExpiryDate"),""),a.yb(5),a.hc("ngModel",o.model.expiryDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",a.lc(87,aa)),a.yb(4),a.Hc(" ",a.bc(129,73,"ManufacturingDate")," "),a.yb(5),a.hc("ngModel",o.model.manufacturingDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",a.lc(88,aa)),a.yb(7),a.Hc("",a.bc(141,75,"Units")," "),a.yb(5),a.hc("ngModel",o.model.unitType),a.yb(4),a.hc("ngForOf",a.bc(150,77,o.unitList)),a.yb(4),a.hc("hidden",s.valid||s.pristine),a.yb(1),a.Hc("\n                                    ",a.bc(155,79,"Select"),"\n                                "),a.yb(5),a.hc("ngIf",o.hideUnit),a.yb(5),a.Hc(" ",a.bc(165,81,"Vendor")," "),a.yb(5),a.hc("ngModel",o.model.vendorId),a.yb(3),a.hc("ngForOf",a.bc(173,83,o.vendors)),a.yb(9),a.Hc(" ",a.bc(182,85,"Remark")," "),a.yb(5),a.hc("ngModel",o.model.description)}}function ra(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",114),a.Xb("click",function(){return a.wc(e),a.Zb(2).saveProductGroup()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1),t=a.Zb();a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Hc("",a.bc(2,2,"Save")," ")}}function la(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",115),a.Xb("click",function(){return a.wc(e),a.Zb(2).cancelProductGroup()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}2&e&&(a.yb(1),a.Hc("",a.bc(2,1,"Cancel")," "))}function da(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",116),a.Xb("click",function(){return a.wc(e),a.Zb(2).saveProduct()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}if(2&e){a.Zb();const e=a.vc(1),t=a.Zb();a.hc("disabled",!e.valid||!t.enableSaveBtn&&!t.isClinicAdmin),a.yb(1),a.Hc("",a.bc(2,2,"Save")," ")}}function ba(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",115),a.Xb("click",function(){return a.wc(e),a.Zb(2).cancelProduct()}),a.Fc(1),a.ac(2,"translate"),a.Pb()}2&e&&(a.yb(1),a.Gc(a.bc(2,1,"Cancel")))}function ua(e,t){if(1&e&&(a.Qb(0,"form",43,44),a.Fc(2,"\n                "),a.Qb(3,"div",45),a.Fc(4,"\n                    "),a.Dc(5,_s,10,1,"div",46),a.Fc(6,"\n                    "),a.Dc(7,ea,10,1,"div",47),a.Fc(8,"\n                "),a.Pb(),a.Fc(9,"\n                "),a.Qb(10,"div",48),a.Fc(11,"\n                    "),a.Dc(12,ta,61,24,"div",0),a.Fc(13,"\n\n                    "),a.Dc(14,oa,191,89,"div",0),a.Fc(15,"\n                "),a.Pb(),a.Fc(16,"\n\n\n                "),a.Qb(17,"div",49),a.Fc(18,"\n                    "),a.Qb(19,"div",50),a.Fc(20,"\n                        "),a.Dc(21,ra,3,4,"button",51),a.Fc(22,"\n                        "),a.Dc(23,la,3,3,"button",52),a.Fc(24,"\n                        "),a.Dc(25,da,3,4,"button",53),a.Fc(26,"\n                        "),a.Dc(27,ba,3,3,"button",52),a.Fc(28,"\n\n                    "),a.Pb(),a.Fc(29,"\n                "),a.Pb(),a.Fc(30,"\n            "),a.Pb()),2&e){const e=a.Zb();a.yb(5),a.hc("ngIf",!e.isRoot),a.yb(2),a.hc("ngIf",e.isRoot),a.yb(5),a.hc("ngIf",e.isProductGroupSeleced),a.yb(2),a.hc("ngIf",e.isProductSeleced),a.yb(7),a.hc("ngIf",e.isProductGroupSeleced),a.yb(2),a.hc("ngIf",e.isProductGroupSeleced),a.yb(2),a.hc("ngIf",e.isProductSeleced),a.yb(2),a.hc("ngIf",e.isProductSeleced)}}let ha=(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.selectedLang="ar",this.leafType="Product",this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.onCancel=new a.n,this.selectProductstTab=!0,this.selectedClinicId="0",this.hideUnit=!0,this.active=!0,this.showProgress=!1,this.isSelectedGroupNode=!1,this.isProductGroupSeleced=!0,this.isProductSeleced=!1,this.groupName="",this.childName="",this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedAction=1,this.txtHeaderModal="",this.productGroupId="new",this.productId="new",this.utilityClass=new Nt.a,this.titl="",this.model={},this.productGroupModel={},this.hideModal=!1,this.treeDataSourceItems=[],this.groupsOnlyTreeDataSourceItems=[],this.productGroupParentId="",this.productType="",this.productGroupParentlabel="",this.isRoot=!1,this.checkParentChildren=!0,this.isEdit=!1,this.toPrintDiv="print-section",this.heightList=[],this.weightList=[],this.volumeList=[],this.unitList=[],this.vendors=[],this.csList=[],this.Medical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"Medical Products",value:"Medical",type:"Medical",productGroupType:"Medical",parentGroupId:1,parentName:"Medical Product",children:[]},this.NonMedical={label:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u063a\u064a\u0631 \u0627\u0644\u0637\u0628\u064a\u0629",labelTranslation:"Non Medical Products",value:"NonMedical",type:"NonMedical",productGroupType:"NonMedical",parentGroupId:2,parentName:"NonMedical Product",children:[]},this.userType="",this.isClinicAdmin=!1,this.lstToTranslated=[],this.translateObjects=new Ge.a(this.localStorage)}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product"),this.translate.onLangChange.subscribe(e=>{this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product")}),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.getProductsGroupsForTree(),this.loadProductWrapper(),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision))}loadProductWrapper(){let e=this;this.clinicService.getProductUnits().subscribe(function(t){e.heightList=t.heights,e.weightList=t.weights,e.volumeList=t.volumes,e.unitList=t.unites,e.vendors=t.vendors},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}fillUnits(e){"HeightsUnit"==e?(this.csList=this.heightList,this.hideUnit=!0):"WeightsUnit"==e?(this.csList=this.weightList,this.hideUnit=!0):"VolumesUnit"==e?(this.csList=this.volumeList,this.hideUnit=!0):"NumbersUnit"==e&&(this.hideUnit=!1)}fillMesauringUnits(e,t){"HeightsUnit"==e?(this.csList=this.heightList,this.measuringId=t.heightUnitId):"WeightsUnit"==e?(this.csList=this.weightList,this.measuringId=t.weightUnitId):(this.csList=this.volumeList,this.measuringId=t.volumeUnitId)}updateModelWithMeasuringID(){"VolumesUnit"==this.model.unitType?this.model.volumeUnitId=this.measuringId:"HeightsUnit"==this.model.unitType?this.model.heightUnitId=this.measuringId:this.model.weightUnitId=this.measuringId}getModelWithMeasuringID(){return"VolumesUnit"==this.model.unitType?(this.model.volumeUnitId=this.measuringId,this.model.volumeUnitId):"HeightsUnit"==this.model.unitType?(this.model.heightUnitId=this.measuringId,this.model.heightUnitId):(this.model.weightUnitId=this.measuringId,this.model.weightUnitId)}getProductsGroupsForTree(){let e=this;e.showProgress=!0,this.clinicService.getProductsGroupsForTreeView(e.selectedClinicId).subscribe(function(t){e.Medical.children=[],e.NonMedical.children=[];for(let n of t)null==n.parent&&"Medical"==n.productGroupType?e.Medical.children.push(n):null==n.parent&&"NonMedical"==n.productGroupType&&e.NonMedical.children.push(n);e.treeDataSourceItems.push(e.Medical),e.treeDataSourceItems.push(e.NonMedical),e.translateObjects.transform(e.treeDataSourceItems,"",null,e.lstToTranslated)},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}nodeSelect(e){}nodeUnselect(e){}displayPopup(e){let t=this;"productsgroup"==e.type.toLocaleLowerCase()?(this.productGroupId=e.data,this.isProductGroupSeleced=!0,this.isProductSeleced=!1,this.isRoot=!0,this.isEdit=!0,t.selectedAction=1,this.txtHeaderModal=this.translate.instant("ProductGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ProductGroup"),this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product")}),this.btnServicesGroup.nativeElement.click(),"new"!=this.productGroupId.toString().toLowerCase()&&this.clinicService.getProductGroupById(this.productGroupId,this.checkParentChildren).subscribe(function(e){t.productGroupModel=e,t.productGroupParentId=t.productGroupModel.parentGroupId,"undefined"==t.productGroupModel.parentName?t.productGroupParentlabel=t.productGroupModel.productGroupType:null!=t.productGroupModel.parentName&&(t.productGroupParentlabel="ar"==t.selectedLang?t.productGroupModel.parentName:t.productGroupModel.parentNameTranslation)},function(e){t.toastr.error(e,"")},function(){t.showProgress=!1})):"product"==e.type.toLocaleLowerCase()&&(this.isProductGroupSeleced=!1,this.isProductSeleced=!0,this.productId=e.data,t.selectedAction=2,this.txtHeaderModal=this.translate.instant("Product"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Product"),this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product")}),this.isRoot=!0,this.isEdit=!0,this.btnServicesGroup.nativeElement.click(),"new"!=this.productId.toString().toLowerCase()&&this.clinicService.getProductById(this.productId).subscribe(function(e){t.model=e,t.hideUnit="NumbersUnit"!=t.model.unitName,t.model.expiryDate&&(t.model.expiryDate=t.utilityClass.getUtcDateFromString(t.model.expiryDate)),t.model.manufacturingDate&&(t.model.manufacturingDate=t.utilityClass.getUtcDateFromString(t.model.manufacturingDate)),t.productGroupParentId=t.model.parentGroupId,t.fillMesauringUnits(e.unitType,e),t.productGroupParentlabel="ar"==t.selectedLang?t.model.parentGroupName:t.model.parentGroupNameTranslation},function(e){t.toastr.error(e,"")},function(){t.showProgress=!1})),this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}],t.selctedNode=e}passServiceGroupValue(e){let t=this;t.clearProductGroupWithParent(),this.productGroupModel.productGroupType=e.productGroupType,this.productType=e.productGroupType,t.productGroupParentId=e.data,t.productGroupParentlabel=e.label,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("ProductGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ProductGroup"),this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product")}),t.isRoot=!1,this.isProductGroupSeleced=!0,this.isProductSeleced=!1,t.selctedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}passInitialServiceGroupValue(e){let t=this;t.clearProductGroupWithParent(),this.productGroupModel.productGroupType=e.productGroupType,this.productType=e.productGroupType,t.productGroupParentId=e.data,t.productGroupParentlabel=e.label,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("ProductGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ProductGroup"),this.groupName=this.translate.instant("ProductsGroup"),this.childName=this.translate.instant("Product")}),t.isRoot=!0,this.isProductGroupSeleced=!0,this.isProductSeleced=!1,t.selctedNode=e,this.rbSelections=[{value:1,text:this.groupName},{value:2,text:this.childName}]}changeActivation(e,t){let n=this;"product"==e.type.toLocaleLowerCase()?(n.showProgress=!0,n.clinicService.updateProductActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"productsgroup"==e.type.toLocaleLowerCase()&&(n.showProgress=!0,n.clinicService.updateProductsGroupActiveState({id:e.id,isActive:t.target.checked},n.checkParentChildren).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}onproductGroupIdValue(e){}onproductIdValue(e){this.productId=e}onSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isProductGroupSeleced=!0,this.isProductSeleced=!1,this.txtHeaderModal=this.translate.instant("ProductGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("ProductGroup")})):2==this.selectedAction&&(this.isProductGroupSeleced=!1,this.isProductSeleced=!0,this.txtHeaderModal=this.translate.instant("Product"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Product")}))}saveProductGroup(){let e=this;e.productGroupModel.parentGroupId=e.productGroupParentId,e.productGroupModel.clinicId=e.selectedClinicId,this.productGroupModel.id>0?this.clinicService.updateProductGroup(this.productGroupModel).subscribe(function(t){e.selctedNode.label=t.name,e.selctedNode.labelTranslation=t.nameTranslation;let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearProductGroupWithParent()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createProductGroup(this.productGroupModel).subscribe(function(t){""==e.productGroupParentId?e.treeDataSourceItems.push(t):e.selctedNode.children.push(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearProductGroupWithParent()},function(t){e.toastr.error(t,""),e.clearProductGroupWithParent(),e.showProgress=!1},function(){e.showProgress=!1})}clearProductGroupWithParent(){this.productGroupModel={},this.productGroupId="new",this.productGroupParentId="",this.productGroupParentlabel="",this.active=!1,setTimeout(()=>this.active=!0,0)}saveProduct(){let e=this;e.model.parentGroupId=e.productGroupParentId,this.model.expiryDate&&(this.model.expiryDate=this.utilityClass.getUtcDate(this.model.expiryDate)),this.model.manufacturingDate&&(this.model.manufacturingDate=this.utilityClass.getUtcDate(this.model.manufacturingDate)),this.model.id>0?(this.updateModelWithMeasuringID(),this.clinicService.updateProduct(this.model).subscribe(function(t){e.model=t,e.selctedNode.label=t.name,e.selctedNode.labelTranslation=t.nameTranslation,e.model.expiryDate=e.utilityClass.getUtcDateFromString(e.model.expiryDate),e.model.manufacturingDate=e.utilityClass.getUtcDateFromString(e.model.manufacturingDate);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearWithParent(),e.btnCloseProduct.nativeElement.click()},function(t){e.toastr.error(t,""),e.showProgress=!1,e.clearWithParent(),e.btnCloseProduct.nativeElement.click()},function(){e.showProgress=!1})):(this.updateModelWithMeasuringID(),this.clinicService.createProduct(this.model).subscribe(function(t){e.selctedNode.children.push(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearWithParent(),e.btnCloseProduct.nativeElement.click()},function(t){e.toastr.error(t,""),e.showProgress=!1,e.clearWithParent(),e.btnCloseProduct.nativeElement.click()},function(){e.showProgress=!1}))}clearWithParent(){this.model={},this.csList=[],this.measuringId="",this.productType="new",this.productGroupParentId="",this.productGroupParentlabel="",setTimeout(()=>this.active=!0,0)}cancelProductGroup(){this.clearProductGroupWithParent(),this.btnCloseProductsGroup.nativeElement.click()}cancelProduct(){this.clearWithParent(),this.btnCloseProduct.nativeElement.click()}close(){this.clearProductGroupWithParent(),this.clearWithParent()}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-products"]],viewQuery:function(e,t){if(1&e&&(a.Lc(Rs,1),a.Lc(xs,1),a.Lc(Zs,1),a.Lc(Bs,1),a.Lc(Hs,1),a.Lc(Os,1),a.Lc(Es,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnServicesGroup=e.first),a.uc(e=a.Yb())&&(t.btnCloseProductsGroup=e.first),a.uc(e=a.Yb())&&(t.btnCloseProduct=e.first),a.uc(e=a.Yb())&&(t.btnServices=e.first),a.uc(e=a.Yb())&&(t.tree=e.first),a.uc(e=a.Yb())&&(t.rbselection=e.first),a.uc(e=a.Yb())&&(t.selection=e.first)}},outputs:{onCancel:"onCancel"},decls:106,vars:32,consts:[[4,"ngIf"],[1,"row"],[3,"isProductsSelected",4,"ngIf"],[1,"row","nopadding"],[1,"NBbreadcrumb"],[1,""],[1,"row","well"],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange","onSelect","onNodeSelect"],["tree",""],["pTemplate","Medical"],["pTemplate","NonMedical"],["pTemplate","Product"],["pTemplate","ProductsGroup"],["type","button","data-toggle","modal","data-target","#ServicesGroupPopup",2,"display","none"],["btnServicesGroup",""],["id","ServicesGroupPopup","role","dialog",1,"modal","fade",3,"hidden"],["ServicesGroupPopup",""],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","class","close","data-dismiss","modal",3,"click",4,"ngIf"],[1,"modal-title"],["class","form-horizontal","name","servicegroupForm",4,"ngIf"],[3,"isProductsSelected"],["data-toggle","modal","data-target","#ServicesGroupPopup"],["AddServiceGroup",""],["src","images/addImage.png",3,"click"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnCloseProductsGroup",""],["btnCloseProduct",""],["name","servicegroupForm",1,"form-horizontal"],["servicegroupForm","ngForm"],[1,"form-group"],["class","col-sm-offset-4 col-md-6",4,"ngIf"],["class","col-sm-offset-3 col-md-6",4,"ngIf"],[1,"modal-body"],[1,"modal-footer"],[1,"text-center"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"col-sm-offset-4","col-md-6"],[4,"ngFor","ngForOf"],["type","radio","name","radiogroup",3,"value","checked","change"],["i",""],[1,"col-sm-offset-3","col-md-6"],["type","radio","name","radiogroup","disabled","",3,"value","checked","change"],["for","txtServiceGroupParentName",1,"control-label","col-md-3"],[1,"col-md-9"],["id","txtServiceGroupParentName","name","txtServiceGroupParentName","disabled","",1,"form-control",3,"value"],["for","txtServiceGroupName",1,"control-label","col-md-3"],["id","txtServiceGroupName","name","txtServiceGroupName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceGroupName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtServiceGroupNameTranslation",1,"control-label","col-md-3"],["id","txtServiceGroupNameTranslation","name","txtServiceGroupNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceGroupNameTranslation","ngModel"],["for","txtRemark",1,"control-label","col-md-3"],[1,"col-md-6"],["id","txtRemark","name","txtRemark",1,"form-control",3,"ngModel","ngModelChange"],["txtRemark","ngModel"],["for","txtServiceParentName",1,"control-label","col-md-2"],[1,"col-md-10"],["id","txtServiceParentName","name","txtServiceParentName","disabled","",1,"form-control",3,"ngModel"],["for","txtServiceCode",1,"control-label","col-md-2"],[1,"col-md-4"],["id","txtServiceCode","name","txtServiceCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtServiceCode","ngModel"],["for","txProductControlled",1,"control-label","col-md-2"],["id","txProductControlled","name","txProductControlled","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["txProductControlled","ngModel"],["for","txtName",1,"control-label","col-md-2"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-2"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","minLevel",1,"control-label","col-md-2"],[1,"col-md-2"],["type","text","required","","min","1","step","1","pattern","\\d+","id","minLevel","name","minLevel",1,"form-control",3,"ngModel","ngModelChange"],["minLevel","ngModel"],["for","maxLevel",1,"control-label","col-md-2"],["type","text","min","1","required","","step","1","pattern","\\d+","id","maxLevel","name","maxLevel",1,"form-control",3,"ngModel","ngModelChange"],["maxLevel","ngModel"],["for","expiryDate",1,"control-label","col-md-2"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","ngModelOptions","ngModelChange"],["for","ddlUnitType",1,"control-label","col-md-2"],["id","ddlUnitType","name","ddlUnitType","required","",1,"form-control",3,"ngModel","change","ngModelChange"],["dMeasureType","ngModel","ddlUnitType",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["for","ddlVendor",1,"control-label","col-md-2"],["name","ddlVendor","id","ddlVendor",1,"form-control",3,"ngModel","ngModelChange"],["ddlVendor","ngModel"],["for","prodRemark",1,"control-label","col-md-2"],["id","prodRemark","name","prodRemark",1,"form-control",3,"ngModel","ngModelChange"],["prodRemark","ngModel"],[3,"value"],["for","ddlMeasureType",1,"control-label","col-md-2"],["id","ddlMeasureType","name","ddlMeasureType",1,"form-control",3,"ngModel","ngModelChange"],["ddlMeasureType","ngModel"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(a.Fc(0,"\n"),a.Dc(1,Xs,4,0,"div",0),a.Fc(2,"\n\n"),a.Qb(3,"div",1),a.Fc(4,"\n    "),a.Dc(5,Us,1,1,"clinic-tab",2),a.Fc(6,"\n    "),a.Dc(7,qs,1,1,"shared-tabs",2),a.Fc(8,"\n    "),a.Qb(9,"div",3),a.Fc(10,"\n        "),a.Qb(11,"div",1),a.Fc(12,"\n            "),a.Qb(13,"div",4),a.Fc(14,"\n                "),a.Qb(15,"a"),a.Fc(16),a.ac(17,"translate"),a.Pb(),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n\n        "),a.Pb(),a.Fc(21,"\n\n\n\n        "),a.Qb(22,"div",5),a.Fc(23,"\n            \xa0\n            "),a.Qb(24,"div",6),a.Fc(25,"\n               "),a.Qb(26,"div"),a.Fc(27,"\n                   "),a.Qb(28,"button",7),a.Xb("click",function(){return t.expandAll()}),a.Fc(29),a.ac(30,"translate"),a.Pb(),a.Fc(31,"\n                   "),a.Qb(32,"button",7),a.Xb("click",function(){return t.collapseAll()}),a.Fc(33),a.ac(34,"translate"),a.Pb(),a.Fc(35,"\n                   "),a.Lb(36,"print-page",8),a.Fc(37,"\n               "),a.Pb(),a.Fc(38,"\n                "),a.Lb(39,"br"),a.Fc(40,"\n                "),a.Qb(41,"div",3),a.Fc(42,"\n                    "),a.Qb(43,"div",9),a.Fc(44,"\n                        "),a.Qb(45,"div",10),a.Fc(46,"\n                            "),a.Lb(47,"i",11),a.Fc(48,"\n                            "),a.Qb(49,"input",12),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(50,"translate"),a.Pb(),a.Fc(51,"\n                        "),a.Pb(),a.Fc(52,"\n                    "),a.Pb(),a.Fc(53,"\n                "),a.Pb(),a.Fc(54,"\n            "),a.Pb(),a.Fc(55,"\n           \n        "),a.Pb(),a.Fc(56,"\n\n        "),a.Qb(57,"div",13),a.Fc(58,"\n            \n           "),a.Qb(59,"div",6),a.Fc(60,"\n               "),a.Qb(61,"p-tree",14,15),a.Xb("selectionChange",function(e){return t.selectedGroup=e})("onSelect",function(){return t.nodeSelect()})("onNodeSelect",function(e){return t.nodeSelect(e)}),a.ac(63,"filterbynameorcode"),a.Fc(64,"\n                   "),a.Dc(65,js,7,3,"ng-template",16),a.Fc(66,"\n                   "),a.Dc(67,Ks,7,3,"ng-template",17),a.Fc(68,"\n                   "),a.Dc(69,Vs,16,5,"ng-template",18),a.Fc(70,"\n                   "),a.Dc(71,$s,25,10,"ng-template",19),a.Fc(72,"\n               "),a.Pb(),a.Fc(73,"\n\n           "),a.Pb(),a.Fc(74,"\n        "),a.Pb(),a.Fc(75),a.Pb(),a.Fc(76,"\n"),a.Pb(),a.Fc(77,"\n\n"),a.Fc(78,"\n"),a.Lb(79,"button",20,21),a.Fc(81,"\n"),a.Qb(82,"div",22,23),a.Fc(84,"\n    "),a.Qb(85,"div",24),a.Fc(86,"\n        "),a.Fc(87,"\n        "),a.Qb(88,"div",25),a.Fc(89,"\n            "),a.Fc(90,"\n            "),a.Qb(91,"div",26),a.Fc(92,"\n                "),a.Dc(93,zs,3,0,"button",27),a.Fc(94,"\n                "),a.Dc(95,Ws,3,0,"button",27),a.Fc(96,"\n                "),a.Qb(97,"h4",28),a.Fc(98),a.Pb(),a.Fc(99,"\n            "),a.Pb(),a.Fc(100,"\n\n            "),a.Dc(101,ua,31,8,"form",29),a.Fc(102,"\n        "),a.Pb(),a.Fc(103,"\n    "),a.Pb(),a.Fc(104,"\n\n"),a.Pb(),a.Fc(105,"\n\n")),2&e&&(a.yb(1),a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(17,18,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(19,20,"Products"),"\n            "),a.yb(11),a.Gc(a.bc(30,22,"ExpandAll")),a.yb(4),a.Gc(a.bc(34,24,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(50,26,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(12),a.hc("value",a.dc(63,28,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedGroup),a.yb(14),a.Hc("\n        ",t.titl,"\n\n    "),a.yb(7),a.hc("hidden",t.hideModal),a.yb(11),a.hc("ngIf",t.isProductGroupSeleced),a.yb(2),a.hc("ngIf",t.isProductSeleced),a.yb(3),a.Gc(t.txtHeaderModal),a.yb(3),a.hc("ngIf",t.active))},directives:[i.k,rt.a,c.b,c.f,c.i,O.a,E.g,S.a,y,Oe.a,c.q,c.g,c.h,i.j,c.o,c.a,c.l,kt.a,c.p,c.j,c.r],pipes:[d.c,De.a,Ge.a],encapsulation:2}),e})();var pa=n("NEZy");function ga(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let ma=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.fileNameTxt=this.translate.instant("TemplateName"),this.btnUploadText=this.translate.instant("UploadTemplate"),this.fileNameUploadTxt=this.translate.instant("Template"),this.fileType=!1,this.showDocumentDetails=!0,this.type="TemplateFileType",this.patientAttachementId="",this.isTemplatesSelected=!0,this.showProgress=!0}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID")}updateModel(e){this.model=e,this.patientAttachementId=this.model.id}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-templates"]],decls:17,vars:16,consts:[[4,"ngIf"],[3,"isTemplatesSelected"],[1,"row","nopadding"],[1,"row","NBbreadcrumb"],[3,"btnUploadText","parentId","title","fileNameUploadTxt","showDocumentDetails","fileType","parentType","fileNameTxt","onModelUpdated"]],template:function(e,t){1&e&&(a.Fc(0,"\n"),a.Dc(1,ga,4,0,"div",0),a.Fc(2,"\n    "),a.Lb(3,"clinic-tab",1),a.Fc(4,"\n    "),a.Qb(5,"div",2),a.Fc(6,"\n        "),a.Qb(7,"div",3),a.Fc(8,"\n            "),a.Qb(9,"a"),a.Fc(10),a.ac(11,"translate"),a.Pb(),a.Fc(12),a.ac(13,"translate"),a.Pb(),a.Fc(14,"\n    "),a.Pb(),a.Fc(15,"\n\n\n\n"),a.Qb(16,"documents",4),a.Xb("onModelUpdated",function(e){return t.updateModel(e)}),a.Pb()),2&e&&(a.yb(1),a.hc("ngIf",t.showProgress),a.yb(2),a.hc("isTemplatesSelected",t.isTemplatesSelected),a.yb(7),a.Gc(a.bc(11,12,"Clinic")),a.yb(2),a.Hc(" \xa0/\n            ",a.bc(13,14,"Templates"),"\n        "),a.yb(4),a.hc("btnUploadText",t.btnUploadText)("parentId",t.selectedClinicId)("title",t.Template)("fileNameUploadTxt",t.fileNameUploadTxt)("showDocumentDetails",t.showDocumentDetails)("fileType",t.fileType)("parentType",t.type)("fileNameTxt",t.fileNameTxt))},directives:[i.k,y,pa.a,S.a],pipes:[d.c],encapsulation:2}),e})();var Fa=n("I5S5");const va=["lineChart"],fa=["feedbackDoughnutChart"],Pa=["visitsBarChart"];function ya(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}let Qa=(()=>{class e{constructor(e,t,n,i){this.clinicService=e,this.storage=t,this.toastr=n,this.translate=i,this.selectDashboardTab=!0,this.model={},this.showProgress=!1,this.userType="",this.isClinicAdmin=!1,this.options={title:{display:!1,fontSize:15},legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}},this.barChartOptions={title:{display:!1,fontSize:15},scales:{xAxes:[{display:!0}],yAxes:[{ticks:{beginAtZero:!0},display:!0}]}},this.lineChartOptions={title:{display:!1,fontSize:15},legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{ticks:{beginAtZero:!0},display:!1}]}}}ngOnInit(){let e=this;e.model={},e.showProgress=!0,this.clinicId=this.storage.retrieve("ClinicId"),this.userType=this.storage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.clinicService.getClinicDashboardWrapper(this.clinicId).subscribe(function(t){e.model=t,e.fillAppointmentsChart(t),e.fillFeedbackChart(t),e.fillVisitsandPatientsChart(t),e.lineChart.reinit(),e.feedbackDoughnutChart.reinit(),e.visitsBarChart.reinit()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}fillAppointmentsChart(e){let t=e.weekAppoitment.data;this.weekAppointments={labels:e.weekAppoitment.labels,datasets:[{data:t,fill:!1,borderColor:"#4bc0c0",backgroundColor:"#4bc0c0",label:"",radius:5,hoverRadius:5}]},Math.max.apply(null,t)<5&&(this.options={title:{display:!1,fontSize:15},legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]}})}fillFeedbackChart(e){let t=this.translate.instant("Replied"),n=this.translate.instant("Pending");this.feedbackDoughnutdata={labels:[t,n],datasets:[{data:[e.repliedFeedback,e.pendingFeedback],backgroundColor:["#36A2EB","#FF6384"],hoverBackgroundColor:["#5db0e8","#f198aa"]}]}}fillVisitsandPatientsChart(e){let t=e.visitsInYear.data,n=e.patientsInYear.data;this.visitsBarChartData={labels:e.visitsInYear.labels,datasets:[{label:this.translate.instant("NoOfVisits"),backgroundColor:"#42A5F5",borderColor:"#1E88E5",data:t},{label:this.translate.instant("NoOfPatients"),backgroundColor:"#9CCC65",borderColor:"#7CB342",data:n}]}}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(A.a),a.Kb(r.a),a.Kb(l.b),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-dashboard"]],viewQuery:function(e,t){if(1&e&&(a.Lc(va,1),a.Lc(fa,1),a.Lc(Pa,1)),2&e){let e;a.uc(e=a.Yb())&&(t.lineChart=e.first),a.uc(e=a.Yb())&&(t.feedbackDoughnutChart=e.first),a.uc(e=a.Yb())&&(t.visitsBarChart=e.first)}},decls:199,vars:42,consts:[[4,"ngIf"],[1,"row"],[3,"isDashboardSelected"],[1,"row",2,"padding","13px"],[1,"NBbreadcrumb"],[1,"col-md-6"],[1,"row","well","containerDetails"],[1,"col-md-3","col-sm-3","col-xs-6"],[1,"iconOuter","docIconStyle"],[1,"nav-icon"],[1,"fa","fa-user-md","iconStyle"],[1,"col-md-9","col-sm-9","col-xs-6","details"],[1,"docTile"],[1,"status"],[1,"iconOuter","appointmentIconStyle"],[1,"fa","fa-phone","iconStyle"],[1,"w-meta-title",2,"text-transform","lowercase"],[1,"iconOuter","paymentIconStyle"],[1,"fa","fa-credit-card","iconStyle"],[1,"iconOuter","refundIconStyle"],[1,"fa","fa-undo","iconStyle"],[1,"col-md-6","col-sm-12"],[1,"mini-stats-widget"],[1,"mini-stats-top"],[1,"mini-stats-label","activeDoc","upperCase"],[1,"mini-stats-chart"],["type","bar",3,"data","options"],["visitsBarChart",""],[1,"mini-stats-widget","full-block-mini-chart"],[1,"mini-stats-chart",2,"height","260px","max-height","260px"],["type","doughnut",3,"data"],["feedbackDoughnutChart",""],["type","line",3,"data","options"],["lineChart",""]],template:function(e,t){1&e&&(a.Dc(0,ya,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Lb(4,"clinic-tab",2),a.Fc(5,"\n\n    "),a.Qb(6,"div",1),a.Fc(7,"\n        "),a.Qb(8,"div",3),a.Fc(9,"\n            "),a.Qb(10,"div",4),a.Fc(11,"\n                "),a.Qb(12,"a"),a.Fc(13),a.ac(14,"translate"),a.Pb(),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17,"\n\n        "),a.Pb(),a.Fc(18,"\n    "),a.Pb(),a.Fc(19,"\n\n    "),a.Qb(20,"div",1),a.Fc(21,"\n        "),a.Qb(22,"div",5),a.Fc(23,"\n            "),a.Qb(24,"div",6),a.Fc(25,"\n                "),a.Qb(26,"div",7),a.Fc(27,"\n                    "),a.Qb(28,"div",8),a.Fc(29,"\n                        "),a.Qb(30,"span",9),a.Lb(31,"i",10),a.Pb(),a.Fc(32,"\n                    "),a.Pb(),a.Fc(33,"\n                "),a.Pb(),a.Fc(34,"\n                "),a.Qb(35,"div",11),a.Fc(36,"\n                    "),a.Qb(37,"div",12),a.Fc(38),a.ac(39,"translate"),a.Pb(),a.Fc(40,"\n                    "),a.Qb(41,"div",13),a.Fc(42),a.Pb(),a.Fc(43,"\n                "),a.Pb(),a.Fc(44,"\n            "),a.Pb(),a.Fc(45,"\n        "),a.Pb(),a.Fc(46,"\n        "),a.Qb(47,"div",5),a.Fc(48,"\n            "),a.Qb(49,"div",6),a.Fc(50,"\n                "),a.Qb(51,"div",7),a.Fc(52,"\n                    "),a.Qb(53,"div",14),a.Fc(54,"\n                        "),a.Qb(55,"span",9),a.Lb(56,"i",15),a.Pb(),a.Fc(57,"\n                    "),a.Pb(),a.Fc(58,"\n                "),a.Pb(),a.Fc(59,"\n                "),a.Qb(60,"div",11),a.Fc(61,"\n                    "),a.Qb(62,"div",12),a.Fc(63),a.ac(64,"translate"),a.Pb(),a.Fc(65,"\n                    "),a.Qb(66,"div",13),a.Fc(67),a.Pb(),a.Fc(68,"\n                    "),a.Qb(69,"div"),a.Fc(70,"\n                        "),a.Qb(71,"span",16),a.Fc(72),a.ac(73,"translate"),a.Pb(),a.Fc(74,"\n                    "),a.Pb(),a.Fc(75,"\n                "),a.Pb(),a.Fc(76,"\n            "),a.Pb(),a.Fc(77,"\n        "),a.Pb(),a.Fc(78,"\n    "),a.Pb(),a.Fc(79,"\n\n    "),a.Qb(80,"div",1),a.Fc(81,"\n        "),a.Qb(82,"div",5),a.Fc(83,"\n            "),a.Qb(84,"div",6),a.Fc(85,"\n                "),a.Qb(86,"div",7),a.Fc(87,"\n                    "),a.Qb(88,"div",17),a.Fc(89,"\n                        "),a.Qb(90,"span",9),a.Lb(91,"i",18),a.Pb(),a.Fc(92,"\n                    "),a.Pb(),a.Fc(93,"\n                "),a.Pb(),a.Fc(94,"\n                "),a.Qb(95,"div",11),a.Fc(96,"\n                    "),a.Qb(97,"div",12),a.Fc(98),a.ac(99,"translate"),a.Pb(),a.Fc(100,"\n                    "),a.Qb(101,"div",13),a.Fc(102),a.Pb(),a.Fc(103,"\n                "),a.Pb(),a.Fc(104,"\n            "),a.Pb(),a.Fc(105,"\n        "),a.Pb(),a.Fc(106,"\n        "),a.Qb(107,"div",5),a.Fc(108,"\n            "),a.Qb(109,"div",6),a.Fc(110,"\n                "),a.Qb(111,"div",7),a.Fc(112,"\n                    "),a.Qb(113,"div",19),a.Fc(114,"\n                        "),a.Qb(115,"span",9),a.Lb(116,"i",20),a.Pb(),a.Fc(117,"\n                    "),a.Pb(),a.Fc(118,"\n                "),a.Pb(),a.Fc(119,"\n                "),a.Qb(120,"div",11),a.Fc(121,"\n                    "),a.Qb(122,"div",12),a.Fc(123),a.ac(124,"translate"),a.Pb(),a.Fc(125,"\n                    "),a.Qb(126,"div",13),a.Fc(127),a.Pb(),a.Fc(128,"\n\n                "),a.Pb(),a.Fc(129,"\n            "),a.Pb(),a.Fc(130,"\n        "),a.Pb(),a.Fc(131,"\n\n\n    "),a.Pb(),a.Fc(132,"\n\n    "),a.Qb(133,"div",1),a.Fc(134,"\n        "),a.Qb(135,"div",21),a.Fc(136,"\n            "),a.Qb(137,"div",22),a.Fc(138,"\n                "),a.Qb(139,"div",23),a.Fc(140,"\n                    "),a.Qb(141,"span",24),a.Fc(142),a.ac(143,"translate"),a.Pb(),a.Fc(144,"\n                "),a.Pb(),a.Fc(145,"\n                "),a.Qb(146,"div",25),a.Fc(147,"\n                    "),a.Lb(148,"p-chart",26,27),a.Fc(150,"\n                "),a.Pb(),a.Fc(151,"\n                "),a.Fc(152,"\n            "),a.Pb(),a.Fc(153,"\n        "),a.Pb(),a.Fc(154,"\n        "),a.Qb(155,"div",21),a.Fc(156,"\n            "),a.Qb(157,"div",28),a.Fc(158,"\n                "),a.Qb(159,"div",23),a.Fc(160,"\n                    "),a.Qb(161,"span",24),a.Fc(162),a.ac(163,"translate"),a.Pb(),a.Fc(164,"\n                "),a.Pb(),a.Fc(165,"\n                "),a.Qb(166,"div",29),a.Fc(167,"\n                    "),a.Lb(168,"p-chart",30,31),a.Fc(170,"\n                "),a.Pb(),a.Fc(171,"\n                "),a.Fc(172,"\n            "),a.Pb(),a.Fc(173,"\n        "),a.Pb(),a.Fc(174,"\n\n    "),a.Pb(),a.Fc(175,"\n\n    "),a.Qb(176,"div",1),a.Fc(177,"\n        "),a.Qb(178,"div",21),a.Fc(179,"\n            "),a.Qb(180,"div",22),a.Fc(181,"\n                "),a.Qb(182,"div",23),a.Fc(183,"\n                    "),a.Qb(184,"span",24),a.Fc(185),a.ac(186,"translate"),a.Pb(),a.Fc(187,"\n                "),a.Pb(),a.Fc(188,"\n                "),a.Qb(189,"div",25),a.Fc(190,"\n                    "),a.Lb(191,"p-chart",32,33),a.Fc(193,"\n                "),a.Pb(),a.Fc(194,"\n            "),a.Pb(),a.Fc(195,"\n        "),a.Pb(),a.Fc(196,"\n    "),a.Pb(),a.Fc(197,"\n\n"),a.Pb(),a.Fc(198,"\n\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("isDashboardSelected",t.selectDashboardTab),a.yb(9),a.Gc(a.bc(14,22,"SystemAdmin")),a.yb(2),a.Hc(" \xa0/\n                ",a.bc(16,24,"Dashboard"),"\n            "),a.yb(23),a.Hc(" ",a.bc(39,26,"ActiveDoctors"),""),a.yb(4),a.Gc(t.model.activeDoctorsCount),a.yb(21),a.Hc(" ",a.bc(64,28,"TodaysAppointment"),""),a.yb(4),a.Gc(t.model.todayAppointmentsCount),a.yb(5),a.Ic("",a.bc(73,30,"Seen")," : ",t.model.seenAppoitmentCount,""),a.yb(26),a.Hc(" ",a.bc(99,32,"TodaysPayments"),""),a.yb(4),a.Gc(t.model.paymentsAmount),a.yb(21),a.Hc(" ",a.bc(124,34,"TodaysRefunds"),""),a.yb(4),a.Gc(t.model.refundAmount),a.yb(15),a.Gc(a.bc(143,36,"NoOfVisitsAndPatients")),a.yb(6),a.hc("data",t.visitsBarChartData)("options",t.barChartOptions),a.yb(14),a.Gc(a.bc(163,38,"Feedback")),a.yb(6),a.hc("data",t.feedbackDoughnutdata),a.yb(17),a.Gc(a.bc(186,40,"WeekAppointments")),a.yb(6),a.hc("data",t.weekAppointments)("options",t.options))},directives:[i.k,y,Fa.b,S.a],pipes:[d.c],encapsulation:2}),e})();function Sa(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",7),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",8),a.Fc(22,"\n                "),a.Qb(23,"input",9,10),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnose.code=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",11),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",5),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",12),a.Fc(39,"\n                "),a.Qb(40,"input",13,14),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnose.name=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",11),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",15),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",12),a.Fc(56,"\n                "),a.Qb(57,"input",16,17),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnose.nameTranslation=t}),a.Pb(),a.Fc(59,"\n                "),a.Qb(60,"div",11),a.Fc(61),a.ac(62,"translate"),a.Pb(),a.Fc(63,"\n            "),a.Pb(),a.Fc(64,"\n        "),a.Pb(),a.Fc(65,"        \n        "),a.Qb(66,"div",4),a.Fc(67,"\n            "),a.Qb(68,"label",18),a.Fc(69),a.ac(70,"translate"),a.Pb(),a.Fc(71,"\n            "),a.Qb(72,"div",19),a.Fc(73,"\n                "),a.Qb(74,"label"),a.Fc(75,"\n                    "),a.Qb(76,"input",20,21),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnose.infective=t}),a.Pb(),a.Fc(78,"\n                    "),a.Lb(79,"span",22),a.Fc(80,"\n                "),a.Pb(),a.Fc(81,"\n            "),a.Pb(),a.Fc(82,"\n        "),a.Pb(),a.Fc(83,"\n        "),a.Qb(84,"div",4),a.Fc(85,"\n            "),a.Qb(86,"label",23),a.Fc(87),a.ac(88,"translate"),a.Pb(),a.Fc(89,"\n            "),a.Qb(90,"div",12),a.Fc(91,"\n                "),a.Qb(92,"textarea",24),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnose.description=t}),a.Pb(),a.Fc(93,"\n            "),a.Pb(),a.Fc(94,"\n        "),a.Pb(),a.Fc(95,"\n    "),a.Pb(),a.Fc(96,"\n    "),a.Qb(97,"div",25),a.Fc(98,"\n        "),a.Qb(99,"div",26),a.Fc(100,"\n            "),a.Qb(101,"button",27),a.Xb("click",function(){return a.wc(e),a.Zb().saveDiagnosis()}),a.Fc(102),a.ac(103,"translate"),a.Pb(),a.Fc(104,"\n            "),a.Qb(105,"button",28),a.Xb("click",function(){return a.wc(e),a.Zb().cancelDiagnose()}),a.Fc(106),a.ac(107,"translate"),a.Pb(),a.Fc(108,"\n        "),a.Pb(),a.Fc(109,"\n    "),a.Pb(),a.Fc(110,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.vc(58),c=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,21,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",c.selectedParentGroupName,"\n            "),a.yb(6),a.Hc(" ",a.bc(19,23,"Code"),""),a.yb(5),a.hc("ngModel",c.selectedDiagnose.code),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,25,"RequiredField"),"\n                "),a.yb(8),a.Gc(a.bc(36,27,"ArabicName")),a.yb(5),a.hc("ngModel",c.selectedDiagnose.name),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                   ",a.bc(45,29,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,31,"EnglishName"),""),a.yb(5),a.hc("ngModel",c.selectedDiagnose.nameTranslation),a.yb(3),a.hc("hidden",i.valid||i.pristine),a.yb(1),a.Hc("\n                  ",a.bc(62,33,"RequiredField"),"\n                "),a.yb(8),a.Hc("",a.bc(70,35,"Infective")," "),a.yb(7),a.hc("ngModel",c.selectedDiagnose.infective),a.yb(11),a.Hc(" ",a.bc(88,37,"Remark"),""),a.yb(5),a.hc("ngModel",c.selectedDiagnose.description),a.yb(9),a.hc("disabled",!e.valid||!c.enableSaveBtn&&!c.isClinicAdmin),a.yb(1),a.Gc(a.bc(103,39,"Save")),a.yb(4),a.Gc(a.bc(107,41,"Cancel"))}}let Ca=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.clinicService=t,this.translate=n,this.localStorage=i,this.selectedDiagnoseId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onDiagnoseChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectDiagnosisTab=!0,this.active=!0,this.showProgress=!1,this.selectedDiagnose={id:0},this.selectedLang="ar"}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedDiagnoseId&&""!=this.selectedDiagnoseId){let e=this;e.showProgress=!0,this.clinicService.getDiagnoseById(e.selectedDiagnoseId).subscribe(function(t){e.selectedDiagnose=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveDiagnosis(){let e=this;e.showProgress=!0,this.selectedDiagnose.parentGroupId=this.selectedParentGroupId,this.selectedDiagnose.id>0?this.clinicService.updateDiagnose(this.selectedDiagnose).subscribe(function(t){e.onIsNew.emit(!1),e.onDiagnoseChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1,e.clearControl()},function(){e.showProgress=!1}):this.clinicService.createDiagnose(this.selectedDiagnose).subscribe(function(t){e.onIsNew.emit(!0),e.onDiagnoseChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedDiagnose={id:0},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelDiagnose(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(A.a),a.Kb(d.d),a.Kb(r.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-diagnose"]],inputs:{selectedDiagnoseId:"selectedDiagnoseId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onDiagnoseChanged:"onDiagnoseChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageDiagnoseForm",4,"ngIf"],["name","manageDiagnoseForm",1,"form-horizontal"],["manageDiagnoseForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-6"],["for","txtDiagnoseCode",1,"control-label","col-md-3"],[1,"col-md-4"],["id","txtDiagnoseCode","name","txtDiagnoseCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtDiagnoseCode","ngModel"],[1,"alert","alert-danger",3,"hidden"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtDiagnoseInfective",1,"control-label","col-md-3"],[1,"col-md-3"],["id","ChkIsInfective","name","ChkIsInfective","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["ChkIsInfective","ngModel"],[1,"lbl"],["for","txtDiagnoseRemark",1,"control-label","col-md-3"],["id","txtDiagnoseRemark","name","txtDiagnoseRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,Sa,111,43,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i,c.a],pipes:[d.c],encapsulation:2}),e})();function wa(e,t){if(1&e){const e=a.Rb();a.Qb(0,"form",1,2),a.Fc(2,"\n    "),a.Qb(3,"div",3),a.Fc(4,"\n        "),a.Qb(5,"div",4),a.Fc(6,"\n            "),a.Qb(7,"label",5),a.Fc(8),a.ac(9,"translate"),a.Pb(),a.Fc(10,"\n            "),a.Qb(11,"div",6),a.Fc(12),a.Pb(),a.Fc(13,"\n        "),a.Pb(),a.Fc(14,"\n        "),a.Qb(15,"div",4),a.Fc(16,"\n            "),a.Qb(17,"label",5),a.Fc(18),a.ac(19,"translate"),a.Pb(),a.Fc(20,"\n            "),a.Qb(21,"div",7),a.Fc(22,"\n                "),a.Qb(23,"input",8,9),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnosisGroup.name=t}),a.Pb(),a.Fc(25,"\n                "),a.Qb(26,"div",10),a.Fc(27),a.ac(28,"translate"),a.Pb(),a.Fc(29,"\n            "),a.Pb(),a.Fc(30,"\n        "),a.Pb(),a.Fc(31,"\n        "),a.Qb(32,"div",4),a.Fc(33,"\n            "),a.Qb(34,"label",11),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n            "),a.Qb(38,"div",7),a.Fc(39,"\n                "),a.Qb(40,"input",12,13),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnosisGroup.nameTranslation=t}),a.Pb(),a.Fc(42,"\n                "),a.Qb(43,"div",10),a.Fc(44),a.ac(45,"translate"),a.Pb(),a.Fc(46,"\n            "),a.Pb(),a.Fc(47,"\n        "),a.Pb(),a.Fc(48,"\n        "),a.Qb(49,"div",4),a.Fc(50,"\n            "),a.Qb(51,"label",14),a.Fc(52),a.ac(53,"translate"),a.Pb(),a.Fc(54,"\n            "),a.Qb(55,"div",7),a.Fc(56,"\n                "),a.Qb(57,"textarea",15),a.Xb("ngModelChange",function(t){return a.wc(e),a.Zb().selectedDiagnosisGroup.description=t}),a.Pb(),a.Fc(58,"\n            "),a.Pb(),a.Fc(59,"\n        "),a.Pb(),a.Fc(60,"\n    "),a.Pb(),a.Fc(61,"\n    "),a.Qb(62,"div",16),a.Fc(63,"\n        "),a.Qb(64,"div",17),a.Fc(65,"\n            "),a.Qb(66,"button",18),a.Xb("click",function(){return a.wc(e),a.Zb().saveDiagnosisGroup()}),a.Fc(67),a.ac(68,"translate"),a.Pb(),a.Fc(69,"\n            "),a.Qb(70,"button",19),a.Xb("click",function(){return a.wc(e),a.Zb().cancelDiagnosisGroup()}),a.Fc(71),a.ac(72,"translate"),a.Pb(),a.Fc(73,"\n        "),a.Pb(),a.Fc(74,"\n    "),a.Pb(),a.Fc(75,"\n"),a.Pb()}if(2&e){const e=a.vc(1),t=a.vc(24),n=a.vc(41),i=a.Zb();a.yb(8),a.Hc(" ",a.bc(9,15,"ParentGroup"),""),a.yb(4),a.Hc("\n                ",i.selectedParentGroupName,"\n            "),a.yb(6),a.Gc(a.bc(19,17,"ArabicName")),a.yb(5),a.hc("ngModel",i.selectedDiagnosisGroup.name),a.yb(3),a.hc("hidden",t.valid||t.pristine),a.yb(1),a.Hc("\n                    ",a.bc(28,19,"RequiredField"),"\n                "),a.yb(8),a.Gc(a.bc(36,21,"EnglishName")),a.yb(5),a.hc("ngModel",i.selectedDiagnosisGroup.nameTranslation),a.yb(3),a.hc("hidden",n.valid||n.pristine),a.yb(1),a.Hc("\n                    ",a.bc(45,23,"RequiredField"),"\n                "),a.yb(8),a.Hc(" ",a.bc(53,25,"Remark"),""),a.yb(5),a.hc("ngModel",i.selectedDiagnosisGroup.description),a.yb(9),a.hc("disabled",!e.valid||!i.enableSaveBtn&&!i.isClinicAdmin),a.yb(1),a.Gc(a.bc(68,27,"Save")),a.yb(4),a.Gc(a.bc(72,29,"Cancel"))}}let Ia=(()=>{class e{constructor(e,t,n,i){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.selectedDiagnosisGroupId="",this.selectedParentGroupId="",this.selectedParentGroupName="",this.isClinicAdmin=!1,this.enableSaveBtn=!1,this.onDiagnosisGroupChanged=new a.n,this.onIsNew=new a.n,this.onCancel=new a.n,this.selectDiagnosisTab=!0,this.active=!0,this.showProgress=!1,this.selectedDiagnosisGroup={},this.selectedLang="ar"}ngOnInit(){this.selectedClinicId=this.localStorage.retrieve("ClinicID")}ngOnChanges(e){if(this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.selectedDiagnosisGroupId&&""!=this.selectedDiagnosisGroupId){let e=this;e.showProgress=!0,this.clinicService.getDiagnosisGroupById(e.selectedDiagnosisGroupId).subscribe(function(t){e.selectedDiagnosisGroup=t,e.selectedParentGroupId=t.parentGroupId,e.selectedParentGroupName="ar"==e.selectedLang?t.parentGroupName:t.parentGroupNameTranslation},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clearControl()}saveDiagnosisGroup(){let e=this;e.showProgress=!0,this.selectedDiagnosisGroup.parentGroupId=this.selectedParentGroupId,this.selectedDiagnosisGroup.clinicId=this.selectedClinicId,this.selectedDiagnosisGroup.id>0?this.clinicService.updateDiagnosisGroup(this.selectedDiagnosisGroup).subscribe(function(t){e.onIsNew.emit(!1),e.onDiagnosisGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1}):this.clinicService.createDiagnosisGroup(this.selectedDiagnosisGroup).subscribe(function(t){e.onIsNew.emit(!0),e.onDiagnosisGroupChanged.emit(t);let n=e.translate.instant("SavedSuccessfully");e.toastr.success(n,""),e.clearControl()},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}clearControl(){this.selectedDiagnosisGroup={},this.active=!1,setTimeout(()=>this.active=!0,0)}cancelDiagnosisGroup(){this.clearControl(),this.onCancel.emit()}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-manage-diagnosis-group"]],inputs:{selectedDiagnosisGroupId:"selectedDiagnosisGroupId",selectedParentGroupId:"selectedParentGroupId",selectedParentGroupName:"selectedParentGroupName",isClinicAdmin:"isClinicAdmin",enableSaveBtn:"enableSaveBtn"},outputs:{onDiagnosisGroupChanged:"onDiagnosisGroupChanged",onIsNew:"onIsNew",onCancel:"onCancel"},features:[a.wb],decls:1,vars:1,consts:[["class","form-horizontal","name","manageDiagnosisGroupForm",4,"ngIf"],["name","manageDiagnosisGroupForm",1,"form-horizontal"],["manageDiagnosisGroupForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","txtName",1,"control-label","col-md-3"],[1,"col-md-6"],[1,"col-md-9"],["id","txtName","name","txtName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtNameTranslation",1,"control-label","col-md-3"],["id","txtNameTranslation","name","txtNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtNameTranslation","ngModel"],["for","txtDiagnosisGroupRemark",1,"control-label","col-md-3"],["id","txtDiagnosisGroupRemark","name","txtDiagnosisGroupRemark",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&a.Dc(0,wa,76,31,"form",0),2&e&&a.hc("ngIf",t.active)},directives:[i.k,c.q,c.g,c.h,c.b,c.o,c.f,c.i],pipes:[d.c],encapsulation:2}),e})();const Ta=["btnAddDiagnosisGroup"],Ma=["btnClosePopup"];function Da(e,t){1&e&&(a.Qb(0,"div"),a.Fc(1,"\n    "),a.Lb(2,"loading"),a.Fc(3,"\n"),a.Pb())}function Ga(e,t){if(1&e&&a.Lb(0,"clinic-tab",30),2&e){const e=a.Zb();a.hc("isDiagnosisSelected",e.selectDiagnosisTab)}}function Aa(e,t){if(1&e&&a.Lb(0,"shared-tabs",30),2&e){const e=a.Zb();a.hc("isDiagnosisSelected",e.selectDiagnosisTab)}}function Na(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",31),a.Lb(2,"i",32),a.Pb(),a.Fc(3),a.Qb(4,"a"),a.Fc(5,"\n                                "),a.Qb(6,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(7,"\n\n                            "),a.Pb(),a.Fc(8,"\n                            "),a.Qb(9,"label"),a.Fc(10,"\n                                "),a.Qb(11,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(12,"\n                                "),a.Lb(13,"span",35),a.Fc(14,"\n                            "),a.Pb(),a.Fc(15,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(3),a.Hc("\n                            \xa0\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function ka(e,t){if(1&e){const e=a.Rb();a.Fc(0,"\n                            "),a.Qb(1,"span",31),a.Lb(2,"i",36),a.Pb(),a.Fc(3,"\n                            \xa0\n                            "),a.Fc(4),a.Qb(5,"a",37,8),a.Fc(7,"\n                                "),a.Qb(8,"img",38),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().passParentGroupInfo(n)}),a.Pb(),a.Fc(9,"\n                            "),a.Pb(),a.Fc(10,"\n                            \xa0 \xa0\n                            "),a.Qb(11,"a"),a.Fc(12,"\n                                "),a.Qb(13,"i",33),a.Xb("click",function(){a.wc(e);const n=t.$implicit;return a.Zb().displayPopup(n)}),a.Pb(),a.Fc(14,"\n\n                            "),a.Pb(),a.Fc(15,"\n                            "),a.Qb(16,"label"),a.Fc(17,"\n                                "),a.Qb(18,"input",34),a.Xb("click",function(n){a.wc(e);const i=t.$implicit;return a.Zb().changeActivation(i,n)}),a.Pb(),a.Fc(19,"\n                                "),a.Lb(20,"span",35),a.Fc(21,"\n                            "),a.Pb(),a.Fc(22,"\n                        ")}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(4),a.Hc("\n                            ","ar"===n.selectedLang?e.label:e.labelTranslation,"\n                            \xa0 \xa0\n                            "),a.yb(1),a.Cb("disabled",!n.enableAddRootBtn&&!n.isClinicAdmin||null),a.yb(6),a.Cb("disabled",!n.enableEditBtn&&!n.isClinicAdmin||null),a.yb(7),a.ic("disabled",n.enableActivateBtn||n.isClinicAdmin?"":"disabled"),a.hc("checked",e.isActive)}}function La(e,t){if(1&e){const e=a.Rb();a.Qb(0,"td"),a.Fc(1,"\n                                "),a.Qb(2,"input",39,40),a.Xb("change",function(){a.wc(e);const t=a.vc(3);return a.Zb().onCheckboxSelectionChange(t.value)}),a.Pb(),a.Fc(4),a.ac(5,"translate"),a.Pb()}if(2&e){const e=t.$implicit,n=a.Zb();a.yb(2),a.ic("disabled",n.enableCheckBox?"":"disabled"),a.hc("value",e.value)("checked",e.value==n.selectedAction),a.yb(2),a.Hc("",a.bc(5,4,e.text),"\n                            ")}}function Ra(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-diagnose",41),a.Xb("selectedDiagnoseIdChange",function(t){return a.wc(e),a.Zb().toSaveDiagnoseId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentDiagnosisGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentDiagnosisGroupName=t})("onDiagnoseChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeDiagnosisAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedDiagnoseId",e.toSaveDiagnoseId)("selectedParentGroupId",e.parentDiagnosisGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentDiagnosisGroupName)}}function xa(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div"),a.Fc(1,"\n                "),a.Qb(2,"clinic-manage-diagnosis-group",42),a.Xb("selectedDiagnosisGroupIdChange",function(t){return a.wc(e),a.Zb().toSaveDiagnosisGroupId=t})("selectedParentGroupIdChange",function(t){return a.wc(e),a.Zb().parentDiagnosisGroupId=t})("selectedParentGroupNameChange",function(t){return a.wc(e),a.Zb().parentDiagnosisGroupName=t})("onDiagnosisGroupChanged",function(t){return a.wc(e),a.Zb().updateSelectedNode(t)})("onIsNew",function(t){return a.wc(e),a.Zb().setIsNewValue(t)})("onCancel",function(){return a.wc(e),a.Zb().closeDiagnosisAndGroupsPopup()}),a.Pb(),a.Fc(3,"\n            "),a.Pb()}if(2&e){const e=a.Zb();a.yb(2),a.hc("selectedDiagnosisGroupId",e.toSaveDiagnosisGroupId)("selectedParentGroupId",e.parentDiagnosisGroupId)("isClinicAdmin",e.isClinicAdmin)("enableSaveBtn",e.enableSaveBtn)("selectedParentGroupName",e.parentDiagnosisGroupName)}}const Za=[{path:"account/:id",component:G},{path:"address/:id",component:R},{path:"EMRMaster/:id",component:Ke},{path:"EMRWizard/:id",component:_e},{path:"feedback/all/:id",component:nt},{path:"feedback/replyToFeedback/:id",component:ot},{path:"inventory/:id",component:$t},{path:"clinicInventory/doctorRequests/:id",component:qt},{path:"permissions",component:Yt},{path:"purchasing/all/:id",component:cn},{path:"purchasing/createOrder/:id/:bool/:proId",component:un},{path:"purchasing/receiveOrder/:id",component:vn},{path:"purchasing/orderDetails/:id",component:wn},{path:"reports/:id",component:Tn},{path:"news/all/:id",component:En},{path:"clinicNews/addNews/:id",component:Rn},{path:"settings/:id",component:qn},{path:"clinicStaff/:id",component:Kn},{path:"appointments/:id",component:bi},{path:"organizationMaster/:id",component:nc},{path:"diagnosis/:id",component:(()=>{class e{constructor(e,t,n,i,c){this.toastr=e,this.localStorage=t,this.clinicService=n,this.translate=i,this.accountService=c,this.leafType="Diagnose",this.userPermisions=new x.a,this.key=new Z.a,this.enableAddRootBtn=!1,this.enableEditBtn=!1,this.enableActivateBtn=!1,this.enableSaveBtn=!1,this.selectedLang="ar",this.selectDiagnosisTab=!0,this.active=!0,this.showProgress=!1,this.isDiagnosisGroupSelected=!0,this.isDiagnoseSelected=!1,this.diagnosisGroup="",this.diagnose="",this.rbSelections=[{value:1,text:this.diagnosisGroup},{value:2,text:this.diagnose}],this.selectedAction=1,this.txtHeaderModal="",this.toSaveDiagnosisGroupId="",this.toSaveDiagnoseId="",this.parentDiagnosisGroupId="",this.parentDiagnosisGroupName="",this.isRoot=!1,this.enableCheckBox=!1,this.toPrintDiv="print-section",this.lstToTranslated=[],this.userType="",this.isClinicAdmin=!1}ngOnInit(){this.selectedLang=this.localStorage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose"),this.translate.onLangChange.subscribe(e=>{this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose")}),this.rbSelections=[{value:1,text:this.diagnosisGroup},{value:2,text:this.diagnose}],this.selectedClinicId=this.localStorage.retrieve("ClinicID"),this.userType=this.localStorage.retrieve("UserType"),"ClinicAdmin"==this.userType&&(this.isClinicAdmin=!0),this.isClinicAdmin||(null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)),this.getDiagnosisGroupsForTree()}getDiagnosisGroupsForTree(){this.toSaveDiagnosisGroupId="",this.toSaveDiagnoseId="";let e=this;e.showProgress=!0,this.clinicService.getDiagnosisGroupsForTree(this.selectedClinicId).subscribe(function(t){e.treeDataSourceItems=t},function(t){e.toastr.error(t,""),e.showProgress=!1},function(){e.showProgress=!1})}expandAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!0)})}collapseAll(){this.treeDataSourceItems.forEach(e=>{this.expandRecursive(e,!1)})}expandRecursive(e,t){e.expanded=t,e.children&&e.children.forEach(e=>{this.expandRecursive(e,t)})}onCheckboxSelectionChange(e){this.selectedAction=e,1==this.selectedAction?(this.isDiagnosisGroupSelected=!0,this.isDiagnoseSelected=!1,this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose")})):2==this.selectedAction&&(this.isDiagnosisGroupSelected=!1,this.isDiagnoseSelected=!0,this.txtHeaderModal=this.translate.instant("Diagnose"),this.translate.onLangChange.subscribe(e=>{this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose"),this.txtHeaderModal=this.translate.instant("Diagnose")}))}displayPopup(e){"diagnose"==e.type.toLocaleLowerCase()?(this.isDiagnosisGroupSelected=!1,this.isDiagnoseSelected=!0,this.selectedAction=2,this.txtHeaderModal=this.translate.instant("Diagnose"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("Diagnose"),this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose")}),this.enableCheckBox=!1,this.isRoot=!1,this.rbSelections=[{value:1,text:this.diagnosisGroup},{value:2,text:this.diagnose}],this.toSaveDiagnoseId=e.data,this.btnAddDiagnosisGroup.nativeElement.click()):"diagnosisgroup"==e.type.toLocaleLowerCase()&&(this.isDiagnosisGroupSelected=!0,this.isDiagnoseSelected=!1,this.enableCheckBox=!1,this.isRoot=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose")}),this.rbSelections=[{value:1,text:this.diagnosisGroup},{value:2,text:this.diagnose}],this.toSaveDiagnosisGroupId=e.data,this.btnAddDiagnosisGroup.nativeElement.click()),this.selctedNode=e}passParentGroupInfo(e){this.parentDiagnosisGroupId=e.data,this.parentDiagnosisGroupName="ar"==this.selectedLang?e.label:e.labelTranslation,this.isDiagnosisGroupSelected=!0,this.isDiagnoseSelected=!1,this.selectedAction=1,this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.translate.onLangChange.subscribe(e=>{this.txtHeaderModal=this.translate.instant("DiagnosisGroup"),this.diagnosisGroup=this.translate.instant("DiagnosisGroup"),this.diagnose=this.translate.instant("Diagnose")}),this.rbSelections=[{value:1,text:this.diagnosisGroup},{value:2,text:this.diagnose}],null==e.data?(this.enableCheckBox=!1,this.isRoot=!0):(this.enableCheckBox=!0,this.isRoot=!1),this.isDiagnosisGroupSelected=!0,this.isDiagnoseSelected=!1,this.selctedNode=e}changeActivation(e,t){let n=this;"Diagnose"==e.type?(n.showProgress=!0,n.clinicService.updateDiagnoseActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){t.target.checked&&n.activateParents(e)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})):"diagnosisgroup"==e.type.toLocaleLowerCase()&&(n.showProgress=!0,n.clinicService.updateDiagnosisGroupActiveState({id:e.id,isActive:t.target.checked}).subscribe(function(i){e.isActive=t.target.checked,t.target.checked?null!=e.parent&&n.activateParents(e.parent):n.deActivateChildren(e,!1)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}activateParents(e){e.isActive=!0,null!=e.parent&&this.activateParents(e.parent)}deActivateChildren(e,t){e.isActive=t,e.children&&e.children.forEach(e=>{this.deActivateChildren(e,t)})}closeDiagnosisAndGroupsPopup(){this.toSaveDiagnosisGroupId="",this.toSaveDiagnoseId="",this.selectedNode={},this.btnClosePopup.nativeElement.click()}updateSelectedNode(e){let t=this;t.toSaveDiagnosisGroupId="",t.toSaveDiagnoseId="",e.data>0&&0==t.isNew?(t.selctedNode.label=e.label,t.selctedNode.labelTranslation=e.labelTranslation):null==t.parentDiagnosisGroupId?t.treeDataSourceItems.push(e):t.selctedNode.children.push(e)}setIsNewValue(e){this.isNew=e}handleUserInterfaceViews(e){if(null!=e.permissions)for(let t of e.permissions)t.permission.key==this.key.Coding&&((1==t.fullControl||t.add)&&(this.enableAddRootBtn=!0),(1==t.fullControl||t.edit)&&(this.enableEditBtn=!0),(1==t.fullControl||t.activate)&&(this.enableActivateBtn=!0),(t.fullControl||t.add||t.edit)&&(this.enableSaveBtn=!0))}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(l.b),a.Kb(r.a),a.Kb(A.a),a.Kb(d.d),a.Kb(u.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["clinic-diagnosis"]],viewQuery:function(e,t){if(1&e&&(a.Lc(Ta,1),a.Lc(Ma,1)),2&e){let e;a.uc(e=a.Yb())&&(t.btnAddDiagnosisGroup=e.first),a.uc(e=a.Yb())&&(t.btnClosePopup=e.first)}},decls:120,vars:34,consts:[[4,"ngIf"],[1,"row"],[3,"isDiagnosisSelected",4,"ngIf"],[1,"NBbreadcrumb"],[1,"row","well"],[1,""],["type","button","data-toggle","modal","data-target","#DiagnosisAndGroupsPopup",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-toggle","modal","data-target","#DiagnosisAndGroupsPopup",1,"hidden"],["btnAddDiagnosisGroup",""],["type","button",1,"btn","btn-primary",3,"click"],[3,"section"],[1,"row","nopadding"],[1,"col-md-5","nopadding"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],[1,"inputSearch","form-control",3,"placeholder","ngModel","ngModelChange"],["id","print-section",1,""],["selectionMode","single",3,"value","selection","selectionChange"],["pTemplate","Diagnose"],["pTemplate","DiagnosisGroup"],["id","DiagnosisAndGroupsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnClosePopup",""],[1,"modal-title"],[1,"form-group"],[1,"col-sm-offset-3","col-md-6"],[4,"ngFor","ngForOf"],[3,"isDiagnosisSelected"],[1,"nav-icon"],[1,"fa","fa-cube"],[1,"fa","fa-pencil","fa-2x",2,"color","#32bea6",3,"click"],["id","ChkIsActiveInGrid","name","ChkIsActiveInGrid","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"checked","disabled","click"],[1,"lbl"],[1,"fa","fa-cubes"],["data-toggle","modal","data-target","#DiagnosisAndGroupsPopup"],["src","images/addImage.png",3,"click"],["type","radio","name","radiogroup",3,"value","checked","disabled","change"],["checkbox",""],[3,"selectedDiagnoseId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedDiagnoseIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onDiagnoseChanged","onIsNew","onCancel"],[3,"selectedDiagnosisGroupId","selectedParentGroupId","isClinicAdmin","enableSaveBtn","selectedParentGroupName","selectedDiagnosisGroupIdChange","selectedParentGroupIdChange","selectedParentGroupNameChange","onDiagnosisGroupChanged","onIsNew","onCancel"]],template:function(e,t){1&e&&(a.Dc(0,Da,4,0,"div",0),a.Fc(1,"\n\n"),a.Qb(2,"div",1),a.Fc(3,"\n\n    "),a.Dc(4,Ga,1,1,"clinic-tab",2),a.Fc(5,"\n    "),a.Dc(6,Aa,1,1,"shared-tabs",2),a.Fc(7,"\n    "),a.Qb(8,"div",1),a.Fc(9,"\n            \n            "),a.Qb(10,"div",1),a.Fc(11,"\n                "),a.Qb(12,"div",3),a.Fc(13,"\n                    "),a.Qb(14,"a"),a.Fc(15),a.ac(16,"translate"),a.Pb(),a.Fc(17),a.ac(18,"translate"),a.Pb(),a.Fc(19,"\n\n            "),a.Pb(),a.Fc(20,"\n\n        "),a.Qb(21,"div"),a.Fc(22,"\n            "),a.Qb(23,"div",4),a.Fc(24,"\n                "),a.Qb(25,"div",5),a.Fc(26,"\n                    "),a.Qb(27,"button",6),a.Xb("click",function(){return t.passParentGroupInfo()}),a.Fc(28),a.ac(29,"translate"),a.Pb(),a.Fc(30,"\n                    "),a.Lb(31,"button",7,8),a.Fc(33,"\n                    "),a.Qb(34,"button",9),a.Xb("click",function(){return t.expandAll()}),a.Fc(35),a.ac(36,"translate"),a.Pb(),a.Fc(37,"\n                    "),a.Qb(38,"button",9),a.Xb("click",function(){return t.collapseAll()}),a.Fc(39),a.ac(40,"translate"),a.Pb(),a.Fc(41,"\n                    "),a.Lb(42,"print-page",10),a.Fc(43,"\n\n                "),a.Pb(),a.Fc(44,"\n                "),a.Lb(45,"br"),a.Fc(46,"\n                "),a.Qb(47,"div",11),a.Fc(48,"\n                    "),a.Qb(49,"div",12),a.Fc(50,"\n                        "),a.Qb(51,"div",13),a.Fc(52,"\n                            "),a.Lb(53,"i",14),a.Fc(54,"\n                            "),a.Qb(55,"input",15),a.Xb("ngModelChange",function(e){return t.filterString=e}),a.ac(56,"translate"),a.Pb(),a.Fc(57,"\n                        "),a.Pb(),a.Fc(58,"\n                    "),a.Pb(),a.Fc(59,"\n                "),a.Pb(),a.Fc(60,"\n           \n            "),a.Pb(),a.Fc(61,"\n            "),a.Lb(62,"br"),a.Fc(63,"\n            "),a.Qb(64,"div",16),a.Fc(65,"\n                \n                "),a.Qb(66,"div",4),a.Fc(67,"\n                    "),a.Qb(68,"p-tree",17),a.Xb("selectionChange",function(e){return t.selectedNode=e}),a.ac(69,"filterbynameorcode"),a.Fc(70,"\n                        "),a.Dc(71,Na,16,5,"ng-template",18),a.Fc(72,"\n                        "),a.Dc(73,ka,23,7,"ng-template",19),a.Fc(74,"\n                    "),a.Pb(),a.Fc(75,"\n                "),a.Pb(),a.Fc(76,"\n            "),a.Pb(),a.Fc(77,"\n        "),a.Pb(),a.Fc(78,"\n    "),a.Pb(),a.Fc(79,"\n"),a.Pb(),a.Fc(80,"\n\n"),a.Fc(81,"\n"),a.Qb(82,"div",20),a.Fc(83,"\n    "),a.Qb(84,"div",21),a.Fc(85,"\n        "),a.Fc(86,"\n        "),a.Qb(87,"div",22),a.Fc(88,"\n            "),a.Qb(89,"div",23),a.Fc(90,"\n                "),a.Qb(91,"button",24,25),a.Xb("click",function(){return t.closeDiagnosisAndGroupsPopup()}),a.Fc(93,"\xd7"),a.Pb(),a.Fc(94,"\n                "),a.Qb(95,"h4",26),a.Fc(96),a.Pb(),a.Fc(97,"\n            "),a.Pb(),a.Fc(98,"\n            "),a.Qb(99,"div",27),a.Fc(100,"\n                "),a.Qb(101,"div",28),a.Fc(102,"\n                    "),a.Qb(103,"table"),a.Fc(104,"\n                        "),a.Qb(105,"tr"),a.Fc(106,"\n                            "),a.Dc(107,La,6,6,"td",29),a.Fc(108,"\n                        "),a.Pb(),a.Fc(109,"\n                    "),a.Pb(),a.Fc(110,"\n                "),a.Pb(),a.Fc(111,"\n            "),a.Pb(),a.Fc(112,"\n            "),a.Dc(113,Ra,4,5,"div",0),a.Fc(114,"\n            "),a.Dc(115,xa,4,5,"div",0),a.Fc(116,"\n        "),a.Pb(),a.Fc(117,"\n    "),a.Pb(),a.Fc(118,"\n"),a.Pb(),a.Fc(119,"\n\n")),2&e&&(a.hc("ngIf",t.showProgress),a.yb(4),a.hc("ngIf",t.isClinicAdmin),a.yb(2),a.hc("ngIf",!t.isClinicAdmin),a.yb(9),a.Gc(a.bc(16,18,"Clinic")),a.yb(2),a.Hc(" \xa0/\n                    ",a.bc(18,20,"Diagnosis"),"\n                "),a.yb(10),a.ic("disabled",t.enableAddRootBtn||t.isClinicAdmin?"":"disabled"),a.yb(1),a.Gc(a.bc(29,22,"AddRootDiagnoseGroup")),a.yb(7),a.Gc(a.bc(36,24,"ExpandAll")),a.yb(4),a.Gc(a.bc(40,26,"CollapseAll")),a.yb(3),a.hc("section",t.toPrintDiv),a.yb(13),a.hc("placeholder",a.bc(56,28,"SearchByNameorCode"))("ngModel",t.filterString),a.yb(13),a.hc("value",a.dc(69,30,t.treeDataSourceItems,t.filterString,t.leafType))("selection",t.selectedNode),a.yb(28),a.Gc(t.txtHeaderModal),a.yb(11),a.hc("ngForOf",t.rbSelections),a.yb(6),a.hc("ngIf",t.isDiagnoseSelected),a.yb(2),a.hc("ngIf",t.isDiagnosisGroupSelected))},directives:[i.k,rt.a,c.b,c.f,c.i,O.a,E.g,i.j,S.a,y,Oe.a,Ca,Ia],pipes:[d.c,De.a],encapsulation:2}),e})()},{path:"services/:id",component:Ic},{path:"servicePackages/:id",component:Nc},{path:"servicePackageDetails/:id",component:qc},{path:"drugs/:id",component:ss},{path:"laboratoryTests/:id",component:Ps},{path:"radiologyTests/:id",component:Ls},{path:"products/:id",component:ha},{path:"templates/:id",component:ma},{path:"dashboard",component:Qa}];let Ba=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({imports:[[s.e.forChild(Za)],s.e]}),e})();var Ha=n("PCNd"),Oa=n("SuQF");let Ea=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({providers:[],imports:[[c.c,i.b,Ba,Ha.SharedModule,Oa.SecurityModule]]}),e})()}}]);