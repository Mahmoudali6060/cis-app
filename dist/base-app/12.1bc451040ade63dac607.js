(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hsp1:function(e,n,t){"use strict";t.r(n),t.d(n,"InsuranceModule",function(){return Dn});var c=t("ofXK"),a=t("3Pt+"),i=t("tyNb"),o=t("fXoL"),s=t("D2EG");let r=(()=>{class e{constructor(){this.active=!0}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-reports"]],decls:21,vars:1,consts:[[1,"row"],[1,"col-md-2","nopadding"],[3,"activeTabIndex"],[1,"col-md-10","nopadding"],["id","breadcrumbs",1,"breadcrumbs"],[1,"heaersitemap"],[1,"form-horizontal"]],template:function(e,n){1&e&&(o.Qb(0,"div",0),o.Fc(1,"\n    "),o.Qb(2,"div",1),o.Fc(3,"\n        "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n    "),o.Pb(),o.Fc(6,"\n    "),o.Qb(7,"div",3),o.Fc(8,"\n        "),o.Qb(9,"div",4),o.Fc(10,"\n            "),o.Qb(11,"span",5),o.Fc(12,"\n                Insurance Manager >\n            "),o.Pb(),o.Fc(13,"\n        "),o.Pb(),o.Fc(14,"\n        "),o.Lb(15,"br"),o.Fc(16,"\n        "),o.Qb(17,"form",6),o.Fc(18,"\n            Under Construction\n        "),o.Pb(),o.Fc(19,"\n\n    "),o.Pb(),o.Fc(20,"\n"),o.Pb()),2&e&&(o.yb(4),o.hc("activeTabIndex",22))},directives:[s.a,a.q,a.g,a.h],encapsulation:2}),e})();var b=t("ZMVn"),l=t("qWM9"),d=t("Yp+s"),h=t("5eHb"),m=t("CmI4"),F=t("gG+3"),u=t("sYmb"),y=t("uYM5"),g=t("286d"),p=t("Frqi"),P=t("eO1q"),v=t("iIV1");function f(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb())}function C(e,n){if(1&e&&(o.Qb(0,"option",32),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function Q(e,n){if(1&e&&(o.Qb(0,"option",32),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function M(e,n){if(1&e&&(o.Qb(0,"option",32),o.Fc(1),o.ac(2,"translate"),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.value),o.yb(1),o.Gc(o.bc(2,2,e.text))}}function I(e,n){if(1&e&&(o.Qb(0,"option",32),o.Fc(1),o.ac(2,"translate"),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.value),o.yb(1),o.Gc(o.bc(2,2,e.text))}}function w(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",14),o.Fc(1,"\n                            "),o.Qb(2,"label",33),o.Fc(3),o.Pb(),o.Fc(4,"\n                            "),o.Qb(5,"div",34),o.Fc(6,"\n                                "),o.Qb(7,"input",35),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().invoiceSearchParameters.duration=n}),o.Pb(),o.Fc(8,"\n                            "),o.Pb(),o.Fc(9,"\n                        "),o.Pb()}if(2&e){const e=o.Zb();o.yb(3),o.Gc(e.durationLabel),o.yb(4),o.hc("ngModel",e.invoiceSearchParameters.duration)}}const D=function(){return{standalone:!0}};function S(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",14),o.Fc(1,"\n                            "),o.Qb(2,"label",21),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                            "),o.Qb(6,"div",16),o.Fc(7,"\n                                "),o.Qb(8,"p-calendar",36),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().periodStartDate=n}),o.Pb(),o.Fc(9,"\n                            "),o.Pb(),o.Fc(10,"\n                            "),o.Qb(11,"label",21),o.Fc(12),o.ac(13,"translate"),o.Pb(),o.Fc(14,"\n                            "),o.Qb(15,"div",16),o.Fc(16,"\n                                "),o.Qb(17,"p-calendar",36),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().periodEndDate=n}),o.Pb(),o.Fc(18,"\n                            "),o.Pb(),o.Fc(19,"\n                        "),o.Pb()}if(2&e){const e=o.Zb();o.yb(3),o.Gc(o.bc(4,12,"From")),o.yb(5),o.hc("ngModel",e.periodStartDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",o.lc(16,D)),o.yb(4),o.Gc(o.bc(13,14,"To")),o.yb(5),o.hc("ngModel",e.periodEndDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",o.lc(17,D))}}function x(e,n){if(1&e&&(o.Qb(0,"tr"),o.Fc(1,"\n                            "),o.Qb(2,"td"),o.Fc(3),o.Pb(),o.Fc(4,"\n                            "),o.Qb(5,"td"),o.Fc(6),o.Pb(),o.Fc(7,"\n                            "),o.Qb(8,"td"),o.Fc(9),o.Pb(),o.Fc(10,"\n                            "),o.Qb(11,"td"),o.Fc(12),o.Pb(),o.Fc(13,"\n                            "),o.Qb(14,"td"),o.Fc(15),o.Pb(),o.Fc(16,"\n                            "),o.Qb(17,"td"),o.Fc(18),o.Pb(),o.Fc(19,"\n                            "),o.Qb(20,"td"),o.Fc(21),o.Pb(),o.Fc(22,"\n                            "),o.Qb(23,"td"),o.Fc(24),o.Pb(),o.Fc(25,"\n                            "),o.Qb(26,"td"),o.Fc(27),o.Pb(),o.Fc(28,"\n                        "),o.Pb()),2&e){const e=n.$implicit;o.yb(3),o.Gc(e.id),o.yb(3),o.Gc(e.creatorName),o.yb(3),o.Gc(e.invoiceDateString),o.yb(3),o.Gc(e.companyName),o.yb(3),o.Gc(e.totalAmountForInsuranceCompanyWithoutVAT),o.yb(3),o.Gc(e.totalVatAmountForInsuranceCompany),o.yb(3),o.Gc(e.netAmount),o.yb(3),o.Gc(e.totalCredit),o.yb(3),o.Gc(e.status)}}let T=(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.localStorage=n,this.router=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.utilityClass=new d.a,this.active=!0,this.showProgress=!1,this.lstToTranslated=[],this.toPrintDiv="print-section",this.clinicId="0",this.userPermisions=new b.a,this.key=new l.a,this.enableViewCompanyDetails=!1,this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1,this.durationLabel="Duration",this.invoiceSearchParameters={},this.dateFiltersList=[],this.invoiceStatusesList=[],this.invoicesList=[],this.companiesList=[],this.policiesList=[]}ngOnInit(){this.clinicId=this.localStorage.retrieve("ClinicID"),this.invoiceSearchParameters.clinicId=this.clinicId,this.lstToTranslated=["companyName","companyNameTranslation","creatorName","creatorNameTranslation"],this.getInvoiceSearchParametersWrapper(),this.getAllInvoicesToday(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.GenerateInvoices&&n.permission.key!=this.key.ExcludeInvoices&&n.permission.key!=this.key.IncludeInvoices&&n.permission.key!=this.key.DeleteInvoices&&n.permission.key!=this.key.EndorseInvoices||1!=n.allow||(this.enableViewCompanyDetails=!0)}getAllInvoicesToday(){this.showProgress=!0;let e=this;this.insuranceService.getAllInvoicesToday(this.clinicId).subscribe(function(n){e.invoicesList=n},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}getInvoiceSearchParametersWrapper(){this.showProgress=!0;let e=this;this.insuranceService.getInvoiceSearchParametersWrapper().subscribe(function(n){e.dateFiltersList=n.dateFilters,e.invoiceStatusesList=n.invoiceStatuses,e.companiesList=n.insuranceCompanies},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}searchForInvoices(){this.showProgress=!0;let e=this;null!=this.periodStartDate&&(this.invoiceSearchParameters.startDate=this.utilityClass.getUtcDate(this.periodStartDate)),null!=this.periodEndDate&&(this.invoiceSearchParameters.endDate=this.utilityClass.getUtcDate(this.periodEndDate)),this.insuranceService.searchForInvoices(this.invoiceSearchParameters).subscribe(function(n){e.invoicesList=n},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}selectDateFilter(e){this.invoiceSearchParameters.dateFilter=e,"Days"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofDays")):"Weeks"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofWeeks")):"Months"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofMonths")):"Years"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel=this.translate.instant("NumberofYears")):"TimePeriod"==e?(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!0):(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1)}fillCompanyPolicies(e){if(null!=this.companiesList&&this.companiesList.length>0){let n=this.companiesList.find(n=>n.id==e);this.policiesList=null!=n&&null!=n.insurancePolicies?n.insurancePolicies:[]}}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.b),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-invoice"]],decls:187,vars:84,consts:[[4,"ngIf"],[1,"row"],[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"padding5"],[1,"form-horizontal"],[1,"row","well"],[1,"col-md-4","col-md-offset-8","text-right"],["data-toggle","collapse","data-target","#SearchForInvoices",1,"btn","btn-primary",3,"disabled"],[3,"section"],["id","SearchForInvoices",1,"collapse","fa-border","well"],[1,"padding5","marginTop35"],[1,"row","form-horizontal"],[1,"form-group"],[1,"col-md-2","control-label"],[1,"col-md-3"],["id","ddlCompanies","name","ddlCompanies",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlCompanies",""],[3,"value",4,"ngFor","ngForOf"],["id","ddlPolicies","name","ddlPolicies",1,"form-control",3,"ngModel","ngModelChange"],["for","txtName",1,"col-md-2","control-label"],["id","ddlDateFilters","name","ddlDateFilters",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlDateFilters",""],["id","ddlInvoiceStatuses","name","ddlInvoiceStatuses",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"col-md-4","col-md-offset-1"],["type","button",1,"btn","btn-primary",3,"click"],["id","print-section",1,"hidden"],[1,"table","table-responsive","table-hover"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"],[3,"value"],["for","txtDuration",1,"col-md-2","control-label"],[1,"col-md-2"],["type","text","id","txtDuration","name","txtDuration",1,"form-control",3,"ngModel","ngModelChange"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","ngModelOptions","ngModelChange"]],template:function(e,n){if(1&e){const e=o.Rb();o.Dc(0,f,4,0,"div",0),o.Fc(1,"\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n    "),o.Qb(6,"div",3),o.Fc(7,"\n        "),o.Qb(8,"div",4),o.Fc(9,"\n            "),o.Qb(10,"a"),o.Fc(11),o.ac(12,"translate"),o.Pb(),o.Fc(13),o.ac(14,"translate"),o.Pb(),o.Fc(15,"\n    "),o.Pb(),o.Fc(16,"\n    "),o.Qb(17,"div",5),o.Fc(18,"\n        "),o.Qb(19,"form",6),o.Fc(20,"\n            "),o.Qb(21,"div",7),o.Fc(22,"\n                "),o.Qb(23,"div",8),o.Fc(24,"\n                    "),o.Qb(25,"button",9),o.Fc(26),o.ac(27,"translate"),o.Pb(),o.Fc(28,"\n                    "),o.Lb(29,"print-page",10),o.Fc(30,"\n                "),o.Pb(),o.Fc(31,"\n            "),o.Pb(),o.Fc(32,"\n\n            "),o.Qb(33,"div",11),o.Fc(34,"\n                "),o.Qb(35,"div",12),o.Fc(36,"\n                    "),o.Qb(37,"div",13),o.Fc(38,"\n                        "),o.Qb(39,"div",14),o.Fc(40,"\n                            "),o.Qb(41,"label",15),o.Fc(42),o.ac(43,"translate"),o.Pb(),o.Fc(44,"\n                            "),o.Qb(45,"div",16),o.Fc(46,"\n                                "),o.Qb(47,"select",17,18),o.Xb("ngModelChange",function(e){return n.invoiceSearchParameters.companyId=e})("change",function(){o.wc(e);const t=o.vc(48);return n.fillCompanyPolicies(t.value)}),o.Fc(49,"\n                                    "),o.Qb(50,"option"),o.Fc(51),o.ac(52,"translate"),o.Pb(),o.Fc(53,"\n                                    "),o.Dc(54,C,2,2,"option",19),o.ac(55,"translateObjects"),o.Fc(56,"\n                                "),o.Pb(),o.Fc(57,"\n                            "),o.Pb(),o.Fc(58,"\n                            "),o.Qb(59,"label",15),o.Fc(60),o.ac(61,"translate"),o.Pb(),o.Fc(62,"\n                            "),o.Qb(63,"div",16),o.Fc(64,"\n                                "),o.Qb(65,"select",20),o.Xb("ngModelChange",function(e){return n.invoiceSearchParameters.policyId=e}),o.Fc(66,"\n                                    "),o.Qb(67,"option"),o.Fc(68),o.ac(69,"translate"),o.Pb(),o.Fc(70,"\n                                    "),o.Dc(71,Q,2,2,"option",19),o.ac(72,"translateObjects"),o.Fc(73,"\n                                "),o.Pb(),o.Fc(74,"\n                            "),o.Pb(),o.Fc(75,"\n                        "),o.Pb(),o.Fc(76,"\n                        "),o.Qb(77,"div",14),o.Fc(78,"\n                            "),o.Qb(79,"label",21),o.Fc(80),o.ac(81,"translate"),o.Pb(),o.Fc(82,"\n                            "),o.Qb(83,"div",16),o.Fc(84,"\n                                "),o.Qb(85,"select",22,23),o.Xb("ngModelChange",function(e){return n.invoiceSearchParameters.dateFilter=e})("change",function(){o.wc(e);const t=o.vc(86);return n.selectDateFilter(t.value)}),o.Fc(87,"\n                                    "),o.Qb(88,"option"),o.Fc(89),o.ac(90,"translate"),o.Pb(),o.Fc(91,"\n                                    "),o.Dc(92,M,3,4,"option",19),o.Fc(93,"\n                                "),o.Pb(),o.Fc(94,"\n                            "),o.Pb(),o.Fc(95,"\n                            "),o.Qb(96,"label",21),o.Fc(97),o.ac(98,"translate"),o.Pb(),o.Fc(99,"\n                            "),o.Qb(100,"div",16),o.Fc(101,"\n                                "),o.Qb(102,"select",24),o.Xb("ngModelChange",function(e){return n.invoiceSearchParameters.status=e}),o.Fc(103,"\n                                    "),o.Qb(104,"option"),o.Fc(105),o.ac(106,"translate"),o.Pb(),o.Fc(107,"\n                                    "),o.Dc(108,I,3,4,"option",19),o.ac(109,"translateObjects"),o.Fc(110,"\n                                "),o.Pb(),o.Fc(111,"\n                            "),o.Pb(),o.Fc(112,"\n                        "),o.Pb(),o.Fc(113,"\n                        "),o.Dc(114,w,10,2,"div",25),o.Fc(115,"\n                        "),o.Dc(116,S,20,18,"div",25),o.Fc(117,"\n                        "),o.Qb(118,"div",14),o.Fc(119,"\n                            "),o.Qb(120,"div",26),o.Fc(121,"\n                                "),o.Qb(122,"button",27),o.Xb("click",function(){return n.searchForInvoices()}),o.Fc(123),o.ac(124,"translate"),o.Pb(),o.Fc(125,"\n                            "),o.Pb(),o.Fc(126,"\n                        "),o.Pb(),o.Fc(127,"\n                    "),o.Pb(),o.Fc(128,"\n                "),o.Pb(),o.Fc(129,"\n            "),o.Pb(),o.Fc(130,"\n            "),o.Fc(131,"\n            "),o.Qb(132,"div",28),o.Fc(133,"\n                "),o.Qb(134,"table",29),o.Fc(135,"\n                    "),o.Qb(136,"thead",30),o.Fc(137,"\n                        "),o.Qb(138,"tr"),o.Fc(139,"\n                            "),o.Qb(140,"th"),o.Fc(141),o.ac(142,"translate"),o.Pb(),o.Fc(143,"\n                            "),o.Qb(144,"th"),o.Fc(145),o.ac(146,"translate"),o.Pb(),o.Fc(147,"\n                            "),o.Qb(148,"th"),o.Fc(149),o.ac(150,"translate"),o.Pb(),o.Fc(151,"\n                            "),o.Qb(152,"th"),o.Fc(153),o.ac(154,"translate"),o.Pb(),o.Fc(155,"\n                            "),o.Qb(156,"th"),o.Fc(157),o.ac(158,"translate"),o.Pb(),o.Fc(159,"\n                            "),o.Qb(160,"th"),o.Fc(161),o.ac(162,"translate"),o.Pb(),o.Fc(163,"\n                            "),o.Qb(164,"th"),o.Fc(165),o.ac(166,"translate"),o.Pb(),o.Fc(167,"\n                            "),o.Qb(168,"th"),o.Fc(169),o.ac(170,"translate"),o.Pb(),o.Fc(171,"\n                            "),o.Qb(172,"th"),o.Fc(173),o.ac(174,"translate"),o.Pb(),o.Fc(175,"\n                        "),o.Pb(),o.Fc(176,"\n                    "),o.Pb(),o.Fc(177,"\n                    "),o.Qb(178,"tbody"),o.Fc(179,"\n                        "),o.Dc(180,x,29,9,"tr",31),o.Fc(181,"\n                    "),o.Pb(),o.Fc(182,"\n                "),o.Pb(),o.Fc(183,"\n            "),o.Pb(),o.Fc(184,"\n        "),o.Pb(),o.Fc(185,"\n    "),o.Pb(),o.Fc(186,"\n"),o.Pb()}2&e&&(o.hc("ngIf",n.showProgress),o.yb(4),o.hc("activeTabIndex",21),o.yb(7),o.Gc(o.bc(12,36,"InsuranceManagement")),o.yb(2),o.Hc(" \xa0/\n            ",o.bc(14,38,"Invoices"),"\n        "),o.yb(12),o.ic("disabled",n.enableViewCompanyDetails?"":"disabled"),o.yb(1),o.Gc(o.bc(27,40,"Search")),o.yb(3),o.hc("section",n.toPrintDiv),o.yb(13),o.Gc(o.bc(43,42,"Company")),o.yb(5),o.hc("ngModel",n.invoiceSearchParameters.companyId),o.yb(4),o.Gc(o.bc(52,44,"Select")),o.yb(3),o.hc("ngForOf",o.bc(55,46,n.companiesList)),o.yb(6),o.Gc(o.bc(61,48,"Policy")),o.yb(5),o.hc("ngModel",n.invoiceSearchParameters.policyId),o.yb(3),o.Gc(o.bc(69,50,"Select")),o.yb(3),o.hc("ngForOf",o.bc(72,52,n.policiesList)),o.yb(9),o.Gc(o.bc(81,54,"Date")),o.yb(5),o.hc("ngModel",n.invoiceSearchParameters.dateFilter),o.yb(4),o.Gc(o.bc(90,56,"Select")),o.yb(3),o.hc("ngForOf",n.dateFiltersList),o.yb(5),o.Gc(o.bc(98,58,"Status")),o.yb(5),o.hc("ngModel",n.invoiceSearchParameters.status),o.yb(3),o.Gc(o.bc(106,60,"Select")),o.yb(3),o.hc("ngForOf",o.bc(109,62,n.invoiceStatusesList)),o.yb(6),o.hc("ngIf",n.isDurationVisible),o.yb(2),o.hc("ngIf",n.isPeriodOfTimeVisible),o.yb(7),o.Gc(o.bc(124,64,"SearchBtn")),o.yb(18),o.Gc(o.bc(142,66,"RefNo")),o.yb(4),o.Gc(o.bc(146,68,"CreatedBy")),o.yb(4),o.Gc(o.bc(150,70,"InvoiceDate")),o.yb(4),o.Gc(o.bc(154,72,"CompanyName")),o.yb(4),o.Gc(o.bc(158,74,"Amount")),o.yb(4),o.Gc(o.bc(162,76,"VATAmount")),o.yb(4),o.Gc(o.bc(166,78,"NetAmount")),o.yb(4),o.Gc(o.bc(170,80,"TotalCredit")),o.yb(4),o.Gc(o.bc(174,82,"Status")),o.yb(7),o.hc("ngForOf",n.invoicesList))},directives:[c.k,s.a,a.q,a.g,a.h,g.a,a.p,a.f,a.i,a.j,a.r,c.j,p.a,a.b,P.a],pipes:[u.c,v.a],encapsulation:2}),e})();class G{}class k extends G{}var N=function(e){return e[e.draft=1]="draft",e[e.closed=2]="closed",e[e.endorsed=3]="endorsed",e[e.canceled=4]="canceled",e}({});class R extends G{}var L=t("8rk6");class A extends G{}const Z=["btnOpenPaymentPopup"],X=["btnReleaseChargeModal"],O=["btnCancelReleaseChargeModal"],V=["btnRejectChargeModal"],U=["btnCancelRejectChargeModal"],B=["btnResubmitChargeModal"],E=["btnCancelResubmitChargeModal"],j=function(){return{standalone:!0}};function q(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",35),o.Fc(1,"\n                            "),o.Qb(2,"p-calendar",51),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).payment.date=n}),o.Pb(),o.Fc(3,"\n                        "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(2),o.hc("ngModel",e.payment.date)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!1)("ngModelOptions",o.lc(7,j))}}function H(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",35),o.Fc(1,"\n                            "),o.Qb(2,"input",52,53),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).payment.dateTimeString=n}),o.Pb(),o.Fc(4,"\n                        "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(2),o.hc("ngModel",e.payment.dateTimeString)}}function K(e,n){1&e&&(o.Qb(0,"div",54),o.Fc(1,"\n                            "),o.Qb(2,"button",55),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                        "),o.Pb()),2&e&&(o.yb(3),o.Gc(o.bc(4,1,"Change")))}function z(e,n){if(1&e&&(o.Qb(0,"option",56),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function $(e,n){if(1&e&&(o.Qb(0,"option",56),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function W(e,n){1&e&&(o.Qb(0,"div",54),o.Fc(1,"\n                            "),o.Qb(2,"button",57),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                        "),o.Pb()),2&e&&(o.yb(3),o.Gc(o.bc(4,1,"Change")))}function Y(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",33),o.Fc(1,"\n                        "),o.Qb(2,"label",34),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                        "),o.Qb(6,"div",35),o.Fc(7,"\n                            "),o.Qb(8,"textarea",58,59),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).payment.companyChargesAsString=n}),o.Pb(),o.Fc(10,"\n                        "),o.Pb(),o.Fc(11,"\n                    "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(3),o.Gc(o.bc(4,2,"Charges")),o.yb(5),o.hc("ngModel",e.payment.companyChargesAsString)}}function _(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",60),o.Fc(1,"\n                    "),o.Qb(2,"div",61),o.Fc(3,"\n                        "),o.Qb(4,"button",62),o.Xb("click",function(){return o.wc(e),o.Zb(2).saveCompanyPayment()}),o.Fc(5),o.ac(6,"translate"),o.Pb(),o.Fc(7,"\n                        "),o.Qb(8,"button",63),o.Fc(9),o.ac(10,"translate"),o.Pb(),o.Fc(11,"\n                    "),o.Pb(),o.Fc(12,"\n                "),o.Pb()}if(2&e){o.Zb();const e=o.vc(1),n=o.Zb();o.yb(4),o.hc("disabled",!e.form.valid||!n.enableSaveCompanyPayment),o.yb(1),o.Gc(o.bc(6,4,"Save")),o.yb(3),o.ic("disabled",n.enableSaveCompanyPayment?"":"disabled"),o.yb(1),o.Gc(o.bc(10,6,"Cancel"))}}function J(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",30,31),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",35),o.Fc(12,"\n                            "),o.Qb(13,"input",36,37),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.id=n}),o.Pb(),o.Fc(15,"\n                        "),o.Pb(),o.Fc(16,"\n                    "),o.Pb(),o.Fc(17,"\n                    "),o.Qb(18,"div",33),o.Fc(19,"\n                        "),o.Qb(20,"label",34),o.Fc(21),o.ac(22,"translate"),o.Pb(),o.Fc(23,"\n                        "),o.Dc(24,q,4,8,"div",38),o.Fc(25,"\n                        "),o.Dc(26,H,5,1,"div",38),o.Fc(27,"\n                        "),o.Dc(28,K,6,3,"div",39),o.Fc(29,"\n                    "),o.Pb(),o.Fc(30,"\n                    "),o.Qb(31,"div",33),o.Fc(32,"\n                        "),o.Qb(33,"label",34),o.Fc(34),o.ac(35,"translate"),o.Pb(),o.Fc(36,"\n                        "),o.Qb(37,"div",35),o.Fc(38,"\n                            "),o.Qb(39,"select",40,41),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentTypeId=n})("change",function(){o.wc(e);const n=o.vc(41);return o.Zb().updatePaymentType(n.value)}),o.Fc(42,"\n                                "),o.Dc(43,z,2,2,"option",42),o.ac(44,"translateObjects"),o.Fc(45,"\n                            "),o.Pb(),o.Fc(46,"\n                        "),o.Pb(),o.Fc(47,"\n                    "),o.Pb(),o.Fc(48,"\n                    "),o.Qb(49,"div",33),o.Fc(50,"\n                        "),o.Qb(51,"label",34),o.Fc(52),o.ac(53,"translate"),o.Pb(),o.Fc(54,"\n                        "),o.Qb(55,"div",35),o.Fc(56,"\n                            "),o.Qb(57,"select",43,44),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentMethodId=n}),o.Fc(59,"\n                                "),o.Dc(60,$,2,2,"option",42),o.ac(61,"translateObjects"),o.Fc(62,"\n                            "),o.Pb(),o.Fc(63,"\n                        "),o.Pb(),o.Fc(64,"\n                        "),o.Dc(65,W,6,3,"div",39),o.Fc(66,"\n                    "),o.Pb(),o.Fc(67,"\n                    "),o.Qb(68,"div",33),o.Fc(69,"\n                        "),o.Qb(70,"label",34),o.Fc(71),o.ac(72,"translate"),o.Pb(),o.Fc(73,"\n                        "),o.Qb(74,"div",35),o.Fc(75,"\n                            "),o.Qb(76,"input",45,46),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.amount=n}),o.Pb(),o.Fc(78,"\n                        "),o.Pb(),o.Fc(79,"\n                    "),o.Pb(),o.Fc(80,"\n                    "),o.Dc(81,Y,12,4,"div",47),o.Fc(82,"\n                    "),o.Qb(83,"div",33),o.Fc(84,"\n                        "),o.Qb(85,"label",34),o.Fc(86),o.ac(87,"translate"),o.Pb(),o.Fc(88,"\n                        "),o.Qb(89,"div",35),o.Fc(90,"\n                            "),o.Qb(91,"textarea",48,49),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.description=n}),o.Pb(),o.Fc(93,"\n                        "),o.Pb(),o.Fc(94,"\n                    "),o.Pb(),o.Fc(95,"\n                "),o.Pb(),o.Fc(96,"\n                "),o.Dc(97,_,13,8,"div",50),o.Fc(98,"\n            "),o.Pb()}if(2&e){const e=o.Zb();o.yb(8),o.Gc(o.bc(9,22,"TransactionRefNo")),o.yb(5),o.hc("ngModel",e.payment.id),o.yb(8),o.Gc(o.bc(22,24,"TransactionDate")),o.yb(3),o.hc("ngIf",e.editable),o.yb(2),o.hc("ngIf",!e.editable),o.yb(2),o.hc("ngIf",!e.editable),o.yb(6),o.Gc(o.bc(35,26,"TransactionType")),o.yb(5),o.hc("disabled",!e.editable)("ngModel",e.payment.paymentTypeId),o.yb(4),o.hc("ngForOf",o.bc(44,28,e.paymentTypes)),o.yb(9),o.Gc(o.bc(53,30,"TransactionMethod")),o.yb(5),o.hc("disabled",!e.editable)("ngModel",e.payment.paymentMethodId),o.yb(3),o.hc("ngForOf",o.bc(61,32,e.paymentMethods)),o.yb(5),o.hc("ngIf",!e.editable),o.yb(6),o.Gc(o.bc(72,34,"TransactionAmount")),o.yb(5),o.hc("ngModel",e.payment.amount),o.yb(5),o.hc("ngIf",!e.editable),o.yb(5),o.Gc(o.bc(87,36,"Remarks")),o.yb(5),o.hc("disabled",!e.editable)("ngModel",e.payment.description),o.yb(6),o.hc("ngIf",e.editable)}}function ee(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",64,65),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().releaseCharge()}),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",66),o.Fc(12,"\n                            "),o.Qb(13,"textarea",67,68),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().releaseChargeReason=n}),o.Pb(),o.Fc(15,"\n                            "),o.Qb(16,"div",69),o.Fc(17),o.ac(18,"translate"),o.Pb(),o.Fc(19,"\n                        "),o.Pb(),o.Fc(20,"\n                    "),o.Pb(),o.Fc(21,"\n                "),o.Pb(),o.Fc(22,"\n                "),o.Qb(23,"div",60),o.Fc(24,"\n                    "),o.Qb(25,"div",61),o.Fc(26,"\n                        "),o.Qb(27,"button",70),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n                        "),o.Qb(31,"button",71,72),o.Fc(33),o.ac(34,"translate"),o.Pb(),o.Fc(35,"\n                    "),o.Pb(),o.Fc(36,"\n                "),o.Pb(),o.Fc(37,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.vc(14),t=o.Zb();o.yb(8),o.Gc(o.bc(9,9,"Reason")),o.yb(5),o.hc("ngModel",t.releaseChargeReason),o.yb(3),o.hc("hidden",n.valid||n.pristine),o.yb(1),o.Hc("\n                                ",o.bc(18,11,"RequiredField"),"\n                            "),o.yb(10),o.hc("disabled",!e.form.valid||!t.enableReleaseCharge),o.yb(1),o.Gc(o.bc(29,13,"Save")),o.yb(3),o.Cb("disabled",!t.enableReleaseChargeboolean||null),o.yb(2),o.Gc(o.bc(34,15,"Cancel"))}}function ne(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",73,74),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().rejectCharge()}),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",66),o.Fc(12,"\n                            "),o.Qb(13,"textarea",75,76),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().rejectChargeReason=n}),o.Pb(),o.Fc(15,"\n                            "),o.Qb(16,"div",69),o.Fc(17),o.ac(18,"translate"),o.Pb(),o.Fc(19,"\n                        "),o.Pb(),o.Fc(20,"\n                    "),o.Pb(),o.Fc(21,"\n                "),o.Pb(),o.Fc(22,"\n                "),o.Qb(23,"div",60),o.Fc(24,"\n                    "),o.Qb(25,"div",61),o.Fc(26,"\n                        "),o.Qb(27,"button",70),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n                        "),o.Qb(31,"button",77,78),o.Fc(33),o.ac(34,"translate"),o.Pb(),o.Fc(35,"\n                    "),o.Pb(),o.Fc(36,"\n                "),o.Pb(),o.Fc(37,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.vc(14),t=o.Zb();o.yb(8),o.Gc(o.bc(9,8,"Reason")),o.yb(5),o.hc("ngModel",t.rejectChargeReason),o.yb(3),o.hc("hidden",n.valid||n.pristine),o.yb(1),o.Hc("\n                                ",o.bc(18,10,"RequiredField"),"\n                            "),o.yb(10),o.hc("disabled",!e.form.valid||!t.enableCancelCharge),o.yb(1),o.Gc(o.bc(29,12,"Save")),o.yb(3),o.ic("disabled",t.enableCancelCharge?"":"disabled"),o.yb(2),o.Gc(o.bc(34,14,"Cancel"))}}function te(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",79,80),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().resubmitCharge()}),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",66),o.Fc(12,"\n                            "),o.Qb(13,"textarea",81,82),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().resubmitChargeReason=n}),o.Pb(),o.Fc(15,"\n                            "),o.Qb(16,"div",69),o.Fc(17),o.ac(18,"translate"),o.Pb(),o.Fc(19,"\n                        "),o.Pb(),o.Fc(20,"\n                    "),o.Pb(),o.Fc(21,"\n                "),o.Pb(),o.Fc(22,"\n                "),o.Qb(23,"div",60),o.Fc(24,"\n                    "),o.Qb(25,"div",61),o.Fc(26,"\n                        "),o.Qb(27,"button",70),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n                        "),o.Qb(31,"button",83,84),o.Fc(33),o.ac(34,"translate"),o.Pb(),o.Fc(35,"\n                    "),o.Pb(),o.Fc(36,"\n                "),o.Pb(),o.Fc(37,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.vc(14),t=o.Zb();o.yb(8),o.Gc(o.bc(9,8,"Reason")),o.yb(5),o.hc("ngModel",t.resubmitChargeReason),o.yb(3),o.hc("hidden",n.valid||n.pristine),o.yb(1),o.Hc("\n                                ",o.bc(18,10,"RequiredField"),"\n                            "),o.yb(10),o.hc("disabled",!e.form.valid||!t.enableResubmitInvoice),o.yb(1),o.Gc(o.bc(29,12,"Save")),o.yb(3),o.ic("disabled",t.enableResubmitInvoice?"":"disabled"),o.yb(2),o.Gc(o.bc(34,14,"Cancel"))}}function ce(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",85,86),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",35),o.Fc(12,"\n                            "),o.Qb(13,"p-calendar",51),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.date=n}),o.Pb(),o.Fc(14,"\n                        "),o.Pb(),o.Fc(15,"\n                    "),o.Pb(),o.Fc(16,"\n                    "),o.Qb(17,"div",33),o.Fc(18,"\n                        "),o.Qb(19,"label",34),o.Fc(20),o.ac(21,"translate"),o.Pb(),o.Fc(22,"\n                        "),o.Qb(23,"div",35),o.Fc(24,"\n                            "),o.Qb(25,"textarea",87,88),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.changeDateReason=n}),o.Pb(),o.Fc(27,"\n                        "),o.Pb(),o.Fc(28,"\n                    "),o.Pb(),o.Fc(29,"\n                "),o.Pb(),o.Fc(30,"\n                "),o.Qb(31,"div",60),o.Fc(32,"\n                    "),o.Qb(33,"div",61),o.Fc(34,"\n                        "),o.Qb(35,"button",62),o.Xb("click",function(){return o.wc(e),o.Zb().saveCompanyPayment()}),o.Fc(36),o.ac(37,"translate"),o.Pb(),o.Fc(38,"\n                        "),o.Qb(39,"button",63),o.Fc(40),o.ac(41,"translate"),o.Pb(),o.Fc(42,"\n                    "),o.Pb(),o.Fc(43,"\n                "),o.Pb(),o.Fc(44,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(8),o.Gc(o.bc(9,14,"NewPaymentDate")),o.yb(5),o.hc("ngModel",n.payment.date)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!1)("ngModelOptions",o.lc(22,j)),o.yb(7),o.Gc(o.bc(21,16,"ChangeReason")),o.yb(5),o.hc("ngModel",n.payment.changeDateReason),o.yb(10),o.hc("disabled",!e.form.valid||!n.enableSaveCompanyPayment),o.yb(1),o.Gc(o.bc(37,18,"ConfirmChange")),o.yb(3),o.ic("disabled",n.enableSaveCompanyPayment?"":"disabled"),o.yb(1),o.Gc(o.bc(41,20,"Ignore"))}}function ae(e,n){if(1&e&&(o.Qb(0,"option",56),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function ie(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",89,90),o.Fc(2,"\n                "),o.Qb(3,"div",32),o.Fc(4,"\n                    "),o.Qb(5,"div",33),o.Fc(6,"\n                        "),o.Qb(7,"label",34),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",35),o.Fc(12,"\n                            "),o.Qb(13,"select",91,44),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentMethodId=n}),o.Fc(15,"\n                                "),o.Dc(16,ae,2,2,"option",42),o.Fc(17,"\n                            "),o.Pb(),o.Fc(18,"\n                        "),o.Pb(),o.Fc(19,"\n                    "),o.Pb(),o.Fc(20,"\n                    "),o.Qb(21,"div",33),o.Fc(22,"\n                        "),o.Qb(23,"label",34),o.Fc(24),o.ac(25,"translate"),o.Pb(),o.Fc(26,"\n                        "),o.Qb(27,"div",35),o.Fc(28,"\n                            "),o.Qb(29,"textarea",92,93),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.changeMethodReason=n}),o.Pb(),o.Fc(31,"\n                        "),o.Pb(),o.Fc(32,"\n                    "),o.Pb(),o.Fc(33,"\n                "),o.Pb(),o.Fc(34,"\n                "),o.Qb(35,"div",60),o.Fc(36,"\n                    "),o.Qb(37,"div",61),o.Fc(38,"\n                        "),o.Qb(39,"button",62),o.Xb("click",function(){return o.wc(e),o.Zb().saveCompanyPayment()}),o.Fc(40),o.ac(41,"translate"),o.Pb(),o.Fc(42,"\n                        "),o.Qb(43,"button",63),o.Fc(44),o.ac(45,"translate"),o.Pb(),o.Fc(46,"\n                    "),o.Pb(),o.Fc(47,"\n                "),o.Pb(),o.Fc(48,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(8),o.Hc(" ",o.bc(9,9,"NewPaymentMethod"),""),o.yb(5),o.hc("ngModel",n.payment.paymentMethodId),o.yb(3),o.hc("ngForOf",n.paymentMethods),o.yb(8),o.Gc(o.bc(25,11,"ChangeReason")),o.yb(5),o.hc("ngModel",n.payment.changeMethodReason),o.yb(10),o.hc("disabled",!e.form.valid||!n.enableSaveCompanyPayment),o.yb(1),o.Gc(o.bc(41,13,"ConfirmChange")),o.yb(3),o.ic("disabled",n.enableSaveCompanyPayment?"":"disabled"),o.yb(1),o.Gc(o.bc(45,15,"Ignore"))}}let oe=(()=>{class e{constructor(e,n,t,c,a,i,s){this.toastr=e,this.localStorage=n,this.activatedRoute=t,this.insuranceService=c,this.claimService=a,this.translate=i,this.accountService=s,this.active=!0,this.showProgress=!1,this.userPermisions=new b.a,this.key=new l.a,this.enableViewCompanyDetails=!1,this.enableResubmitInvoice=!1,this.enableReleaseCharge=!1,this.enableViewPatientPayment=!1,this.enableSaveCompanyPayment=!1,this.enableCancelInvioce=!1,this.enableCancelCharge=!1,this.paymentTypes=[],this.paymentMethods=[],this.lstToTranslated=[],this.selectedCharges=[],this.payment={id:0},this.editable=!0,this.releaseChargeReason="",this.resubmitChargeReason="",this.rejectChargeReason="",this.utilityClass=new d.a,this.onAmountUpdated=new o.n,this.onChargeSelected=new o.n,this.enableReleaseChargeboolean=!0}ngOnInit(){let e=this;this.lstToTranslated=["serviceName","serviceNameTranslation","diagnoseName","diagnoseNameTranslation","doctorName","doctorNameTranslation","policyName","policyNameTranslation"],e.showProgress=!0,this.claimService.getPatientPaymentWrapper().subscribe(function(n){e.paymentTypes=n.paymentTypes,e.paymentMethods=n.paymentMethod},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1}),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.GenerateInvoices&&n.permission.key!=this.key.ExcludeInvoices&&n.permission.key!=this.key.IncludeInvoices&&n.permission.key!=this.key.DeleteInvoices&&n.permission.key!=this.key.EndorseInvoices||1!=n.allow||(this.enableViewCompanyDetails=!0),n.permission.key!=this.key.ReleaseCharge&&n.permission.key!=this.key.CancelCharge||1!=n.allow||(this.enableResubmitInvoice=!0),n.permission.key==this.key.CancelCharge&&1==n.allow&&(this.enableCancelCharge=!0),n.permission.key==this.key.Claim&&1==n.view&&(this.enableViewPatientPayment=!0),n.permission.key==this.key.PaymentIn&&1==n.allow&&(this.enableSaveCompanyPayment=!0),n.permission.key==this.key.ReleaseCharge&&1==n.allow&&(this.enableReleaseCharge=!0)}raiseAmountUpdated(e){this.onAmountUpdated.emit(e)}updateSelectedCharges(e,n){if(n.target.checked)this.selectedCharges.push(e);else{var t=this.selectedCharges.find(n=>n.id==e.id),c=this.selectedCharges.indexOf(t);c>-1&&this.selectedCharges.splice(c,1)}let a=0;this.selectedCharges.forEach(e=>{a+=e.insuranceCompanyNetPrice}),this.onChargeSelected.emit(a)}saveCompanyPayment(){this.payment.companyCharges=this.selectedCharges,this.payment.insuranceCompanytId=this.companyId,this.payment.patientId=null,this.payment.clinicId=this.localStorage.retrieve("ClinicID");let e=this;this.insuranceService.saveCompanyPayment(e.payment).subscribe(function(n){e.selectedCharges.forEach(t=>{e.invoiceChargesList.find(e=>e.id==t.id).companyPaymentId=n.id}),e.selectedCharges=[];let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,""),e.raiseAmountUpdated(null)},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}getPaymentById(e){let n=this;n.showProgress=!0,n.editable=!1,this.claimService.getPatientPaymentById(e).subscribe(function(e){n.payment=e,n.payment.date&&(n.payment.date=n.utilityClass.getDateTimeFromString(n.payment.date)),"en"==n.localStorage.retrieve("selectedLanguage")&&(n.payment.companyChargesAsString=n.payment.companyChargesAsStringTranslation)},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}clearPaymentandOpenPopup(){this.payment={id:0},this.active=!1,this.editable=!0,setTimeout(()=>this.active=!0,0);let e=0,n="",t="";if(this.selectedCharges.forEach(c=>{e+=c.insuranceCompanyNetPrice,n+=c.serviceName+",",t+=c.serviceNameTranslation+","}),this.payment.companyChargesAsString="en"==this.localStorage.retrieve("selectedLanguage")?t:n,this.payment.amount=e,0!=this.selectedCharges.length)this.btnOpenPaymentPopup.nativeElement.click();else{let e=this.translate.instant("MustSelectChargesToAddPayment");this.toastr.error(e,"")}}updatePaymentType(e){}releaseCharge(){let e=this;e.showProgress=!0;let n=new A;n.id=this.selectedCharge.id,n.releaseReasonForCompany=this.releaseChargeReason,this.insuranceService.releaseCompanyCharge(n).subscribe(function(n){e.raiseAmountUpdated({oldValue:e.selectedCharge.actualNetPrice,newValue:0}),e.selectedCharge.releaseReasonForCompany=n.releaseReasonForCompany,e.selectedCharge.actualNetPrice=n.actualNetPrice,e.selectedCharge.isReleasedForCompany=n.isReleasedForCompany,e.selectedCharge.releaseForCompanyIconName=n.releaseForCompanyIconName;let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,""),e.clear(),e.closeReleaseChargeWindow()},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}openReleaseChargeWindow(e){this.selectedCharge=e,this.releaseChargeReason=e.releaseReasonForCompany,this.btnReleaseChargeModal.nativeElement.click()}closeReleaseChargeWindow(){this.btnCancelReleaseChargeModal.nativeElement.click()}rejectCharge(){let e=this;e.showProgress=!0;let n=new A;n.id=this.selectedCharge.id,n.rejectReasonForCompany=this.rejectChargeReason,this.insuranceService.rejectCompanyCharge(n).subscribe(function(n){e.raiseAmountUpdated({oldValue:e.selectedCharge.actualNetPrice,newValue:0}),e.selectedCharge.rejectReasonForCompany=n.rejectReasonForCompany,e.selectedCharge.actualNetPrice=n.actualNetPrice,e.selectedCharge.isRejectedForCompany=n.isRejectedForCompany,e.selectedCharge.rejectForCompanyIconName=n.rejectForCompanyIconName;let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,""),e.clear(),e.closeRejectChargeWindow()},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}openRejectChargeWindow(e){this.selectedCharge=e,this.rejectChargeReason=e.rejectReasonForCompany,this.btnRejectChargeModal.nativeElement.click()}closeRejectChargeWindow(){this.btnCancelRejectChargeModal.nativeElement.click()}resubmitCharge(){let e=this;e.showProgress=!0;let n=new A;n.id=this.selectedCharge.id,n.resubmitReasonForCompany=this.resubmitChargeReason,this.insuranceService.resubmitCompanyCharge(n).subscribe(function(n){e.selectedCharge.resubmitReasonForCompany=n.resubmitReasonForCompany;let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,""),e.clear(),e.closeResubmitChargeWindow()},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}openResubmitChargeWindow(e){this.selectedCharge=e,this.resubmitChargeReason=e.resubmitReasonForCompany,this.btnResubmitChargeModal.nativeElement.click()}closeResubmitChargeWindow(){this.btnCancelResubmitChargeModal.nativeElement.click()}clear(){this.selectedCharge=new A,this.releaseChargeReason="",this.resubmitChargeReason="",this.rejectChargeReason="",this.active=!1,setTimeout(()=>this.active=!0,0)}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.a),o.Kb(F.a),o.Kb(L.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-invoice-services"]],viewQuery:function(e,n){if(1&e&&(o.Lc(Z,1),o.Lc(X,1),o.Lc(O,1),o.Lc(V,1),o.Lc(U,1),o.Lc(B,1),o.Lc(E,1)),2&e){let e;o.uc(e=o.Yb())&&(n.btnOpenPaymentPopup=e.first),o.uc(e=o.Yb())&&(n.btnReleaseChargeModal=e.first),o.uc(e=o.Yb())&&(n.btnCancelReleaseChargeModal=e.first),o.uc(e=o.Yb())&&(n.btnRejectChargeModal=e.first),o.uc(e=o.Yb())&&(n.btnCancelRejectChargeModal=e.first),o.uc(e=o.Yb())&&(n.btnResubmitChargeModal=e.first),o.uc(e=o.Yb())&&(n.btnCancelResubmitChargeModal=e.first)}},inputs:{invoiceChargesList:"invoiceChargesList",isInvoiceCanceled:"isInvoiceCanceled",companyId:"companyId"},outputs:{onAmountUpdated:"onAmountUpdated",onChargeSelected:"onChargeSelected"},decls:156,vars:24,consts:[[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50","placeholder","Search...",1,"inputSearch"],["gb",""],["type","button","data-toggle","modal","data-target","#PayService",1,"hidden"],["btnOpenPaymentPopup",""],["id","PayService","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","savePaymentfrm",4,"ngIf"],["type","button","data-toggle","modal","data-target","#releaseChargeModal","id","btnReleaseChargeModal",1,"hidden"],["btnReleaseChargeModal",""],["id","releaseChargeModal","role","dialog",1,"modal","fade"],["class","form-horizontal","name","releaseChargeForm",3,"ngSubmit",4,"ngIf"],["type","button","data-toggle","modal","data-target","#rejectChargeModal","id","btnRejectChargeModal",1,"hidden"],["btnRejectChargeModal",""],["id","rejectChargeModal","role","dialog",1,"modal","fade"],["class","form-horizontal","name","rejectChargeForm",3,"ngSubmit",4,"ngIf"],["type","button","data-toggle","modal","data-target","#resubmitChargeModal","id","btnResubmitChargeModal",1,"hidden"],["btnResubmitChargeModal",""],["id","resubmitChargeModal","role","dialog",1,"modal","fade"],["class","form-horizontal","name","resubmitChargeForm",3,"ngSubmit",4,"ngIf"],["id","changePaymentDate","role","dialog",1,"modal","fade"],["class","form-horizontal","name","changePaymentDateForm",4,"ngIf"],["id","changePaymentMethod","role","dialog",1,"modal","fade"],["class","form-horizontal","name","changePaymentMethodForm",4,"ngIf"],["name","savePaymentfrm",1,"form-horizontal"],["savePaymentfrm","ngForm"],[1,"modal-body"],[1,"form-group"],[1,"control-label","col-md-3"],[1,"col-md-6"],["name","txtReferenceNo","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtReferenceNo","ngModel"],["class","col-md-6",4,"ngIf"],["class","col-md-1",4,"ngIf"],["name","ddlTransactionTypes","required","",1,"form-control",3,"disabled","ngModel","ngModelChange","change"],["ddlTransactionTypes","ngModel","t",""],[3,"value",4,"ngFor","ngForOf"],["name","ddlTransactionMethods","required","",1,"form-control",3,"disabled","ngModel","ngModelChange"],["ddlTransactionMethods","ngModel"],["type","number","name","txtAmount","required","","readonly","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtAmount","ngModel"],["class","form-group",4,"ngIf"],["name","txtRemarks",1,"form-control",3,"disabled","ngModel","ngModelChange"],["txtRemarks","ngModel"],["class","modal-footer",4,"ngIf"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","showTime","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["name","txtPaymentDate","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtPaymentDate","ngModel"],[1,"col-md-1"],["type","button","data-toggle","modal","data-target","#changePaymentDate",1,"btn","btn-primary"],[3,"value"],["type","button","data-toggle","modal","data-target","#changePaymentMethod",1,"btn","btn-primary"],["disabled","","name","txtCharges",1,"form-control",3,"ngModel","ngModelChange"],["txtCharges","ngModel"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["name","releaseChargeForm",1,"form-horizontal",3,"ngSubmit"],["releaseChargeForm","ngForm"],[1,"col-md-8"],["id","txtReleaseReason","name","txtReleaseReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtReleaseReason","ngModel"],[1,"alert","alert-danger",3,"hidden"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","data-dismiss","modal","id","btnCancelReleaseChargeModal",1,"btn","btn-primary"],["btnCancelReleaseChargeModal",""],["name","rejectChargeForm",1,"form-horizontal",3,"ngSubmit"],["rejectChargeForm","ngForm"],["id","txtRejectReason","name","txtRejectReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtRejectReason","ngModel"],["type","button","data-dismiss","modal","id","enableCancelCharge",1,"btn","btn-primary",3,"disabled"],["btnCancelRejectChargeModal",""],["name","resubmitChargeForm",1,"form-horizontal",3,"ngSubmit"],["resubmitChargeForm","ngForm"],["id","txtResubmitReason","name","txtResubmitReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtResubmitReason","ngModel"],["type","button","data-dismiss","modal","id","btnCancelResubmitChargeModal",1,"btn","btn-primary",3,"disabled"],["btnCancelResubmitChargeModal",""],["name","changePaymentDateForm",1,"form-horizontal"],["changePaymentDateForm","ngForm"],["name","txtchangeDateReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtchangeDateReason","ngModel"],["name","changePaymentMethodForm",1,"form-horizontal"],["changePaymentMethodForm","ngForm"],["name","ddlTransactionMethods","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","txtMethodChangeReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtMethodChangeReason","ngModel"]],template:function(e,n){1&e&&(o.Qb(0,"div",0),o.Fc(1,"\n    "),o.Qb(2,"div",1),o.Fc(3,"\n        "),o.Lb(4,"i",2),o.Fc(5,"\n        "),o.Lb(6,"input",3,4),o.Fc(8,"\n    "),o.Pb(),o.Fc(9,"\n    "),o.Fc(10,"\n"),o.Pb(),o.Fc(11,"\n\n"),o.Lb(12,"button",5,6),o.Fc(14,"\n"),o.Qb(15,"div",7),o.Fc(16,"\n    "),o.Qb(17,"div",8),o.Fc(18,"\n        "),o.Fc(19,"\n        "),o.Qb(20,"div",9),o.Fc(21,"\n            "),o.Qb(22,"div",10),o.Fc(23,"\n                "),o.Qb(24,"button",11),o.Fc(25,"\xd7"),o.Pb(),o.Fc(26,"\n                "),o.Qb(27,"h4",12),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n            "),o.Pb(),o.Fc(31,"\n            "),o.Dc(32,J,99,38,"form",13),o.Fc(33,"\n        "),o.Pb(),o.Fc(34,"\n    "),o.Pb(),o.Fc(35,"\n"),o.Pb(),o.Fc(36,"\n\n"),o.Lb(37,"button",14,15),o.Fc(39,"\n"),o.Qb(40,"div",16),o.Fc(41,"\n    "),o.Qb(42,"div",8),o.Fc(43,"\n        "),o.Fc(44,"\n        "),o.Qb(45,"div",9),o.Fc(46,"\n            "),o.Qb(47,"div",10),o.Fc(48,"\n                "),o.Qb(49,"button",11),o.Fc(50,"\xd7"),o.Pb(),o.Fc(51,"\n                "),o.Qb(52,"h4",12),o.Fc(53),o.ac(54,"translate"),o.Pb(),o.Fc(55,"\n            "),o.Pb(),o.Fc(56,"\n\n            "),o.Dc(57,ee,38,17,"form",17),o.Fc(58,"\n        "),o.Pb(),o.Fc(59,"\n    "),o.Pb(),o.Fc(60,"\n"),o.Pb(),o.Fc(61,"\n\n"),o.Lb(62,"button",18,19),o.Fc(64,"\n"),o.Qb(65,"div",20),o.Fc(66,"\n    "),o.Qb(67,"div",8),o.Fc(68,"\n        "),o.Fc(69,"\n        "),o.Qb(70,"div",9),o.Fc(71,"\n            "),o.Qb(72,"div",10),o.Fc(73,"\n                "),o.Qb(74,"button",11),o.Fc(75,"\xd7"),o.Pb(),o.Fc(76,"\n                "),o.Qb(77,"h4",12),o.Fc(78),o.ac(79,"translate"),o.Pb(),o.Fc(80,"\n            "),o.Pb(),o.Fc(81,"\n\n            "),o.Dc(82,ne,38,16,"form",21),o.Fc(83,"\n        "),o.Pb(),o.Fc(84,"\n    "),o.Pb(),o.Fc(85,"\n"),o.Pb(),o.Fc(86,"\n\n"),o.Lb(87,"button",22,23),o.Fc(89,"\n"),o.Qb(90,"div",24),o.Fc(91,"\n    "),o.Qb(92,"div",8),o.Fc(93,"\n        "),o.Fc(94,"\n        "),o.Qb(95,"div",9),o.Fc(96,"\n            "),o.Qb(97,"div",10),o.Fc(98,"\n                "),o.Qb(99,"button",11),o.Fc(100,"\xd7"),o.Pb(),o.Fc(101,"\n                "),o.Qb(102,"h4",12),o.Fc(103),o.ac(104,"translate"),o.Pb(),o.Fc(105,"\n            "),o.Pb(),o.Fc(106,"\n\n            "),o.Dc(107,te,38,16,"form",25),o.Fc(108,"\n        "),o.Pb(),o.Fc(109,"\n    "),o.Pb(),o.Fc(110,"\n"),o.Pb(),o.Fc(111,"\n\n"),o.Qb(112,"div",26),o.Fc(113,"\n    "),o.Qb(114,"div",8),o.Fc(115,"\n        "),o.Fc(116,"\n        "),o.Qb(117,"div",9),o.Fc(118,"\n            "),o.Qb(119,"div",10),o.Fc(120,"\n                "),o.Qb(121,"button",11),o.Fc(122,"\xd7"),o.Pb(),o.Fc(123,"\n                "),o.Qb(124,"h4",12),o.Fc(125),o.ac(126,"translate"),o.Pb(),o.Fc(127,"\n            "),o.Pb(),o.Fc(128,"\n\n            "),o.Dc(129,ce,45,23,"form",27),o.Fc(130,"\n        "),o.Pb(),o.Fc(131,"\n    "),o.Pb(),o.Fc(132,"\n"),o.Pb(),o.Fc(133,"\n\n"),o.Qb(134,"div",28),o.Fc(135,"\n    "),o.Qb(136,"div",8),o.Fc(137,"\n        "),o.Fc(138,"\n        "),o.Qb(139,"div",9),o.Fc(140,"\n            "),o.Qb(141,"div",10),o.Fc(142,"\n                "),o.Qb(143,"button",11),o.Fc(144,"\xd7"),o.Pb(),o.Fc(145,"\n                "),o.Qb(146,"h4",12),o.Fc(147),o.ac(148,"translate"),o.Pb(),o.Fc(149,"\n            "),o.Pb(),o.Fc(150,"\n\n            "),o.Dc(151,ie,49,17,"form",29),o.Fc(152,"\n        "),o.Pb(),o.Fc(153,"\n    "),o.Pb(),o.Fc(154,"\n"),o.Pb(),o.Fc(155,"\n")),2&e&&(o.yb(28),o.Gc(o.bc(29,12,"CompanyPayment")),o.yb(4),o.hc("ngIf",n.active),o.yb(21),o.Gc(o.bc(54,14,"ReleaseCharge")),o.yb(4),o.hc("ngIf",n.active),o.yb(21),o.Gc(o.bc(79,16,"RejectCharge")),o.yb(4),o.hc("ngIf",n.active),o.yb(21),o.Gc(o.bc(104,18,"ResubmitCharge")),o.yb(4),o.hc("ngIf",n.active),o.yb(18),o.Gc(o.bc(126,20,"ChangePaymentDate")),o.yb(4),o.hc("ngIf",n.active),o.yb(18),o.Hc("",o.bc(148,22,"ChangePaymentMethod")," "),o.yb(4),o.hc("ngIf",n.active))},directives:[c.k,a.q,a.g,a.h,a.b,a.f,a.i,a.p,a.o,c.j,a.k,P.a,a.j,a.r],pipes:[u.c,v.a],encapsulation:2}),e})();function se(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"  \n"),o.Pb())}function re(e,n){if(1&e&&(o.Qb(0,"button",28),o.Fc(1),o.ac(2,"translate"),o.Pb()),2&e){const e=o.Zb();o.ic("disabled",e.enableCancelInvioce?"":"disabled"),o.yb(1),o.Hc("\n                ",o.bc(2,2,"CancelInvoice"),"\n            ")}}function be(e,n){if(1&e&&(o.Qb(0,"div",29),o.Fc(1,"\n            "),o.Qb(2,"div",12),o.Fc(3,"\n                "),o.Qb(4,"div",30),o.Fc(5,"\n                    "),o.Qb(6,"strong"),o.Fc(7),o.ac(8,"translate"),o.Pb(),o.Fc(9,"\n                "),o.Pb(),o.Fc(10,"\n                "),o.Qb(11,"div",30),o.Fc(12),o.ac(13,"translateObjects"),o.Pb(),o.Fc(14,"\n                "),o.Qb(15,"div",30),o.Fc(16,"\n                    "),o.Qb(17,"strong"),o.Fc(18),o.ac(19,"translate"),o.Pb(),o.Fc(20,"\n                "),o.Pb(),o.Fc(21,"\n                "),o.Qb(22,"div",30),o.Fc(23),o.Pb(),o.Fc(24,"\n            "),o.Pb(),o.Fc(25,"\n            "),o.Qb(26,"div",12),o.Fc(27,"\n                "),o.Qb(28,"div",30),o.Fc(29,"\n                    "),o.Qb(30,"strong"),o.Fc(31),o.ac(32,"translate"),o.Pb(),o.Fc(33,"\n                "),o.Pb(),o.Fc(34,"\n                "),o.Qb(35,"div",30),o.Fc(36),o.Pb(),o.Fc(37,"\n            "),o.Pb(),o.Fc(38,"\n        "),o.Pb()),2&e){const e=o.Zb();o.yb(7),o.Hc("\n                        ",o.bc(8,6,"CanceledBy"),"\n                    "),o.yb(5),o.Hc("\n                    ",o.dc(13,8,e.selectedInvoice.canceledBy,"name","nameTranslation").name,"\n                "),o.yb(6),o.Hc("\n                        ",o.bc(19,12,"CancellationDate"),"\n                    "),o.yb(5),o.Hc("\n                    :",e.selectedInvoice.cancellationDateString,"\n                "),o.yb(8),o.Hc("\n                        ",o.bc(32,14,"CancellationReason"),"\n                    "),o.yb(5),o.Hc("\n                    :",e.selectedInvoice.cancellationReason,"\n                ")}}function le(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",31,32),o.Fc(2,"\n                "),o.Qb(3,"div",33),o.Fc(4,"\n                    "),o.Qb(5,"div",34),o.Fc(6,"\n                        "),o.Qb(7,"label",35),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"div",36),o.Fc(12,"\n                            "),o.Qb(13,"textarea",37),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().selectedInvoice.cancellationReason=n}),o.Pb(),o.Fc(14,"\n                        "),o.Pb(),o.Fc(15,"\n                    "),o.Pb(),o.Fc(16,"\n                "),o.Pb(),o.Fc(17,"\n                "),o.Qb(18,"div",38),o.Fc(19,"\n                    "),o.Qb(20,"div",39),o.Fc(21,"\n                        "),o.Qb(22,"button",40),o.Xb("click",function(){return o.wc(e),o.Zb().confirmInvoiceCancellation()}),o.Fc(23),o.ac(24,"translate"),o.Pb(),o.Fc(25,"\n                        "),o.Qb(26,"button",41),o.Fc(27),o.ac(28,"translate"),o.Pb(),o.Fc(29,"\n                    "),o.Pb(),o.Fc(30,"\n                "),o.Pb(),o.Fc(31,"\n            "),o.Pb()}if(2&e){const e=o.Zb();o.yb(8),o.Gc(o.bc(9,4,"CancellationReason")),o.yb(5),o.hc("ngModel",e.selectedInvoice.cancellationReason),o.yb(10),o.Gc(o.bc(24,6,"ConfirmCancellation")),o.yb(4),o.Gc(o.bc(28,8,"Ignore"))}}let de=(()=>{class e{constructor(e,n,t,c,a,i,o){this.toastr=e,this.localStorage=n,this.activatedRoute=t,this.insuranceService=c,this.claimService=a,this.translate=i,this.accountService=o,this.userPermisions=new b.a,this.key=new l.a,this.enableViewCompanyDetails=!1,this.enableCancelInvioce=!1,this.enableEndorseInvoicesBtn=!1,this.showProgress=!1,this.active=!0,this.toPrintDiv="print-section",this.selectedInvoice=new k,this.utilityClass=new d.a}ngOnInit(){this.selectedInvoiceId=this.activatedRoute.snapshot.params.id,this.getInvoiceDetails(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.GenerateInvoices&&n.permission.key!=this.key.ExcludeInvoices&&n.permission.key!=this.key.IncludeInvoices&&n.permission.key!=this.key.DeleteInvoices&&n.permission.key!=this.key.EndorseInvoices||1!=n.allow||(this.enableViewCompanyDetails=!0),n.permission.key==this.key.ExcludeInvoices&&1==n.allow&&(this.enableCancelInvioce=!0),n.permission.key==this.key.EndorseInvoices&&1==n.allow&&(this.enableEndorseInvoicesBtn=!0)}getInvoiceDetails(){this.showProgress=!0;let e=this;this.insuranceService.getInvoiceById(this.selectedInvoiceId).subscribe(function(n){var t,c;e.selectedInvoice=n,e.selectedInvoice&&(e.companyId=e.selectedInvoice.companyId,e.invoiceChargesList=e.selectedInvoice.charges,e.isInvoiceCanceled="Canceled"==(null===(c=null===(t=e.selectedInvoice)||void 0===t?void 0:t.status)||void 0===c?void 0:c.toString()))},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}updateAmount(e){null==e&&null==e||(this.selectedInvoice.netAmount=this.selectedInvoice.netAmount-e.oldValue,this.selectedInvoice.netAmount=this.selectedInvoice.netAmount+e.newValue)}confirmInvoiceCancellation(){let e=this,n=new k,t=this.localStorage.retrieve("UserID"),c=this.localStorage.retrieve("FullUserName"),a=new Date;n.id=this.selectedInvoiceId,n.cancellationReason=this.selectedInvoice.cancellationReason,n.canceledById=t,n.cancellationDate=this.utilityClass.getUtcDateTime(a),this.showProgress=!0,this.insuranceService.cancelInvoice(n).subscribe(function(n){e.selectedInvoice.status=N.canceled,e.selectedInvoice.cancellationDateString=e.utilityClass.getISODateFormat(a),null==e.selectedInvoice.canceledBy&&(e.selectedInvoice.canceledBy=new R),e.selectedInvoice.canceledBy.name=c,e.isInvoiceCanceled=!0;let t=e.translate.instant("InvoiceCanceledSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,"")},function(){e.showProgress=!1})}endorseInvoice(){let e=this,n=new k,t=this.localStorage.retrieve("UserID"),c=this.localStorage.retrieve("FullUserName"),a=new Date;n.id=this.selectedInvoiceId,n.status=N.endorsed,n.lastModifierID=t,n.lastModifierName=c,n.lastModificationDate=this.utilityClass.getUtcDateTime(a),this.showProgress=!0,this.insuranceService.endorseInvoice(n).subscribe(function(n){e.selectedInvoice.status=N.endorsed;let t=e.translate.instant("InvoiceEndorsedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,"")},function(){e.showProgress=!1})}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.a),o.Kb(F.a),o.Kb(L.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-invoice-detail"]],decls:187,vars:78,consts:[[4,"ngIf"],[1,"row"],[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"form-horizontal"],[1,"row","text-center"],["type","button","routerLink","/insurance/invoice",1,"btn","btn-primary",3,"disabled"],["type","button","clas","","class","btn btn-primary","data-toggle","modal","data-target","#cancelInvoice",3,"disabled",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","alert-warning",4,"ngIf"],[1,"alert-success"],[1,"row","borderBottom"],[1,"col-md-2"],[1,"col-md-4"],[1,"nav","nav-tabs"],[1,"active"],["href","#InvoiceCharges","data-toggle","tab","aria-expanded","true"],["id","invoiceServicesTabContent",1,"tab-content"],["id","InvoiceCharges",1,"tab-pane","fade","active","in"],[3,"isInvoiceCanceled","invoiceChargesList","onAmountUpdated"],["id","cancelInvoice","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","cancelInvoiceForm",4,"ngIf"],["type","button","clas","","data-toggle","modal","data-target","#cancelInvoice",1,"btn","btn-primary",3,"disabled"],[1,"alert-warning"],[1,"col-md-3"],["name","cancelInvoiceForm",1,"form-horizontal"],["cancelInvoiceForm","ngForm"],[1,"modal-body"],[1,"form-group"],[1,"control-label","col-md-3"],[1,"col-md-6"],["name","txtInvoiceCancellationReason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary"]],template:function(e,n){1&e&&(o.Dc(0,se,4,0,"div",0),o.Fc(1,"\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n    "),o.Qb(6,"div",3),o.Fc(7,"\n        "),o.Qb(8,"div",1),o.Fc(9,"\n            "),o.Qb(10,"div",4),o.Fc(11,"\n                "),o.Qb(12,"a"),o.Fc(13),o.ac(14,"translate"),o.Pb(),o.Fc(15," \xa0/\n                "),o.Qb(16,"a"),o.Fc(17),o.ac(18,"translate"),o.Pb(),o.Fc(19),o.ac(20,"translate"),o.Pb(),o.Fc(21,"\n        "),o.Pb(),o.Fc(22,"\n    "),o.Pb(),o.Fc(23,"\n    "),o.Lb(24,"br"),o.Fc(25,"\n    "),o.Qb(26,"form",5),o.Fc(27,"\n        "),o.Qb(28,"div",6),o.Fc(29,"\n            "),o.Fc(30,"\n            "),o.Qb(31,"button",7),o.Fc(32),o.ac(33,"translate"),o.Pb(),o.Fc(34,"\n            "),o.Dc(35,re,3,4,"button",8),o.Fc(36,"\n            "),o.Qb(37,"button",9),o.Xb("click",function(){return n.endorseInvoice()}),o.Fc(38),o.ac(39,"translate"),o.Pb(),o.Fc(40,"\n        "),o.Pb(),o.Fc(41,"\n        "),o.Qb(42,"h4"),o.Fc(43),o.ac(44,"translate"),o.Pb(),o.Fc(45,"\n        "),o.Dc(46,be,39,16,"div",10),o.Fc(47,"\n        "),o.Qb(48,"div",11),o.Fc(49,"\n            "),o.Qb(50,"div",12),o.Fc(51,"\n                "),o.Qb(52,"div",13),o.Fc(53,"\n                    "),o.Qb(54,"strong"),o.Fc(55),o.ac(56,"translate"),o.Pb(),o.Fc(57,"\n                "),o.Pb(),o.Fc(58,"\n                "),o.Qb(59,"div",14),o.Fc(60),o.Pb(),o.Fc(61,"\n                "),o.Qb(62,"div",13),o.Fc(63,"\n                    "),o.Qb(64,"strong"),o.Fc(65),o.ac(66,"translate"),o.Pb(),o.Fc(67,"\n                "),o.Pb(),o.Fc(68,"\n                "),o.Qb(69,"div",14),o.Fc(70),o.ac(71,"translateObjects"),o.Pb(),o.Fc(72,"\n            "),o.Pb(),o.Fc(73,"\n            "),o.Qb(74,"div",12),o.Fc(75,"\n                "),o.Qb(76,"div",13),o.Fc(77,"\n                    "),o.Qb(78,"strong"),o.Fc(79),o.ac(80,"translate"),o.Pb(),o.Fc(81,"\n                "),o.Pb(),o.Fc(82,"\n                "),o.Qb(83,"div",14),o.Fc(84),o.Pb(),o.Fc(85,"\n                "),o.Qb(86,"div",13),o.Fc(87,"\n                    "),o.Qb(88,"strong"),o.Fc(89),o.ac(90,"translate"),o.Pb(),o.Fc(91,"\n                "),o.Pb(),o.Fc(92,"\n                "),o.Qb(93,"div",14),o.Fc(94),o.ac(95,"translateObjects"),o.Pb(),o.Fc(96,"\n            "),o.Pb(),o.Fc(97,"\n            "),o.Qb(98,"div",12),o.Fc(99,"\n                "),o.Qb(100,"div",13),o.Fc(101,"\n                    "),o.Qb(102,"strong"),o.Fc(103),o.ac(104,"translate"),o.Pb(),o.Fc(105,"\n                "),o.Pb(),o.Fc(106,"\n                "),o.Qb(107,"div",14),o.Fc(108),o.Pb(),o.Fc(109,"\n                "),o.Qb(110,"div",13),o.Fc(111,"\n                    "),o.Qb(112,"strong"),o.Fc(113),o.ac(114,"translate"),o.Pb(),o.Fc(115,"\n                "),o.Pb(),o.Fc(116,"\n                "),o.Qb(117,"div",14),o.Fc(118),o.Pb(),o.Fc(119,"\n            "),o.Pb(),o.Fc(120,"\n            "),o.Qb(121,"div",12),o.Fc(122,"\n                "),o.Qb(123,"div",13),o.Fc(124,"\n                    "),o.Qb(125,"strong"),o.Fc(126),o.ac(127,"translate"),o.Pb(),o.Fc(128,"\n                "),o.Pb(),o.Fc(129,"\n                "),o.Qb(130,"div",14),o.Fc(131),o.Pb(),o.Fc(132,"\n                "),o.Qb(133,"div",13),o.Fc(134,"\n                    "),o.Qb(135,"strong"),o.Fc(136),o.ac(137,"translate"),o.Pb(),o.Fc(138,"\n                "),o.Pb(),o.Fc(139,"\n                "),o.Qb(140,"div",14),o.Fc(141),o.ac(142,"translateObjects"),o.Pb(),o.Fc(143,"\n            "),o.Pb(),o.Fc(144,"\n            "),o.Fc(145,"\n        "),o.Pb(),o.Fc(146,"\n        "),o.Qb(147,"ul",15),o.Fc(148,"\n            "),o.Qb(149,"li",16),o.Qb(150,"a",17),o.Fc(151),o.ac(152,"translate"),o.Pb(),o.Pb(),o.Fc(153,"\n        "),o.Pb(),o.Fc(154,"\n        "),o.Qb(155,"div",18),o.Fc(156,"\n            "),o.Qb(157,"div",19),o.Fc(158,"\n                "),o.Qb(159,"insurance-invoice-services",20),o.Xb("onAmountUpdated",function(e){return n.updateAmount(e)}),o.Pb(),o.Fc(160,"\n            "),o.Pb(),o.Fc(161,"\n        "),o.Pb(),o.Fc(162,"\n    "),o.Pb(),o.Fc(163,"\n"),o.Pb(),o.Fc(164,"\n\n"),o.Qb(165,"div",21),o.Fc(166,"\n    "),o.Qb(167,"div",22),o.Fc(168,"\n        "),o.Fc(169,"\n        "),o.Qb(170,"div",23),o.Fc(171,"\n            "),o.Qb(172,"div",24),o.Fc(173,"\n                "),o.Qb(174,"button",25),o.Fc(175,"\xd7"),o.Pb(),o.Fc(176,"\n                "),o.Qb(177,"h4",26),o.Fc(178),o.ac(179,"translate"),o.Pb(),o.Fc(180,"\n            "),o.Pb(),o.Fc(181,"\n\n            "),o.Dc(182,le,32,10,"form",27),o.Fc(183,"\n        "),o.Pb(),o.Fc(184,"\n    "),o.Pb(),o.Fc(185,"\n"),o.Pb(),o.Fc(186,"\n\n")),2&e&&(o.hc("ngIf",n.showProgress),o.yb(4),o.hc("activeTabIndex",21),o.yb(9),o.Gc(o.bc(14,34,"InsuranceManager")),o.yb(4),o.Gc(o.bc(18,36,"Invoices")),o.yb(2),o.Hc(" \xa0/\n                ",o.bc(20,38,"InvoiceDetails"),"\n            "),o.yb(12),o.ic("disabled",n.enableViewCompanyDetails?"":"disabled"),o.yb(1),o.Gc(o.bc(33,40,"Back")),o.yb(3),o.hc("ngIf",!n.isInvoiceCanceled),o.yb(2),o.ic("disabled",n.enableEndorseInvoicesBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(39,42,"EndorseInvoice")),o.yb(5),o.Ic("",o.bc(44,44,"InvoiceRefNo"),": ",n.selectedInvoice.id,""),o.yb(3),o.hc("ngIf",n.isInvoiceCanceled),o.yb(9),o.Hc("\n                        ",o.bc(56,46,"InvoiceDate"),"\n                    "),o.yb(5),o.Hc("\n                    :",n.selectedInvoice.invoiceDateString,"\n                "),o.yb(5),o.Hc("\n                        ",o.bc(66,48,"CreatedBy"),"\n                    "),o.yb(5),o.Hc("\n                    :",o.dc(71,50,n.selectedInvoice,"creatorName","creatorNameTranslation").creatorName,"\n\n\n                "),o.yb(9),o.Hc("\n                        ",o.bc(80,54,"InvoiceStatus"),"\n                    "),o.yb(5),o.Hc("\n                    :",n.selectedInvoice.status,"\n                "),o.yb(5),o.Hc("\n                        ",o.bc(90,56,"CompanyName"),"\n                    "),o.yb(5),o.Hc("\n                    :",o.dc(95,58,n.selectedInvoice,"companyName","companyNameTranslation").companyName,"\n                "),o.yb(9),o.Hc("\n                        ",o.bc(104,62,"NetAmount"),"\n                    "),o.yb(5),o.Hc("\n                    :",n.selectedInvoice.netAmount,"\n                "),o.yb(5),o.Hc("\n                        ",o.bc(114,64,"PrePaidAmount"),"\n                    "),o.yb(5),o.Hc("\n                    :",n.selectedInvoice.totalCredit,"\n                "),o.yb(8),o.Hc("\n                        ",o.bc(127,66,"LastModificationDate"),"\n                    "),o.yb(5),o.Hc("\n                    :",n.selectedInvoice.lastModificationDateString,"\n                "),o.yb(5),o.Hc("\n                        ",o.bc(137,68,"LastModifierUser"),"\n                    "),o.yb(5),o.Hc("\n                    :",o.dc(142,70,n.selectedInvoice,"lastModifierName","lastModifierNameTranslation").lastModifierName,"\n                "),o.yb(10),o.Gc(o.bc(152,74,"Services")),o.yb(8),o.hc("isInvoiceCanceled",n.isInvoiceCanceled)("invoiceChargesList",n.invoiceChargesList),o.yb(19),o.Gc(o.bc(179,76,"CancelInvoice")),o.yb(4),o.hc("ngIf",n.active))},directives:[c.k,s.a,a.q,a.g,a.h,i.c,oe,p.a,a.b,a.f,a.i],pipes:[u.c,v.a],encapsulation:2}),e})();function he(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n\n"),o.Pb())}function me(e,n){1&e&&o.Lb(0,"img",20)}function Fe(e,n){if(1&e&&(o.Qb(0,"tr"),o.Fc(1,"\n                        "),o.Qb(2,"td"),o.Fc(3),o.Pb(),o.Fc(4,"\n                        "),o.Qb(5,"td"),o.Fc(6),o.Pb(),o.Fc(7,"\n                        "),o.Qb(8,"td"),o.Fc(9),o.Pb(),o.Fc(10,"\n                        "),o.Qb(11,"td"),o.Fc(12,"\n                            "),o.Dc(13,me,1,0,"img",19),o.Fc(14,"\n                        "),o.Pb(),o.Fc(15,"\n                    "),o.Pb()),2&e){const e=n.$implicit;o.yb(3),o.Gc(e.name),o.yb(3),o.Gc(e.nameTranslation),o.yb(3),o.Gc(e.activePoliciesCount),o.yb(4),o.hc("ngIf",e.isActive)}}let ue=(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.storage=n,this.router=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.userPermisions=new b.a,this.key=new l.a,this.showProgress=!1,this.enableViewCompanyDetails=!1,this.enableShowCompanyDetails=!1,this.enableActivateBtn=!1,this.toPrintDiv="print-section"}ngOnInit(){this.getAllInsuranceCompanies(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.add&&!n.fullControl||(this.enableViewCompanyDetails=!0),n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.activate&&!n.fullControl||(this.enableActivateBtn=!0),n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.edit&&!n.fullControl||(this.enableShowCompanyDetails=!0)}getAllInsuranceCompanies(){this.showProgress=!0;let e=this;this.insuranceService.getAllInsuranceCompanies().subscribe(function(n){e.insuranceCompaniesList=n},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}changeActivation(e,n){var t=this.insuranceCompaniesList.find(n=>n.id==e);if(null!=t&&null!=t){t.isActive=n.target.checked;let e=this;this.showProgress=!0,this.insuranceService.updateInsuranceCompanyActivation(t).subscribe(function(n){let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.b),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-company"]],decls:80,vars:29,consts:[[4,"ngIf"],[1,"row"],[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"row","well"],[1,"col-md-4","col-md-offset-8"],[1,"float-right","btnMarginLeft"],[3,"section"],["type","button","routerLink","/insurance/companyDetails/new",1,"btn","btn-primary","float-right","btnMarginRight",3,"disabled"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],["id","print-section",1,"hidden"],[1,"table","table-responsive","table-hover"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"],["src","assets/images/ok-24.jpg",4,"ngIf"],["src","assets/images/ok-24.jpg"]],template:function(e,n){1&e&&(o.Dc(0,he,4,0,"div",0),o.Fc(1,"\n\n\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n\n    "),o.Qb(6,"div",3),o.Fc(7,"\n        "),o.Qb(8,"div",1),o.Fc(9,"\n            "),o.Qb(10,"div",4),o.Fc(11,"\n                "),o.Qb(12,"a"),o.Fc(13),o.ac(14,"translate"),o.Pb(),o.Fc(15),o.ac(16,"translate"),o.Pb(),o.Fc(17,"\n\n        "),o.Pb(),o.Fc(18,"\n    "),o.Pb(),o.Fc(19,"\n\n    \n    \n        "),o.Qb(20,"div",5),o.Fc(21,"\n            "),o.Qb(22,"div",6),o.Fc(23,"\n                "),o.Qb(24,"div",7),o.Lb(25,"print-page",8),o.Pb(),o.Fc(26,"\n                "),o.Qb(27,"button",9),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n            "),o.Pb(),o.Fc(31,"\n\n        "),o.Pb(),o.Fc(32,"\n\n\n\n    "),o.Qb(33,"div",10),o.Fc(34,"\n        "),o.Qb(35,"div",11),o.Fc(36,"\n            "),o.Lb(37,"i",12),o.Fc(38,"\n            "),o.Lb(39,"input",13,14),o.ac(41,"translate"),o.Fc(42,"\n        "),o.Pb(),o.Fc(43,"\n        "),o.Fc(44,"\n    "),o.Pb(),o.Fc(45,"\n\n        "),o.Qb(46,"div",15),o.Fc(47,"\n            "),o.Qb(48,"table",16),o.Fc(49,"\n                "),o.Qb(50,"thead",17),o.Fc(51,"\n                    "),o.Qb(52,"tr"),o.Fc(53,"\n                        "),o.Qb(54,"th"),o.Fc(55),o.ac(56,"translate"),o.Pb(),o.Fc(57,"\n                        "),o.Qb(58,"th"),o.Fc(59),o.ac(60,"translate"),o.Pb(),o.Fc(61,"\n                        "),o.Qb(62,"th"),o.Fc(63),o.ac(64,"translate"),o.Pb(),o.Fc(65,"\n                        "),o.Qb(66,"th"),o.Fc(67),o.ac(68,"translate"),o.Pb(),o.Fc(69,"\n                    "),o.Pb(),o.Fc(70,"\n                "),o.Pb(),o.Fc(71,"\n                "),o.Qb(72,"tbody"),o.Fc(73,"\n                    "),o.Dc(74,Fe,16,4,"tr",18),o.Fc(75,"\n                "),o.Pb(),o.Fc(76,"\n            "),o.Pb(),o.Fc(77,"\n        "),o.Pb(),o.Fc(78,"\n    "),o.Pb(),o.Fc(79,"\n")),2&e&&(o.hc("ngIf",n.showProgress),o.yb(4),o.hc("activeTabIndex",17),o.yb(9),o.Gc(o.bc(14,13,"InsuranceManagement")),o.yb(2),o.Hc(" \xa0/\n                ",o.bc(16,15,"InsuranceCompanies"),"\n            "),o.yb(10),o.hc("section",n.toPrintDiv),o.yb(2),o.ic("disabled",n.enableViewCompanyDetails?"":"disabled"),o.yb(1),o.Hc("\n                    ",o.bc(29,17,"New"),"\n                "),o.yb(11),o.hc("placeholder",o.bc(41,19,"Search")),o.yb(16),o.Gc(o.bc(56,21,"NameArabic")),o.yb(4),o.Gc(o.bc(60,23,"NameEnglish")),o.yb(4),o.Gc(o.bc(64,25,"ActivePoliciesCount")),o.yb(4),o.Gc(o.bc(68,27,"Active")),o.yb(7),o.hc("ngForOf",n.insuranceCompaniesList))},directives:[c.k,s.a,g.a,i.c,c.j,p.a],pipes:[u.c],encapsulation:2}),e})();function ye(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",2,3),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().onSubmit()}),o.Fc(2,"\n        "),o.Qb(3,"div",4),o.Fc(4,"\n            "),o.Qb(5,"div",5),o.Fc(6,"\n                "),o.Qb(7,"button",6),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                "),o.Qb(11,"button",7),o.Xb("click",function(){return o.wc(e),o.Zb().clear()}),o.Fc(12),o.ac(13,"translate"),o.Pb(),o.Fc(14,"\n                "),o.Qb(15,"button",8),o.Fc(16),o.ac(17,"translate"),o.Pb(),o.Fc(18,"\n            "),o.Pb(),o.Fc(19,"\n        "),o.Pb(),o.Fc(20,"\n        "),o.Lb(21,"br"),o.Fc(22,"\n        "),o.Lb(23,"br"),o.Fc(24,"\n        "),o.Qb(25,"div",9),o.Fc(26,"\n            "),o.Qb(27,"label",10),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n            "),o.Qb(31,"div",11),o.Fc(32,"\n                "),o.Qb(33,"input",12,13),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.name=n}),o.Pb(),o.Fc(35,"\n                "),o.Qb(36,"div",14),o.Fc(37),o.ac(38,"translate"),o.Pb(),o.Fc(39,"\n            "),o.Pb(),o.Fc(40,"\n            "),o.Qb(41,"label",15),o.Fc(42),o.ac(43,"translate"),o.Pb(),o.Fc(44,"\n            "),o.Qb(45,"div",11),o.Fc(46,"\n                "),o.Qb(47,"input",16,17),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.nameTranslation=n}),o.Pb(),o.Fc(49,"\n                "),o.Qb(50,"div",14),o.Fc(51),o.ac(52,"translate"),o.Pb(),o.Fc(53,"\n            "),o.Pb(),o.Fc(54,"\n        "),o.Pb(),o.Fc(55,"\n        "),o.Qb(56,"div",9),o.Fc(57,"\n            "),o.Qb(58,"label",18),o.Fc(59),o.ac(60,"translate"),o.Pb(),o.Fc(61,"\n            "),o.Qb(62,"div",11),o.Fc(63,"\n                "),o.Qb(64,"input",19,20),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.taxid=n}),o.Pb(),o.Fc(66,"\n                "),o.Qb(67,"div",14),o.Fc(68),o.ac(69,"translate"),o.Pb(),o.Fc(70,"\n            "),o.Pb(),o.Fc(71,"\n            "),o.Qb(72,"label",21),o.Fc(73),o.ac(74,"translate"),o.Pb(),o.Fc(75,"\n            "),o.Qb(76,"div",11),o.Fc(77,"\n                "),o.Qb(78,"input",22,23),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.address=n}),o.Pb(),o.Fc(80,"\n                "),o.Qb(81,"div",14),o.Fc(82),o.ac(83,"translate"),o.Pb(),o.Fc(84,"\n            "),o.Pb(),o.Fc(85,"\n        "),o.Pb(),o.Fc(86,"\n        "),o.Qb(87,"div",9),o.Fc(88,"\n            "),o.Qb(89,"label",24),o.Fc(90),o.ac(91,"translate"),o.Pb(),o.Fc(92,"\n            "),o.Qb(93,"div",11),o.Fc(94,"\n                "),o.Lb(95,"input",25),o.ac(96,"date"),o.Fc(97,"\n            "),o.Pb(),o.Fc(98,"\n            "),o.Qb(99,"label",26),o.Fc(100),o.ac(101,"translate"),o.Pb(),o.Fc(102,"\n            "),o.Qb(103,"div",11),o.Fc(104,"\n                "),o.Qb(105,"input",27,28),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.lastModifierName=n}),o.Pb(),o.Fc(107,"\n            "),o.Pb(),o.Fc(108,"\n        "),o.Pb(),o.Fc(109,"\n        "),o.Qb(110,"div",9),o.Fc(111,"\n            "),o.Qb(112,"label",29),o.Fc(113),o.ac(114,"translate"),o.Pb(),o.Fc(115,"\n            "),o.Qb(116,"div",11),o.Fc(117,"\n                "),o.Qb(118,"textarea",30,31),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.description=n}),o.Pb(),o.Fc(120,"\n            "),o.Pb(),o.Fc(121,"\n            "),o.Qb(122,"label",32),o.Fc(123),o.ac(124,"translate"),o.Pb(),o.Fc(125,"\n            "),o.Qb(126,"div",33),o.Fc(127,"\n                "),o.Qb(128,"label"),o.Fc(129,"\n                    "),o.Qb(130,"input",34,35),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.isActive=n}),o.Pb(),o.Fc(132,"\n                    "),o.Lb(133,"span",36),o.Fc(134,"\n                "),o.Pb(),o.Fc(135,"\n            "),o.Pb(),o.Fc(136,"\n        "),o.Pb(),o.Fc(137,"\n\n        "),o.Qb(138,"h4"),o.Fc(139),o.ac(140,"translate"),o.Pb(),o.Fc(141,"\n        "),o.Lb(142,"hr"),o.Fc(143,"\n        "),o.Qb(144,"div",9),o.Fc(145,"\n            "),o.Qb(146,"label",37),o.Fc(147),o.ac(148,"translate"),o.Pb(),o.Fc(149,"\n            "),o.Qb(150,"div",38),o.Fc(151,"\n                "),o.Qb(152,"input",39,40),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().firstContact.name=n}),o.Pb(),o.Fc(154,"\n            "),o.Pb(),o.Fc(155,"\n            "),o.Qb(156,"label",41),o.Fc(157),o.ac(158,"translate"),o.Pb(),o.Fc(159,"\n            "),o.Qb(160,"div",38),o.Fc(161,"\n                "),o.Qb(162,"input",42,43),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().firstContact.nameTranslation=n}),o.Pb(),o.Fc(164,"\n            "),o.Pb(),o.Fc(165,"\n        "),o.Pb(),o.Fc(166,"\n\n        "),o.Qb(167,"div",9),o.Fc(168,"\n            "),o.Qb(169,"label",44),o.Fc(170),o.ac(171,"translate"),o.Pb(),o.Fc(172,"\n            "),o.Qb(173,"div",38),o.Fc(174,"\n                "),o.Qb(175,"input",45,46),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().firstContact.mobile=n}),o.Pb(),o.Fc(177,"\n                "),o.Qb(178,"div",14),o.Fc(179),o.ac(180,"translate"),o.Pb(),o.Fc(181,"\n            "),o.Pb(),o.Fc(182,"\n            "),o.Qb(183,"label",47),o.Fc(184),o.ac(185,"translate"),o.Pb(),o.Fc(186,"\n            "),o.Qb(187,"div",38),o.Fc(188,"\n                "),o.Qb(189,"input",48,49),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().firstContact.fax=n}),o.Pb(),o.Fc(191,"\n            "),o.Pb(),o.Fc(192,"\n        "),o.Pb(),o.Fc(193,"\n\n        "),o.Qb(194,"div",9),o.Fc(195,"\n            "),o.Qb(196,"label",50),o.Fc(197),o.ac(198,"translate"),o.Pb(),o.Fc(199,"\n            "),o.Qb(200,"div",38),o.Fc(201,"\n                "),o.Qb(202,"input",51,52),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().firstContact.email=n}),o.Pb(),o.Fc(204,"\n            "),o.Pb(),o.Fc(205,"\n        "),o.Pb(),o.Fc(206,"\n\n        "),o.Qb(207,"h4"),o.Fc(208),o.ac(209,"translate"),o.Pb(),o.Fc(210,"\n        "),o.Lb(211,"hr"),o.Fc(212,"\n        "),o.Qb(213,"div",9),o.Fc(214,"\n            "),o.Qb(215,"label",53),o.Fc(216),o.ac(217,"translate"),o.Pb(),o.Fc(218,"\n            "),o.Qb(219,"div",38),o.Fc(220,"\n                "),o.Qb(221,"input",54,55),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().secondContact.name=n}),o.Pb(),o.Fc(223,"\n            "),o.Pb(),o.Fc(224,"\n            "),o.Qb(225,"label",56),o.Fc(226),o.ac(227,"translate"),o.Pb(),o.Fc(228,"\n            "),o.Qb(229,"div",38),o.Fc(230,"\n                "),o.Qb(231,"input",57,58),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().secondContact.nameTranslation=n}),o.Pb(),o.Fc(233,"\n            "),o.Pb(),o.Fc(234,"\n        "),o.Pb(),o.Fc(235,"\n        "),o.Qb(236,"div",9),o.Fc(237,"\n            "),o.Qb(238,"label",59),o.Fc(239),o.ac(240,"translate"),o.Pb(),o.Fc(241,"\n            "),o.Qb(242,"div",38),o.Fc(243,"\n                "),o.Qb(244,"input",60,61),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().secondContact.mobile=n}),o.Pb(),o.Fc(246,"\n                "),o.Qb(247,"div",14),o.Fc(248),o.ac(249,"translate"),o.Pb(),o.Fc(250,"\n            "),o.Pb(),o.Fc(251,"\n            "),o.Qb(252,"label",62),o.Fc(253),o.ac(254,"translate"),o.Pb(),o.Fc(255,"\n            "),o.Qb(256,"div",38),o.Fc(257,"\n                "),o.Qb(258,"input",63,64),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().secondContact.fax=n}),o.Pb(),o.Fc(260,"\n            "),o.Pb(),o.Fc(261,"\n        "),o.Pb(),o.Fc(262,"\n        "),o.Qb(263,"div",9),o.Fc(264,"\n            "),o.Qb(265,"label",65),o.Fc(266),o.ac(267,"translate"),o.Pb(),o.Fc(268,"\n            "),o.Qb(269,"div",38),o.Fc(270,"\n                "),o.Qb(271,"input",66,67),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().secondContact.email=n}),o.Pb(),o.Fc(273,"\n            "),o.Pb(),o.Fc(274,"\n        "),o.Pb(),o.Fc(275,"\n\n        "),o.Qb(276,"div",5),o.Fc(277,"\n            "),o.Qb(278,"button",6),o.Fc(279),o.ac(280,"translate"),o.Pb(),o.Fc(281,"\n            "),o.Qb(282,"button",7),o.Xb("click",function(){return o.wc(e),o.Zb().clear()}),o.Fc(283),o.ac(284,"translate"),o.Pb(),o.Fc(285,"\n            "),o.Qb(286,"button",8),o.Fc(287),o.ac(288,"translate"),o.Pb(),o.Fc(289,"\n        "),o.Pb(),o.Fc(290,"\n\n    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.vc(34),t=o.vc(48),c=o.vc(65),a=o.vc(79),i=o.vc(176),s=o.vc(245),r=o.Zb();o.yb(7),o.hc("disabled",!e.form.valid||!r.enableAddCompanyBasicBtn),o.yb(1),o.Gc(o.bc(9,62,"Save")),o.yb(3),o.ic("disabled",r.enableAddCompanyBasicBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(13,64,"New")),o.yb(3),o.ic("disabled",r.enableViewCompanyDetails?"":"disabled"),o.yb(1),o.Gc(o.bc(17,66,"Back")),o.yb(12),o.Gc(o.bc(29,68,"ArabicName")),o.yb(5),o.hc("ngModel",r.model.name),o.yb(3),o.hc("hidden",n.valid||n.pristine),o.yb(1),o.Hc("\n                    ",o.bc(38,70,"RequiredField"),"\n                "),o.yb(5),o.Gc(o.bc(43,72,"EnglishName")),o.yb(5),o.hc("ngModel",r.model.nameTranslation),o.yb(3),o.hc("hidden",t.valid||t.pristine),o.yb(1),o.Hc("\n                    ",o.bc(52,74,"RequiredField"),"\n                "),o.yb(8),o.Gc(o.bc(60,76,"TaxId")),o.yb(5),o.hc("ngModel",r.model.taxid),o.yb(3),o.hc("hidden",c.valid||c.pristine),o.yb(1),o.Hc("\n                    ",o.bc(69,78,"RequiredField"),"\n                "),o.yb(5),o.Gc(o.bc(74,80,"Address")),o.yb(5),o.hc("ngModel",r.model.address),o.yb(3),o.hc("hidden",a.valid||a.pristine),o.yb(1),o.Hc("\n                    ",o.bc(83,82,"RequiredField"),"\n                "),o.yb(8),o.Gc(o.bc(91,84,"LastModificationDate")),o.yb(5),o.ic("value",""===r.model.lastModificationDate?"":o.cc(96,86,r.model.lastModificationDate,"dd/MM/yyyy")),o.yb(5),o.Gc(o.bc(101,89,"LastModifierUser")),o.yb(5),o.hc("ngModel",r.model.lastModifierName),o.yb(8),o.Hc("",o.bc(114,91,"Description")," "),o.yb(5),o.hc("ngModel",r.model.description),o.yb(5),o.Hc("",o.bc(124,93,"Active")," "),o.yb(7),o.hc("ngModel",r.model.isActive),o.yb(9),o.Hc("\n           ",o.bc(140,95,"FirstContact"),"\n        "),o.yb(8),o.Gc(o.bc(148,97,"ArabicName")),o.yb(5),o.hc("ngModel",r.firstContact.name),o.yb(5),o.Gc(o.bc(158,99,"EnglishName")),o.yb(5),o.hc("ngModel",r.firstContact.nameTranslation),o.yb(8),o.Gc(o.bc(171,101,"Mobile")),o.yb(5),o.hc("ngModel",r.firstContact.mobile),o.yb(3),o.hc("hidden",i.valid||i.pristine),o.yb(1),o.Hc("\n                    ",o.bc(180,103,"RequiredField"),"\n                "),o.yb(5),o.Gc(o.bc(185,105,"Fax")),o.yb(5),o.hc("ngModel",r.firstContact.fax),o.yb(8),o.Gc(o.bc(198,107,"Email")),o.yb(5),o.hc("ngModel",r.firstContact.email),o.yb(6),o.Hc("\n            ",o.bc(209,109,"SecondContact"),"\n        "),o.yb(8),o.Gc(o.bc(217,111,"ArabicName")),o.yb(5),o.hc("ngModel",r.secondContact.name),o.yb(5),o.Gc(o.bc(227,113,"EnglishName")),o.yb(5),o.hc("ngModel",r.secondContact.nameTranslation),o.yb(8),o.Gc(o.bc(240,115,"Mobile")),o.yb(5),o.hc("ngModel",r.secondContact.mobile),o.yb(3),o.hc("hidden",s.valid||s.pristine),o.yb(1),o.Hc("\n                    ",o.bc(249,117,"RequiredField"),"\n                "),o.yb(5),o.Gc(o.bc(254,119,"Fax")),o.yb(5),o.hc("ngModel",r.secondContact.fax),o.yb(8),o.Gc(o.bc(267,121,"Email")),o.yb(5),o.hc("ngModel",r.secondContact.email),o.yb(7),o.hc("disabled",!e.form.valid||!r.enableAddCompanyBasicBtn),o.yb(1),o.Gc(o.bc(280,123,"Save")),o.yb(3),o.ic("disabled",r.enableAddCompanyBasicBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(284,125,"New")),o.yb(3),o.ic("disabled",r.enableViewCompanyDetails?"":"disabled"),o.yb(1),o.Gc(o.bc(288,127,"Back"))}}let ge=(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.localStorage=n,this._route=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.userPermisions=new b.a,this.key=new l.a,this.showProgress=!1,this.enableAddCompanyBasicBtn=!1,this.enableViewCompanyDetails=!1,this.active=!0,this.firstContact={},this.secondContact={},this.onModelUpdated=new o.n}ngOnInit(){this.model&&(this.model.firstContact&&(this.firstContact=this.model.firstContact),this.model.secondContact&&(this.secondContact=this.model.secondContact)),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.add&&!n.fullControl||(this.enableAddCompanyBasicBtn=!0),n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.view&&!n.fullControl||(this.enableViewCompanyDetails=!0)}ngOnChanges(e){this.model&&(this.model.firstContact&&(this.firstContact=this.model.firstContact),this.model.secondContact&&(this.secondContact=this.model.secondContact))}onSubmit(){let e=this;e.showProgress=!0,this.model.firstContact=this.firstContact,this.model.secondContact=this.secondContact,0==this.model.id?this.insuranceService.SaveInsuranceCompanyBasic(this.model).subscribe(function(n){e.model=n,e.raiseModelUpdated(n);let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1}):this.insuranceService.UpdateInsuranceCompanyBasic(this.model).subscribe(function(n){e.model=n,e.raiseModelUpdated(n);let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}clear(){this.model={id:0,isActive:!0},this.firstContact={},this.model.firstContact=this.firstContact,this.secondContact={},this.model.secondContact=this.secondContact,this.raiseModelUpdated(this.model)}raiseModelUpdated(e){this.onModelUpdated.emit(e)}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.a),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-company-basicData"]],inputs:{model:"model"},outputs:{onModelUpdated:"onModelUpdated"},features:[o.wb],decls:6,vars:1,consts:[[1,"row","padding5"],["novalidate","","class","form-horizontal","name","basicDataForm",3,"ngSubmit",4,"ngIf"],["novalidate","","name","basicDataForm",1,"form-horizontal",3,"ngSubmit"],["basicDataForm","ngForm"],[1,"row"],[1,"col-md-4","col-md-offset-2","col-sm-offset-2","nopadding"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","routerLink","/insurance/companies",1,"btn","btn-primary",3,"disabled"],[1,"form-group"],["for","txtName",1,"control-label","col-md-2","col-sm-2"],[1,"col-md-4","col-sm-4"],["type","text","id","txtArabicName","name","txtArabicName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtArabicName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","txtEnglishName",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtEnglishName","name","txtEnglishName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtEnglishName","ngModel"],["for","txtTaxId",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtTaxId","name","txtTaxId","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtTaxId","ngModel"],["for","txtAddress",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtAddress","name","txtAddress","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtAddress","ngModel"],["for","txtLastModificationDate",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtLastModificationDate","name","txtLastModificationDate","disabled","",1,"form-control",3,"value"],["for","txtLastModifierUser",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtLastModifierUser","name","txtLastModifierUser","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtLastModifierUser","ngModel"],["for","txtDescription",1,"control-label","col-md-2","col-sm-2"],["type","text","id","txtDescription","name","txtDescription",1,"form-control",3,"ngModel","ngModelChange"],["txtDescription","ngModel"],["for","ChkIsActive",1,"control-label","col-md-2"],[1,"col-md-4"],["id","ChkIsActive","name","ChkIsActive","type","checkbox",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["ChkIsActive","ngModel"],[1,"lbl"],["for","txtOwnerFirstName",1,"control-label","col-md-2"],[1,"col-md-3"],["id","txtFirstContactName","name","txtFirstContactName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstContactName","ngModel"],["for","txtFirstContactNameTranslation",1,"control-label","col-md-2"],["id","txtFirstContactNameTranslation","name","txtFirstContactNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstContactNameTranslation","ngModel"],["for","txtFirstContactPhone",1,"control-label","col-md-2"],["type","tel","id","txtFirstContactPhone","name","txtFirstContactPhone","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstContactPhone","ngModel"],["for","txtFirstContactFax",1,"control-label","col-md-2"],["type","tel","id","txtFirstContactFax","name","txtFirstContactFax","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstContactFax","ngModel"],["for","txtFirstContactEmail",1,"control-label","col-md-2"],["id","txtFirstContactEmail","name","txtFirstContactEmail","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtFirstContactEmail","ngModel"],["for","txtSecondContactName",1,"control-label","col-md-2"],["id","txtSecondContactName","name","txtSecondContactName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtSecondContactName","ngModel"],["for","txtSecondContactNameTranslation",1,"control-label","col-md-2"],["id","txtSecondContactNameTranslation","name","txtSecondContactNameTranslation","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtSecondContactNameTranslation","ngModel"],["for","txtSecondContactPhone",1,"control-label","col-md-2"],["type","tel","id","txtSecondContactPhone","name","txtSecondContactPhone","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtSecondContactPhone","ngModel"],["for","txtSecondContactFax",1,"control-label","col-md-2"],["type","tel","id","txtSecondContactFax","name","txtSecondContactFax","pattern","^(\\+?[0-9]{1,5})?([1-9][0-9]{9})$",1,"form-control",3,"ngModel","ngModelChange"],["txtSecondContactFax","ngModel"],["for","txtSecondContactEmail",1,"control-label","col-md-2"],["id","txtSecondContactEmail","name","txtSecondContactEmail","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtSecondContactEmail","ngModel"]],template:function(e,n){1&e&&(o.Fc(0,"\n"),o.Qb(1,"div",0),o.Fc(2,"\n    "),o.Dc(3,ye,291,129,"form",1),o.Fc(4,"\n"),o.Pb(),o.Fc(5,"\n")),2&e&&(o.yb(3),o.hc("ngIf",n.active))},directives:[c.k,a.q,a.g,a.h,i.c,a.b,a.o,a.f,a.i,a.a,a.l],pipes:[u.c,c.d],encapsulation:2}),e})();var pe=t("hTG3");const Pe=["btnOpenPolicyPatientDiv"];function ve(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb())}function fe(e,n){1&e&&(o.Qb(0,"li"),o.Qb(1,"a",16),o.Fc(2),o.ac(3,"translate"),o.Pb(),o.Pb()),2&e&&(o.yb(2),o.Gc(o.bc(3,1,"Patients")))}function Ce(e,n){1&e&&(o.Qb(0,"li"),o.Qb(1,"a",17),o.Fc(2),o.ac(3,"translate"),o.Pb(),o.Pb()),2&e&&(o.yb(2),o.Gc(o.bc(3,1,"Patients")))}const Qe=function(){return{standalone:!0}};function Me(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",18,19),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().onSubmit()}),o.Fc(2,"\n                "),o.Qb(3,"div",20),o.Fc(4,"\n                    "),o.Qb(5,"label",21),o.Fc(6),o.ac(7,"translate"),o.Pb(),o.Fc(8,"\n                    "),o.Qb(9,"div",22),o.Fc(10,"\n                        "),o.Qb(11,"input",23,24),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.isActive=n}),o.Pb(),o.Fc(13,"\n                        "),o.Lb(14,"span",25),o.Fc(15,"\n                    "),o.Pb(),o.Fc(16,"\n                "),o.Pb(),o.Fc(17,"\n                "),o.Qb(18,"div",20),o.Fc(19,"\n                    "),o.Qb(20,"label",21),o.Fc(21),o.ac(22,"translate"),o.Pb(),o.Fc(23,"\n                    "),o.Qb(24,"div",22),o.Fc(25,"\n                        "),o.Qb(26,"input",26,27),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.companyName=n}),o.Pb(),o.Fc(28,"\n                    "),o.Pb(),o.Fc(29,"\n                    "),o.Qb(30,"label",21),o.Fc(31),o.ac(32,"translate"),o.Pb(),o.Fc(33,"\n                    "),o.Qb(34,"div",22),o.Fc(35,"\n                        "),o.Qb(36,"input",28,29),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.code=n}),o.Pb(),o.Fc(38,"\n                    "),o.Pb(),o.Fc(39,"\n                "),o.Pb(),o.Fc(40,"\n                "),o.Qb(41,"div",20),o.Fc(42,"\n                    "),o.Qb(43,"label",21),o.Fc(44),o.ac(45,"translate"),o.Pb(),o.Fc(46,"\n                    "),o.Qb(47,"div",22),o.Fc(48,"\n                        "),o.Qb(49,"input",30,31),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.name=n}),o.Pb(),o.Fc(51,"\n                    "),o.Pb(),o.Fc(52,"\n                    "),o.Qb(53,"label",21),o.Fc(54),o.ac(55,"translate"),o.Pb(),o.Fc(56,"\n                    "),o.Qb(57,"div",22),o.Fc(58,"\n                        "),o.Qb(59,"input",32,33),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.nameTranslation=n}),o.Pb(),o.Fc(61,"\n                    "),o.Pb(),o.Fc(62,"\n                "),o.Pb(),o.Fc(63,"\n                "),o.Qb(64,"div",20),o.Fc(65,"\n                    "),o.Qb(66,"label",21),o.Fc(67),o.ac(68,"translate"),o.Pb(),o.Fc(69,"\n                    "),o.Qb(70,"div",22),o.Fc(71,"\n                        "),o.Qb(72,"p-calendar",34),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.startDate=n}),o.Pb(),o.Fc(73,"\n                    "),o.Pb(),o.Fc(74,"\n                    "),o.Qb(75,"label",21),o.Fc(76),o.ac(77,"translate"),o.Pb(),o.Fc(78,"\n                    "),o.Qb(79,"div",22),o.Fc(80,"\n                        "),o.Qb(81,"p-calendar",34),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.endDate=n}),o.Pb(),o.Fc(82,"\n                    "),o.Pb(),o.Fc(83,"\n                "),o.Pb(),o.Fc(84,"\n                "),o.Qb(85,"div",20),o.Fc(86,"\n                    "),o.Qb(87,"label",21),o.Fc(88),o.ac(89,"translate"),o.Pb(),o.Fc(90,"\n                    "),o.Qb(91,"div",35),o.Fc(92,"\n                        "),o.Qb(93,"input",36),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.discountPercentage=n}),o.Pb(),o.Fc(94,"\n                    "),o.Pb(),o.Fc(95,"\n                    "),o.Qb(96,"div",35),o.Fc(97,"%"),o.Pb(),o.Fc(98,"\n                    "),o.Qb(99,"label",21),o.Fc(100),o.ac(101,"translate"),o.Pb(),o.Fc(102,"\n                    "),o.Qb(103,"div",35),o.Fc(104,"\n                        "),o.Qb(105,"input",37),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.deductibleAmount=n}),o.Pb(),o.Fc(106,"\n                    "),o.Pb(),o.Fc(107,"\n                   %\n                "),o.Pb(),o.Fc(108,"\n                "),o.Qb(109,"div",20),o.Fc(110,"\n                    "),o.Qb(111,"label",21),o.Fc(112),o.ac(113,"translate"),o.Pb(),o.Fc(114,"\n                    "),o.Qb(115,"div",35),o.Fc(116,"\n                        "),o.Qb(117,"input",38),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.maximumCoverageAmount=n}),o.Pb(),o.Fc(118,"\n                    "),o.Pb(),o.Fc(119,"\n                  "),o.Fc(120,"\n                "),o.Pb(),o.Fc(121,"\n                "),o.Qb(122,"div",20),o.Fc(123,"\n                    "),o.Qb(124,"label",21),o.Fc(125),o.ac(126,"translate"),o.Pb(),o.Fc(127,"\n                    "),o.Qb(128,"div",22),o.Fc(129,"\n                        "),o.Qb(130,"textarea",39),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.description=n}),o.Pb(),o.Fc(131,"\n                    "),o.Pb(),o.Fc(132,"\n                "),o.Pb(),o.Fc(133,"\n                "),o.Qb(134,"div",20),o.Fc(135,"\n                    "),o.Qb(136,"label",21),o.Fc(137),o.ac(138,"translate"),o.Pb(),o.Fc(139,"\n                    "),o.Qb(140,"div",22),o.Fc(141,"\n                        "),o.Qb(142,"input",40),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.lastModificationDateString=n}),o.Pb(),o.Fc(143,"\n                    "),o.Pb(),o.Fc(144,"\n                    "),o.Qb(145,"label",21),o.Fc(146),o.ac(147,"translate"),o.Pb(),o.Fc(148,"\n                    "),o.Qb(149,"div",22),o.Fc(150,"\n                        "),o.Qb(151,"input",41),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyModel.lastModifierName=n}),o.Pb(),o.Fc(152,"\n                    "),o.Pb(),o.Fc(153,"\n                "),o.Pb(),o.Fc(154,"\n                "),o.Qb(155,"div",42),o.Fc(156,"\n                    "),o.Lb(157,"br"),o.Fc(158,"\n                    "),o.Qb(159,"button",43),o.Fc(160),o.ac(161,"translate"),o.Pb(),o.Fc(162,"\n                    "),o.Qb(163,"button",44),o.Fc(164),o.ac(165,"translate"),o.Pb(),o.Fc(166,"\n                "),o.Pb(),o.Fc(167,"\n            "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(6),o.Gc(o.bc(7,39,"Active")),o.yb(5),o.hc("ngModel",n.policyModel.isActive),o.yb(10),o.Gc(o.bc(22,41,"InsuranceCompany")),o.yb(5),o.hc("ngModel",n.policyModel.companyName),o.yb(5),o.Gc(o.bc(32,43,"Code")),o.yb(5),o.hc("ngModel",n.policyModel.code),o.yb(8),o.Gc(o.bc(45,45,"ArabicName")),o.yb(5),o.hc("ngModel",n.policyModel.name),o.yb(5),o.Gc(o.bc(55,47,"EnglishName")),o.yb(5),o.hc("ngModel",n.policyModel.nameTranslation),o.yb(8),o.Gc(o.bc(68,49,"StartDate")),o.yb(5),o.hc("ngModel",n.policyModel.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(69,Qe)),o.yb(4),o.Gc(o.bc(77,51,"EndDate")),o.yb(5),o.hc("ngModel",n.policyModel.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(70,Qe)),o.yb(7),o.Gc(o.bc(89,53,"DiscountPercentage")),o.yb(5),o.hc("ngModel",n.policyModel.discountPercentage),o.yb(7),o.Gc(o.bc(101,55,"DeductiblePercentage")),o.yb(5),o.hc("ngModel",n.policyModel.deductibleAmount),o.yb(7),o.Gc(o.bc(113,57,"MaximumCoverageAmount")),o.yb(5),o.hc("ngModel",n.policyModel.maximumCoverageAmount),o.yb(8),o.Gc(o.bc(126,59,"Remarks")),o.yb(5),o.hc("ngModel",n.policyModel.description),o.yb(7),o.Gc(o.bc(138,61,"LastModificationDate")),o.yb(5),o.hc("ngModel",n.policyModel.lastModificationDateString),o.yb(4),o.Gc(o.bc(147,63,"LastModifierUser")),o.yb(5),o.hc("ngModel",n.policyModel.lastModifierName),o.yb(8),o.hc("disabled",!e.valid),o.yb(1),o.Gc(o.bc(161,65,"Save")),o.yb(4),o.Gc(o.bc(165,67,"Cancel"))}}function Ie(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",45,46),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().savePolicyPatient()}),o.Fc(2,"\n                            "),o.Qb(3,"div",20),o.Fc(4,"\n                                "),o.Qb(5,"label",47),o.Fc(6),o.ac(7,"translate"),o.Pb(),o.Fc(8,"\n                                "),o.Qb(9,"div",48),o.Fc(10,"\n                                    "),o.Qb(11,"input",49,50),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyPatientModel.patientMrn=n}),o.Pb(),o.Fc(13,"\n                                    "),o.Qb(14,"a",51),o.Xb("click",function(){return o.wc(e),o.Zb().showDialog()}),o.Fc(15),o.ac(16,"translate"),o.Pb(),o.Fc(17,"\n                                "),o.Pb(),o.Fc(18,"\n                                "),o.Fc(19,"\n                                "),o.Qb(20,"label",52),o.Fc(21),o.ac(22,"translate"),o.Pb(),o.Fc(23,"\n                                "),o.Qb(24,"div",48),o.Fc(25,"\n                                    "),o.Qb(26,"input",53,54),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyPatientModel.cardNumber=n}),o.Pb(),o.Fc(28,"\n                                "),o.Pb(),o.Fc(29,"\n                            "),o.Pb(),o.Fc(30,"\n                            "),o.Qb(31,"div",20),o.Fc(32,"\n                                "),o.Qb(33,"label",47),o.Fc(34),o.ac(35,"translate"),o.Pb(),o.Fc(36,"\n                                "),o.Qb(37,"div",48),o.Fc(38,"\n                                    "),o.Qb(39,"p-calendar",34),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyPatientModel.startDate=n}),o.Pb(),o.Fc(40,"\n                                "),o.Pb(),o.Fc(41,"\n                                "),o.Qb(42,"label",47),o.Fc(43),o.ac(44,"translate"),o.Pb(),o.Fc(45,"\n                                "),o.Qb(46,"div",48),o.Fc(47,"\n                                    "),o.Qb(48,"p-calendar",34),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyPatientModel.endDate=n}),o.Pb(),o.Fc(49,"\n                                "),o.Pb(),o.Fc(50,"\n                            "),o.Pb(),o.Fc(51,"\n                            "),o.Qb(52,"div",20),o.Fc(53,"\n                                "),o.Qb(54,"div",55),o.Fc(55,"\n                                    "),o.Qb(56,"button",43),o.Fc(57),o.ac(58,"translate"),o.Pb(),o.Fc(59,"\n                                    "),o.Qb(60,"button",56),o.Xb("click",function(){return o.wc(e),o.Zb().clearPolicyPatient()}),o.Fc(61),o.ac(62,"translate"),o.Pb(),o.Fc(63,"\n                                "),o.Pb(),o.Fc(64,"\n                            "),o.Pb(),o.Fc(65,"\n                        "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(6),o.Gc(o.bc(7,23,"MRN")),o.yb(5),o.hc("ngModel",n.policyPatientModel.patientMrn),o.yb(4),o.Gc(o.bc(16,25,"PatientAdvancedSearch")),o.yb(6),o.Gc(o.bc(22,27,"MembershipNumber")),o.yb(5),o.hc("ngModel",n.policyPatientModel.cardNumber),o.yb(8),o.Gc(o.bc(35,29,"StartDate")),o.yb(5),o.hc("ngModel",n.policyPatientModel.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(37,Qe)),o.yb(4),o.Gc(o.bc(44,31,"EndDate")),o.yb(5),o.hc("ngModel",n.policyPatientModel.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(38,Qe)),o.yb(8),o.hc("disabled",!e.valid||!n.enableSavePolicyBtn),o.yb(1),o.Gc(o.bc(58,33,"Save")),o.yb(3),o.ic("disabled",n.enableSavePolicyBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(62,35,"Cancel"))}}let we=(()=>{class e{constructor(e,n,t,c,a,i,s){this.insuranceService=e,this.patientService=n,this.toastr=t,this.localStorage=c,this._route=a,this.translate=i,this.accountService=s,this.onPolicyAdded=new o.n,this.onPolicyUpdated=new o.n,this.utilityClass=new d.a,this.policyModel={id:0,isActive:!0},this.showProgress=!1,this.active=!0,this.userPermisions=new b.a,this.key=new l.a,this.enableViewCompanyDetails=!1,this.policyPatientModel={id:0},this.showActive=!1,this.showEdit=!1,this.enableSavePolicyBtn=!1,this.setPolicyPatientToDeleteBtn=!1,this.showSelect=!0,this.showClose=!0,this.patientSearchVisible=!1,this.policyPatientFormActive=!0,this.enableEditPolicypatient=!1}ngOnInit(){null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.add&&1!=n.fullControl||(this.enableSavePolicyBtn=!0),n.permission.key==this.key.DefinePatientPolicy&&1==n.fullControl&&(this.setPolicyPatientToDeleteBtn=!0,this.enableEditPolicypatient=!0),n.permission.key==this.key.DefinePatientPolicy&&1==n.edit&&(this.enableEditPolicypatient=!0)}ngOnChanges(){if(null!=this.policyId&&null!=this.policyId){let e=this;e.showProgress=!0,this.insuranceService.getPolicyDetails(this.policyId).subscribe(function(n){e.updatePolicyModelToView(n),e.policyPatients=null!=n.patients&&null!=n.patients?n.patients:[]},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}else this.clear(),this.policyModel.companyName=this.companyName}onSubmit(){let e=this;this.policyModel.discountPercentage>100||this.policyModel.deductibleAmount>100?this.toastr.error(this.translate.instant("MaxPercentageValidation"),""):(e.showProgress=!0,0==this.policyModel.id?(this.updatePolicyModelToSave(),this.insuranceService.savePolicy(this.policyModel).subscribe(function(n){e.updatePolicyModelToView(n),e.raisePolicyAdded(n);let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})):(this.updatePolicyModelToSave(),this.insuranceService.updatePolicy(this.policyModel).subscribe(function(n){e.updatePolicyModelToView(n),e.raisePolicyUpdated(n);let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})))}clear(){this.policyModel={id:0,isActive:!0},this.active=!1,setTimeout(()=>this.active=!0,0)}updatePolicyModelToSave(){this.policyModel.companyId=this.companyId,this.policyModel.startDate=this.utilityClass.getUtcDate(this.policyModel.startDate),this.policyModel.endDate=this.utilityClass.getUtcDate(this.policyModel.endDate)}updatePolicyModelToView(e){this.policyModel=e,this.policyModel.startDate=this.utilityClass.getUtcDateFromString(e.startDate),this.policyModel.endDate=this.utilityClass.getUtcDateFromString(e.endDate)}raisePolicyAdded(e){this.onPolicyAdded.emit(e)}raisePolicyUpdated(e){this.onPolicyUpdated.emit(e)}isUpdateMode(){return null!=this.policyModel&&0!=this.policyModel.id}showDialog(){this.patientSearchVisible=!0}managePatientSelection(e){this.policyPatientModel.patientMrn=e,this.patientSearchVisible=!1}savePolicyPatient(){this.showProgress=!0;let e=this;this.patientService.getPatientByClinicMRN(this.policyPatientModel.patientMrn).subscribe(function(n){e.createPatientInsurance(n)},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}createPatientInsurance(e){let n=this;this.showProgress=!0,this.policyPatientModel.patientId=e.id,this.policyPatientModel.policyId=this.policyModel.id,this.policyPatientModel.companyId=this.policyModel.companyId,this.policyPatientModel.startDate=this.utilityClass.getUtcDate(this.policyPatientModel.startDate),this.policyPatientModel.endDate=this.utilityClass.getUtcDate(this.policyPatientModel.endDate),0==this.policyPatientModel.id?this.patientService.createPatientInsurance(this.policyPatientModel).subscribe(function(e){n.policyPatients.push(e),n.clearPolicyPatient();let t=n.translate.instant("SavedSuccessfully");n.toastr.success(t,"")},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}):(this.policyPatientModel.startDate=this.utilityClass.getUtcDate(this.policyPatientModel.startDate),this.policyPatientModel.endDate=this.utilityClass.getUtcDate(this.policyPatientModel.endDate),this.patientService.updatePatientInsurance(this.policyPatientModel).subscribe(function(e){n.clearPolicyPatient();let t=n.translate.instant("SavedSuccessfully");n.toastr.success(t,"")},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1}))}clearPolicyPatient(){this.policyPatientModel={id:0}}editPolicyPatient(e){this.policyPatientModel=e,this.policyPatientModel.startDate=this.utilityClass.getUtcDateFromString(e.startDate),this.policyPatientModel.endDate=this.utilityClass.getUtcDateFromString(e.endDate);let n=this.btnOpenPolicyPatientDiv.nativeElement.getAttribute("aria-expanded");n&&"false"!=n||this.btnOpenPolicyPatientDiv.nativeElement.click()}setPolicyPatientToDelete(e){let n=this.translate.instant("AreYouSureDelete");1==confirm(n)&&this.deletePolicyPatient(e)}deletePolicyPatient(e){let n=this;this.showProgress=!0,this.patientService.deletePatientInsurance(e).subscribe(function(t){n.clearPolicyPatient(),n.removePolicyPatientFromList(e);let c=n.translate.instant("DeletedSuccessfully");n.toastr.success(c,"")},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}removePolicyPatientFromList(e){var n=this.policyPatients.find(n=>n.id==e),t=this.policyPatients.indexOf(n);t>-1&&this.policyPatients.splice(t,1)}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(F.a),o.Kb(pe.a),o.Kb(h.b),o.Kb(m.a),o.Kb(i.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-policy-details"]],viewQuery:function(e,n){if(1&e&&o.Lc(Pe,1),2&e){let e;o.uc(e=o.Yb())&&(n.btnOpenPolicyPatientDiv=e.first)}},inputs:{companyId:"companyId",companyName:"companyName",policyId:"policyId",policyPatients:"policyPatients"},outputs:{onPolicyAdded:"onPolicyAdded",onPolicyUpdated:"onPolicyUpdated"},features:[o.wb],decls:54,vars:11,consts:[[4,"ngIf"],[1,"row"],[1,"tabbable-panel"],[1,"tabbable-line"],[1,"nav","nav-tabs"],[1,"active"],["href","#divPolicyBasic","data-toggle","tab","aria-expanded","true"],["id","divPolicyTabsContent",1,"tab-content"],["id","divPolicyBasic",1,"tab-pane","fade","active","in"],["class","form-horizontal","name","policyDetailsForm",3,"ngSubmit",4,"ngIf"],["id","divPatients",1,"tab-pane","fade"],["data-toggle","collapse","data-target","#divPolicyPatient",1,"btn","btn-primary"],["btnOpenPolicyPatientDiv",""],["id","divPolicyPatient",1,"collapse","fa-border","well"],[1,"padding5","marginTop35"],["class","form-horizontal","name","policyPatientForm",3,"ngSubmit",4,"ngIf"],["href","#divPatients","data-toggle","tab","aria-expanded","true"],["href","#divPatients",1,"dimmedLink"],["name","policyDetailsForm",1,"form-horizontal",3,"ngSubmit"],["policyDetailsForm","ngForm"],[1,"form-group"],[1,"control-label","col-md-2"],[1,"col-md-4"],["type","checkbox","id","chkIsActive","name","chkIsActive",1,"ace","ace-switch","ace-switch-6",3,"ngModel","ngModelChange"],["chkIsActive","ngModel"],[1,"lbl"],["type","text","id","txtCompanyName","name","txtCompanyName","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtCompanyName","ngModel"],["type","text","id","txtCode","name","txtCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtCode","ngModel"],["type","text","id","txtArabicName","name","txtArabicName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtArabicName","ngModel"],["type","text","id","txtEnglishName","name","txtEnglishName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtEnglishName","ngModel"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],[1,"col-md-2"],["type","number","id","txtDiscountPercentage","pattern","^[0-9]{1,3}(\\.[0-9]{0,2})?$","name","txtDiscountPercentage",1,"form-control",3,"ngModel","ngModelChange"],["type","number","pattern","^[0-9]{1,3}(\\.[0-9]{0,2})?$","id","txtDeductibleAmount","name","txtDeductibleAmount",1,"form-control",3,"ngModel","ngModelChange"],["type","number","id","txtMaximumCoverageAmount","name","txtMaximumCoverageAmount",1,"form-control",3,"ngModel","ngModelChange"],["id","txtRemarks","name","txtRemarks",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","txtLastModificationDate","name","txtLastModificationDate","disabled","disabled",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","txtLastModifierUser","name","txtLastModifierUser","disabled","disabled",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-primary"],["name","policyPatientForm",1,"form-horizontal",3,"ngSubmit"],["policyPatientForm","ngForm"],[1,"col-md-2","control-label"],[1,"col-md-3"],["type","text","id","txtMrn","name","txtMrn","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtMrn","ngModel"],[1,"pointer",3,"click"],["for","txtName",1,"col-md-2","control-label"],["type","text","id","txtMembershipNumber","name","txtMembershipNumber","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtMembershipNumber","ngModel"],[1,"col-md-4","col-md-offset-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,n){1&e&&(o.Dc(0,ve,4,0,"div",0),o.Fc(1,"\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Qb(4,"div",2),o.Fc(5,"\n        "),o.Qb(6,"div",3),o.Fc(7,"\n            "),o.Qb(8,"ul",4),o.Fc(9,"\n                "),o.Qb(10,"li",5),o.Qb(11,"a",6),o.Fc(12),o.ac(13,"translate"),o.Pb(),o.Pb(),o.Fc(14,"\n                "),o.Dc(15,fe,4,3,"li",0),o.Fc(16,"\n                "),o.Dc(17,Ce,4,3,"li",0),o.Fc(18,"\n            "),o.Pb(),o.Fc(19,"\n        "),o.Pb(),o.Fc(20,"\n    "),o.Pb(),o.Fc(21,"\n    "),o.Qb(22,"div",7),o.Fc(23,"\n        "),o.Qb(24,"div",8),o.Fc(25,"\n            "),o.Dc(26,Me,168,71,"form",9),o.Fc(27,"\n        "),o.Pb(),o.Fc(28,"\n        "),o.Qb(29,"div",10),o.Fc(30,"\n            "),o.Qb(31,"div",1),o.Fc(32,"\n                "),o.Qb(33,"button",11,12),o.Fc(35),o.ac(36,"translate"),o.Pb(),o.Fc(37,"\n                "),o.Qb(38,"div",13),o.Fc(39,"\n                    "),o.Qb(40,"div",14),o.Fc(41,"\n                        "),o.Dc(42,Ie,66,39,"form",15),o.Fc(43,"\n                    "),o.Pb(),o.Fc(44,"\n                "),o.Pb(),o.Fc(45,"\n            "),o.Pb(),o.Fc(46,"\n            "),o.Qb(47,"div",1),o.Fc(48,"\n                "),o.Fc(49,"\n                "),o.Fc(50,"\n            "),o.Pb(),o.Fc(51,"\n        "),o.Pb(),o.Fc(52,"\n    "),o.Pb(),o.Fc(53,"\n"),o.Pb()),2&e&&(o.hc("ngIf",n.showProgress),o.yb(12),o.Gc(o.bc(13,7,"BasicData")),o.yb(3),o.hc("ngIf",n.isUpdateMode()),o.yb(2),o.hc("ngIf",!n.isUpdateMode()),o.yb(9),o.hc("ngIf",n.active),o.yb(9),o.Gc(o.bc(36,9,"New")),o.yb(7),o.hc("ngIf",n.policyPatientFormActive))},directives:[c.k,p.a,a.q,a.g,a.h,a.a,a.f,a.i,a.b,a.o,P.a,a.k,a.l],pipes:[u.c],encapsulation:2}),e})();const De=["btnDisplayPolicyDetailsPopup"],Se=["btnDisplayPolicyCopyPopup"],xe=["btnClosePolicyCopyPopup"];function Te(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb())}function Ge(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",27,28),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().copyPolicy()}),o.Fc(2,"\n\n                    "),o.Qb(3,"div",29),o.Fc(4,"\n                        "),o.Qb(5,"label",30),o.Fc(6),o.ac(7,"translate"),o.Pb(),o.Fc(8,"\n                        "),o.Qb(9,"div",31),o.Fc(10,"\n                            "),o.Qb(11,"input",32,33),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyCopyModel.code=n}),o.Pb(),o.Fc(13,"\n                        "),o.Pb(),o.Fc(14,"\n                    "),o.Pb(),o.Fc(15,"\n                    "),o.Qb(16,"div",29),o.Fc(17,"\n                        "),o.Qb(18,"label",30),o.Fc(19),o.ac(20,"translate"),o.Pb(),o.Fc(21,"\n                        "),o.Qb(22,"div",34),o.Fc(23,"\n                            "),o.Qb(24,"input",35,36),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyCopyModel.name=n}),o.Pb(),o.Fc(26,"\n                        "),o.Pb(),o.Fc(27,"\n                    "),o.Pb(),o.Fc(28,"\n                    "),o.Qb(29,"div",29),o.Fc(30,"\n                        "),o.Qb(31,"label",30),o.Fc(32),o.ac(33,"translate"),o.Pb(),o.Fc(34,"\n                        "),o.Qb(35,"div",34),o.Fc(36,"\n                            "),o.Qb(37,"input",37,38),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().policyCopyModel.nameTranslation=n}),o.Pb(),o.Fc(39,"\n                        "),o.Pb(),o.Fc(40,"\n                    "),o.Pb(),o.Fc(41,"\n                    "),o.Qb(42,"div",39),o.Fc(43,"\n                        "),o.Lb(44,"br"),o.Fc(45,"\n                        "),o.Qb(46,"button",40),o.Fc(47),o.ac(48,"translate"),o.Pb(),o.Fc(49,"\n                        "),o.Qb(50,"button",41,42),o.Fc(52),o.ac(53,"translate"),o.Pb(),o.Fc(54,"\n                    "),o.Pb(),o.Fc(55,"\n                "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(6),o.Gc(o.bc(7,10,"Code")),o.yb(5),o.hc("ngModel",n.policyCopyModel.code),o.yb(8),o.Gc(o.bc(20,12,"ArabicName")),o.yb(5),o.hc("ngModel",n.policyCopyModel.name),o.yb(8),o.Gc(o.bc(33,14,"EnglishName")),o.yb(5),o.hc("ngModel",n.policyCopyModel.nameTranslation),o.yb(9),o.hc("disabled",!e.valid||!n.enableCopyPolicyBtn),o.yb(1),o.Gc(o.bc(48,16,"Copy")),o.yb(3),o.ic("disabled",n.enableCopyPolicyBtn?"":"disabled"),o.yb(2),o.Gc(o.bc(53,18,"Cancel"))}}let ke=(()=>{class e{constructor(e,n,t,c){this.insuranceService=e,this.translate=n,this.toastr=t,this.accountService=c,this.policiesList=[],this.userPermisions=new b.a,this.key=new l.a,this.enableViewCompanyDetails=!1,this.enableCopyPolicyBtn=!1,this.enableUpdatePolicyBtn=!1,this.enableViewPolicyDetailsBtn=!1,this.enableCancelInvioce=!1,this.showProgress=!1,this.active=!0,this.policyCopyModel={id:0},this.policyPatients=[]}ngOnInit(){null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.add&&!n.fullControl||(this.enableCopyPolicyBtn=!0),n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.edit&&!n.fullControl||(this.enableUpdatePolicyBtn=!0),n.permission.key!=this.key.ThirdPartyPayersAndPolicies||1!=n.view&&!n.fullControl||(this.enableViewPolicyDetailsBtn=!0)}handlePolicyAdded(e){this.policiesList.push(e)}handlePolicyUpdated(e){let n=this.policiesList.find(n=>n.id==e.id);null!=n&&(n.name=e.name,n.code=e.code,n.startDateString=e.startDateString,n.endDateString=e.endDateString)}displayPolicyDetailsPopup(e){this.selectedPolicyId=e,this.btnDisplayPolicyDetailsPopup.nativeElement.click()}displayPolicyDetailsPopupForNew(){this.selectedPolicyId=void 0,this.policyPatients=[],this.btnDisplayPolicyDetailsPopup.nativeElement.click()}changeActivation(e,n){var t=this.policiesList.find(n=>n.id==e);if(null!=t&&null!=t){t.isActive=n.target.checked;let e=this;this.showProgress=!0,this.insuranceService.updatePolicy(t).subscribe(function(n){let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}}displayCopyPolicyPopup(e){this.selectedPolicyToCopyId=e,this.btnDisplayPolicyCopyPopup.nativeElement.click()}closeCopyPolicyPopup(){this.selectedPolicyToCopyId=void 0,this.policyCopyModel={id:0},this.btnClosePolicyCopyPopup.nativeElement.click()}copyPolicy(){let e=this;this.showProgress=!0,this.policyCopyModel.id=this.selectedPolicyToCopyId,this.insuranceService.copyPolicy(this.policyCopyModel).subscribe(function(n){e.policiesList.push(n);let t=e.translate.instant("CopiedSuccessfully");e.toastr.success(t,""),e.closeCopyPolicyPopup()},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(F.a),o.Kb(u.d),o.Kb(h.b),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-policy"]],viewQuery:function(e,n){if(1&e&&(o.Lc(De,1),o.Lc(Se,1),o.Lc(xe,1)),2&e){let e;o.uc(e=o.Yb())&&(n.btnDisplayPolicyDetailsPopup=e.first),o.uc(e=o.Yb())&&(n.btnDisplayPolicyCopyPopup=e.first),o.uc(e=o.Yb())&&(n.btnClosePolicyCopyPopup=e.first)}},inputs:{companyId:"companyId",companyName:"companyName",policiesList:"policiesList"},decls:89,vars:16,consts:[[4,"ngIf"],[1,"row","well"],[1,"row","text-right","nopadding"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"row"],[1,"padding2"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50","placeholder","Search...",1,"inputSearch"],["gb",""],[1,"row",2,"display","none"],["type","button","data-toggle","modal","data-target","#policyDetailsPopup",1,"btn","btn-primary"],["btnDisplayPolicyDetailsPopup",""],["type","button","data-toggle","modal","data-target","#policyCopyPopup",1,"btn","btn-primary"],["btnDisplayPolicyCopyPopup",""],["id","policyDetailsPopup","role","dialog","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],[1,"modal-body"],[3,"companyId","companyName","policyId","policyPatients","onPolicyAdded","onPolicyUpdated"],["id","policyCopyPopup","role","dialog","data-backdrop","static",1,"modal","fade"],[1,"modal-dialog","halfWidth"],["class","form-horizontal","name","policyCopyForm",3,"ngSubmit",4,"ngIf"],["name","policyCopyForm",1,"form-horizontal",3,"ngSubmit"],["policyCopyForm","ngForm"],[1,"form-group"],[1,"control-label","col-md-2"],[1,"col-md-4"],["type","text","id","txtCode","name","txtCode","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtCode","ngModel"],[1,"col-md-8"],["type","text","id","txtArabicName","name","txtArabicName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtArabicName","ngModel"],["type","text","id","txtEnglishName","name","txtEnglishName","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtEnglishName","ngModel"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["btnClosePolicyCopyPopup",""]],template:function(e,n){1&e&&(o.Dc(0,Te,4,0,"div",0),o.Fc(1,"\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Qb(4,"div",2),o.Fc(5,"\n        "),o.Qb(6,"button",3),o.Xb("click",function(){return n.displayPolicyDetailsPopupForNew()}),o.Fc(7),o.ac(8,"translate"),o.Pb(),o.Fc(9,"\n    "),o.Pb(),o.Fc(10,"\n\n"),o.Pb(),o.Fc(11,"\n"),o.Qb(12,"div",4),o.Fc(13,"\n\n    "),o.Lb(14,"div",5),o.Fc(15,"\n    "),o.Qb(16,"div",6),o.Fc(17,"\n        "),o.Qb(18,"div",7),o.Fc(19,"\n            "),o.Lb(20,"i",8),o.Fc(21,"\n            "),o.Lb(22,"input",9,10),o.Fc(24,"\n        "),o.Pb(),o.Fc(25,"\n\n        "),o.Fc(26,"\n    "),o.Pb(),o.Fc(27,"\n"),o.Pb(),o.Fc(28,"\n"),o.Qb(29,"div",11),o.Fc(30,"\n    "),o.Lb(31,"button",12,13),o.Fc(33,"\n    "),o.Lb(34,"button",14,15),o.Fc(36,"\n"),o.Pb(),o.Fc(37,"\n"),o.Fc(38,"\n"),o.Qb(39,"div",16),o.Fc(40,"\n    "),o.Qb(41,"div",17),o.Fc(42,"\n        "),o.Fc(43,"\n        "),o.Qb(44,"div",18),o.Fc(45,"\n            "),o.Qb(46,"div",19),o.Fc(47,"\n                "),o.Qb(48,"button",20),o.Fc(49,"\xd7"),o.Pb(),o.Fc(50,"\n                "),o.Qb(51,"h4",21),o.Fc(52),o.ac(53,"translate"),o.Pb(),o.Fc(54,"\n            "),o.Pb(),o.Fc(55,"\n            "),o.Qb(56,"div",22),o.Fc(57,"\n                "),o.Qb(58,"insurance-policy-details",23),o.Xb("onPolicyAdded",function(e){return n.handlePolicyAdded(e)})("onPolicyUpdated",function(e){return n.handlePolicyUpdated(e)}),o.Pb(),o.Fc(59,"\n            "),o.Pb(),o.Fc(60,"\n        "),o.Pb(),o.Fc(61,"\n    "),o.Pb(),o.Fc(62,"\n"),o.Pb(),o.Fc(63,"\n"),o.Qb(64,"div",24),o.Fc(65,"\n    "),o.Qb(66,"div",25),o.Fc(67,"\n        "),o.Fc(68,"\n        "),o.Qb(69,"div",18),o.Fc(70,"\n            "),o.Qb(71,"div",19),o.Fc(72,"\n                "),o.Qb(73,"button",20),o.Fc(74,"\xd7"),o.Pb(),o.Fc(75,"\n                "),o.Qb(76,"h4",21),o.Fc(77),o.ac(78,"translate"),o.Pb(),o.Fc(79,"\n            "),o.Pb(),o.Fc(80,"\n            "),o.Qb(81,"div",22),o.Fc(82,"\n                "),o.Dc(83,Ge,56,20,"form",26),o.Fc(84,"\n            "),o.Pb(),o.Fc(85,"\n        "),o.Pb(),o.Fc(86,"\n    "),o.Pb(),o.Fc(87,"\n"),o.Pb(),o.Fc(88,"\n")),2&e&&(o.hc("ngIf",n.showProgress),o.yb(6),o.ic("disabled",n.enableCopyPolicyBtn?"":"disabled"),o.yb(1),o.Hc("\n            ",o.bc(8,10,"New"),"\n        "),o.yb(45),o.Gc(o.bc(53,12,"PolicyDetails")),o.yb(6),o.hc("companyId",n.companyId)("companyName",n.companyName)("policyId",n.selectedPolicyId)("policyPatients",n.policyPatients),o.yb(19),o.Gc(o.bc(78,14,"PolicyCopy")),o.yb(6),o.hc("ngIf",n.active))},directives:[c.k,we,p.a,a.q,a.g,a.h,a.b,a.o,a.f,a.i],pipes:[u.c],encapsulation:2}),e})();function Ne(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb())}function Re(e,n){1&e&&(o.Qb(0,"li"),o.Qb(1,"a",17),o.Fc(2),o.ac(3,"translate"),o.Pb(),o.Pb()),2&e&&(o.yb(2),o.Gc(o.bc(3,1,"InsurancePolicies")))}function Le(e,n){1&e&&(o.Qb(0,"li"),o.Qb(1,"a",18),o.Fc(2),o.ac(3,"translate"),o.Pb(),o.Pb()),2&e&&(o.yb(2),o.Gc(o.bc(3,1,"InsurancePolicies")))}let Ae=(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.storage=n,this._route=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.showProgress=!1,this.insuranceCompany={id:0,isActive:!0},this.insurancePolicies=[],this.companyName=""}ngOnInit(){this.companyID=this._route.snapshot.params.id,this.initializeModel()}initializeModel(){let e=this;this.companyID&&this.companyID>0&&(this.showProgress=!0,this.insuranceService.getInsuranceCompanyByID(this.companyID).subscribe(function(n){e.insuranceCompany=n,e.companyName=e.insuranceCompany.name,e.insurancePolicies=n.insurancePolicies},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1}))}updateModel(e){let n=this;n.insuranceCompany=e,n.companyID=n.insuranceCompany.id,n.companyName=n.insuranceCompany.name}isUpdateMode(){return this.insuranceCompany.id>0}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.a),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-company-detail"]],decls:58,vars:17,consts:[[4,"ngIf"],[1,"row"],[3,"activeTabIndex"],[1,"row","nopadding"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"row","well"],[1,"tabbable-panel"],[1,"tabbable-line"],[1,"nav","nav-tabs"],[1,"active"],["href","#BasicData","data-toggle","tab","aria-expanded","true"],["id","insuranceCompanyTabContent",1,"tab-content"],["id","BasicData",1,"tab-pane","fade","active","in"],[3,"model","onModelUpdated"],["id","Policies",1,"tab-pane","fade"],[3,"companyId","companyName","policiesList"],["href","#Policies","data-toggle","tab","aria-expanded","true"],["href","#Policies",1,"dimmedLink"]],template:function(e,n){1&e&&(o.Dc(0,Ne,4,0,"div",0),o.Fc(1,"\n\n"),o.Qb(2,"div",1),o.Fc(3,"\n\n    "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n\n    "),o.Qb(6,"div",3),o.Fc(7,"\n        "),o.Qb(8,"div",4),o.Fc(9,"\n            "),o.Qb(10,"div",1),o.Fc(11,"\n            "),o.Qb(12,"div",5),o.Fc(13,"\n                "),o.Qb(14,"a"),o.Fc(15),o.ac(16,"translate"),o.Pb(),o.Fc(17),o.ac(18,"translate"),o.Pb(),o.Fc(19,"\n\n        "),o.Pb(),o.Fc(20,"\n        "),o.Pb(),o.Fc(21,"\n\n\n\n        "),o.Qb(22,"div",6),o.Fc(23,"\n            "),o.Qb(24,"div",7),o.Fc(25,"\n                "),o.Qb(26,"div",8),o.Fc(27,"\n                    "),o.Qb(28,"ul",9),o.Fc(29,"\n                        "),o.Qb(30,"li",10),o.Qb(31,"a",11),o.Fc(32),o.ac(33,"translate"),o.Pb(),o.Pb(),o.Fc(34,"\n                        "),o.Dc(35,Re,4,3,"li",0),o.Fc(36,"\n                        "),o.Dc(37,Le,4,3,"li",0),o.Fc(38,"\n                    "),o.Pb(),o.Fc(39,"\n                "),o.Pb(),o.Fc(40,"\n            "),o.Pb(),o.Fc(41,"\n            "),o.Qb(42,"div",12),o.Fc(43,"\n                "),o.Qb(44,"div",13),o.Fc(45,"\n                    "),o.Qb(46,"insurance-company-basicData",14),o.Xb("onModelUpdated",function(e){return n.updateModel(e)}),o.Pb(),o.Fc(47,"\n                "),o.Pb(),o.Fc(48,"\n                "),o.Qb(49,"div",15),o.Fc(50,"\n                    "),o.Lb(51,"insurance-policy",16),o.Fc(52,"\n                "),o.Pb(),o.Fc(53,"\n            "),o.Pb(),o.Fc(54,"\n        "),o.Pb(),o.Fc(55,"\n    "),o.Pb(),o.Fc(56,"\n"),o.Pb(),o.Fc(57,"\n")),2&e&&(o.hc("ngIf",n.showProgress),o.yb(4),o.hc("activeTabIndex",17),o.yb(11),o.Gc(o.bc(16,11,"InsuranceManagement")),o.yb(2),o.Hc(" \xa0/\n                ",o.bc(18,13,"InsuranceCompanyDetails"),"\n            "),o.yb(15),o.Gc(o.bc(33,15,"BasicData")),o.yb(3),o.hc("ngIf",n.isUpdateMode()),o.yb(2),o.hc("ngIf",!n.isUpdateMode()),o.yb(9),o.hc("model",n.insuranceCompany),o.yb(5),o.hc("companyId",n.companyID)("companyName",n.companyName)("policiesList",n.insurancePolicies))},directives:[c.k,s.a,ge,ke,p.a],pipes:[u.c],encapsulation:2}),e})();const Ze=["btnOpenPaymentPopup"];function Xe(e,n){if(1&e&&(o.Qb(0,"option",52),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function Oe(e,n){if(1&e&&(o.Qb(0,"option",52),o.Fc(1),o.ac(2,"translate"),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.value),o.yb(1),o.Gc(o.bc(2,2,e.text))}}function Ve(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",53),o.Fc(1,"\n                            "),o.Qb(2,"label",54),o.Fc(3),o.Pb(),o.Fc(4,"\n                            "),o.Qb(5,"div",12),o.Fc(6,"\n                                "),o.Qb(7,"input",55),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().searchCriteria.duration=n}),o.Pb(),o.Fc(8,"\n                            "),o.Pb(),o.Fc(9,"\n                        "),o.Pb()}if(2&e){const e=o.Zb();o.yb(3),o.Gc(e.durationLabel),o.yb(4),o.hc("ngModel",e.searchCriteria.duration)}}const Ue=function(){return{standalone:!0}};function Be(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",10),o.Fc(1,"\n                                "),o.Qb(2,"label",17),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                                "),o.Qb(6,"div",12),o.Fc(7,"\n                                    "),o.Qb(8,"p-calendar",58),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).searchCriteria.startDate=n}),o.Pb(),o.Fc(9,"\n                                "),o.Pb(),o.Fc(10,"\n                            "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(3),o.Gc(o.bc(4,7,"From")),o.yb(5),o.hc("ngModel",e.searchCriteria.startDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(9,Ue))}}function Ee(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",2),o.Fc(1,"\n                        "),o.Qb(2,"div",9),o.Fc(3,"\n                            "),o.Dc(4,Be,11,10,"div",56),o.Fc(5,"\n                        "),o.Pb(),o.Fc(6,"\n                        "),o.Qb(7,"div",16),o.Fc(8,"\n                            "),o.Qb(9,"div",10),o.Fc(10,"\n                                "),o.Qb(11,"label",57),o.Fc(12),o.ac(13,"translate"),o.Pb(),o.Fc(14,"\n                                "),o.Qb(15,"div",12),o.Fc(16,"\n                                    "),o.Qb(17,"p-calendar",58),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().searchCriteria.endDate=n}),o.Pb(),o.Fc(18,"\n                                "),o.Pb(),o.Fc(19,"\n                            "),o.Pb(),o.Fc(20,"\n                        "),o.Pb(),o.Fc(21,"\n                    "),o.Pb()}if(2&e){const e=o.Zb();o.yb(4),o.hc("ngIf",e.isPeriodOfTimeVisible),o.yb(8),o.Gc(o.bc(13,8,"To")),o.yb(5),o.hc("ngModel",e.searchCriteria.endDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!0)("ngModelOptions",o.lc(10,Ue))}}function je(e,n){if(1&e){const e=o.Rb();o.Qb(0,"td"),o.Fc(1,"\n                                                "),o.Qb(2,"input",59),o.Xb("click",function(){o.wc(e);const t=n.$implicit;return o.Zb().selectClaimSearchType(t.value)}),o.Pb(),o.Fc(3),o.ac(4,"translate"),o.Pb()}if(2&e){const e=n.$implicit,t=o.Zb();o.yb(2),o.ic("value",e.value),o.hc("checked",e.value==t.defaultClaimSearch),o.yb(1),o.Hc("\xa0",o.bc(4,3,e.text),"\n                                                \xa0\xa0\n                                            ")}}function qe(e,n){if(1&e){const e=o.Rb();o.Qb(0,"td"),o.Fc(1,"\n                                                    "),o.Qb(2,"input",60),o.Xb("click",function(){o.wc(e);const t=n.$implicit;return o.Zb(2).selectChargeStatus(t.value)}),o.Pb(),o.Fc(3),o.ac(4,"translate"),o.Pb()}if(2&e){const e=n.$implicit,t=o.Zb(2);o.yb(2),o.ic("value",e.value),o.hc("checked",e.value==t.defaultChargeStatus),o.yb(1),o.Hc("\xa0",o.bc(4,3,e.text),"\n                                                    \xa0\xa0\n                                                ")}}function He(e,n){if(1&e&&(o.Qb(0,"div"),o.Fc(1,"\n                                        "),o.Qb(2,"table"),o.Fc(3,"\n                                            "),o.Qb(4,"tr"),o.Fc(5,"\n                                                "),o.Dc(6,qe,5,5,"td",22),o.ac(7,"translateObjects"),o.Fc(8,"\n                                            "),o.Pb(),o.Fc(9,"\n                                        "),o.Pb(),o.Fc(10,"\n                                    "),o.Pb()),2&e){const e=o.Zb();o.yb(6),o.hc("ngForOf",o.bc(7,1,e.chargeStatusList))}}function Ke(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",2),o.Fc(1,"\n            \n            "),o.Qb(2,"insurance-invoice-services",61),o.Xb("onAmountUpdated",function(n){return o.wc(e),o.Zb().updateAmount(n)})("onChargeSelected",function(n){return o.wc(e),o.Zb().updateAmountToPay(n)}),o.Pb(),o.Fc(3,"\n        "),o.Pb()}if(2&e){const e=o.Zb();o.yb(2),o.hc("invoiceChargesList",e.allCharges)("companyId",e.company.id)}}function ze(e,n){1&e&&(o.Qb(0,"div",62),o.Fc(1,"\n            \n\n            "),o.Qb(2,"div",63),o.Fc(3,"\n                "),o.Lb(4,"i",64),o.Fc(5,"\n                "),o.Lb(6,"input",65,66),o.Fc(8,"\n            "),o.Pb(),o.Fc(9,"\n\n            "),o.Fc(10,"\n            "),o.Qb(11,"div",2),o.Fc(12,"\n            "),o.Pb(),o.Fc(13,"\n        "),o.Pb())}function $e(e,n){if(1&e&&(o.Qb(0,"option",52),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function We(e,n){if(1&e&&(o.Qb(0,"option",52),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function Ye(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",67,68),o.Fc(2,"\n                        "),o.Qb(3,"div",69),o.Fc(4,"\n                            "),o.Qb(5,"div",24),o.Fc(6,"\n                                "),o.Qb(7,"label",70),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                                "),o.Qb(11,"div",71),o.Fc(12,"\n                                    "),o.Qb(13,"input",72,73),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.id=n}),o.Pb(),o.Fc(15,"\n                                "),o.Pb(),o.Fc(16,"\n                            "),o.Pb(),o.Fc(17,"\n                            "),o.Qb(18,"div",24),o.Fc(19,"\n                                "),o.Qb(20,"label",70),o.Fc(21),o.ac(22,"translate"),o.Pb(),o.Fc(23,"\n                                "),o.Qb(24,"div",71),o.Fc(25,"\n                                    "),o.Qb(26,"input",74,75),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.dateTimeString=n}),o.Pb(),o.Fc(28,"\n                                "),o.Pb(),o.Fc(29,"\n                                "),o.Qb(30,"div",76),o.Fc(31,"\n                                    "),o.Qb(32,"button",77),o.Fc(33),o.ac(34,"translate"),o.Pb(),o.Fc(35,"\n                                "),o.Pb(),o.Fc(36,"\n                            "),o.Pb(),o.Fc(37,"\n                            "),o.Qb(38,"div",24),o.Fc(39,"\n                                "),o.Qb(40,"label",70),o.Fc(41),o.ac(42,"translate"),o.Pb(),o.Fc(43,"\n                                "),o.Qb(44,"div",71),o.Fc(45,"\n                                    "),o.Qb(46,"select",78,79),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentTypeId=n}),o.Fc(48,"\n                                        "),o.Dc(49,$e,2,2,"option",15),o.ac(50,"translateObjects"),o.Fc(51,"\n                                    "),o.Pb(),o.Fc(52,"\n                                    "),o.Fc(53,"\n                                "),o.Pb(),o.Fc(54,"\n                            "),o.Pb(),o.Fc(55,"\n                            "),o.Qb(56,"div",24),o.Fc(57,"\n                                "),o.Qb(58,"label",70),o.Fc(59),o.ac(60,"translate"),o.Pb(),o.Fc(61,"\n                                "),o.Qb(62,"div",71),o.Fc(63,"\n                                    "),o.Qb(64,"select",80,81),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentMethodId=n}),o.Fc(66,"\n                                        "),o.Dc(67,We,2,2,"option",15),o.ac(68,"translateObjects"),o.Fc(69,"\n                                    "),o.Pb(),o.Fc(70,"\n                                "),o.Pb(),o.Fc(71,"\n                                "),o.Qb(72,"div",76),o.Fc(73,"\n                                    "),o.Qb(74,"button",82),o.Fc(75),o.ac(76,"translate"),o.Pb(),o.Fc(77,"\n                                "),o.Pb(),o.Fc(78,"\n                            "),o.Pb(),o.Fc(79,"\n                            "),o.Qb(80,"div",24),o.Fc(81,"\n                                "),o.Qb(82,"label",70),o.Fc(83),o.ac(84,"translate"),o.Pb(),o.Fc(85,"\n                                "),o.Qb(86,"div",71),o.Fc(87,"\n                                    "),o.Qb(88,"input",83,84),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.amount=n}),o.Pb(),o.Fc(90,"\n                                "),o.Pb(),o.Fc(91,"\n                            "),o.Pb(),o.Fc(92,"\n                            "),o.Qb(93,"div",24),o.Fc(94,"\n                                "),o.Qb(95,"label",70),o.Fc(96),o.ac(97,"translate"),o.Pb(),o.Fc(98,"\n                                "),o.Qb(99,"div",71),o.Fc(100,"\n                                    "),o.Qb(101,"textarea",85,86),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.companyChargesAsString=n}),o.Pb(),o.Fc(103,"\n                                "),o.Pb(),o.Fc(104,"\n                            "),o.Pb(),o.Fc(105,"\n                            "),o.Qb(106,"div",24),o.Fc(107,"\n                                "),o.Qb(108,"label",70),o.Fc(109),o.ac(110,"translate"),o.Pb(),o.Fc(111,"\n                                "),o.Qb(112,"div",71),o.Fc(113,"\n                                    "),o.Qb(114,"textarea",87,88),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.description=n}),o.Pb(),o.Fc(116,"\n                                "),o.Pb(),o.Fc(117,"\n                            "),o.Pb(),o.Fc(118,"\n                        "),o.Pb(),o.Fc(119,"\n                    "),o.Pb()}if(2&e){const e=o.Zb();o.yb(8),o.Gc(o.bc(9,18,"TransactionRefNo")),o.yb(5),o.hc("ngModel",e.payment.id),o.yb(8),o.Gc(o.bc(22,20,"TransactionDate")),o.yb(5),o.hc("ngModel",e.payment.dateTimeString),o.yb(7),o.Gc(o.bc(34,22,"Change")),o.yb(8),o.Gc(o.bc(42,24,"TransactionType")),o.yb(5),o.hc("ngModel",e.payment.paymentTypeId),o.yb(3),o.hc("ngForOf",o.bc(50,26,e.paymentTypes)),o.yb(10),o.Gc(o.bc(60,28,"TransactionMethod")),o.yb(5),o.hc("ngModel",e.payment.paymentMethodId),o.yb(3),o.hc("ngForOf",o.bc(68,30,e.paymentMethods)),o.yb(8),o.Gc(o.bc(76,32,"Change")),o.yb(8),o.Gc(o.bc(84,34,"TransactionAmount")),o.yb(5),o.hc("ngModel",e.payment.amount),o.yb(8),o.Gc(o.bc(97,36,"Charges")),o.yb(5),o.hc("ngModel",e.payment.companyChargesAsString),o.yb(8),o.Gc(o.bc(110,38,"Remarks")),o.yb(5),o.hc("ngModel",e.payment.description)}}function _e(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",89,90),o.Fc(2,"\n                        "),o.Qb(3,"div",69),o.Fc(4,"\n                            "),o.Qb(5,"div",24),o.Fc(6,"\n                                "),o.Qb(7,"label",70),o.Fc(8,"New Payment Date"),o.Pb(),o.Fc(9,"\n                                "),o.Qb(10,"div",71),o.Fc(11,"\n                                    "),o.Qb(12,"p-calendar",91),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.date=n}),o.Pb(),o.Fc(13,"\n                                "),o.Pb(),o.Fc(14,"\n                            "),o.Pb(),o.Fc(15,"\n                            "),o.Qb(16,"div",24),o.Fc(17,"\n                                "),o.Qb(18,"label",70),o.Fc(19,"Change Reason"),o.Pb(),o.Fc(20,"\n                                "),o.Qb(21,"div",71),o.Fc(22,"\n                                    "),o.Qb(23,"textarea",92,93),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.changeDateReason=n}),o.Pb(),o.Fc(25,"\n                                "),o.Pb(),o.Fc(26,"\n                            "),o.Pb(),o.Fc(27,"\n                        "),o.Pb(),o.Fc(28,"\n                        "),o.Qb(29,"div",94),o.Fc(30,"\n                            "),o.Qb(31,"div",95),o.Fc(32,"\n                                "),o.Qb(33,"button",96),o.Xb("click",function(){return o.wc(e),o.Zb().saveCompanyPayment()}),o.Fc(34,"Confirm Change"),o.Pb(),o.Fc(35,"\n                                "),o.Qb(36,"button",97),o.Fc(37,"Ignore"),o.Pb(),o.Fc(38,"\n                            "),o.Pb(),o.Fc(39,"\n                        "),o.Pb(),o.Fc(40,"\n                    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(12),o.hc("ngModel",n.payment.date)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("required",!1)("ngModelOptions",o.lc(10,Ue)),o.yb(11),o.hc("ngModel",n.payment.changeDateReason),o.yb(10),o.hc("disabled",!e.form.valid||!n.enableSaveCompanyPaymentBtn),o.yb(3),o.ic("disabled",n.enableSaveCompanyPaymentBtn?"":"disabled")}}function Je(e,n){if(1&e&&(o.Qb(0,"option",52),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function en(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",98,99),o.Fc(2,"\n                        "),o.Qb(3,"div",69),o.Fc(4,"\n                            "),o.Qb(5,"div",24),o.Fc(6,"\n                                "),o.Qb(7,"label",70),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                                "),o.Qb(11,"div",71),o.Fc(12,"\n                                    "),o.Qb(13,"select",100,81),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.paymentMethodId=n}),o.Fc(15,"\n                                        "),o.Dc(16,Je,2,2,"option",15),o.ac(17,"translateObjects"),o.Fc(18,"\n                                    "),o.Pb(),o.Fc(19,"\n                                "),o.Pb(),o.Fc(20,"\n                            "),o.Pb(),o.Fc(21,"\n                            "),o.Qb(22,"div",24),o.Fc(23,"\n                                "),o.Qb(24,"label",70),o.Fc(25),o.ac(26,"translate"),o.Pb(),o.Fc(27,"\n                                "),o.Qb(28,"div",71),o.Fc(29,"\n                                    "),o.Qb(30,"textarea",101,102),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().payment.changeMethodReason=n}),o.Pb(),o.Fc(32,"\n                                "),o.Pb(),o.Fc(33,"\n                            "),o.Pb(),o.Fc(34,"\n                        "),o.Pb(),o.Fc(35,"\n                        "),o.Qb(36,"div",94),o.Fc(37,"\n                            "),o.Qb(38,"div",95),o.Fc(39,"\n                                "),o.Qb(40,"button",96),o.Xb("click",function(){return o.wc(e),o.Zb().saveCompanyPayment()}),o.Fc(41),o.ac(42,"translate"),o.Pb(),o.Fc(43,"\n                                "),o.Qb(44,"button",97),o.Fc(45),o.ac(46,"translate"),o.Pb(),o.Fc(47,"\n                            "),o.Pb(),o.Fc(48,"\n                        "),o.Pb(),o.Fc(49,"\n                    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(8),o.Hc("",o.bc(9,9,"NewPaymentMethod")," "),o.yb(5),o.hc("ngModel",n.payment.paymentMethodId),o.yb(3),o.hc("ngForOf",o.bc(17,11,n.paymentMethods)),o.yb(9),o.Gc(o.bc(26,13,"ChangeReason")),o.yb(5),o.hc("ngModel",n.payment.changeMethodReason),o.yb(10),o.hc("disabled",!e.form.valid||!n.enableSaveCompanyPaymentBtn),o.yb(1),o.Gc(o.bc(42,15,"ConfirmChange")),o.yb(3),o.ic("disabled",n.enableSaveCompanyPaymentBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(46,17,"Ignore"))}}function nn(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",103,104),o.Fc(2,"\n                        "),o.Qb(3,"div",69),o.Fc(4,"\n                            "),o.Qb(5,"div",24),o.Fc(6,"\n                                "),o.Qb(7,"label",70),o.Fc(8,"Refund Amount"),o.Pb(),o.Fc(9,"\n                                "),o.Qb(10,"div",71),o.Fc(11,"\n                                    "),o.Qb(12,"input",105,106),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().refundModel.amount=n}),o.Pb(),o.Fc(14,"\n                                "),o.Pb(),o.Fc(15,"\n                            "),o.Pb(),o.Fc(16,"\n                            "),o.Qb(17,"div",24),o.Fc(18,"\n                                "),o.Qb(19,"label",70),o.Fc(20,"Refund Reason"),o.Pb(),o.Fc(21,"\n                                "),o.Qb(22,"div",71),o.Fc(23,"\n                                    "),o.Qb(24,"textarea",107,108),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().refundModel.remarks=n}),o.Pb(),o.Fc(26,"\n                                "),o.Pb(),o.Fc(27,"\n                            "),o.Pb(),o.Fc(28,"\n                        "),o.Pb(),o.Fc(29,"\n                        "),o.Qb(30,"div",94),o.Fc(31,"\n                            "),o.Qb(32,"div",95),o.Fc(33,"\n                                "),o.Qb(34,"button",96),o.Xb("click",function(){return o.wc(e),o.Zb().refundFromPrepaid()}),o.Fc(35,"Confirm Refund"),o.Pb(),o.Fc(36,"\n                                "),o.Qb(37,"button",97),o.Fc(38,"Ignore"),o.Pb(),o.Fc(39,"\n                            "),o.Pb(),o.Fc(40,"\n                        "),o.Pb(),o.Fc(41,"\n                    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(12),o.hc("ngModel",n.refundModel.amount),o.yb(12),o.hc("ngModel",n.refundModel.remarks),o.yb(10),o.hc("disabled",!e.form.valid||!n.enableConsumeFromPrepaidBtn),o.yb(3),o.ic("disabled",n.enableConsumeFromPrepaidBtn?"":"disabled")}}let tn=(()=>{class e{constructor(e,n,t,c,a){this.toastr=e,this.insuranceService=n,this.localStorage=t,this.accountService=c,this.translate=a,this.userPermisions=new b.a,this.key=new l.a,this.active=!0,this.showProgress=!1,this.allCharges=[],this.allCompanyPayments=[],this.paymentTypes=[],this.paymentMethods=[],this.dateFiltersList=[],this.companiesList=[],this.payment={id:0},this.company={},this.utilityClass=new d.a,this.defaultChargeStatus="UnPaid",this.defaultClaimSearch="Charges",this.displayChargeStatus=!0,this.enableViewCompanyDetails=!0,this.enableSaveCompanyPaymentBtn=!0,this.enableConsumeFromPrepaidBtn=!0,this.refundModel={},this.prePaidBalanceAmount=0,this.pendingAmount=0,this.amountToPay=0,this.netAmount=0,this.net=0,this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1,this.durationLabel="Duration",this.lstToTranslated=[],this.display=!1,this.showActive=!1,this.showEdit=!1,this.showSelect=!0,this.showClose=!0,this.searchCriteria={chargeStatus:this.defaultChargeStatus,claimSearchType:this.defaultClaimSearch},this.claimSearchTypeList=[],this.chargeStatusList=[]}ngOnInit(){this.lstToTranslated=["paymentMethodName","paymentMethodNameTranslation","paymentTypeName","paymentTypeNameTranslation"],this.loadCompanyTransactionSearchWrapper(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.GenerateInvoices&&n.permission.key!=this.key.ExcludeInvoices&&n.permission.key!=this.key.IncludeInvoices&&n.permission.key!=this.key.DeleteInvoices&&n.permission.key!=this.key.EndorseInvoices||1!=n.allow||(this.enableViewCompanyDetails=!0),n.permission.key==this.key.PaymentIn&&1==n.allow&&(this.enableSaveCompanyPaymentBtn=!0),n.permission.key==this.key.ConsumeFromPrepaid&&1==n.allow&&(this.enableConsumeFromPrepaidBtn=!0)}loadCompanyTransactionSearchWrapper(){let e=this;e.showProgress=!0,this.insuranceService.getCompanyTransactionSearchWrapper().subscribe(function(n){e.paymentTypes=n.paymentTypes,e.paymentMethods=n.paymentMethod,e.chargeStatusList=n.chargeStatus,e.claimSearchTypeList=n.claimSearchType,e.dateFiltersList=n.dateFilters,e.companiesList=n.companiesList},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}showDialog(){this.display=!0}selectDateFilter(e){this.searchCriteria.dateFilter=e,"Days"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel="Number of Days"):"Weeks"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel="Number of Weeks"):"Months"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel="Number of Months"):"Years"==e?(this.isDurationVisible=!0,this.isPeriodOfTimeVisible=!1,this.durationLabel="Number of Years"):"TimePeriod"==e?(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!0):(this.isDurationVisible=!1,this.isPeriodOfTimeVisible=!1)}selectClaimSearchType(e){this.searchCriteria.claimSearchType=e,this.displayChargeStatus=e==this.defaultClaimSearch}selectChargeStatus(e){this.searchCriteria.chargeStatus=e}getCompanyTransactions(){if(""==this.searchCriteria.insuranceCompanyId||null==this.searchCriteria.insuranceCompanyId)return void this.toastr.error(this.translate.instant("ThereIsNoCompanySelected"),"");if("TimePeriod"==this.searchCriteria.dateFilter){if(null==this.searchCriteria.startDate||null==this.searchCriteria.endDate||null==this.searchCriteria.startDate||null==this.searchCriteria.endDate)return void this.toastr.error(this.translate.instant("YouMustSelectStartDateAndEndDate"),"");if(this.searchCriteria.startDate>this.searchCriteria.endDate)return void this.toastr.error(this.translate.instant("StartDateCanNotBeLaterThanEndDate"),"");this.searchCriteria.startDate=this.utilityClass.getUtcDate(this.searchCriteria.startDate),this.searchCriteria.endDate=this.utilityClass.getUtcDate(this.searchCriteria.endDate)}let e=this;e.showProgress=!0,e.searchCriteria.clinicId=this.localStorage.retrieve("ClinicID"),this.insuranceService.getCompanyTransactionsAccordingtoSearchCriteria(e.searchCriteria).subscribe(function(n){e.allCharges=n.charges,e.company=n.insuranceCompany,e.allCompanyPayments=n.payments,e.prePaidBalanceAmount=n.prePaidBalance,e.pendingAmount=n.companyPending,e.amountToPay=n.amountToPay,e.netAmount=n.netAmount;var t=+(e.pendingAmount-e.prePaidBalanceAmount).toFixed(2);e.net=t,null!=e.company&&null!=e.company||e.toastr.warning(e.translate.instant("NoCompanyWithProvidedCriteria"),""),"Charges"!=e.searchCriteria.claimSearchType||null!=e.allCharges&&0!=e.allCharges.length||e.toastr.warning(e.translate.instant("NoResults"),""),"Transactions"!=e.searchCriteria.claimSearchType||null!=e.allCompanyPayments&&0!=e.allCompanyPayments.length||e.toastr.warning(e.translate.instant("NoResults"),"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}saveCompanyPayment(){let e=this;e.payment.insuranceCompanytId=e.company.id,this.insuranceService.saveCompanyPayment(e.payment).subscribe(function(n){let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}getCompanyPaymentById(e){let n=this;n.showProgress=!0,this.insuranceService.getCompanyPaymentById(e).subscribe(function(e){n.payment=e,n.payment.date&&(n.payment.date=n.utilityClass.getDateTimeFromString(n.payment.date))},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}refundFromPrepaid(){let e=this;e.refundModel.clinicId=this.localStorage.retrieve("ClinicID"),e.refundModel.insuranceCompanytId=e.company.id,null!=e.company&&null!=e.company&&null!=e.company.id?this.insuranceService.refundCompanyFromPrePaid(e.refundModel).subscribe(function(n){let t=e.translate.instant("SavedSuccessfully");e.toastr.success(t,""),e.prePaidBalanceAmount=n.prePaidBalance,e.pendingAmount=n.companyPending,e.amountToPay=n.amountToPay,e.netAmount=n.netAmount,e.refundModel={}},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1}):e.toastr.error(e.translate.instant("ThereIsNoCompanySelected"),"")}updateAmount(e){let n=this;this.insuranceService.getCompanyFinanceFields(n.company.id,n.localStorage.retrieve("ClinicID")).subscribe(function(e){n.prePaidBalanceAmount=e.prePaidBalance,n.pendingAmount=e.companyPending,n.amountToPay=0,n.netAmount=e.netAmount;var t=+(n.pendingAmount-n.prePaidBalanceAmount).toFixed(2);n.net=t},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}updateAmountToPay(e){this.amountToPay=e}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(F.a),o.Kb(m.a),o.Kb(y.a),o.Kb(u.d))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-company-transactions"]],viewQuery:function(e,n){if(1&e&&o.Lc(Ze,1),2&e){let e;o.uc(e=o.Yb())&&(n.btnOpenPaymentPopup=e.first)}},decls:323,vars:84,consts:[[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"row"],[1,"NBbreadcrumb"],[1,"row","well"],["data-toggle","collapse","data-target","#SearchForCompany",1,"btn","btn-primary"],["id","SearchForCompany",1,"collapse","fa-border","well"],[1,"padding5","marginTop35"],[1,"row","form-horizontal"],[1,"col-sm-5","offset-md-1"],[1,"form-group","row"],[1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["id","ddlCompanies","name","ddlCompanies","required","",1,"form-control",3,"ngModel","ngModelChange"],["ddlCompanies",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-5"],["for","txtName",1,"col-sm-4","col-form-label"],["id","ddlDateFilters","name","ddlDateFilters",1,"form-control",3,"change"],["ddlDateFilters",""],["class","form-group col-sm-5 offset-md-1",4,"ngIf"],["class","row ",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form-group"],[1,"col-md-4"],["type","button",1,"btn","btn-primary",3,"click"],["id","emptyDiv"],[1,"tableBack","table","table-bordered","responsive"],[1,"thBack","text-center"],[1,"thBack"],[1,"col-md-2","offset-md-10","text-right"],["type","button","data-toggle","modal","data-target","#refund",1,"btn","btn-primary","refund",3,"disabled"],["class","row",4,"ngIf"],["class","row well","style","background-color: #f6f7f9 !important;",4,"ngIf"],[1,"hidden"],["type","button","data-toggle","modal","data-target","#PayService",1,"btn","btn-primary"],["btnOpenPaymentPopup",""],["id","PayService","role","dialog",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","saveCompanyPaymentfrm",4,"ngIf"],["id","changePaymentDate","role","dialog",1,"modal","fade"],["class","form-horizontal","name","changePaymentDateForm",4,"ngIf"],["id","changePaymentMethod","role","dialog",1,"modal","fade"],["class","form-horizontal","name","changePaymentMethodForm",4,"ngIf"],["id","refund","role","dialog",1,"modal","fade"],["class","form-horizontal","name","refundForm",4,"ngIf"],["id","AttachFile","role","dialog",1,"modal","fade"],[3,"value"],[1,"form-group","col-sm-5","offset-md-1"],["for","txtDuration",1,"col-sm-4","col-form-label"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group row ",4,"ngIf"],["for","txtName",1,"col-sm-4","control-label"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["type","radio","name","claimSearchType",3,"value","checked","click"],["type","radio","name","chargeStatus",3,"value","checked","click"],[3,"invoiceChargesList","companyId","onAmountUpdated","onChargeSelected"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50","placeholder","Search..."],["searchTransactions",""],["name","saveCompanyPaymentfrm",1,"form-horizontal"],["saveCompanyPaymentfrm","ngForm"],[1,"modal-body"],[1,"control-label","col-md-3"],[1,"col-md-6"],["name","txtReferenceNo","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtReferenceNo","ngModel"],["name","txtPaymentDate","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtPaymentDate","ngModel"],[1,"col-md-1"],["type","button","data-toggle","modal","data-target","#changePaymentDate",1,"btn","btn-primary"],["disabled","","name","ddlTransactionTypes","required","",1,"form-control",3,"ngModel","ngModelChange"],["ddlTransactionTypes","ngModel"],["disabled","","name","ddlTransactionMethods","required","",1,"form-control",3,"ngModel","ngModelChange"],["ddlTransactionMethods","ngModel"],["type","button","data-toggle","modal","data-target","#changePaymentMethod",1,"btn","btn-primary"],["type","number","name","txtAmount","required","","readonly","","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["txtAmount","ngModel"],["disabled","","name","txtCharges",1,"form-control",3,"ngModel","ngModelChange"],["txtCharges","ngModel"],["disabled","","name","txtRemarks",1,"form-control",3,"ngModel","ngModelChange"],["txtRemarks","ngModel"],["name","changePaymentDateForm",1,"form-horizontal"],["changePaymentDateForm","ngForm"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","showTime","monthNavigator","yearNavigator","showIcon","required","ngModelOptions","ngModelChange"],["name","txtchangeDateReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtchangeDateReason","ngModel"],[1,"modal-footer"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["name","changePaymentMethodForm",1,"form-horizontal"],["changePaymentMethodForm","ngForm"],["name","ddlTransactionMethods","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","txtMethodChangeReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtMethodChangeReason","ngModel"],["name","refundForm",1,"form-horizontal"],["refundForm","ngForm"],["type","number","min","0","name","txtRefundAmount","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtRefundAmount","ngModel"],["name","txtRefundReason","required","",1,"form-control",3,"ngModel","ngModelChange"],["txtRefundReason","ngModel"]],template:function(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb(),o.Fc(4,"\n\n    "),o.Lb(5,"shared-tabs",0),o.Fc(6,"\n\n        "),o.Qb(7,"div",1),o.Fc(8,"\n            "),o.Qb(9,"div",2),o.Fc(10,"\n                "),o.Qb(11,"div",3),o.Fc(12,"\n                    "),o.Qb(13,"a"),o.Fc(14),o.ac(15,"translate"),o.Pb(),o.Fc(16," \xa0/\n                    "),o.Qb(17,"a"),o.Fc(18),o.ac(19,"translate"),o.Pb(),o.Fc(20),o.ac(21,"translate"),o.Pb(),o.Fc(22,"\n\n            "),o.Pb(),o.Fc(23,"\n        "),o.Pb(),o.Fc(24,"\n\n        "),o.Qb(25,"div",4),o.Fc(26,"\n            "),o.Qb(27,"button",5),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n        "),o.Pb(),o.Fc(31,"\n\n        "),o.Qb(32,"div",6),o.Fc(33,"\n            "),o.Qb(34,"div",7),o.Fc(35,"\n                "),o.Qb(36,"div",8),o.Fc(37,"\n\n                    "),o.Qb(38,"div",2),o.Fc(39,"\n                        "),o.Qb(40,"div",9),o.Fc(41,"\n                            "),o.Qb(42,"div",10),o.Fc(43,"\n                                "),o.Qb(44,"label",11),o.Fc(45),o.ac(46,"translate"),o.Pb(),o.Fc(47,"\n                                "),o.Qb(48,"div",12),o.Fc(49,"\n                                    "),o.Qb(50,"select",13,14),o.Xb("ngModelChange",function(e){return n.searchCriteria.insuranceCompanyId=e}),o.Fc(52,"\n                                        "),o.Qb(53,"option"),o.Fc(54),o.ac(55,"translate"),o.Pb(),o.Fc(56,"\n                                        "),o.Dc(57,Xe,2,2,"option",15),o.ac(58,"translateObjects"),o.Fc(59,"\n                                    "),o.Pb(),o.Fc(60,"\n                                "),o.Pb(),o.Fc(61,"\n                            "),o.Pb(),o.Fc(62,"\n                        "),o.Pb(),o.Fc(63,"\n                        "),o.Qb(64,"div",16),o.Fc(65,"\n                            "),o.Qb(66,"div",10),o.Fc(67,"\n                                "),o.Qb(68,"label",17),o.Fc(69),o.ac(70,"translate"),o.Pb(),o.Fc(71,"\n                                "),o.Qb(72,"div",12),o.Fc(73,"\n                                    "),o.Qb(74,"select",18,19),o.Xb("change",function(){o.wc(e);const t=o.vc(75);return n.selectDateFilter(t.value)}),o.Fc(76,"\n                                        "),o.Qb(77,"option"),o.Fc(78),o.ac(79,"translate"),o.Pb(),o.Fc(80,"\n                                        "),o.Dc(81,Oe,3,4,"option",15),o.Fc(82,"\n                                    "),o.Pb(),o.Fc(83,"\n                                "),o.Pb(),o.Fc(84,"\n                            "),o.Pb(),o.Fc(85,"\n                        "),o.Pb(),o.Fc(86,"\n                    "),o.Pb(),o.Fc(87,"\n\n                    "),o.Qb(88,"div",2),o.Fc(89,"\n                        "),o.Dc(90,Ve,10,2,"div",20),o.Fc(91,"\n                    "),o.Pb(),o.Fc(92,"\n                    "),o.Dc(93,Ee,22,11,"div",21),o.Fc(94,"\n\n                    "),o.Qb(95,"div",2),o.Fc(96,"\n                        "),o.Qb(97,"div",9),o.Fc(98,"\n                            "),o.Qb(99,"div",10),o.Fc(100,"\n                                "),o.Qb(101,"label",17),o.Fc(102),o.ac(103,"translate"),o.Pb(),o.Fc(104,"\n                                "),o.Qb(105,"div",12),o.Fc(106,"\n                                    "),o.Qb(107,"table"),o.Fc(108,"\n                                        "),o.Qb(109,"tr"),o.Fc(110,"\n                                            "),o.Dc(111,je,5,5,"td",22),o.ac(112,"translateObjects"),o.Fc(113,"\n                                        "),o.Pb(),o.Fc(114,"\n                                    "),o.Pb(),o.Fc(115,"\n                                    "),o.Lb(116,"br"),o.Fc(117,"\n                                    "),o.Dc(118,He,11,3,"div",23),o.Fc(119,"\n                                "),o.Pb(),o.Fc(120,"\n                            "),o.Pb(),o.Fc(121,"\n                        "),o.Pb(),o.Fc(122,"\n                    "),o.Pb(),o.Fc(123,"\n\n\n                    "),o.Qb(124,"div",24),o.Fc(125,"\n                        "),o.Qb(126,"div",25),o.Fc(127,"\n                            "),o.Qb(128,"button",26),o.Xb("click",function(){return n.getCompanyTransactions()}),o.Fc(129),o.ac(130,"uppercase"),o.ac(131,"translate"),o.Pb(),o.Fc(132,"\n                        "),o.Pb(),o.Fc(133,"\n                    "),o.Pb(),o.Fc(134,"\n                "),o.Pb(),o.Fc(135,"\n            "),o.Pb(),o.Fc(136,"\n        "),o.Pb(),o.Fc(137,"\n\n        "),o.Qb(138,"div",27),o.Fc(139,"\n            \xa0\n        "),o.Pb(),o.Fc(140,"\n\n        "),o.Qb(141,"table",28),o.Fc(142,"\n            "),o.Qb(143,"thead"),o.Fc(144,"\n                "),o.Qb(145,"tr",29),o.Fc(146,"\n                    "),o.Qb(147,"td"),o.Fc(148),o.ac(149,"translate"),o.Pb(),o.Fc(150,"\n                    "),o.Qb(151,"td"),o.Fc(152),o.ac(153,"translate"),o.Pb(),o.Fc(154,"\n                    "),o.Qb(155,"td"),o.Fc(156),o.ac(157,"translate"),o.Pb(),o.Fc(158,"\n                    "),o.Qb(159,"td"),o.Fc(160),o.ac(161,"translate"),o.Pb(),o.Fc(162,"\n                    "),o.Qb(163,"td"),o.Fc(164),o.ac(165,"translate"),o.Pb(),o.Fc(166,"\n                "),o.Pb(),o.Fc(167,"\n            "),o.Pb(),o.Fc(168,"\n            "),o.Qb(169,"tbody"),o.Fc(170,"\n                "),o.Qb(171,"tr",30),o.Fc(172,"\n                    "),o.Qb(173,"th"),o.Fc(174),o.ac(175,"translateObjects"),o.Pb(),o.Fc(176,"\n                    "),o.Qb(177,"th"),o.Fc(178),o.Pb(),o.Fc(179,"\n                    "),o.Qb(180,"th"),o.Fc(181),o.Pb(),o.Fc(182,"\n                    "),o.Qb(183,"th"),o.Fc(184),o.Pb(),o.Fc(185,"\n                    "),o.Qb(186,"th"),o.Fc(187),o.Pb(),o.Fc(188,"\n                "),o.Pb(),o.Fc(189,"\n            "),o.Pb(),o.Fc(190,"\n        "),o.Pb(),o.Fc(191,"\n        "),o.Qb(192,"div",31),o.Fc(193,"\n            "),o.Qb(194,"button",32),o.Fc(195),o.ac(196,"translate"),o.Pb(),o.Fc(197,"\n        "),o.Pb(),o.Fc(198,"\n\n        "),o.Lb(199,"br"),o.Fc(200,"\n        "),o.Lb(201,"br"),o.Fc(202,"\n        "),o.Lb(203,"br"),o.Fc(204,"\n\n        "),o.Dc(205,Ke,4,2,"div",33),o.Fc(206,"\n\n        "),o.Lb(207,"br"),o.Fc(208,"\n\n        "),o.Dc(209,ze,14,0,"div",34),o.Fc(210,"\n\n\n        "),o.Qb(211,"div",35),o.Fc(212,"\n            "),o.Lb(213,"button",36,37),o.Fc(215,"\n        "),o.Pb(),o.Fc(216,"\n\n        "),o.Qb(217,"div",38),o.Fc(218,"\n            "),o.Qb(219,"div",39),o.Fc(220,"\n                "),o.Fc(221,"\n                "),o.Qb(222,"div",40),o.Fc(223,"\n                    "),o.Qb(224,"div",41),o.Fc(225,"\n                        "),o.Qb(226,"button",42),o.Fc(227,"\xd7"),o.Pb(),o.Fc(228,"\n                        "),o.Qb(229,"h4",43),o.Fc(230),o.ac(231,"translate"),o.Pb(),o.Fc(232,"\n                    "),o.Pb(),o.Fc(233,"\n                    "),o.Dc(234,Ye,120,40,"form",44),o.Fc(235,"\n                "),o.Pb(),o.Fc(236,"\n            "),o.Pb(),o.Fc(237,"\n        "),o.Pb(),o.Fc(238,"\n\n        "),o.Qb(239,"div",45),o.Fc(240,"\n            "),o.Qb(241,"div",39),o.Fc(242,"\n                "),o.Fc(243,"\n                "),o.Qb(244,"div",40),o.Fc(245,"\n                    "),o.Qb(246,"div",41),o.Fc(247,"\n                        "),o.Qb(248,"button",42),o.Fc(249,"\xd7"),o.Pb(),o.Fc(250,"\n                        "),o.Qb(251,"h4",43),o.Fc(252,"Change Payment Date"),o.Pb(),o.Fc(253,"\n                    "),o.Pb(),o.Fc(254,"\n\n                    "),o.Dc(255,_e,41,11,"form",46),o.Fc(256,"\n                "),o.Pb(),o.Fc(257,"\n            "),o.Pb(),o.Fc(258,"\n        "),o.Pb(),o.Fc(259,"\n\n        "),o.Qb(260,"div",47),o.Fc(261,"\n            "),o.Qb(262,"div",39),o.Fc(263,"\n                "),o.Fc(264,"\n                "),o.Qb(265,"div",40),o.Fc(266,"\n                    "),o.Qb(267,"div",41),o.Fc(268,"\n                        "),o.Qb(269,"button",42),o.Fc(270,"\xd7"),o.Pb(),o.Fc(271,"\n                        "),o.Qb(272,"h4",43),o.Fc(273),o.ac(274,"translate"),o.Pb(),o.Fc(275,"\n                    "),o.Pb(),o.Fc(276,"\n\n                    "),o.Dc(277,en,50,19,"form",48),o.Fc(278,"\n                "),o.Pb(),o.Fc(279,"\n            "),o.Pb(),o.Fc(280,"\n        "),o.Pb(),o.Fc(281,"\n\n        "),o.Qb(282,"div",49),o.Fc(283,"\n            "),o.Qb(284,"div",39),o.Fc(285,"\n                "),o.Fc(286,"\n                "),o.Qb(287,"div",40),o.Fc(288,"\n                    "),o.Qb(289,"div",41),o.Fc(290,"\n                        "),o.Qb(291,"button",42),o.Fc(292,"\xd7"),o.Pb(),o.Fc(293,"\n                        "),o.Qb(294,"h4",43),o.Fc(295,"Refund From Pre-paid"),o.Pb(),o.Fc(296,"\n                    "),o.Pb(),o.Fc(297,"\n\n                    "),o.Dc(298,nn,42,4,"form",50),o.Fc(299,"\n                "),o.Pb(),o.Fc(300,"\n            "),o.Pb(),o.Fc(301,"\n        "),o.Pb(),o.Fc(302,"\n\n        "),o.Qb(303,"div",51),o.Fc(304,"\n            "),o.Qb(305,"div",39),o.Fc(306,"\n                "),o.Fc(307,"\n                "),o.Qb(308,"div",40),o.Fc(309,"\n                    "),o.Qb(310,"div",41),o.Fc(311,"\n                        "),o.Qb(312,"button",42),o.Fc(313,"\xd7"),o.Pb(),o.Fc(314,"\n                        "),o.Qb(315,"h4",43),o.Fc(316,"Attach File to MRF"),o.Pb(),o.Fc(317,"\n                    "),o.Pb(),o.Fc(318,"\n                    "),o.Fc(319,"\n                "),o.Pb(),o.Fc(320,"\n            "),o.Pb(),o.Fc(321,"\n        "),o.Pb(),o.Fc(322,"\n\n")}2&e&&(o.yb(5),o.hc("activeTabIndex",18),o.yb(9),o.Gc(o.bc(15,38,"InsuranceManagement")),o.yb(4),o.Gc(o.bc(19,40,"Invoices")),o.yb(2),o.Hc(" \xa0/\n                    ",o.bc(21,42,"CompanyTransactions"),"\n                "),o.yb(8),o.Gc(o.bc(29,44,"Search")),o.yb(17),o.Gc(o.bc(46,46,"Company")),o.yb(5),o.hc("ngModel",n.searchCriteria.insuranceCompanyId),o.yb(4),o.Gc(o.bc(55,48,"Select")),o.yb(3),o.hc("ngForOf",o.bc(58,50,n.companiesList)),o.yb(12),o.Gc(o.bc(70,52,"Date")),o.yb(9),o.Gc(o.bc(79,54,"Select")),o.yb(3),o.hc("ngForOf",n.dateFiltersList),o.yb(9),o.hc("ngIf",n.isDurationVisible),o.yb(3),o.hc("ngIf",n.isPeriodOfTimeVisible),o.yb(9),o.Gc(o.bc(103,56,"Type")),o.yb(9),o.hc("ngForOf",o.bc(112,58,n.claimSearchTypeList)),o.yb(7),o.hc("ngIf",n.displayChargeStatus),o.yb(11),o.Gc(o.bc(130,60,o.bc(131,62,"Search"))),o.yb(19),o.Hc("",o.bc(149,64,"CompanyName"),":"),o.yb(4),o.Hc("",o.bc(153,66,"PrePaidBalance"),":"),o.yb(4),o.Hc("",o.bc(157,68,"Pending"),":"),o.yb(4),o.Hc("",o.bc(161,70,"AmountToPay"),":"),o.yb(4),o.Hc("",o.bc(165,72,"Net"),":"),o.yb(10),o.Gc(o.dc(175,74,n.company,"name","nameTranslation").name),o.yb(4),o.Gc(n.prePaidBalanceAmount),o.yb(3),o.Gc(n.pendingAmount),o.yb(3),o.Gc(n.amountToPay),o.yb(3),o.Gc(n.net),o.yb(7),o.ic("disabled",n.enableConsumeFromPrepaidBtn?"":"disabled"),o.yb(1),o.Gc(o.bc(196,78,"Refund")),o.yb(10),o.hc("ngIf",n.allCharges.length),o.yb(4),o.hc("ngIf",n.allCompanyPayments.length),o.yb(21),o.Gc(o.bc(231,80,"CompanyPayment")),o.yb(4),o.hc("ngIf",n.active),o.yb(21),o.hc("ngIf",n.active),o.yb(18),o.Hc("",o.bc(274,82,"ChangePaymentMethod")," "),o.yb(4),o.hc("ngIf",n.active),o.yb(21),o.hc("ngIf",n.active))},directives:[p.a,s.a,a.p,a.o,a.f,a.i,a.j,a.r,c.j,c.k,a.b,P.a,oe,a.q,a.g,a.h,a.k],pipes:[u.c,v.a,c.s],encapsulation:2}),e})();function cn(e,n){1&e&&(o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb())}function an(e,n){if(1&e&&(o.Qb(0,"option",33),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function on(e,n){if(1&e&&(o.Qb(0,"option",33),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function sn(e,n){if(1&e&&(o.Qb(0,"tr"),o.Fc(1,"\n                            "),o.Qb(2,"td"),o.Fc(3),o.Pb(),o.Fc(4,"\n                            "),o.Qb(5,"td"),o.Fc(6),o.Pb(),o.Fc(7,"\n                            "),o.Qb(8,"td"),o.Fc(9),o.Pb(),o.Fc(10,"\n                            "),o.Qb(11,"td"),o.Fc(12),o.Pb(),o.Fc(13,"\n                            "),o.Qb(14,"td"),o.Fc(15),o.Pb(),o.Fc(16,"\n                            "),o.Qb(17,"td"),o.Fc(18),o.Pb(),o.Fc(19,"\n                            "),o.Qb(20,"td"),o.Fc(21),o.Pb(),o.Fc(22,"\n                            "),o.Qb(23,"td"),o.Fc(24),o.Pb(),o.Fc(25,"\n                            "),o.Qb(26,"td"),o.Fc(27),o.Pb(),o.Fc(28,"\n                        "),o.Pb()),2&e){const e=n.$implicit;o.yb(3),o.Gc(e.id),o.yb(3),o.Gc(e.creatorName),o.yb(3),o.Gc(e.claimDateString),o.yb(3),o.Gc(e.insurancePolicy),o.yb(3),o.Gc(e.patientMrn),o.yb(3),o.Gc(e.patientName),o.yb(3),o.Gc(e.doctorName),o.yb(3),o.Gc(e.doctorDivision),o.yb(3),o.Gc(e.totalAmountForInsuranceCompany)}}const rn=function(){return{standalone:!0}};let bn=(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.localStorage=n,this.router=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.utilityClass=new d.a,this.active=!0,this.showProgress=!1,this.enableViewCompanyDetails=!1,this.enableGenerateInvoicesBtn=!1,this.toPrintDiv="print-section",this.clinicId="0",this.claimsSearchParameters={},this.claimsList=[],this.companiesList=[],this.policiesList=[],this.isGenerateInvoiceActive=!1,this.userPermisions=new b.a,this.key=new l.a,this.lstToTranslated=[]}ngOnInit(){this.lstToTranslated=["creatorName","creatorNameTranslation","doctorName","doctorNameTranslation","doctorDivision","doctorDivisionTranslation","patientName","patientNameTranslation","insuranceCompany","insuranceCompanyTranslation"],this.clinicId=this.localStorage.retrieve("ClinicID"),this.invoiceCreatorId=this.localStorage.retrieve("UserID"),this.claimsSearchParameters.clinicId=this.clinicId,this.getInvoiceClaimsSearchWrapper(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.GenerateInvoices&&n.permission.key!=this.key.ExcludeInvoices&&n.permission.key!=this.key.IncludeInvoices&&n.permission.key!=this.key.DeleteInvoices&&n.permission.key!=this.key.EndorseInvoices||1!=n.allow||(this.enableViewCompanyDetails=!0),n.permission.key==this.key.GenerateInvoices&&1==n.allow&&(this.enableGenerateInvoicesBtn=!0)}getInvoiceClaimsSearchWrapper(){this.showProgress=!0;let e=this;this.insuranceService.getInvoiceClaimsSearchWrapper().subscribe(function(n){e.companiesList=n.insuranceCompanies},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}searchForInvoiceClaims(){this.showProgress=!0;let e=this;null!=this.periodStartDate&&(this.claimsSearchParameters.startDate=this.utilityClass.getUtcDate(this.periodStartDate)),null!=this.periodEndDate&&(this.claimsSearchParameters.endDate=this.utilityClass.getUtcDate(this.periodEndDate)),this.insuranceService.searchForInvoiceClaims(this.claimsSearchParameters).subscribe(function(n){e.claimsList=n.claims,e.totalAmount=n.totalAmount,e.prepaidBalance=n.companyPrePaidBalance,e.invoiceCompanyId=e.claimsSearchParameters.companyId,e.invoicePolicyId=e.claimsSearchParameters.policyId,e.isGenerateInvoiceActive=null!=e.claimsList&&e.claimsList.length>0},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}fillCompanyPolicies(e){if(null!=this.companiesList&&this.companiesList.length>0){let n=this.companiesList.find(n=>n.id==e);this.policiesList=null!=n&&null!=n.insurancePolicies?n.insurancePolicies:[]}}generateInvoice(){this.showProgress=!0;let e=this,n=this.createNewInvoice();this.insuranceService.generateInvoice(n).subscribe(function(n){let t=e.translate.instant("InvoiceGeneratedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}createNewInvoice(){let e={id:0};return e.creatorId=this.invoiceCreatorId,e.clinicId=this.clinicId,e.companyId=this.invoiceCompanyId,e.policyId=this.invoicePolicyId,e.invoiceDate=this.utilityClass.getUtcDate(new Date),e.claims=this.claimsList,e.netAmount=this.totalAmount,e.totalCredit=this.prepaidBalance,e}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.b),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-generate-invoice"]],decls:209,vars:100,consts:[[4,"ngIf"],[1,"row"],[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"padding5"],["novalidate","","name","searchForClaimsForm",1,"form-horizontal"],["searchForClaimsForm","ngForm"],[1,"row","well"],[1,"col-md-4","col-md-offset-8"],["data-toggle","collapse","data-target","#SearchForClaims",1,"float-right","btnMarginLeft","btn","btn-primary"],[1,"float-right","btnMarginRight"],[3,"section"],["id","SearchForClaims",1,"collapse","fa-border","well"],[1,"padding5","marginTop35"],[1,"row","form-horizontal"],[1,"form-group"],[1,"col-md-2","control-label"],[1,"col-md-3"],["id","ddlCompanies","name","ddlCompanies","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlCompanies",""],[3,"value",4,"ngFor","ngForOf"],["id","ddlPolicies","name","ddlPolicies",1,"form-control",3,"ngModel","ngModelChange"],["for","txtName",1,"col-md-2","control-label"],["dateFormat","dd/mm/yy","yearRange","2000:2050",3,"ngModel","monthNavigator","yearNavigator","showIcon","ngModelOptions","ngModelChange"],[1,"col-md-10","col-md-offset-1"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"tableBack","table","table-bordered","responsive"],[1,"thBack"],["id","print-section",1,"hidden"],[1,"table","table-responsive","table-hover"],[1,"alert","alert-info"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(1&e){const e=o.Rb();o.Dc(0,cn,4,0,"div",0),o.Fc(1,"\n\n"),o.Qb(2,"div",1),o.Fc(3,"\n    "),o.Lb(4,"shared-tabs",2),o.Fc(5,"\n    "),o.Qb(6,"div",3),o.Fc(7,"\n        "),o.Qb(8,"div",4),o.Fc(9,"\n            "),o.Qb(10,"a"),o.Fc(11),o.ac(12,"translate"),o.Pb(),o.Fc(13),o.ac(14,"translate"),o.Pb(),o.Fc(15,"\n    "),o.Pb(),o.Fc(16,"\n    "),o.Qb(17,"div",5),o.Fc(18,"\n        "),o.Qb(19,"form",6,7),o.Fc(21,"\n            "),o.Qb(22,"div",8),o.Fc(23,"\n\n                "),o.Qb(24,"div",9),o.Fc(25,"\n                    "),o.Qb(26,"button",10),o.Fc(27),o.ac(28,"translate"),o.Pb(),o.Fc(29,"\n                  "),o.Qb(30,"div",11),o.Lb(31,"print-page",12),o.Pb(),o.Fc(32," \n                "),o.Pb(),o.Fc(33,"\n\n            "),o.Pb(),o.Fc(34,"\n      \n            "),o.Qb(35,"div",13),o.Fc(36,"\n                "),o.Qb(37,"div",14),o.Fc(38,"\n                    "),o.Qb(39,"div",15),o.Fc(40,"\n                        "),o.Qb(41,"div",16),o.Fc(42,"\n                            "),o.Qb(43,"label",17),o.Fc(44),o.ac(45,"translate"),o.Pb(),o.Fc(46,"\n                            "),o.Qb(47,"div",18),o.Fc(48,"\n                                "),o.Qb(49,"select",19,20),o.Xb("ngModelChange",function(e){return n.claimsSearchParameters.companyId=e})("change",function(){o.wc(e);const t=o.vc(50);return n.fillCompanyPolicies(t.value)}),o.Fc(51,"\n                                    "),o.Qb(52,"option"),o.Fc(53),o.ac(54,"translate"),o.Pb(),o.Fc(55,"\n                                    "),o.Dc(56,an,2,2,"option",21),o.ac(57,"translateObjects"),o.Fc(58,"\n                                "),o.Pb(),o.Fc(59,"\n                            "),o.Pb(),o.Fc(60,"\n\n                            "),o.Qb(61,"label",17),o.Fc(62),o.ac(63,"translate"),o.Pb(),o.Fc(64,"\n                            "),o.Qb(65,"div",18),o.Fc(66,"\n                                "),o.Qb(67,"select",22),o.Xb("ngModelChange",function(e){return n.claimsSearchParameters.policyId=e}),o.Fc(68,"\n                                    "),o.Qb(69,"option"),o.Fc(70),o.ac(71,"translate"),o.Pb(),o.Fc(72,"\n                                    "),o.Dc(73,on,2,2,"option",21),o.ac(74,"translateObjects"),o.Fc(75,"\n                                "),o.Pb(),o.Fc(76,"\n                            "),o.Pb(),o.Fc(77,"\n                        "),o.Pb(),o.Fc(78,"\n                        "),o.Qb(79,"div",16),o.Fc(80,"\n                            "),o.Qb(81,"label",23),o.Fc(82),o.ac(83,"translate"),o.Pb(),o.Fc(84,"\n                            "),o.Qb(85,"div",18),o.Fc(86,"\n                                "),o.Qb(87,"p-calendar",24),o.Xb("ngModelChange",function(e){return n.periodStartDate=e}),o.Pb(),o.Fc(88,"\n                            "),o.Pb(),o.Fc(89,"\n                            "),o.Qb(90,"label",23),o.Fc(91),o.ac(92,"translate"),o.Pb(),o.Fc(93,"\n                            "),o.Qb(94,"div",18),o.Fc(95,"\n                                "),o.Qb(96,"p-calendar",24),o.Xb("ngModelChange",function(e){return n.periodEndDate=e}),o.Pb(),o.Fc(97,"\n                            "),o.Pb(),o.Fc(98,"\n                        "),o.Pb(),o.Fc(99,"\n                        "),o.Qb(100,"div",16),o.Fc(101,"\n                            "),o.Qb(102,"div",25),o.Fc(103,"\n                                "),o.Qb(104,"button",26),o.Xb("click",function(){return n.searchForInvoiceClaims()}),o.Fc(105),o.ac(106,"uppercase"),o.ac(107,"translate"),o.Pb(),o.Fc(108,"\n                                "),o.Qb(109,"button",26),o.Xb("click",function(){return n.generateInvoice()}),o.Fc(110),o.ac(111,"uppercase"),o.ac(112,"translate"),o.Pb(),o.Fc(113,"\n                            "),o.Pb(),o.Fc(114,"\n\n                        "),o.Pb(),o.Fc(115,"\n                    "),o.Pb(),o.Fc(116,"\n                "),o.Pb(),o.Fc(117,"\n            "),o.Pb(),o.Fc(118,"\n\n            \n            "),o.Qb(119,"table",27),o.Fc(120,"\n                "),o.Qb(121,"thead"),o.Fc(122,"\n                    "),o.Qb(123,"tr",28),o.Fc(124,"\n                        "),o.Qb(125,"td"),o.Fc(126),o.ac(127,"translate"),o.Pb(),o.Fc(128,"\n                        "),o.Qb(129,"td"),o.Fc(130),o.ac(131,"translate"),o.Pb(),o.Fc(132,"\n                    "),o.Pb(),o.Fc(133,"\n                "),o.Pb(),o.Fc(134,"\n                "),o.Qb(135,"tbody"),o.Fc(136,"\n                    "),o.Qb(137,"tr",28),o.Fc(138,"\n                        "),o.Qb(139,"th"),o.Fc(140),o.Pb(),o.Fc(141,"\n                        "),o.Qb(142,"th"),o.Fc(143),o.Pb(),o.Fc(144,"\n                      "),o.Pb(),o.Fc(145,"\n                "),o.Pb(),o.Fc(146,"\n            "),o.Pb(),o.Fc(147,"\n            "),o.Lb(148,"br"),o.Fc(149,"\n            "),o.Lb(150,"br"),o.Fc(151,"\n            "),o.Fc(152,"\n            "),o.Qb(153,"div",29),o.Fc(154,"\n                "),o.Qb(155,"table",30),o.Fc(156,"\n                    "),o.Qb(157,"thead",31),o.Fc(158,"\n                        "),o.Qb(159,"tr"),o.Fc(160,"\n                            "),o.Qb(161,"th"),o.Fc(162),o.ac(163,"translate"),o.Pb(),o.Fc(164,"\n                            "),o.Qb(165,"th"),o.Fc(166),o.ac(167,"translate"),o.Pb(),o.Fc(168,"\n                            "),o.Qb(169,"th"),o.Fc(170),o.ac(171,"translate"),o.Pb(),o.Fc(172,"\n                            "),o.Qb(173,"th"),o.Fc(174),o.ac(175,"translate"),o.Pb(),o.Fc(176,"\n                            "),o.Qb(177,"th"),o.Fc(178),o.ac(179,"translate"),o.Pb(),o.Fc(180,"\n                            "),o.Qb(181,"th"),o.Fc(182),o.ac(183,"translate"),o.Pb(),o.Fc(184,"\n                            "),o.Qb(185,"th"),o.Fc(186),o.ac(187,"translate"),o.Pb(),o.Fc(188,"\n                            "),o.Qb(189,"th"),o.Fc(190),o.ac(191,"translate"),o.Pb(),o.Fc(192,"\n                            "),o.Qb(193,"th"),o.Fc(194),o.ac(195,"translate"),o.Pb(),o.Fc(196,"\n                        "),o.Pb(),o.Fc(197,"\n                    "),o.Pb(),o.Fc(198,"\n                    "),o.Qb(199,"tbody"),o.Fc(200,"\n                        "),o.Dc(201,sn,29,9,"tr",32),o.ac(202,"translateObjects"),o.Fc(203,"\n                    "),o.Pb(),o.Fc(204,"\n                "),o.Pb(),o.Fc(205,"\n            "),o.Pb(),o.Fc(206,"\n        "),o.Pb(),o.Fc(207,"\n    "),o.Pb(),o.Fc(208,"\n"),o.Pb()}if(2&e){const e=o.vc(20);o.hc("ngIf",n.showProgress),o.yb(4),o.hc("activeTabIndex",6),o.yb(7),o.Gc(o.bc(12,44,"InsuranceManagement")),o.yb(2),o.Hc(" \xa0/\n            ",o.bc(14,46,"GenerateInvoices"),"\n        "),o.yb(14),o.Gc(o.bc(28,48,"SearchForClaims")),o.yb(4),o.hc("section",n.toPrintDiv),o.yb(13),o.Gc(o.bc(45,50,"Company")),o.yb(5),o.hc("ngModel",n.claimsSearchParameters.companyId),o.yb(4),o.Gc(o.bc(54,52,"Select")),o.yb(3),o.hc("ngForOf",o.bc(57,54,n.companiesList)),o.yb(6),o.Gc(o.bc(63,56,"Policy")),o.yb(5),o.hc("ngModel",n.claimsSearchParameters.policyId),o.yb(3),o.Gc(o.bc(71,58,"Select")),o.yb(3),o.hc("ngForOf",o.bc(74,60,n.policiesList)),o.yb(9),o.Gc(o.bc(83,62,"From")),o.yb(5),o.hc("ngModel",n.periodStartDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",o.lc(98,rn)),o.yb(4),o.Gc(o.bc(92,64,"To")),o.yb(5),o.hc("ngModel",n.periodEndDate)("monthNavigator",!0)("yearNavigator",!0)("showIcon",!0)("ngModelOptions",o.lc(99,rn)),o.yb(8),o.hc("disabled",!e.valid||!n.enableViewCompanyDetails),o.yb(1),o.Gc(o.bc(106,66,o.bc(107,68,"SearchBtn"))),o.yb(4),o.hc("disabled",!n.isGenerateInvoiceActive||!n.enableGenerateInvoicesBtn),o.yb(1),o.Gc(o.bc(111,70,o.bc(112,72,"GenerateInvoice"))),o.yb(16),o.Hc("",o.bc(127,74,"NetAmount"),":"),o.yb(4),o.Hc("",o.bc(131,76,"TotalCredit"),":"),o.yb(10),o.Gc(n.totalAmount),o.yb(3),o.Gc(n.prepaidBalance),o.yb(19),o.Gc(o.bc(163,78,"ClaimRefNo")),o.yb(4),o.Gc(o.bc(167,80,"CreatedBy")),o.yb(4),o.Gc(o.bc(171,82,"ClaimDate")),o.yb(4),o.Gc(o.bc(175,84,"PolicyName")),o.yb(4),o.Gc(o.bc(179,86,"MRN")),o.yb(4),o.Gc(o.bc(183,88,"PatientName")),o.yb(4),o.Gc(o.bc(187,90,"DoctorName")),o.yb(4),o.Gc(o.bc(191,92,"DoctorSpecialty")),o.yb(4),o.Gc(o.bc(195,94,"ChargeAmount")),o.yb(7),o.hc("ngForOf",o.bc(202,96,n.claimsList))}},directives:[c.k,s.a,a.q,a.g,a.h,g.a,a.p,a.o,a.f,a.i,a.j,a.r,c.j,P.a,p.a],pipes:[u.c,v.a,c.s],encapsulation:2}),e})();var ln=t("uGjk");const dn=["btnCoverageDetailsModalClose"];function hn(e,n){if(1&e&&(o.Qb(0,"option",37),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function mn(e,n){if(1&e&&(o.Qb(0,"option",37),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Hc("\n                                ",e.name,"")}}function Fn(e,n){if(1&e&&(o.Qb(0,"div",62),o.Fc(1,"\n                                "),o.Qb(2,"tree-checkboxList",63),o.Fc(3,"\n                                "),o.Pb(),o.Fc(4,"\n                            "),o.Pb()),2&e){const e=o.Zb(2);o.yb(2),o.hc("treeList",e.servicesTree)("items",e.allServices)("selectedItemsIDs",e.selectedServicesIDs)("groupType",e.groupType)}}function un(e,n){if(1&e&&(o.Qb(0,"div",64),o.Fc(1,"\n                                "),o.Qb(2,"tree-checkboxList",63),o.Fc(3,"\n                                "),o.Pb(),o.Fc(4,"\n                            "),o.Pb()),2&e){const e=o.Zb(2);o.yb(2),o.hc("treeList",e.diagnosisTree)("items",e.allDiagnosis)("selectedItemsIDs",e.selectedDiagnosisIDs)("groupType",e.diagnosisGroup)}}function yn(e,n){if(1&e&&(o.Qb(0,"option",37),o.Fc(1),o.ac(2,"translate"),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.value),o.yb(1),o.Gc(o.bc(2,2,e.text))}}function gn(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",41),o.Fc(1,"\n                                "),o.Lb(2,"div",65),o.Fc(3,"\n                                "),o.Qb(4,"div",49),o.Fc(5,"\n                                    "),o.Qb(6,"input",66,67),o.Xb("change",function(){return o.wc(e),o.Zb(2).needApprovalChanged(!0)}),o.Pb(),o.Fc(8),o.ac(9,"translate"),o.Qb(10,"input",68,67),o.Xb("change",function(){return o.wc(e),o.Zb(2).needApprovalChanged(!1)}),o.Pb(),o.Fc(12),o.ac(13,"translate"),o.Lb(14,"br"),o.Fc(15,"\n                                    "),o.Qb(16,"textarea",69,70),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).model.description=n}),o.Pb(),o.Fc(18,"\n                                "),o.Pb(),o.Fc(19,"\n                            "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(6),o.hc("checked",e.model.needApproval),o.yb(2),o.Hc("",o.bc(9,5,"NeedApproval"),"\n                                    "),o.yb(2),o.hc("checked",!e.model.needApproval),o.yb(2),o.Hc("",o.bc(13,7,"Other"),"\n                                    "),o.yb(4),o.hc("ngModel",e.model.description)}}function pn(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div",41),o.Fc(1,"\n                                "),o.Qb(2,"label",71),o.Fc(3),o.ac(4,"translate"),o.Pb(),o.Fc(5,"\n                                "),o.Qb(6,"div",49),o.Fc(7,"\n                                    "),o.Qb(8,"input",72,73),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb(2).model.specialPrice=n}),o.Pb(),o.Fc(10,"\n                                "),o.Pb(),o.Fc(11,"\n                            "),o.Pb()}if(2&e){const e=o.Zb(2);o.yb(3),o.Gc(o.bc(4,2,"SpecialPrice")),o.yb(5),o.hc("ngModel",e.model.specialPrice)}}function Pn(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",38,39),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().saveCoverageDetails()}),o.Fc(2,"\n                        "),o.Qb(3,"div",40),o.Fc(4,"\n\n                            "),o.Qb(5,"div",41),o.Fc(6,"\n                                "),o.Qb(7,"table"),o.Fc(8,"\n                                    "),o.Qb(9,"tr"),o.Fc(10,"\n                                        "),o.Qb(11,"td"),o.Fc(12,"\n                                            "),o.Qb(13,"input",42,43),o.Xb("change",function(){o.wc(e);const n=o.vc(14);return o.Zb().onRadioSelectionChanged(n.value)}),o.Pb(),o.Fc(15),o.ac(16,"translate"),o.Pb(),o.Fc(17,"\n                                        "),o.Qb(18,"td"),o.Fc(19,"\n                                            "),o.Qb(20,"input",44,45),o.Xb("change",function(){o.wc(e);const n=o.vc(21);return o.Zb().onRadioSelectionChanged(n.value)}),o.Pb(),o.Fc(22),o.ac(23,"translate"),o.Pb(),o.Fc(24,"\n                                    "),o.Pb(),o.Fc(25,"\n                                "),o.Pb(),o.Fc(26,"\n                            "),o.Pb(),o.Fc(27,"\n\n                            "),o.Dc(28,Fn,5,4,"div",46),o.Fc(29,"\n\n                            "),o.Dc(30,un,5,4,"div",47),o.Fc(31,"\n\n                            "),o.Lb(32,"br"),o.Fc(33,"\n                            "),o.Qb(34,"div",41),o.Fc(35,"\n                                "),o.Qb(36,"label",48),o.Fc(37),o.ac(38,"translate"),o.Pb(),o.Fc(39,"\n                                "),o.Qb(40,"div",49),o.Fc(41,"\n                                    "),o.Qb(42,"select",50,51),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.coverageType=n})("change",function(){o.wc(e);const n=o.vc(44);return o.Zb().CoverageTypeChanged(n.value)}),o.Fc(45,"\n                                        "),o.Dc(46,yn,3,4,"option",15),o.ac(47,"translateObjects"),o.Fc(48,"\n                                    "),o.Pb(),o.Fc(49,"\n                                "),o.Pb(),o.Fc(50,"\n\n                            "),o.Pb(),o.Fc(51,"\n\n                            "),o.Dc(52,gn,20,9,"div",52),o.Fc(53,"\n\n                            "),o.Qb(54,"div",41),o.Fc(55,"\n                                "),o.Qb(56,"label",53),o.Fc(57),o.ac(58,"translate"),o.Pb(),o.Fc(59,"\n                                "),o.Qb(60,"div",49),o.Fc(61,"\n                                    "),o.Qb(62,"input",54,55),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.discountPercentage=n}),o.Pb(),o.Fc(64,"\n                                "),o.Pb(),o.Fc(65," %\n                                "),o.Fc(66,"\n                            "),o.Pb(),o.Fc(67,"\n                            "),o.Qb(68,"div",41),o.Fc(69,"\n                                "),o.Fc(70,"\n                                "),o.Qb(71,"label",56),o.Fc(72),o.ac(73,"translate"),o.Pb(),o.Fc(74,"\n                                "),o.Qb(75,"div",49),o.Fc(76,"\n                                    "),o.Qb(77,"input",57,58),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().model.deductiblePercentage=n}),o.Pb(),o.Fc(79,"\n                                "),o.Pb(),o.Fc(80,"\n                                %\n                            "),o.Pb(),o.Fc(81,"\n                            "),o.Dc(82,pn,12,4,"div",52),o.Fc(83,"\n\n                        "),o.Pb(),o.Fc(84,"\n                        "),o.Qb(85,"div",59),o.Fc(86,"\n                            "),o.Qb(87,"button",60),o.Fc(88),o.ac(89,"translate"),o.Pb(),o.Fc(90,"\n                            "),o.Qb(91,"button",61,29),o.Xb("click",function(){return o.wc(e),o.Zb().close()}),o.Fc(93),o.ac(94,"translate"),o.Pb(),o.Fc(95,"\n                        "),o.Pb(),o.Fc(96,"\n                    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(13),o.ic("disabled",n.dymptService?"disabled":""),o.hc("checked",n.showServices),o.yb(2),o.Hc("",o.bc(16,21,"Services"),"\n                                        "),o.yb(5),o.ic("disabled",n.dymptDiagnose?"disabled":""),o.hc("checked",!n.showServices),o.yb(2),o.Hc("",o.bc(23,23,"Diagnosis"),"\n                                        "),o.yb(6),o.hc("ngIf",n.showServices),o.yb(2),o.hc("ngIf",!n.showServices),o.yb(7),o.Gc(o.bc(38,25,"CoverageType")),o.yb(5),o.hc("ngModel",n.model.coverageType),o.yb(4),o.hc("ngForOf",o.bc(47,27,n.coverageTypes)),o.yb(6),o.hc("ngIf",n.isCondition),o.yb(5),o.Gc(o.bc(58,29,"DiscountPercentage")),o.yb(5),o.hc("ngModel",n.model.discountPercentage),o.yb(10),o.Gc(o.bc(73,31,"DeductiblePercentage")),o.yb(5),o.hc("ngModel",n.model.deductiblePercentage),o.yb(5),o.hc("ngIf",n.showServices),o.yb(5),o.hc("disabled",!e.form.valid||!n.enableSaveCoverageDetails),o.yb(1),o.Hc("\n                                ",o.bc(89,33,"Save"),"\n                            "),o.yb(3),o.ic("disabled",n.enableSaveCoverageDetails?"":"disabled"),o.yb(2),o.Hc("\n                                ",o.bc(94,35,"Cancel"),"\n                            ")}}function vn(e,n){if(1&e&&(o.Qb(0,"option",37),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function fn(e,n){if(1&e&&(o.Qb(0,"option",37),o.Fc(1),o.Pb()),2&e){const e=n.$implicit;o.hc("value",e.id),o.yb(1),o.Gc(e.name)}}function Cn(e,n){if(1&e){const e=o.Rb();o.Qb(0,"form",74,75),o.Xb("ngSubmit",function(){return o.wc(e),o.Zb().copyCoverageDetail()}),o.Fc(2,"\n                        "),o.Qb(3,"div",40),o.Fc(4,"\n                            "),o.Qb(5,"div",41),o.Fc(6,"\n                                "),o.Qb(7,"label",76),o.Fc(8),o.ac(9,"translate"),o.Pb(),o.Fc(10,"\n                                "),o.Qb(11,"div",77),o.Fc(12,"\n                                    "),o.Qb(13,"select",78,79),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().copyCoverageModel.companyId=n})("change",function(){o.wc(e);const n=o.vc(15);return o.Zb().fillPoliciesForPopup(n.value)}),o.Fc(16,"\n                                        "),o.Qb(17,"option",14),o.Fc(18),o.ac(19,"translate"),o.Pb(),o.Fc(20,"\n                                        "),o.Dc(21,vn,2,2,"option",15),o.ac(22,"translateObjects"),o.Fc(23,"\n                                    "),o.Pb(),o.Fc(24,"\n                                "),o.Pb(),o.Fc(25,"\n                            "),o.Pb(),o.Fc(26,"\n                            "),o.Qb(27,"div",41),o.Fc(28,"\n                                "),o.Qb(29,"label",80),o.Fc(30),o.ac(31,"translate"),o.Pb(),o.Fc(32,"\n                                "),o.Qb(33,"div",77),o.Fc(34,"\n                                    "),o.Qb(35,"select",81),o.Xb("ngModelChange",function(n){return o.wc(e),o.Zb().copyCoverageModel.policyId=n}),o.Fc(36,"\n                                        "),o.Qb(37,"option",14),o.Fc(38),o.ac(39,"translate"),o.Pb(),o.Fc(40,"\n                                        "),o.Dc(41,fn,2,2,"option",15),o.ac(42,"translateObjects"),o.Fc(43,"\n                                    "),o.Pb(),o.Fc(44,"\n                                "),o.Pb(),o.Fc(45,"\n                            "),o.Pb(),o.Fc(46,"\n                        "),o.Pb(),o.Fc(47,"\n                        "),o.Qb(48,"div",82),o.Fc(49,"\n                            "),o.Qb(50,"button",60),o.Fc(51),o.ac(52,"translate"),o.Pb(),o.Fc(53,"\n                            "),o.Qb(54,"button",83,84),o.Fc(56),o.ac(57,"translate"),o.Pb(),o.Fc(58,"\n                        "),o.Pb(),o.Fc(59,"\n                    "),o.Pb()}if(2&e){const e=o.vc(1),n=o.Zb();o.yb(8),o.Gc(o.bc(9,12,"InsuranceCompany")),o.yb(5),o.hc("ngModel",n.copyCoverageModel.companyId),o.yb(5),o.Hc("\n                                            ",o.bc(19,14,"Select"),"\n                                        "),o.yb(3),o.hc("ngForOf",o.bc(22,16,n.insuranceCompaniesList)),o.yb(9),o.Gc(o.bc(31,18,"InsurancePolicy")),o.yb(5),o.hc("ngModel",n.copyCoverageModel.policyId),o.yb(3),o.Hc("\n                                            ",o.bc(39,20,"Select"),"\n                                        "),o.yb(3),o.hc("ngForOf",o.bc(42,22,n.filteredPoliciesListForPopup)),o.yb(9),o.hc("disabled",!e.form.valid||!n.enableCopyCoverageDetails),o.yb(1),o.Hc("\n                                ",o.bc(52,24,"Save"),"\n                            "),o.yb(3),o.ic("disabled",n.enableCopyCoverageDetails?"":"disabled"),o.yb(2),o.Hc("\n                                ",o.bc(57,26,"Cancel"),"\n                            ")}}const Qn=[{path:"reports/:id",component:r},{path:"invoice",component:T},{path:"invoice/detail/:id",component:de},{path:"companies",component:ue},{path:"companyTransactions",component:tn},{path:"companyDetails/:id",component:Ae},{path:"invoice/generate",component:bn},{path:"coverageDetails",component:(()=>{class e{constructor(e,n,t,c,a,i){this.toastr=e,this.storage=n,this.router=t,this.insuranceService=c,this.translate=a,this.accountService=i,this.userPermisions=new b.a,this.key=new l.a,this.showProgress=!1,this.showServices=!0,this.active=!0,this.selectedDiagnosis=[],this.selectedServices=[],this.model={},this.isCondition=!1,this.viewCoverageDetails=!1,this.enableCopyCoverageDetails=!1,this.enableSaveCoverageDetails=!1,this.copyCoverageModel={},this.lstToTranslated=[],this.translateObjects=new v.a(this.storage),this.dymptDiagnose=!1,this.dymptService=!1,this.selectedLang="ar",this.allDiagnosis=[],this.allServices=[],this.selectedServicesIDs=[],this.selectedDiagnosisIDs=[],this.groupType="ServiceGroup",this.diagnosisGroup="DiagnosisGroup"}ngOnInit(){this.clinicID=this.storage.retrieve("ClinicId"),this.selectedLang=this.storage.retrieve("selectedLanguage"),this.lstToTranslated=["label","labelTranslation"],this.loadCoverageDetailsWrapper(),null!=this.accountService.userPermision._isScalar?this.accountService.userPermision.subscribe(e=>this.handleUserInterfaceViews(e)):this.handleUserInterfaceViews(this.accountService.userPermision)}handleUserInterfaceViews(e){if(null!=e.permissions)for(let n of e.permissions)n.permission.key!=this.key.DefineCoverageDetails||1!=n.add&&!n.fullControl||(this.viewCoverageDetails=!0),n.permission.key!=this.key.DefineCoverageDetails||1!=n.edit&&!n.fullControl||(this.enableCopyCoverageDetails=!0),n.permission.key!=this.key.DefineCoverageDetails||1!=n.edit&&!n.fullControl||(this.enableSaveCoverageDetails=!0)}loadCoverageDetailsWrapper(){this.showProgress=!0;let e=this;this.insuranceService.getCoverageDetailsWrapper(this.clinicID).subscribe(function(n){e.insuranceCompaniesList=n.insuranceCompanies,e.insurancePoliciesList=n.insurancePolicies,e.diagnosisTree=n.diagnosis,e.servicesTree=n.services,e.coverageTypes=n.coverageTypes},function(n){e.toastr.error(n,"")},function(){}),this.insuranceService.getAllServices(this.clinicID).subscribe(function(n){e.showProgress=!0,e.allServices=n},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1}),this.insuranceService.getAllDiagnosis(this.clinicID).subscribe(function(n){e.showProgress=!0,e.allDiagnosis=n},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}fillPolicies(e){this.filteredPoliciesList=[],this.insurancePoliciesList.forEach(n=>{n.companyId==e&&this.filteredPoliciesList.push(n)})}fillPoliciesForPopup(e){this.filteredPoliciesListForPopup=[],this.insurancePoliciesList.forEach(n=>{n.companyId==e&&this.filteredPoliciesListForPopup.push(n)})}selectPolicy(e){if(e=this.selectedPolicy,this.coverageDetailsList=[],this.policyId=0,e>0){this.policyId=e,this.showProgress=!0;let n=this;this.insuranceService.getPolicyCoverageDetails(e,this.clinicID).subscribe(function(e){n.coverageDetailsList=e},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}}selectCoverageDetails(e){let n=this;this.model={},n.selectedServicesIDs=[],n.selectedDiagnosisIDs=[],this.insuranceService.getCoverageDetailsById(e).subscribe(function(e){if(n.model=e,n.model.diagnosis&&n.model.diagnosis.length>0){n.showServices=!1,n.selectedDiagnosisIDs=[];for(let e of n.model.diagnosis)n.selectedDiagnosisIDs.push(e.id)}if(n.model.services&&n.model.services.length>0){n.showServices=!0,n.selectedServicesIDs=[];for(let e of n.model.services)n.selectedServicesIDs.push(e.id)}n.CoverageTypeChanged(n.model.coverageType),1==n.showServices?n.dymptDiagnose=!0:n.dymptService=!0},function(e){n.toastr.error(e,""),n.showProgress=!1},function(){n.showProgress=!1})}onRadioSelectionChanged(e){"Services"==e?(this.showServices=!0,this.model.diagnosis=[],this.selectedDiagnosis=[]):(this.showServices=!1,this.model.services=[],this.selectedServices=[])}saveCoverageDetails(){let e=this,n=!0;if(e.model.id>0&&(n=!1),e.model.clinicId=e.clinicID,e.model.discountPercentage>100)e.toastr.error(e.translate.instant("MaxPercentageValidation"),"");else if(e.model.deductiblePercentage>100)e.toastr.error(e.translate.instant("MaxPercentageValidation"),"");else{if(e.showProgress=!0,n&&(this.model.id=0,this.model.policyId=this.policyId),this.model.servicesIDs=this.selectedServicesIDs,this.model.diagnosisIDs=this.selectedDiagnosisIDs,0==this.model.diagnosisIDs.length&&0==this.model.servicesIDs.length)return e.toastr.error(e.translate.instant("SelectDiagnosisorServices"),""),void(e.showProgress=!1);this.insuranceService.saveorUpdateCoverageDetail(e.model).subscribe(function(t){if(n)e.coverageDetailsList.push(t),e.translateObjects.transform(e.coverageDetailsList,"name","nameTranslation",[]);else{var c=e.coverageDetailsList.find(e=>e.id==t.id);c.diagnosis=[],c.diagnosis=t.diagnosis,c.services=t.services,c.name=t.name,c.nameTranslation=t.nameTranslation,c.discountPercentage=t.discountPercentage,c.maxCoverageAmount=t.maxCoverageAmount,c.deductibleAmount=t.deductibleAmount,c.deductiblePercentage=t.deductiblePercentage,c.specialPrice=t.specialPrice,c.needApproval=t.needApproval,c.description=t.description,e.translateObjects.transform(e.coverageDetailsList,"name","nameTranslation",[])}e.clear();let a=e.translate.instant("SavedSuccessfully");e.toastr.success(a,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}}clear(){this.model={id:0},this.active=!1,this.selectedDiagnosis=[],this.selectedServices=[],setTimeout(()=>this.active=!0,0),this.diagnoseFilterString="",this.serviceFilterString="",this.isCondition=!1,this.initialize()}CoverageTypeChanged(e){this.isCondition=!1,"ConditionallyCovered"==e&&(this.isCondition=!0)}needApprovalChanged(e){this.model.needApproval=e}getCoverageDetailId(e){this.copyCoverageModel.coverageDetailId=e}copyCoverageDetail(){let e=this;this.insuranceService.copyCoverageDetail(e.copyCoverageModel).subscribe(function(n){let t=e.translate.instant("CopiedSuccessfully");e.toastr.success(t,"")},function(n){e.toastr.error(n,""),e.showProgress=!1},function(){e.showProgress=!1})}close(){this.clear(),this.btnCoverageDetailsModalClose.nativeElement.click()}initialize(){this.dymptDiagnose=!1,this.dymptService=!1,this.selectedServicesIDs=[],this.selectedDiagnosisIDs=[]}}return e.\u0275fac=function(n){return new(n||e)(o.Kb(h.b),o.Kb(m.a),o.Kb(i.b),o.Kb(F.a),o.Kb(u.d),o.Kb(y.a))},e.\u0275cmp=o.Eb({type:e,selectors:[["insurance-coverageDetails"]],viewQuery:function(e,n){if(1&e&&o.Lc(dn,1),2&e){let e;o.uc(e=o.Yb())&&(n.btnCoverageDetailsModalClose=e.first)}},decls:144,vars:41,consts:[[1,"row"],[3,"activeTabIndex"],[1,"page-breadcrumb"],[1,"NBbreadcrumb"],[1,"row","well"],[1,"col-md-4","col-md-offset-11"],["type","button","data-toggle","modal","data-target","#coverageDetailsPopup",1,"btn","btn-primary",3,"disabled","click"],[1,"padding5"],[1,"col-sm-5","offset-md-1"],[1,"form-group","row"],["for","txtName",1,"col-sm-5","control-label"],[1,"col-sm-7"],["id","ddlCompanies","name","ddlCompanies","required","",1,"form-control",3,"change"],["d",""],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-5"],["for","ddlPolicies",1,"col-sm-5","control-label"],["id","ddlPolicies","name","ddlPolicies",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"row","well",2,"background-color","#f6f7f9 !important"],[1,"inner-addon","left-addon"],[1,"glyphicon","glyphicon-search"],["type","text","pInputText","","size","50",1,"inputSearch",3,"placeholder"],["gb",""],["id","coverageDetailsPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog","width75percent"],[1,"modal-content"],[1,"modal-header"],["type","button","data-dismiss","modal",1,"close",3,"click"],["btnCoverageDetailsModalClose",""],[1,"h4Deco","modal-title"],["class","form-horizontal","name","renewForm",3,"ngSubmit",4,"ngIf"],["id","copyCoverageDetailPopup","role","dialog",1,"modal","fade"],[1,"modal-dialog"],["type","button","data-dismiss","modal",1,"close"],[1,"modal-title"],["class","form-horizontal","name","copyCoverageDetailFrm",3,"ngSubmit",4,"ngIf"],[3,"value"],["name","renewForm",1,"form-horizontal",3,"ngSubmit"],["renewForm","ngForm"],[1,"modal-body"],[1,"form-group"],["type","radio","name","radiogroup","value","Services",3,"checked","disabled","change"],["radioServices",""],["type","radio","name","radiogroup","value","Diagnosis",3,"checked","disabled","change"],["radioDiagnosis",""],["id","Services",4,"ngIf"],["id","diagnosis",4,"ngIf"],["for","ddlCoverageType",1,"control-label","col-md-2"],[1,"col-md-4"],["name","ddlCoverageType","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlCoverageType","ngModel","covType",""],["class","form-group",4,"ngIf"],["for","txtDiscountPercentage",1,"control-label","col-md-2"],["type","number","pattern","^[0-9]{1,3}(\\.[0-9]{0,2})?$","maxlength","5","name","txtDiscountPercentage",1,"form-control",3,"ngModel","ngModelChange"],["txtDiscountPercentage","ngModel"],["for","txtdeductiblePercentage",1,"control-label","col-md-2"],["type","number","pattern","^[0-9]{1,3}(\\.[0-9]{0,2})?$","maxlength","5","name","txtdeductiblePercentage",1,"form-control",3,"ngModel","ngModelChange"],["txtdeductiblePercentage","ngModel"],[1,"modal-footer","modelDir"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"],["id","Services"],[3,"treeList","items","selectedItemsIDs","groupType"],["id","diagnosis"],[1,"col-md-2"],["type","radio","name","radiogroup1","value","true",3,"checked","change"],["radioApproval",""],["type","radio","name","radiogroup1","value","false",3,"checked","change"],["name","txtApprovalDescription",1,"form-control",3,"ngModel","ngModelChange"],["txtApprovalDescription","ngModel"],["for","txtSpecialPrice",1,"control-label","col-md-2"],["type","number","maxlength","9","name","txtSpecialPrice",1,"form-control",3,"ngModel","ngModelChange"],["txtSpecialPrice","ngModel"],["name","copyCoverageDetailFrm",1,"form-horizontal",3,"ngSubmit"],["copyCoverageDetailFrm","ngForm"],["for","txtName",1,"control-label","col-md-2"],[1,"col-md-4","col-sm-4"],["id","ddlCompaniesForPopup","name","ddlCompaniesForPopup","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["ddlCompaniesForPopup","ngModel","companyForPopup",""],["for","ddlPoliciesForPopup",1,"control-label","col-md-2"],["id","ddlPoliciesForPopup","name","ddlPoliciesForPopup","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["copyCoverageDetailPopup",""]],template:function(e,n){if(1&e){const e=o.Rb();o.Qb(0,"div"),o.Fc(1,"\n    "),o.Lb(2,"loading"),o.Fc(3,"\n"),o.Pb(),o.Fc(4,"\n\n"),o.Qb(5,"div",0),o.Fc(6,"\n    "),o.Lb(7,"shared-tabs",1),o.Fc(8,"\n\n    "),o.Qb(9,"div",2),o.Fc(10,"\n        "),o.Qb(11,"div",0),o.Fc(12,"\n            "),o.Qb(13,"div",3),o.Fc(14,"\n                "),o.Qb(15,"a"),o.Fc(16),o.ac(17,"translate"),o.Pb(),o.Fc(18),o.ac(19,"translate"),o.Pb(),o.Fc(20,"\n\n        "),o.Pb(),o.Fc(21,"\n    "),o.Pb(),o.Fc(22,"\n\n\n    "),o.Qb(23,"div",4),o.Fc(24,"\n        "),o.Qb(25,"div",5),o.Fc(26,"\n            "),o.Qb(27,"button",6),o.Xb("click",function(){return n.initialize()}),o.Fc(28),o.ac(29,"translate"),o.Pb(),o.Fc(30,"\n        "),o.Pb(),o.Fc(31,"\n\n    "),o.Pb(),o.Fc(32,"\n    "),o.Qb(33,"div",7),o.Fc(34,"\n\n        "),o.Qb(35,"div",4),o.Fc(36,"\n            "),o.Qb(37,"div",8),o.Fc(38,"\n                "),o.Qb(39,"div",9),o.Fc(40,"\n                    "),o.Qb(41,"label",10),o.Fc(42),o.ac(43,"translate"),o.Pb(),o.Fc(44,"\n                    "),o.Qb(45,"div",11),o.Fc(46,"\n                        "),o.Qb(47,"select",12,13),o.Xb("change",function(){o.wc(e);const t=o.vc(48);return n.fillPolicies(t.value)}),o.Fc(49,"\n                            "),o.Qb(50,"option",14),o.Fc(51),o.ac(52,"translate"),o.Pb(),o.Fc(53,"\n                            "),o.Dc(54,hn,2,2,"option",15),o.ac(55,"translateObjects"),o.Fc(56,"\n                        "),o.Pb(),o.Fc(57,"\n                    "),o.Pb(),o.Fc(58,"\n\n                "),o.Pb(),o.Fc(59,"\n            "),o.Pb(),o.Fc(60,"\n            "),o.Qb(61,"div",16),o.Fc(62,"\n                "),o.Qb(63,"div",9),o.Fc(64,"\n                    "),o.Qb(65,"label",17),o.Fc(66),o.ac(67,"translate"),o.Pb(),o.Fc(68,"\n                    "),o.Qb(69,"div",11),o.Fc(70,"\n                        "),o.Qb(71,"select",18),o.Xb("ngModelChange",function(e){return n.selectedPolicy=e})("change",function(e){return n.selectPolicy(e)}),o.Fc(72,"\n                            "),o.Qb(73,"option",14),o.Fc(74),o.ac(75,"translate"),o.Pb(),o.Fc(76,"\n                            "),o.Dc(77,mn,2,2,"option",15),o.ac(78,"translateObjects"),o.Fc(79,"\n                        "),o.Pb(),o.Fc(80,"\n                    "),o.Pb(),o.Fc(81,"\n\n                "),o.Pb(),o.Fc(82,"\n\n            "),o.Pb(),o.Fc(83,"\n\n\n        "),o.Pb(),o.Fc(84,"\n\n\n        "),o.Qb(85,"div",19),o.Fc(86,"\n            "),o.Qb(87,"div",20),o.Fc(88,"\n                "),o.Lb(89,"i",21),o.Fc(90,"\n                "),o.Lb(91,"input",22,23),o.ac(93,"translate"),o.Fc(94,"\n            "),o.Pb(),o.Fc(95,"\n\n            "),o.Fc(96,"\n        "),o.Pb(),o.Fc(97,"\n\n        "),o.Qb(98,"div",24),o.Fc(99,"\n            "),o.Qb(100,"div",25),o.Fc(101,"\n                "),o.Fc(102,"\n                "),o.Qb(103,"div",26),o.Fc(104,"\n                    "),o.Qb(105,"div",27),o.Fc(106,"\n                        "),o.Qb(107,"button",28,29),o.Xb("click",function(){return n.close()}),o.Fc(109,"\xd7"),o.Pb(),o.Fc(110,"\n                        "),o.Qb(111,"h4",30),o.Fc(112),o.ac(113,"translate"),o.Pb(),o.Fc(114,"\n                    "),o.Pb(),o.Fc(115,"\n                    "),o.Dc(116,Pn,97,37,"form",31),o.Fc(117,"\n                "),o.Pb(),o.Fc(118,"\n            "),o.Pb(),o.Fc(119,"\n        "),o.Pb(),o.Fc(120,"\n\n\n        "),o.Qb(121,"div",32),o.Fc(122,"\n            "),o.Qb(123,"div",33),o.Fc(124,"\n                "),o.Fc(125,"\n                "),o.Qb(126,"div",26),o.Fc(127,"\n                    "),o.Qb(128,"div",27),o.Fc(129,"\n                        "),o.Qb(130,"button",34),o.Fc(131,"\xd7"),o.Pb(),o.Fc(132,"\n                        "),o.Qb(133,"h4",35),o.Fc(134),o.ac(135,"translate"),o.Pb(),o.Fc(136,"\n                    "),o.Pb(),o.Fc(137,"\n\n                    "),o.Dc(138,Cn,60,28,"form",36),o.Fc(139,"\n\n\n\n                "),o.Pb(),o.Fc(140,"\n            "),o.Pb(),o.Fc(141,"\n        "),o.Pb(),o.Fc(142,"\n\n\n    "),o.Pb(),o.Fc(143,"\n"),o.Pb()}2&e&&(o.yb(7),o.hc("activeTabIndex",19),o.yb(9),o.Gc(o.bc(17,17,"InsuranceManagement")),o.yb(2),o.Hc(" \xa0/\n                ",o.bc(19,19,"CoverageDetail"),"\n            "),o.yb(9),o.ic("disabled",n.viewCoverageDetails?"":"disabled"),o.yb(1),o.Gc(o.bc(29,21,"New")),o.yb(14),o.Gc(o.bc(43,23,"InsuranceCompany")),o.yb(9),o.Hc("\n                                ",o.bc(52,25,"Select"),"\n                            "),o.yb(3),o.hc("ngForOf",o.bc(55,27,n.insuranceCompaniesList)),o.yb(12),o.Gc(o.bc(67,29,"InsurancePolicy")),o.yb(5),o.hc("ngModel",n.selectedPolicy),o.yb(3),o.Hc("\n                                ",o.bc(75,31,"Select"),"\n                            "),o.yb(3),o.hc("ngForOf",o.bc(78,33,n.filteredPoliciesList)),o.yb(14),o.hc("placeholder",o.bc(93,35,"Search")),o.yb(21),o.Gc(o.bc(113,37,"CoverageDetail")),o.yb(4),o.hc("ngIf",n.active),o.yb(18),o.Gc(o.bc(135,39,"CopCoverageDetail")),o.yb(4),o.hc("ngIf",n.active))},directives:[p.a,s.a,a.j,a.r,c.j,a.p,a.f,a.i,c.k,a.q,a.g,a.h,a.o,a.k,a.b,a.l,a.d,ln.a],pipes:[u.c,v.a],encapsulation:2}),e})()}];let Mn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({imports:[[i.e.forChild(Qn)],i.e]}),e})();var In=t("PCNd"),wn=t("EH7E");let Dn=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.Ib({type:e}),e.\u0275inj=o.Hb({providers:[],imports:[[a.c,c.b,Mn,In.SharedModule,wn.PatientsModule]]}),e})()}}]);