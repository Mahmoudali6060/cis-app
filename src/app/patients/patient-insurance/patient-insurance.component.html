<div *ngIf="showProgress">
    <loading></loading>
</div>

<div class="row">
   <!-- <div class="col-md-2 nopadding">
        <patient-receptionist-tabs [activeTabIndex]="3"></patient-receptionist-tabs>
    </div>-->
    <div class="row nopadding" *ngIf="isTableView">
        <div class="padding5">
            <div class="row" style="vertical-align:middle">
                <div class="col-md-12">
                    <label class="lead">Insured?</label>
                    &nbsp;&nbsp;&nbsp;
                    <label>
                        <input type="checkbox" class="ace ace-switch ace-switch-6"
                               id="chkBoxHasInsurance" name="chkBoxHasInsurance"
                               [checked]="patientModel.isInsured"  (click)="changeInsuranceStatus(patientModel.id , $event)"/>
                        <span class="lbl"></span>
                    </label> 
                    &nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;
                    <!--<button type="button" class="btn btn-primary" (click)="navigateToPackages()" >{{ 'Back' | translate}}</button>-->
                </div>
            </div>
            <hr  />
            <div class="row" >
                <div class="col-md-4 nopadding">
                    <input type="text" placeholder="Search..." class="form-control" #gb />
                </div>
                <div class="col-md-8 align-reverse nopadding">
                    <button type="button" class="btn btn-primary" 
                            (click)="setInsuranceIdValue('new')" [(disabled)]="!patientModel.isInsured">{{ 'New' | translate}}</button>

                    <button type="button" class="btn btn-primary" (click)="navigateToPackages()">{{ 'Back' | translate}}</button>                </div>
            </div>
            <div class="padding2"></div>
            <div class="row" >
                <!--<table class="table table-responsive table-hover">
                    <thead class="alert alert-info">
                        <tr>
                            <th>Insurance Company</th>
                            <th> Policy Name </th>
                            <th> Start Date </th>
                            <th>End Date  </th>
                            <th>Card Number</th>
                            <th>Remarks </th>
                            <th class="text-center">Active</th>
                            <th class="text-center">Edit </th>
                            <th class="text-center"> Delete </th>
                        </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>-->
                <p-dataTable [value]="insurances | translateObjects  : null : null : lstToTranslated" selectionMode="single" [paginator]="true" rows="10" [rowsPerPageOptions]="[5,10,20,30,40,50,100]" [responsive]="true" reorderableColumns="true" [globalFilter]="gb">
                    <p-column field="companyName"  [header]="'InsuranceCompany' | translate" [sortable]="true"></p-column>
                    <p-column field="policyName" [header]="'PolicyName' | translate" [sortable]="true"></p-column>
                    <p-column field="startDateString" [header]="'StartDate' | translate"  [sortable]="true"></p-column>
                    <p-column field="endDateString" [header]="'EndDate' | translate"  [sortable]="true"></p-column>
                    <p-column field="cardNumber" [header]="'CardNumber' | translate"  [sortable]="true"></p-column>
                    <p-column field="description" [header]="'Description' | translate" [sortable]="true"></p-column>

                    <p-column [header]="'Active' | translate"  styleClass="text-center width70">
                        <ng-template let-insurance="rowData" pTemplate="body">
                            <label>
                                <input id="ChkIsActiveInGrid" name="ChkIsActiveInGrid" class="ace ace-switch ace-switch-6"
                                       type="checkbox" [checked]="insurance.isActive"
                                       (click)="changeActivation(insurance.id , $event)" />
                                <span class="lbl"></span>
                            </label>
                        </ng-template>
                    </p-column>
                    <p-column [header]="'Edit' | translate"  styleClass="text-center width50">
                        <ng-template let-insurance="rowData" pTemplate="body">
                            <a class="pointer" (click)="setInsuranceIdValue(insurance.id)">
                                <img src="Images/edit-24.png" />
                            </a>
                        </ng-template>
                    </p-column>
                    <p-column [header]="'Delete' | translate"  styleClass="text-center width70">
                        <ng-template let-insurance="rowData" pTemplate="body">
                            <a data-toggle="modal" data-target="#deleteAppointmentSchedule" class="pointer"
                               (click)="selectPatientInsuranceToDelete(insurance.id)">
                                <img src="Images/DeleteRed.png" />
                            </a>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>
    </div>
    <div *ngIf="!isTableView">
        <patient-insurance-details [patientId]='patientIdValue' [insuranceId]='insuranceId' (isTableViewValue)='onIsTableViewValue($event)'></patient-insurance-details>
    </div>
</div>
<div id="deleteAppointmentSchedule" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{ 'PasswordCriteria' | translate}}</h4>
            </div>
            <div class="modal-body">
                <p>{{ 'AreYouSureDelete' | translate}}</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" (click)="deleteSelectedItem()" data-dismiss="modal">{{ 'Yes' | translate}}</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">{{ 'No' | translate}}</button>
            </div>
        </div>

    </div>
</div>
